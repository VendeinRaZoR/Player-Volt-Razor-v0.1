
AVRASM ver. 2.1.30  C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm Wed Jun 21 19:46:17 2017

C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1090): warning: Register r4 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1091): warning: Register r5 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1092): warning: Register r6 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1093): warning: Register r7 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1094): warning: Register r8 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1095): warning: Register r9 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1096): warning: Register r10 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1097): warning: Register r11 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1098): warning: Register r12 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1099): warning: Register r13 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1100): warning: Register r14 already defined by the .DEF directive
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1101): warning: Register r3 already defined by the .DEF directive
                 
                 
                 ;CodeVisionAVR C Compiler V3.12 Advanced
                 ;(C) Copyright 1998-2014 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Build configuration    : Debug
                 ;Chip type              : ATmega328P
                 ;Program type           : Application
                 ;Clock frequency        : 8,000000 MHz
                 ;Memory model           : Small
                 ;Optimize for           : Speed
                 ;(s)printf features     : float, width, precision
                 ;(s)scanf features      : int, width
                 ;External RAM size      : 0
                 ;Data Stack size        : 1200 byte(s)
                 ;Heap size              : 100 byte(s)
                 ;Promote 'char' to 'int': Yes
                 ;'char' is unsigned     : Yes
                 ;8 bit enums            : Yes
                 ;Global 'const' stored in FLASH: Yes
                 ;Enhanced function parameter passing: Yes
                 ;Enhanced core instructions: On
                 ;Automatic register allocation for global variables: On
                 ;Smart register allocation: On
                 
                 	#define _MODEL_SMALL_
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega328P
                 	#pragma AVRPART MEMORY PROG_FLASH 32768
                 	#pragma AVRPART MEMORY EEPROM 1024
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 2048
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x100
                 
                 	#define CALL_SUPPORTED 1
                 
                 	.LISTMAC
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU EECR=0x1F
                 	.EQU EEDR=0x20
                 	.EQU EEARL=0x21
                 	.EQU EEARH=0x22
                 	.EQU SPSR=0x2D
                 	.EQU SPDR=0x2E
                 	.EQU SMCR=0x33
                 	.EQU MCUSR=0x34
                 	.EQU MCUCR=0x35
                 	.EQU WDTCSR=0x60
                 	.EQU UCSR0A=0xC0
                 	.EQU UDR0=0xC6
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 	.EQU GPIOR0=0x1E
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.EQU __SRAM_START=0x0100
                 	.EQU __SRAM_END=0x08FF
                 	.EQU __DSTACK_SIZE=0x04B0
                 	.EQU __HEAP_SIZE=0x0064
                 	.EQU __CLEAR_SRAM_SIZE=__SRAM_END-__SRAM_START+1
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDBMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ANDWMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ANDI R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD2N
                 	ANDI R26,LOW(@0)
                 	ANDI R27,HIGH(@0)
                 	ANDI R24,BYTE3(@0)
                 	ANDI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORBMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ORWMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ORI  R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD2N
                 	ORI  R26,LOW(@0)
                 	ORI  R27,HIGH(@0)
                 	ORI  R24,BYTE3(@0)
                 	ORI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+(@1))
                 	LDI  R31,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1M
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	LDI  R22,BYTE3(2*@0+(@1))
                 	LDI  R23,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	LDI  R24,BYTE3(2*@0+(@1))
                 	LDI  R25,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+(@2))
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+(@3))
                 	LDI  R@1,HIGH(@2+(@3))
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+(@3))
                 	LDI  R@1,HIGH(@2*2+(@3))
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	LDS  R22,@0+(@1)+2
                 	LDS  R23,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+(@2)
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+(@3)
                 	LDS  R@1,@2+(@3)+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	LDS  R24,@0+(@1)+2
                 	LDS  R25,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	STS  @0+(@1)+2,R22
                 	STS  @0+(@1)+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTB1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRB
                 	.ENDM
                 
                 	.MACRO __PUTW1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRW
                 	.ENDM
                 
                 	.MACRO __PUTD1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMWRD
                 	.ENDM
                 
                 	.MACRO __PUTBR0MN
                 	STS  @0+(@1),R0
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+(@1),R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+(@1),R@2
                 	STS  @0+(@1)+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTBSR
                 	STD  Y+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	CALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	PUSH R26
                 	PUSH R27
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	CALL __EEPROMRDW
                 	POP  R27
                 	POP  R26
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EX
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	CALL __EEPROMRDD
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1STACK
                 	IN   R30,SPL
                 	IN   R31,SPH
                 	ADIW R30,@0+1
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	CALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __GETBRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	LD   R@0,X
                 	.ENDM
                 
                 	.MACRO __GETWRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	LD   R@0,X+
                 	LD   R@1,X
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	ST   Z,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRR0
                 	MULS R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBRRU0
                 	MUL  R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBNWRU
                 	LDI  R26,@2
                 	MUL  R26,R@0
                 	MOVW R30,R0
                 	MUL  R26,R@1
                 	ADD  R31,R0
                 	.ENDM
                 
                 ;NAME DEFINITIONS FOR GLOBAL VARIABLES ALLOCATED TO REGISTERS
                 	.DEF _bIsfOpened=R4
                 	.DEF _select_file_index=R5
                 	.DEF _select_file_index_msb=R6
                 	.DEF _select_file_option_index=R7
                 	.DEF _select_file_option_index_msb=R8
                 	.DEF _nNofDirFiles=R9
                 	.DEF _nNofDirFiles_msb=R10
                 	.DEF _nKey=R11
                 	.DEF _nKey_msb=R12
                 	.DEF _nAudioBufferIndex=R13
                 	.DEF _nAudioBufferIndex_msb=R14
                 	.DEF _bSelect=R3
                 
                 ;GPIOR0 INITIALIZATION VALUE
                 	.EQU __GPIOR0_INIT=0x00
                 
                 	.CSEG
                 	.ORG 0x00
                 
                 ;START OF CODE MARKER
                 __START_OF_CODE:
                 
                 ;INTERRUPT VECTORS
000000 940c 0306 	JMP  __RESET
000002 940c 2d85 	JMP  _EXT_INT0_func
000004 940c 0000 	JMP  0x00
000006 940c 0000 	JMP  0x00
000008 940c 0000 	JMP  0x00
00000a 940c 0000 	JMP  0x00
00000c 940c 0000 	JMP  0x00
00000e 940c 0000 	JMP  0x00
000010 940c 0000 	JMP  0x00
000012 940c 0000 	JMP  0x00
000014 940c 0000 	JMP  0x00
000016 940c 0000 	JMP  0x00
000018 940c 0000 	JMP  0x00
00001a 940c 0000 	JMP  0x00
00001c 940c 0000 	JMP  0x00
00001e 940c 0000 	JMP  0x00
000020 940c 2d6e 	JMP  _TIM0_OVF_func
000022 940c 0000 	JMP  0x00
000024 940c 0000 	JMP  0x00
000026 940c 0000 	JMP  0x00
000028 940c 0000 	JMP  0x00
00002a 940c 0000 	JMP  0x00
00002c 940c 0000 	JMP  0x00
00002e 940c 0000 	JMP  0x00
000030 940c 0cf7 	JMP  _TWI_Isr
000032 940c 0000 	JMP  0x00
                 
                 _Nokia6610_fnt8x8:
000034 0808
000035 0008
000036 0000
000037 0000      	.DB  0x8,0x8,0x8,0x0,0x0,0x0,0x0,0x0
000038 0000
000039 0000
00003a 0000
00003b 0000      	.DB  0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0
00003c 7830
00003d 3078
00003e 0030
00003f 0030      	.DB  0x30,0x78,0x78,0x30,0x30,0x0,0x30,0x0
000040 6c6c
000041 006c
000042 0000
000043 0000      	.DB  0x6C,0x6C,0x6C,0x0,0x0,0x0,0x0,0x0
000044 6c6c
000045 6cfe
000046 6cfe
000047 006c      	.DB  0x6C,0x6C,0xFE,0x6C,0xFE,0x6C,0x6C,0x0
000048 3e18
000049 3c60
00004a 7c06
00004b 0018      	.DB  0x18,0x3E,0x60,0x3C,0x6,0x7C,0x18,0x0
00004c 6300
00004d 0c66
00004e 3318
00004f 0063      	.DB  0x0,0x63,0x66,0xC,0x18,0x33,0x63,0x0
000050 361c
000051 3b1c
000052 666e
000053 003b      	.DB  0x1C,0x36,0x1C,0x3B,0x6E,0x66,0x3B,0x0
000054 3030
000055 0060
000056 0000
000057 0000      	.DB  0x30,0x30,0x60,0x0,0x0,0x0,0x0,0x0
000058 180c
000059 3030
00005a 1830
00005b 000c      	.DB  0xC,0x18,0x30,0x30,0x30,0x18,0xC,0x0
00005c 1830
00005d 0c0c
00005e 180c
00005f 0030      	.DB  0x30,0x18,0xC,0xC,0xC,0x18,0x30,0x0
000060 6600
000061 ff3c
000062 663c
000063 0000      	.DB  0x0,0x66,0x3C,0xFF,0x3C,0x66,0x0,0x0
000064 3000
000065 fc30
000066 3030
000067 0000      	.DB  0x0,0x30,0x30,0xFC,0x30,0x30,0x0,0x0
000068 0000
000069 0000
00006a 1800
00006b 3018      	.DB  0x0,0x0,0x0,0x0,0x0,0x18,0x18,0x30
00006c 0000
00006d 7e00
00006e 0000
00006f 0000      	.DB  0x0,0x0,0x0,0x7E,0x0,0x0,0x0,0x0
000070 0000
000071 0000
000072 1800
000073 0018      	.DB  0x0,0x0,0x0,0x0,0x0,0x18,0x18,0x0
000074 0603
000075 180c
000076 6030
000077 0040      	.DB  0x3,0x6,0xC,0x18,0x30,0x60,0x40,0x0
000078 633e
000079 6b63
00007a 6363
00007b 003e      	.DB  0x3E,0x63,0x63,0x6B,0x63,0x63,0x3E,0x0
00007c 3818
00007d 1858
00007e 1818
00007f 007e      	.DB  0x18,0x38,0x58,0x18,0x18,0x18,0x7E,0x0
000080 663c
000081 1c06
000082 6630
000083 007e      	.DB  0x3C,0x66,0x6,0x1C,0x30,0x66,0x7E,0x0
000084 663c
000085 1c06
000086 6606
000087 003c      	.DB  0x3C,0x66,0x6,0x1C,0x6,0x66,0x3C,0x0
000088 1e0e
000089 6636
00008a 067f
00008b 000f      	.DB  0xE,0x1E,0x36,0x66,0x7F,0x6,0xF,0x0
00008c 607e
00008d 067c
00008e 6606
00008f 003c      	.DB  0x7E,0x60,0x7C,0x6,0x6,0x66,0x3C,0x0
000090 301c
000091 7c60
000092 6666
000093 003c      	.DB  0x1C,0x30,0x60,0x7C,0x66,0x66,0x3C,0x0
000094 667e
000095 0c06
000096 1818
000097 0018      	.DB  0x7E,0x66,0x6,0xC,0x18,0x18,0x18,0x0
000098 663c
000099 3c66
00009a 6666
00009b 003c      	.DB  0x3C,0x66,0x66,0x3C,0x66,0x66,0x3C,0x0
00009c 663c
00009d 3e66
00009e 0c06
00009f 0038      	.DB  0x3C,0x66,0x66,0x3E,0x6,0xC,0x38,0x0
0000a0 1800
0000a1 0018
0000a2 1800
0000a3 0018      	.DB  0x0,0x18,0x18,0x0,0x0,0x18,0x18,0x0
0000a4 1800
0000a5 0018
0000a6 1800
0000a7 3018      	.DB  0x0,0x18,0x18,0x0,0x0,0x18,0x18,0x30
0000a8 180c
0000a9 6030
0000aa 1830
0000ab 000c      	.DB  0xC,0x18,0x30,0x60,0x30,0x18,0xC,0x0
0000ac 0000
0000ad 007e
0000ae 7e00
0000af 0000      	.DB  0x0,0x0,0x7E,0x0,0x0,0x7E,0x0,0x0
0000b0 1830
0000b1 060c
0000b2 180c
0000b3 0030      	.DB  0x30,0x18,0xC,0x6,0xC,0x18,0x30,0x0
0000b4 663c
0000b5 0c06
0000b6 0018
0000b7 0018      	.DB  0x3C,0x66,0x6,0xC,0x18,0x0,0x18,0x0
0000b8 633e
0000b9 696f
0000ba 606f
0000bb 003e      	.DB  0x3E,0x63,0x6F,0x69,0x6F,0x60,0x3E,0x0
0000bc 3c18
0000bd 6666
0000be 667e
0000bf 0066      	.DB  0x18,0x3C,0x66,0x66,0x7E,0x66,0x66,0x0
0000c0 337e
0000c1 3e33
0000c2 3333
0000c3 007e      	.DB  0x7E,0x33,0x33,0x3E,0x33,0x33,0x7E,0x0
0000c4 331e
0000c5 6060
0000c6 3360
0000c7 001e      	.DB  0x1E,0x33,0x60,0x60,0x60,0x33,0x1E,0x0
0000c8 367c
0000c9 3333
0000ca 3633
0000cb 007c      	.DB  0x7C,0x36,0x33,0x33,0x33,0x36,0x7C,0x0
0000cc 317f
0000cd 3c34
0000ce 3134
0000cf 007f      	.DB  0x7F,0x31,0x34,0x3C,0x34,0x31,0x7F,0x0
0000d0 317f
0000d1 3c34
0000d2 3034
0000d3 0078      	.DB  0x7F,0x31,0x34,0x3C,0x34,0x30,0x78,0x0
0000d4 331e
0000d5 6060
0000d6 3367
0000d7 001f      	.DB  0x1E,0x33,0x60,0x60,0x67,0x33,0x1F,0x0
0000d8 6666
0000d9 7e66
0000da 6666
0000db 0066      	.DB  0x66,0x66,0x66,0x7E,0x66,0x66,0x66,0x0
0000dc 183c
0000dd 1818
0000de 1818
0000df 003c      	.DB  0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x0
0000e0 060f
0000e1 0606
0000e2 6666
0000e3 003c      	.DB  0xF,0x6,0x6,0x6,0x66,0x66,0x3C,0x0
0000e4 3373
0000e5 3c36
0000e6 3336
0000e7 0073      	.DB  0x73,0x33,0x36,0x3C,0x36,0x33,0x73,0x0
0000e8 3078
0000e9 3030
0000ea 3331
0000eb 007f      	.DB  0x78,0x30,0x30,0x30,0x31,0x33,0x7F,0x0
0000ec 7763
0000ed 7f7f
0000ee 636b
0000ef 0063      	.DB  0x63,0x77,0x7F,0x7F,0x6B,0x63,0x63,0x0
0000f0 7363
0000f1 6f7b
0000f2 6367
0000f3 0063      	.DB  0x63,0x73,0x7B,0x6F,0x67,0x63,0x63,0x0
0000f4 633e
0000f5 6363
0000f6 6363
0000f7 003e      	.DB  0x3E,0x63,0x63,0x63,0x63,0x63,0x3E,0x0
0000f8 337e
0000f9 3e33
0000fa 3030
0000fb 0078      	.DB  0x7E,0x33,0x33,0x3E,0x30,0x30,0x78,0x0
0000fc 663c
0000fd 6666
0000fe 3c6e
0000ff 000e      	.DB  0x3C,0x66,0x66,0x66,0x6E,0x3C,0xE,0x0
000100 337e
000101 3e33
000102 3336
000103 0073      	.DB  0x7E,0x33,0x33,0x3E,0x36,0x33,0x73,0x0
000104 663c
000105 1830
000106 660c
000107 003c      	.DB  0x3C,0x66,0x30,0x18,0xC,0x66,0x3C,0x0
000108 5a7e
000109 1818
00010a 1818
00010b 003c      	.DB  0x7E,0x5A,0x18,0x18,0x18,0x18,0x3C,0x0
00010c 6666
00010d 6666
00010e 6666
00010f 007e      	.DB  0x66,0x66,0x66,0x66,0x66,0x66,0x7E,0x0
000110 6666
000111 6666
000112 3c66
000113 0018      	.DB  0x66,0x66,0x66,0x66,0x66,0x3C,0x18,0x0
000114 6363
000115 6b63
000116 777f
000117 0063      	.DB  0x63,0x63,0x63,0x6B,0x7F,0x77,0x63,0x0
000118 6363
000119 1c36
00011a 361c
00011b 0063      	.DB  0x63,0x63,0x36,0x1C,0x1C,0x36,0x63,0x0
00011c 6666
00011d 3c66
00011e 1818
00011f 003c      	.DB  0x66,0x66,0x66,0x3C,0x18,0x18,0x3C,0x0
000120 637f
000121 0c46
000122 3319
000123 007f      	.DB  0x7F,0x63,0x46,0xC,0x19,0x33,0x7F,0x0
000124 303c
000125 3030
000126 3030
000127 003c      	.DB  0x3C,0x30,0x30,0x30,0x30,0x30,0x3C,0x0
000128 3060
000129 0c18
00012a 0306
00012b 0001      	.DB  0x60,0x30,0x18,0xC,0x6,0x3,0x1,0x0
00012c 0c3c
00012d 0c0c
00012e 0c0c
00012f 003c      	.DB  0x3C,0xC,0xC,0xC,0xC,0xC,0x3C,0x0
000130 1c08
000131 6336
000132 0000
000133 0000      	.DB  0x8,0x1C,0x36,0x63,0x0,0x0,0x0,0x0
000134 0000
000135 0000
000136 0000
000137 ff00      	.DB  0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xFF
000138 1818
000139 000c
00013a 0000
00013b 0000      	.DB  0x18,0x18,0xC,0x0,0x0,0x0,0x0,0x0
00013c 0000
00013d 063c
00013e 663e
00013f 003b      	.DB  0x0,0x0,0x3C,0x6,0x3E,0x66,0x3B,0x0
000140 3070
000141 333e
000142 3333
000143 006e      	.DB  0x70,0x30,0x3E,0x33,0x33,0x33,0x6E,0x0
000144 0000
000145 663c
000146 6660
000147 003c      	.DB  0x0,0x0,0x3C,0x66,0x60,0x66,0x3C,0x0
000148 060e
000149 663e
00014a 6666
00014b 003b      	.DB  0xE,0x6,0x3E,0x66,0x66,0x66,0x3B,0x0
00014c 0000
00014d 663c
00014e 607e
00014f 003c      	.DB  0x0,0x0,0x3C,0x66,0x7E,0x60,0x3C,0x0
000150 361c
000151 7830
000152 3030
000153 0078      	.DB  0x1C,0x36,0x30,0x78,0x30,0x30,0x78,0x0
000154 0000
000155 663b
000156 3e66
000157 7c06      	.DB  0x0,0x0,0x3B,0x66,0x66,0x3E,0x6,0x7C
000158 3070
000159 3b36
00015a 3333
00015b 0073      	.DB  0x70,0x30,0x36,0x3B,0x33,0x33,0x73,0x0
00015c 0018
00015d 1838
00015e 1818
00015f 003c      	.DB  0x18,0x0,0x38,0x18,0x18,0x18,0x3C,0x0
000160 0006
000161 0606
000162 6606
000163 3c66      	.DB  0x6,0x0,0x6,0x6,0x6,0x66,0x66,0x3C
000164 3070
000165 3633
000166 363c
000167 0073      	.DB  0x70,0x30,0x33,0x36,0x3C,0x36,0x73,0x0
000168 1838
000169 1818
00016a 1818
00016b 003c      	.DB  0x38,0x18,0x18,0x18,0x18,0x18,0x3C,0x0
00016c 0000
00016d 7f66
00016e 6b7f
00016f 0063      	.DB  0x0,0x0,0x66,0x7F,0x7F,0x6B,0x63,0x0
000170 0000
000171 667c
000172 6666
000173 0066      	.DB  0x0,0x0,0x7C,0x66,0x66,0x66,0x66,0x0
000174 0000
000175 663c
000176 6666
000177 003c      	.DB  0x0,0x0,0x3C,0x66,0x66,0x66,0x3C,0x0
000178 0000
000179 336e
00017a 3e33
00017b 7830      	.DB  0x0,0x0,0x6E,0x33,0x33,0x3E,0x30,0x78
00017c 0000
00017d 663b
00017e 3e66
00017f 0f06      	.DB  0x0,0x0,0x3B,0x66,0x66,0x3E,0x6,0xF
000180 0000
000181 3b6e
000182 3033
000183 0078      	.DB  0x0,0x0,0x6E,0x3B,0x33,0x30,0x78,0x0
000184 0000
000185 603e
000186 063c
000187 007c      	.DB  0x0,0x0,0x3E,0x60,0x3C,0x6,0x7C,0x0
000188 1808
000189 183e
00018a 1a18
00018b 000c      	.DB  0x8,0x18,0x3E,0x18,0x18,0x1A,0xC,0x0
00018c 0000
00018d 6666
00018e 6666
00018f 003b      	.DB  0x0,0x0,0x66,0x66,0x66,0x66,0x3B,0x0
000190 0000
000191 6666
000192 3c66
000193 0018      	.DB  0x0,0x0,0x66,0x66,0x66,0x3C,0x18,0x0
000194 0000
000195 6b63
000196 7f7f
000197 0036      	.DB  0x0,0x0,0x63,0x6B,0x7F,0x7F,0x36,0x0
000198 0000
000199 3663
00019a 361c
00019b 0063      	.DB  0x0,0x0,0x63,0x36,0x1C,0x36,0x63,0x0
00019c 0000
00019d 6666
00019e 3e66
00019f 7c06      	.DB  0x0,0x0,0x66,0x66,0x66,0x3E,0x6,0x7C
0001a0 0000
0001a1 4c7e
0001a2 3218
0001a3 007e      	.DB  0x0,0x0,0x7E,0x4C,0x18,0x32,0x7E,0x0
0001a4 180e
0001a5 7018
0001a6 1818
0001a7 000e      	.DB  0xE,0x18,0x18,0x70,0x18,0x18,0xE,0x0
0001a8 0c0c
0001a9 000c
0001aa 0c0c
0001ab 000c      	.DB  0xC,0xC,0xC,0x0,0xC,0xC,0xC,0x0
0001ac 1870
0001ad 0e18
0001ae 1818
0001af 0070      	.DB  0x70,0x18,0x18,0xE,0x18,0x18,0x70,0x0
0001b0 6e3b
0001b1 0000
0001b2 0000
0001b3 0000      	.DB  0x3B,0x6E,0x0,0x0,0x0,0x0,0x0,0x0
0001b4 361c
0001b5 1c36
0001b6 0000
0001b7 0000      	.DB  0x1C,0x36,0x36,0x1C,0x0,0x0,0x0,0x0
                 _ExCvt_G000:
0001b8 8180
0001b9 8382
0001ba 8584
0001bb 8786      	.DB  0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87
0001bc 8988
0001bd 8b8a
0001be 8d8c
0001bf 8f8e      	.DB  0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
0001c0 9190
0001c1 9392
0001c2 9594
0001c3 9796      	.DB  0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97
0001c4 9998
0001c5 9bad
0001c6 9d8c
0001c7 9fae      	.DB  0x98,0x99,0xAD,0x9B,0x8C,0x9D,0xAE,0x9F
0001c8 21a0
0001c9 a3a2
0001ca a5a4
0001cb a7a6      	.DB  0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7
0001cc a9a8
0001cd abaa
0001ce adac
0001cf afae      	.DB  0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF
0001d0 b1b0
0001d1 b3b2
0001d2 b5b4
0001d3 b7b6      	.DB  0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7
0001d4 b9b8
0001d5 bbba
0001d6 bdbc
0001d7 bfbe      	.DB  0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF
0001d8 c1c0
0001d9 c3c2
0001da c5c4
0001db c7c6      	.DB  0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7
0001dc c9c8
0001dd cbca
0001de cdcc
0001df cfce      	.DB  0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF
0001e0 d1d0
0001e1 d3d2
0001e2 d5d4
0001e3 d7d6      	.DB  0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7
0001e4 d9d8
0001e5 dbda
0001e6 dddc
0001e7 dfde      	.DB  0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF
0001e8 c1c0
0001e9 c3c2
0001ea c5c4
0001eb c7c6      	.DB  0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7
0001ec c9c8
0001ed cbca
0001ee cdcc
0001ef cfce      	.DB  0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF
0001f0 d1d0
0001f1 d3d2
0001f2 d5d4
0001f3 f7d6      	.DB  0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7
0001f4 d9d8
0001f5 dbda
0001f6 dddc
0001f7 9fde      	.DB  0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0x9F
                 
                 ;GLOBAL REGISTER VARIABLES INITIALIZATION
                 __REG_VARS:
0001f8 0000
0001f9 0000      	.DB  0x0,0x0,0x0,0x0
0001fa 0000
0001fb 0000      	.DB  0x0,0x0,0x0,0x0
0001fc 0000
0001fd 0000      	.DB  0x0,0x0,0x0,0x0
                 
                 ;HEAP START MARKER INITIALIZATION
                 __HEAP_START_MARKER:
0001fe 0000
0001ff 0000      	.DW  0,0
                 
                 _0xB9:
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1267): warning: .cseg .db misalignment - padding zero byte
000200 0001      	.DB  0x1
                 _0x168:
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1269): warning: .cseg .db misalignment - padding zero byte
000201 00f8      	.DB  0xF8
                 _0x169:
000202 0802
000203 8020      	.DB  0x2,0x8,0x20,0x80
                 _0x456:
000204 0000
000205 0000
000206 0000
000207 05bf      	.DB  0x0,0x0,0x0,0x0,0x0,0x0,LOW(_0x455),HIGH(_0x455)
000208 05c4
000209 05cb      	.DB  LOW(_0x455+5),HIGH(_0x455+5),LOW(_0x455+12),HIGH(_0x455+12)
                 _0x0:
00020a 7265
00020b 6f72
00020c 3a72
00020d 2520      	.DB  0x65,0x72,0x72,0x6F,0x72,0x3A,0x20,0x25
00020e 0078
00020f 2a22
000210 2c2b
000211 3b3a      	.DB  0x78,0x0,0x22,0x2A,0x2B,0x2C,0x3A,0x3B
000212 3d3c
000213 3f3e
000214 5d5b
000215 7f7c      	.DB  0x3C,0x3D,0x3E,0x3F,0x5B,0x5D,0x7C,0x7F
000216 4f00
000217 6570
000218 006e
000219 6544      	.DB  0x0,0x4F,0x70,0x65,0x6E,0x0,0x44,0x65
00021a 656c
00021b 6574
00021c 4900
00021d 666e      	.DB  0x6C,0x65,0x74,0x65,0x0,0x49,0x6E,0x66
00021e 006f
00021f 3a30
000220 4f4c
000221 2f47      	.DB  0x6F,0x0,0x30,0x3A,0x4C,0x4F,0x47,0x2F
000222 5053
000223 5349
000224 4b4f
000225 2e46      	.DB  0x53,0x50,0x49,0x53,0x4F,0x4B,0x46,0x2E
000226 7874
000227 0074
000228 f2dd
000229 20ee      	.DB  0x74,0x78,0x74,0x0,0xDD,0xF2,0xEE,0x20
00022a eff1
00022b f1e8
00022c eaee
00022d f220      	.DB  0xF1,0xEF,0xE8,0xF1,0xEE,0xEA,0x20,0xF2
00022e eae5
00022f f9f3
000230 f5e8
000231 f420      	.DB  0xE5,0xEA,0xF3,0xF9,0xE8,0xF5,0x20,0xF4
000232 e9e0
000233 eeeb
000234 2ce2
000235 ef20      	.DB  0xE0,0xE9,0xEB,0xEE,0xE2,0x2C,0x20,0xEF
000236 eef0
000237 f2f1
000238 20ee
000239 eeeb      	.DB  0xF0,0xEE,0xF1,0xF2,0xEE,0x20,0xEB,0xEE
00023a 2ce3
00023b ec20
00023c ede5
00023d f2ff      	.DB  0xE3,0x2C,0x20,0xEC,0xE5,0xED,0xFF,0xF2
00023e 20fc
00023f 20e8
000240 e4f3
000241 ebe0      	.DB  0xFC,0x20,0xE8,0x20,0xF3,0xE4,0xE0,0xEB
000242 f2ff
000243 20fc
000244 ecf1
000245 f1fb      	.DB  0xFF,0xF2,0xFC,0x20,0xF1,0xEC,0xFB,0xF1
000246 e0eb
000247 ed20
000248 f2e5
000249 0a0a      	.DB  0xEB,0xE0,0x20,0xED,0xE5,0xF2,0xA,0xA
00024a 2500
00024b 0073
00024c 6f52
00024d 746f      	.DB  0x0,0x25,0x73,0x0,0x52,0x6F,0x6F,0x74
00024e 5200
00024f 6f6f
000250 2f74
000251 7325      	.DB  0x0,0x52,0x6F,0x6F,0x74,0x2F,0x25,0x73
000252 2a00
000253 2a2a
000254 6946
000255 656c      	.DB  0x0,0x2A,0x2A,0x2A,0x46,0x69,0x6C,0x65
000256 4920
000257 666e
000258 2a6f
000259 2a2a      	.DB  0x20,0x49,0x6E,0x66,0x6F,0x2A,0x2A,0x2A
00025a 4600
00025b 6c69
00025c 2065
00025d 6953      	.DB  0x0,0x46,0x69,0x6C,0x65,0x20,0x53,0x69
00025e 657a
00025f 2500
000260 2069
000261 0042      	.DB  0x7A,0x65,0x0,0x25,0x69,0x20,0x42,0x0
000262 6843
000263 6e61
000264 6967
000265 676e      	.DB  0x43,0x68,0x61,0x6E,0x67,0x69,0x6E,0x67
000266 4420
000267 7461
000268 0065
000269 6925      	.DB  0x20,0x44,0x61,0x74,0x65,0x0,0x25,0x69
00026a 3000
00026b 2e00
00026c 5854
00026d 0054      	.DB  0x0,0x30,0x0,0x2E,0x54,0x58,0x54,0x0
00026e 572e
00026f 5641
000270 2e00
000271 6177      	.DB  0x2E,0x57,0x41,0x56,0x0,0x2E,0x77,0x61
000272 0076
000273 4f4c
000274 0047
000275 6f4e      	.DB  0x76,0x0,0x4C,0x4F,0x47,0x0,0x4E,0x6F
000276 2074
000277 7553
000278 7070
000279 726f      	.DB  0x74,0x20,0x53,0x75,0x70,0x70,0x6F,0x72
00027a 6574
00027b 0064
00027c 533c
00027d 6f6c      	.DB  0x74,0x65,0x64,0x0,0x3C,0x53,0x6C,0x6F
00027e 2074
00027f 6d45
000280 7470
000281 3e79      	.DB  0x74,0x20,0x45,0x6D,0x70,0x74,0x79,0x3E
000282 4e00
000283 206f
000284 6143
000285 6472      	.DB  0x0,0x4E,0x6F,0x20,0x43,0x61,0x72,0x64
000286 4200
000287 6f72
000288 7377
000289 7265      	.DB  0x0,0x42,0x72,0x6F,0x77,0x73,0x65,0x72
00028a 2a00
00028b 2a2a
00028c 754d
00028d 6973      	.DB  0x0,0x2A,0x2A,0x2A,0x4D,0x75,0x73,0x69
00028e 2063
00028f 6c50
000290 7961
000291 7265      	.DB  0x63,0x20,0x50,0x6C,0x61,0x79,0x65,0x72
000292 2a2a
000293 002a
000294 3a42
000295 6925      	.DB  0x2A,0x2A,0x2A,0x0,0x42,0x3A,0x25,0x69
000296 2500
000297 2500
000298 2569
000299 3a69      	.DB  0x0,0x25,0x0,0x25,0x69,0x25,0x69,0x3A
00029a 6925
00029b 6925
00029c 253a
00029d 2569      	.DB  0x25,0x69,0x25,0x69,0x3A,0x25,0x69,0x25
00029e 0069      	.DB  0x69,0x0
                 _0x2020000:
00029f 4e2d
0002a0 4e41
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1315): warning: .cseg .db misalignment - padding zero byte
0002a1 0000      	.DB  0x2D,0x4E,0x41,0x4E,0x0
                 _0x2040060:
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1317): warning: .cseg .db misalignment - padding zero byte
0002a2 0001      	.DB  0x1
                 _0x2040000:
0002a3 4e2d
0002a4 4e41
0002a5 4900
0002a6 464e      	.DB  0x2D,0x4E,0x41,0x4E,0x0,0x49,0x4E,0x46
C:\Program Files\cvavr\Debug\List\nokia_lcd_test.asm(1320): warning: .cseg .db misalignment - padding zero byte
0002a7 0000      	.DB  0x0
                 
                 __GLOBAL_INI_TBL:
0002a8 000c      	.DW  0x0C
0002a9 0003      	.DW  0x03
0002aa 03f0      	.DW  __REG_VARS*2
                 
0002ab 0004      	.DW  0x04
0002ac 089c      	.DW  0x89C
0002ad 03fc      	.DW  __HEAP_START_MARKER*2
                 
0002ae 0001      	.DW  0x01
0002af 06d3      	.DW  _Stat_G000
0002b0 0400      	.DW  _0xB9*2
                 
0002b1 0001      	.DW  0x01
0002b2 06df      	.DW  _twiState_G000
0002b3 0402      	.DW  _0x168*2
                 
0002b4 0004      	.DW  0x04
0002b5 06e1      	.DW  _pre
0002b6 0404      	.DW  _0x169*2
                 
0002b7 000f      	.DW  0x0F
0002b8 05b0      	.DW  _0x267
0002b9 041e      	.DW  _0x0*2+10
                 
0002ba 0005      	.DW  0x05
0002bb 05bf      	.DW  _0x455
0002bc 042d      	.DW  _0x0*2+25
                 
0002bd 0007      	.DW  0x07
0002be 05c4      	.DW  _0x455+5
0002bf 0432      	.DW  _0x0*2+30
                 
0002c0 0005      	.DW  0x05
0002c1 05cb      	.DW  _0x455+12
0002c2 0439      	.DW  _0x0*2+37
                 
0002c3 0012      	.DW  0x12
0002c4 05d0      	.DW  _0x455+17
0002c5 043e      	.DW  _0x0*2+42
                 
0002c6 0045      	.DW  0x45
0002c7 05e2      	.DW  _0x455+35
0002c8 0450      	.DW  _0x0*2+60
                 
0002c9 0002      	.DW  0x02
0002ca 0627      	.DW  _0x455+104
0002cb 0493      	.DW  _0x0*2+127
                 
0002cc 0005      	.DW  0x05
0002cd 0629      	.DW  _0x455+106
0002ce 0498      	.DW  _0x0*2+132
                 
0002cf 0010      	.DW  0x10
0002d0 062e      	.DW  _0x475
0002d1 04a5      	.DW  _0x0*2+145
                 
0002d2 000a      	.DW  0x0A
0002d3 063e      	.DW  _0x475+16
0002d4 04b5      	.DW  _0x0*2+161
                 
0002d5 000e      	.DW  0x0E
0002d6 0648      	.DW  _0x475+26
0002d7 04c4      	.DW  _0x0*2+176
                 
0002d8 0002      	.DW  0x02
0002d9 0656      	.DW  _0x477
0002da 04d5      	.DW  _0x0*2+193
                 
0002db 0001      	.DW  0x01
0002dc 0658      	.DW  _0x477+2
0002dd 041d      	.DW  _0x0*2+9
                 
0002de 0005      	.DW  0x05
0002df 0659      	.DW  _0x477+3
0002e0 04d7      	.DW  _0x0*2+195
                 
0002e1 0005      	.DW  0x05
0002e2 065e      	.DW  _0x477+8
0002e3 044b      	.DW  _0x0*2+55
                 
0002e4 0005      	.DW  0x05
0002e5 0663      	.DW  _0x477+13
0002e6 04dc      	.DW  _0x0*2+200
                 
0002e7 0005      	.DW  0x05
0002e8 0668      	.DW  _0x477+18
0002e9 04e1      	.DW  _0x0*2+205
                 
0002ea 0004      	.DW  0x04
0002eb 066d      	.DW  _0x477+23
0002ec 04e6      	.DW  _0x0*2+210
                 
0002ed 000e      	.DW  0x0E
0002ee 0671      	.DW  _0x477+27
0002ef 04ea      	.DW  _0x0*2+214
                 
0002f0 0002      	.DW  0x02
0002f1 067f      	.DW  _0x477+41
0002f2 04d5      	.DW  _0x0*2+193
                 
0002f3 000d      	.DW  0x0D
0002f4 0681      	.DW  _0x477+43
0002f5 04f8      	.DW  _0x0*2+228
                 
0002f6 0008      	.DW  0x08
0002f7 068e      	.DW  _0x477+56
0002f8 0505      	.DW  _0x0*2+241
                 
0002f9 0008      	.DW  0x08
0002fa 0696      	.DW  _0x477+64
0002fb 050d      	.DW  _0x0*2+249
                 
0002fc 0013      	.DW  0x13
0002fd 069e      	.DW  _0x4B2
0002fe 0515      	.DW  _0x0*2+257
                 
0002ff 0002      	.DW  0x02
000300 06b1      	.DW  _0x4D7
000301 052d      	.DW  _0x0*2+281
                 
000302 0001      	.DW  0x01
000303 0842      	.DW  __seed_G102
000304 0544      	.DW  _0x2040060*2
                 
                 _0xFFFFFFFF:
000305 0000      	.DW  0
                 
                 #define __GLOBAL_INI_TBL_PRESENT 1
                 
                 __RESET:
000306 94f8      	CLI
000307 27ee      	CLR  R30
000308 bbef      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
000309 e0f1      	LDI  R31,1
00030a bff5      	OUT  MCUCR,R31
00030b bfe5      	OUT  MCUCR,R30
                 
                 ;CLEAR R2-R14
00030c e08d      	LDI  R24,(14-2)+1
00030d e0a2      	LDI  R26,2
00030e 27bb      	CLR  R27
                 __CLEAR_REG:
00030f 93ed      	ST   X+,R30
000310 958a      	DEC  R24
000311 f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
000312 e080      	LDI  R24,LOW(__CLEAR_SRAM_SIZE)
000313 e098      	LDI  R25,HIGH(__CLEAR_SRAM_SIZE)
000314 e0a0      	LDI  R26,LOW(__SRAM_START)
000315 e0b1      	LDI  R27,HIGH(__SRAM_START)
                 __CLEAR_SRAM:
000316 93ed      	ST   X+,R30
000317 9701      	SBIW R24,1
000318 f7e9      	BRNE __CLEAR_SRAM
                 
                 ;GLOBAL VARIABLES INITIALIZATION
000319 e5e0      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
00031a e0f5      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
                 __GLOBAL_INI_NEXT:
00031b 9185      	LPM  R24,Z+
00031c 9195      	LPM  R25,Z+
00031d 9700      	SBIW R24,0
00031e f061      	BREQ __GLOBAL_INI_END
00031f 91a5      	LPM  R26,Z+
000320 91b5      	LPM  R27,Z+
000321 9005      	LPM  R0,Z+
000322 9015      	LPM  R1,Z+
000323 01bf      	MOVW R22,R30
000324 01f0      	MOVW R30,R0
                 __GLOBAL_INI_LOOP:
000325 9005      	LPM  R0,Z+
000326 920d      	ST   X+,R0
000327 9701      	SBIW R24,1
000328 f7e1      	BRNE __GLOBAL_INI_LOOP
000329 01fb      	MOVW R30,R22
00032a cff0      	RJMP __GLOBAL_INI_NEXT
                 __GLOBAL_INI_END:
                 
                 ;GPIOR0 INITIALIZATION
00032b e0e0      	LDI  R30,__GPIOR0_INIT
00032c bbee      	OUT  GPIOR0,R30
                 
                 ;HARDWARE STACK POINTER INITIALIZATION
00032d e9eb      	LDI  R30,LOW(__SRAM_END-__HEAP_SIZE)
00032e bfed      	OUT  SPL,R30
00032f e0e8      	LDI  R30,HIGH(__SRAM_END-__HEAP_SIZE)
000330 bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
000331 ebc0      	LDI  R28,LOW(__SRAM_START+__DSTACK_SIZE)
000332 e0d5      	LDI  R29,HIGH(__SRAM_START+__DSTACK_SIZE)
                 
000333 940c 3383 	JMP  _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x5B0
                 
                 	.CSEG
                 ;
                 ;//***************************************************************************
                 ;//  File........: Nokia6610_1.c
                 ;//  Author(s)...: Goncharenko Valery and Chiper
                 ;//  URL(s)......: http://digitalchip.ru
                 ;//  Device(s)...: ATMega8
                 ;//  Compiler....: Winavr-20100110
                 ;//  Description.: Demo LCD Nokia6610
                 ;//  Data........: 08.06.12
                 ;//  Version.....: 1.0
                 ;//***************************************************************************
                 ;#include "menu.c"
                 ;#include <mega328p.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#define __SLEEP_DEFINED__
                 	.EQU __se_bit=0x01
                 	.EQU __sm_mask=0x0E
                 	.EQU __sm_adc_noise_red=0x02
                 	.EQU __sm_powerdown=0x04
                 	.EQU __sm_powersave=0x06
                 	.EQU __sm_standby=0x0C
                 	.EQU __sm_ext_standby=0x0E
                 	.SET power_ctrl_reg=smcr
                 	#endif
                 ;#include <io.h>              //  -
                 ;#include <delay.h>          //  
                 ;#include <pgmspace.h>
                 ;#include <stdio.h>
                 ;#include <stdlib.h>
                 ;#include "Nokia6610_lcd_lib.c"   //   LCD Nokia6610 ( ONLY PCF8833 )
                 ;//***************************************************************************
                 ;//  File........: Nokia6610_lcd_lib.c
                 ;//  Author(s)...: Goncharenko Valery and Chiper
                 ;//  URL(s)......: http://digitalchip.ru
                 ;//  Device(s)...: ATMega8
                 ;//  Compiler....: Winavr-20100110
                 ;//  Description.:  LCD Nokia6610 ( ONLY PCF8833 )
                 ;//  Data........: 08.06.12
                 ;//  Version.....: 1.0
                 ;//***************************************************************************
                 ;//  Notice:    LCD-    
                 ;//        
                 ;//***************************************************************************
                 ;#include "Nokia6610_lcd_lib.h"
                 ;#include <delay.h>
                 ;#include <pgmspace.h> //  
                 ;#include "Nokia6610_fnt8x8.h"
                 ;
                 ;//******************************************************************************
                 ;//    PCF8833
                 ;void nlcd_Init(void)
                 ; 0000 000C {
                 
                 	.CSEG
                 _nlcd_Init:
                 ; .FSTART _nlcd_Init
                 ;
                 ;	CS_LCD_RESET;
000335 982a      	CBI  0x5,2
                 ;	SDA_LCD_RESET;
000336 982b      	CBI  0x5,3
                 ;	SCLK_LCD_SET;
000337 9a2d      	SBI  0x5,5
                 ;
                 ;	RST_LCD_SET;    //     **********************************************
000338 9a29      	SBI  0x5,1
                 ;	RST_LCD_RESET;  //     *                                             *
000339 9829      	CBI  0x5,1
                 ;	delay_ms(1);   //     *         *
00033a e0a1      	LDI  R26,LOW(1)
00033b e0b0      	LDI  R27,0
00033c 940e 3c19 	CALL _delay_ms
                 ;	RST_LCD_SET;    //     *                                             *
00033e 9a29      	SBI  0x5,1
                 ;                    //     **********************************************
                 ;  //  SCLK_LCD_SET;
                 ;    SDA_LCD_SET;
00033f 9a2b      	SBI  0x5,3
                 ;  //  SCLK_LCD_SET;
                 ;     delay_ms(1);
000340 e0a1      	LDI  R26,LOW(1)
000341 e0b0      	LDI  R27,0
000342 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendCmd(LCD_PHILLIPS_SWRESET);   //     
000344 e0a1      	LDI  R26,LOW(1)
000345 d052      	RCALL _nlcd_SendCmd
                 ;    delay_ms(1);
000346 e0a1      	LDI  R26,LOW(1)
000347 e0b0      	LDI  R27,0
000348 940e 3c19 	CALL _delay_ms
                 ;	nlcd_SendCmd(LCD_PHILLIPS_SLEEPOUT);  //       
00034a e1a1      	LDI  R26,LOW(17)
00034b d04c      	RCALL _nlcd_SendCmd
                 ;     delay_ms(1);
00034c e0a1      	LDI  R26,LOW(1)
00034d e0b0      	LDI  R27,0
00034e 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendCmd(LCD_PHILLIPS_BSTRON);    //    .   
000350 e0a3      	LDI  R26,LOW(3)
000351 d046      	RCALL _nlcd_SendCmd
                 ;    delay_ms(1);                     //          
000352 e0a1      	LDI  R26,LOW(1)
000353 e0b0      	LDI  R27,0
000354 940e 3c19 	CALL _delay_ms
                 ;	nlcd_SendCmd(LCD_PHILLIPS_DISPON);    //     .
000356 e2a9      	LDI  R26,LOW(41)
000357 d040      	RCALL _nlcd_SendCmd
                 ;     delay_ms(1);
000358 e0a1      	LDI  R26,LOW(1)
000359 e0b0      	LDI  R27,0
00035a 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendCmd(LCD_PHILLIPS_NORON);     //      - .
00035c e1a3      	LDI  R26,LOW(19)
00035d d03a      	RCALL _nlcd_SendCmd
                 ;    delay_ms(1);
00035e e0a1      	LDI  R26,LOW(1)
00035f e0b0      	LDI  R27,0
000360 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendCmd(LCD_PHILLIPS_SETCON);    //            
000362 e2a5      	LDI  R26,LOW(37)
000363 d034      	RCALL _nlcd_SendCmd
                 ;     delay_ms(1);
000364 e0a1      	LDI  R26,LOW(1)
000365 e0b0      	LDI  R27,0
000366 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendDataByte(0x3F);     //         0x00-min   0x3F-max
000368 e3af      	LDI  R26,LOW(63)
000369 d043      	RCALL _nlcd_SendDataByte
                 ;      delay_ms(1);
00036a e0a1      	LDI  R26,LOW(1)
00036b e0b0      	LDI  R27,0
00036c 940e 3c19 	CALL _delay_ms
                 ;    nlcd_SendCmd(LCD_PHILLIPS_CASET);     //         
00036e e2aa      	LDI  R26,LOW(42)
00036f d028      	RCALL _nlcd_SendCmd
                 ;	nlcd_SendDataByte(0);        //
000370 e0a0      	LDI  R26,LOW(0)
000371 d03b      	RCALL _nlcd_SendDataByte
                 ;	nlcd_SendDataByte(131);      //
000372 e8a3      	LDI  R26,LOW(131)
000373 d039      	RCALL _nlcd_SendDataByte
                 ;	nlcd_SendCmd(LCD_PHILLIPS_PASET);     //          
000374 e2ab      	LDI  R26,LOW(43)
000375 d022      	RCALL _nlcd_SendCmd
                 ;	nlcd_SendDataByte(0);        //
000376 e0a0      	LDI  R26,LOW(0)
000377 d035      	RCALL _nlcd_SendDataByte
                 ;	nlcd_SendDataByte(131);      //
000378 e8a3      	LDI  R26,LOW(131)
000379 d033      	RCALL _nlcd_SendDataByte
                 ;                                           //    ******************************************************
                 ;    nlcd_SendCmd(LCD_PHILLIPS_COLMOD);    //   *                :                          *
00037a e3aa      	LDI  R26,LOW(58)
00037b d01c      	RCALL _nlcd_SendCmd
                 ; // nlcd_SendByte(DATA_LCD_MODE,0x02);     //   *     8   - 256  RGB 4:4:4           *
                 ;	nlcd_SendDataByte(0x03);     //  *     12   - 4096  RGB 3:3:2  (  )         *
00037c e0a3      	LDI  R26,LOW(3)
00037d d02f      	RCALL _nlcd_SendDataByte
                 ;//  nlcd_SendByte(DATA_LCD_MODE,0x05);     //  *     16   -65535  RGB 5:6:5           *
                 ;	                                       //  **********************************************************
                 ;	delay_ms(1);
00037e e0a1      	LDI  R26,LOW(1)
00037f e0b0      	LDI  R27,0
000380 940e 3c19 	CALL _delay_ms
                 ; // nlcd_SendByte(CMD_LCD_MODE,MADCTL);    //          RAM
                 ;//  nlcd_SendByte(DATA_LCD_MODE,0x30);     //   1-byte,   000 -   
                 ;	                                       //                 . 43
                 ;	nlcd_SendCmd(LCD_PHILLIPS_RAMWR);     //       RAM 
000382 e2ac      	LDI  R26,LOW(44)
000383 d014      	RCALL _nlcd_SendCmd
                 ;	delay_ms(1);                          //     
000384 e0a1      	LDI  R26,LOW(1)
000385 e0b0      	LDI  R27,0
000386 940e 3c19 	CALL _delay_ms
                 ;	nlcd_SendCmd(LCD_PHILLIPS_DISPOFF);   //           
000388 e2a8      	LDI  R26,LOW(40)
000389 d00e      	RCALL _nlcd_SendCmd
                 ;	nlcd_Clear(WHITE);//   ,     //nlcd_Clear(BLACK);   //         ...
00038a efaf      	LDI  R26,LOW(4095)
00038b e0bf      	LDI  R27,HIGH(4095)
00038c 940e 0501 	CALL _nlcd_Clear
                 ;    nlcd_RenderPixelBuffer();
00038e 940e 0472 	CALL _nlcd_RenderPixelBuffer
                 ;    nlcd_SendCmd(LCD_PHILLIPS_DISPON);    //     .
000390 e2a9      	LDI  R26,LOW(41)
000391 d006      	RCALL _nlcd_SendCmd
                 ;}
000392 9508      	RET
                 ; .FEND
                 ;
                 ;//#if HARDWARE SPI
                 ;void nlcd_InitSPI()
                 ;{
                 _nlcd_InitSPI:
                 ; .FSTART _nlcd_InitSPI
                 ;DDR_LCD |= (1<<SCLK_LCD_PIN)|(1<<SDA_LCD_PIN)|(1<<CS_LCD_PIN)|(1<<RST_LCD_PIN)|(1<<CS_SRAM_PIN);
000393 b1e4      	IN   R30,0x4
000394 62ef      	ORI  R30,LOW(0x2F)
000395 b9e4      	OUT  0x4,R30
                 ;DDRC |= (1<<HOLD_SRAM_PIN);
000396 9a39      	SBI  0x7,1
                 ;}
000397 9508      	RET
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//    (  )  LCD-
                 ;//  mode: CMD_LCD_MODE  -  
                 ;//		  DATA_LCD_MODE -  
                 ;//  c:      
                 ;
                 ;/*void nlcd_SendByte(char mode,unsigned char c)
                 ;{
                 ;unsigned char i=0;
                 ;   CS_LCD_RESET;
                 ;   SCLK_LCD_RESET;
                 ; if(mode) SDA_LCD_SET;
                 ;	 else	 SDA_LCD_RESET;
                 ;     SCLK_LCD_SET;
                 ;// SPCR |= (1<<SPE);
                 ;//   SPDR = c;
                 ; //  while(!(SPSR & (1<<SPIF)));
                 ;//   SPCR |= (0<<SPE);
                 ;    for(i=0;i<8;i++)
                 ;    {
                 ;    	SCLK_LCD_RESET;
                 ;        if(c & 0x80) SDA_LCD_SET;
                 ;        else	     SDA_LCD_RESET;
                 ;        SCLK_LCD_SET;
                 ;        c <<= 1;
                 ;        delay_us(NLCD_MIN_DELAY);
                 ;    }
                 ;   CS_LCD_SET;
                 ;}      */
                 ;
                 ;void nlcd_SendCmd(unsigned char c)
                 ;{
                 _nlcd_SendCmd:
                 ; .FSTART _nlcd_SendCmd
                 ;#asm
000398 93aa      	ST   -Y,R26
                 ;	c -> Y+0
                 {
000399 982a      	CBI  0x5,2
00039a 982d          CBI  0x5,5
00039b 982b          CBI  0x5,3
00039c 9a2d          SBI  0x5,5
                 }
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
00039d e5e0      	LDI  R30,LOW(80)
00039e bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
00039f e0e1      	LDI  R30,LOW(1)
0003a0 bded      	OUT  0x2D,R30
                 ;SPDR = c;
0003a1 81e8      	LD   R30,Y
0003a2 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x3:
0003a3 b5ed      	IN   R30,0x2D
0003a4 78e0      	ANDI R30,LOW(0x80)
0003a5 f3e9      	BREQ _0x3
                 ;SPCR = 0;
0003a6 e0e0      	LDI  R30,LOW(0)
0003a7 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0003a8 bded      	OUT  0x2D,R30
                 ;#asm
                 {
0003a9 9a2a      SBI  0x5,2
0003aa 982d      CBI  0x5,5
                 }
                 ;}
0003ab 940c 09f5 	JMP  _0x20C0026
                 ; .FEND
                 ;
                 ;void nlcd_SendDataByte(unsigned char c)
                 ;{
                 _nlcd_SendDataByte:
                 ; .FSTART _nlcd_SendDataByte
                 ;#asm
0003ad 93aa      	ST   -Y,R26
                 ;	c -> Y+0
                 {
0003ae 982a      	CBI  0x5,2
0003af 982d          CBI  0x5,5
0003b0 9a2b          SBI  0x5,3
0003b1 9a2d          SBI  0x5,5
                 }
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
0003b2 e5e0      	LDI  R30,LOW(80)
0003b3 bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
0003b4 e0e1      	LDI  R30,LOW(1)
0003b5 bded      	OUT  0x2D,R30
                 ;SPDR = c;
0003b6 81e8      	LD   R30,Y
0003b7 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x6:
0003b8 b5ed      	IN   R30,0x2D
0003b9 78e0      	ANDI R30,LOW(0x80)
0003ba f3e9      	BREQ _0x6
                 ;SPCR = 0;
0003bb e0e0      	LDI  R30,LOW(0)
0003bc bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0003bd bded      	OUT  0x2D,R30
                 ;#asm
                 {
0003be 9a2a      SBI  0x5,2
                 }
                 ;}
0003bf 940c 09f5 	JMP  _0x20C0026
                 ; .FEND
                 ;   /*
                 ;void nlcd_SendDataByte2(unsigned char a,unsigned char b)
                 ;{
                 ;#asm
                 ;{
                 ;	CBI  0x5,2
                 ;    CBI  0x5,5
                 ;}
                 ;#endasm
                 ;//First byte
                 ;#asm
                 ;{
                 ;    CBI  0x5,5
                 ;    SBI  0x5,3
                 ;    SBI  0x5,5
                 ;}
                 ;#endasm
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(1<<CPOL)|(1<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = a;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;//Second byte
                 ;#asm
                 ;{
                 ;    CBI  0x5,5
                 ;    SBI  0x5,3
                 ;    SBI  0x5,5
                 ;}
                 ;#endasm
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(1<<CPOL)|(1<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = b;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;#asm
                 ;{
                 ;SBI  0x18,2
                 ;}
                 ;#endasm
                 ;}
                 ;
                 ;void nlcd_SendDataByte3(unsigned char a,unsigned char b,unsigned char c)
                 ;{
                 ;#asm
                 ;{
                 ;	CBI  0x18,2
                 ;}
                 ;#endasm
                 ;//First byte
                 ;#asm
                 ;{
                 ;    CBI  0x18,5
                 ;    SBI  0x18,3
                 ;    SBI  0x18,5
                 ;}
                 ;#endasm
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(1<<CPOL)|(1<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = a;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;//Second byte
                 ;#asm
                 ;{
                 ;    CBI  0x18,5
                 ;    SBI  0x18,3
                 ;    SBI  0x18,5
                 ;}
                 ;#endasm
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(1<<CPOL)|(1<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = b;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;//Third byte
                 ;#asm
                 ;{
                 ;    CBI  0x18,5
                 ;    SBI  0x18,3
                 ;    SBI  0x18,5
                 ;}
                 ;#endasm
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(1<<CPOL)|(1<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = c;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;#asm
                 ;{
                 ;SBI  0x18,2
                 ;}
                 ;#endasm
                 ;} */
                 ;
                 ;//******************************************************************************
                 ;//	: 		 GotoXY(unsigned char x, unsigned char y)
                 ;// 	:       x, y
                 ;//           	 GotoXY( x, y)
                 ;//	:   x:  0-131
                 ;//			     y:  0-131
                 ;//  :		 GotoXY(32,17);
                 ;//******************************************************************************
                 ;void nlcd_GotoXY(unsigned char x, unsigned char y)
                 ;{
                 ;  /// Useful Anymore with buffer
                 ;}
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_Pixel(unsigned char x, unsigned char y, int color)
                 ;// 	:     Pixel   x, y,  color
                 ;//           	 nlcd_Pixel( x, y,color)
                 ;//	:   x:      0-131
                 ;//			     y:      0-131
                 ;//               color:  (12-bit . #define)
                 ;//  :		 nlcd_Pixel(21,45,BLACK);
                 ;//******************************************************************************
                 ;void nlcd_PixelBox2x2(unsigned char x, unsigned char y, int P1_color,int P2_color, int P3_color, int P4_color)   ///R  ...
                 ;{
                 ;    unsigned char a = (P1_color >> 4);
                 ;    unsigned char b = ((P1_color ) << 4) | ((P2_color >> 8) );
                 ;    unsigned char c = P2_color;
                 ;    unsigned char e = (P3_color >> 4);
                 ;    unsigned char f = ((P3_color ) << 4) | ((P4_color >> 8) );
                 ;    unsigned char g = P4_color;
                 ;    unsigned char pBufferSlice[6];
                 ;    pBufferSlice[0] = a;
                 ;	x -> Y+21
                 ;	y -> Y+20
                 ;	P1_color -> Y+18
                 ;	P2_color -> Y+16
                 ;	P3_color -> Y+14
                 ;	P4_color -> Y+12
                 ;	a -> R17
                 ;	b -> R16
                 ;	c -> R19
                 ;	e -> R18
                 ;	f -> R21
                 ;	g -> R20
                 ;	pBufferSlice -> Y+6
                 ;    pBufferSlice[1] = b;
                 ;    pBufferSlice[2] = c;
                 ;    pBufferSlice[3] = e;
                 ;    pBufferSlice[4] = f;
                 ;    pBufferSlice[5] = g;
                 ;    x /= 2;
                 ;  //   RAM
                 ;   nlcd_WritePixelBuffer((y*3*(RESRAM_X) + 3*(x)),&pBufferSlice[0],3);
                 ;   nlcd_WritePixelBuffer(((y+1)*3*(RESRAM_X) + 3*(x)),&pBufferSlice[3],3);
                 ;}
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_Pixel(unsigned char x, unsigned char y, int color)
                 ;// 	:     Pixel   x, y,  color
                 ;//           	 nlcd_Pixel( x, y,color)
                 ;//	:   x:      0-131
                 ;//			     y:      0-131
                 ;//               color:  (12-bit . #define)
                 ;//  :		 nlcd_Pixel(21,45,BLACK);
                 ;//******************************************************************************
                 ;void nlcd_PixelLine2x1(unsigned char x, unsigned char y, int P1_color, int P2_color)   ///R   = 0
                 ;{
                 _nlcd_PixelLine2x1:
                 ; .FSTART _nlcd_PixelLine2x1
                 ;    unsigned char a = (P1_color >> 4);
                 ;    unsigned char b = ((P1_color ) << 4) | ((P2_color >> 8) );
                 ;    unsigned char c = P2_color;
                 ;    unsigned char pBufferSlice[3];
                 ;    pBufferSlice[0] = a;
0003c1 93ba      	ST   -Y,R27
0003c2 93aa      	ST   -Y,R26
0003c3 9723      	SBIW R28,3
0003c4 940e 3f8b 	CALL __SAVELOCR4
                 ;	x -> Y+12
                 ;	y -> Y+11
                 ;	P1_color -> Y+9
                 ;	P2_color -> Y+7
                 ;	a -> R17
                 ;	b -> R16
                 ;	c -> R19
                 ;	pBufferSlice -> Y+4
0003c6 85e9      	LDD  R30,Y+9
0003c7 85fa      	LDD  R31,Y+9+1
0003c8 940e 3e2d 	CALL __ASRW4
0003ca 2f1e      	MOV  R17,R30
0003cb 85e9      	LDD  R30,Y+9
0003cc 95e2      	SWAP R30
0003cd 7fe0      	ANDI R30,0xF0
0003ce 2fae      	MOV  R26,R30
0003cf 81ef      	LDD  R30,Y+7
0003d0 85f8      	LDD  R31,Y+7+1
0003d1 940e 3e44 	CALL __ASRW8
0003d3 2bea      	OR   R30,R26
0003d4 2f0e      	MOV  R16,R30
0003d5 813f      	LDD  R19,Y+7
                +
0003d6 831c     +STD Y + 4 , R17
                 	__PUTBSR 17,4
                 ;    pBufferSlice[1] = b;
0003d7 01fe      	MOVW R30,R28
0003d8 9635      	ADIW R30,5
0003d9 8300      	ST   Z,R16
                 ;    pBufferSlice[2] = c;
0003da 01fe      	MOVW R30,R28
0003db 9636      	ADIW R30,6
0003dc 8330      	ST   Z,R19
                 ;    x /= 2;
0003dd 85ac      	LDD  R26,Y+12
0003de e0b0      	LDI  R27,0
0003df e0e2      	LDI  R30,LOW(2)
0003e0 e0f0      	LDI  R31,HIGH(2)
0003e1 940e 3ec1 	CALL __DIVW21
0003e3 87ec      	STD  Y+12,R30
                 ;   // iff(x%2)x/=2;
                 ;  //   RAM
                 ;   nlcd_WritePixelBuffer((y*3*(RESRAM_X) + 3*(x)),&pBufferSlice[0],3);
0003e4 85ab      	LDD  R26,Y+11
0003e5 e0e3      	LDI  R30,LOW(3)
0003e6 9fea      	MUL  R30,R26
0003e7 01f0      	MOVW R30,R0
0003e8 e4a2      	LDI  R26,LOW(66)
0003e9 e0b0      	LDI  R27,HIGH(66)
0003ea 940e 3e96 	CALL __MULW12
0003ec 01bf      	MOVW R22,R30
0003ed 85ec      	LDD  R30,Y+12
0003ee e0a3      	LDI  R26,LOW(3)
0003ef 9fea      	MUL  R30,R26
0003f0 01f0      	MOVW R30,R0
0003f1 0fe6      	ADD  R30,R22
0003f2 1ff7      	ADC  R31,R23
0003f3 93fa      	ST   -Y,R31
0003f4 93ea      	ST   -Y,R30
0003f5 01fe      	MOVW R30,R28
0003f6 9636      	ADIW R30,6
0003f7 93fa      	ST   -Y,R31
0003f8 93ea      	ST   -Y,R30
0003f9 e0b0      	LDI  R27,0
0003fa d040      	RCALL _nlcd_WritePixelBuffer
                 ;}
0003fb 940e 3f92 	CALL __LOADLOCR4
0003fd 962d      	ADIW R28,13
0003fe 9508      	RET
                 ; .FEND
                 ;
                 ;void nlcd_HorizontalLine(unsigned char y, int color)
                 ;{
                 _nlcd_HorizontalLine:
                 ; .FSTART _nlcd_HorizontalLine
                 ;int i = 0;
                 ;for(i=0;i<131;i++)
0003ff 93ba      	ST   -Y,R27
000400 93aa      	ST   -Y,R26
000401 931a      	ST   -Y,R17
000402 930a      	ST   -Y,R16
                 ;	y -> Y+4
                 ;	color -> Y+2
                 ;	i -> R16,R17
                +
000403 e000     +LDI R16 , LOW ( 0 )
000404 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                +
000405 e000     +LDI R16 , LOW ( 0 )
000406 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0xA:
                +
000407 3803     +CPI R16 , LOW ( 131 )
000408 e0e0     +LDI R30 , HIGH ( 131 )
000409 071e     +CPC R17 , R30
                 	__CPWRN 16,17,131
00040a f46c      	BRGE _0xB
                 ;nlcd_PixelLine2x1(i,y,color,color);
00040b 930a      	ST   -Y,R16
00040c 81ed      	LDD  R30,Y+5
00040d 93ea      	ST   -Y,R30
00040e 81ec      	LDD  R30,Y+4
00040f 81fd      	LDD  R31,Y+4+1
000410 93fa      	ST   -Y,R31
000411 93ea      	ST   -Y,R30
000412 81ae      	LDD  R26,Y+6
000413 81bf      	LDD  R27,Y+6+1
000414 dfac      	RCALL _nlcd_PixelLine2x1
                +
000415 5f0f     +SUBI R16 , LOW ( - 1 )
000416 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000417 cfef      	RJMP _0xA
                 _0xB:
000418 8119      	LDD  R17,Y+1
000419 8108      	LDD  R16,Y+0
00041a 9625      	ADIW R28,5
00041b 9508      	RET
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_Line(unsigned char x0, unsigned char y0, unsigned char x1, unsigned char y1, int color)
                 ;// 	:        x0, y0   x1, y1  color
                 ;//           	 nlcd_Line(x0, y0, x1, y1, color)
                 ;//	:   x:      0-131
                 ;//			     y:      0-131
                 ;//               color:  (12-bit . #define)
                 ;//  :		 nlcd_Pixel(25,60,25,80,RED);
                 ;//******************************************************************************
                 ;/*void nlcd_Line(unsigned char x0, unsigned char y0, unsigned char x1, unsigned char y1, int color)
                 ;{
                 ;
                 ;   int dy = y1 - y0;
                 ;   int dx = x1 - x0;
                 ;   int stepx, stepy;
                 ;   if (dy < 0) { dy = -dy;  stepy = -1; } else { stepy = 1; }
                 ;   if (dx < 0) { dx = -dx;  stepx = -1; } else { stepx = 1; }
                 ;
                 ;   dy <<= 1;                              // dy is now 2*dy
                 ;   dx <<= 1;                              // dx is now 2*dx
                 ;
                 ;
                 ;   nlcd_Pixel(x0, y0, color);
                 ;
                 ;   if (dx > dy)
                 ;   {
                 ;       int fraction = dy - (dx >> 1);     // same as 2*dy - dx
                 ;       while (x0 != x1)
                 ;	   {
                 ; 	       if (fraction >= 0)
                 ;		   {
                 ; 		       y0 += stepy;
                 ;               fraction -= dx;            // same as fraction -= 2*dx
                 ; 		   }
                 ; 		x0 += stepx;
                 ;        fraction += dy;                   // same as fraction -= 2*dy
                 ;        nlcd_Pixel(x0, y0, color);
                 ;       }
                 ;   }
                 ; 	else
                 ;    {
                 ; 	    int fraction = dx - (dy >> 1);
                 ;        while (y0 != y1)
                 ;		{
                 ; 		    if (fraction >= 0)
                 ;		    {
                 ; 		        x0 += stepx;
                 ; 				fraction -= dy;
                 ;            }
                 ;        y0 += stepy;
                 ; 	    fraction += dx;
                 ;        nlcd_Pixel(x0, y0, color);
                 ;        }
                 ; 	}
                 ;
                 ;}    */
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_InitPixelBuffer(int mode)
                 ;// 	:      ,  mode -    
                 ;//           	 nlcd_Lnlcd_InitPixelBufferine(mode)
                 ;//	:
                 ;//  :		 nlcd_InitPixelBuffer(mode);
                 ;//******************************************************************************
                 ;//   SRAM 23X256
                 ;void nlcd_InitPixelBuffer(int mode)
                 ;{
                 _nlcd_InitPixelBuffer:
                 ; .FSTART _nlcd_InitPixelBuffer
                 ;unsigned char inst = mode<<__MODE_BITS;
                 ;CS_SRAM_RESET;
00041c 93ba      	ST   -Y,R27
00041d 93aa      	ST   -Y,R26
00041e 931a      	ST   -Y,R17
                 ;	mode -> Y+1
                 ;	inst -> R17
00041f 81e9      	LDD  R30,Y+1
000420 95e2      	SWAP R30
000421 7fe0      	ANDI R30,0xF0
000422 0fee      	LSL  R30
000423 0fee      	LSL  R30
000424 2f1e      	MOV  R17,R30
000425 9828      	CBI  0x5,0
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
000426 e5e0      	LDI  R30,LOW(80)
000427 bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
000428 e0e1      	LDI  R30,LOW(1)
000429 bded      	OUT  0x2D,R30
                 ;SPDR = __WRSR_INST;
00042a bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0xC:
00042b b5ed      	IN   R30,0x2D
00042c 78e0      	ANDI R30,LOW(0x80)
00042d f3e9      	BREQ _0xC
                 ;SPDR = inst & __MODE_MASK;
00042e 2fe1      	MOV  R30,R17
00042f 7ce0      	ANDI R30,LOW(0xC0)
000430 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0xF:
000431 b5ed      	IN   R30,0x2D
000432 78e0      	ANDI R30,LOW(0x80)
000433 f3e9      	BREQ _0xF
                 ;SPCR = 0;
000434 e0e0      	LDI  R30,LOW(0)
000435 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
000436 bded      	OUT  0x2D,R30
                 ;CS_SRAM_SET;
000437 9a28      	SBI  0x5,0
                 ;}
000438 8118      	LDD  R17,Y+0
000439 9623      	ADIW R28,3
00043a 9508      	RET
                 ; .FEND
                 ;//******************************************************************************
                 ;//	: 		 nlcd_WritePixelBuffer(int startaddr, unsigned char* data, int length)
                 ;// 	:       ,   - ,  (Stquently, array)
                 ;//           	 nlcd_WritePixelBuffer(startaddr,&data[0],length)
                 ;//	:
                 ;//  :		 nlcd_WritePixelBuffer(startaddr,&data[0],length);
                 ;//******************************************************************************
                 ;//   SRAM 23X256
                 ;void nlcd_WritePixelBuffer(int startaddr, unsigned char* data, int length)
                 ;{
                 _nlcd_WritePixelBuffer:
                 ; .FSTART _nlcd_WritePixelBuffer
                 ;int i;
                 ;CS_SRAM_RESET;
00043b 93ba      	ST   -Y,R27
00043c 93aa      	ST   -Y,R26
00043d 931a      	ST   -Y,R17
00043e 930a      	ST   -Y,R16
                 ;	startaddr -> Y+6
                 ;	*data -> Y+4
                 ;	length -> Y+2
                 ;	i -> R16,R17
00043f 9828      	CBI  0x5,0
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
000440 e5e0      	LDI  R30,LOW(80)
000441 bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
000442 e0e1      	LDI  R30,LOW(1)
000443 bded      	OUT  0x2D,R30
                 ;SPDR = __WRITE_INST;
000444 e0e2      	LDI  R30,LOW(2)
000445 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x12:
000446 b5ed      	IN   R30,0x2D
000447 78e0      	ANDI R30,LOW(0x80)
000448 f3e9      	BREQ _0x12
                 ;SPDR = startaddr>>8;
000449 81ee      	LDD  R30,Y+6
00044a 81ff      	LDD  R31,Y+6+1
00044b 940e 3e44 	CALL __ASRW8
00044d bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x15:
00044e b5ed      	IN   R30,0x2D
00044f 78e0      	ANDI R30,LOW(0x80)
000450 f3e9      	BREQ _0x15
                 ;SPDR = startaddr;
000451 81ee      	LDD  R30,Y+6
000452 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x18:
000453 b5ed      	IN   R30,0x2D
000454 78e0      	ANDI R30,LOW(0x80)
000455 f3e9      	BREQ _0x18
                 ;  for(i=0; i<length; i++)
                +
000456 e000     +LDI R16 , LOW ( 0 )
000457 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x1C:
000458 81ea      	LDD  R30,Y+2
000459 81fb      	LDD  R31,Y+2+1
00045a 170e      	CP   R16,R30
00045b 071f      	CPC  R17,R31
00045c f46c      	BRGE _0x1D
                 ;  {
                 ;SPDR = data[i];
00045d 01f8      	MOVW R30,R16
00045e 81ac      	LDD  R26,Y+4
00045f 81bd      	LDD  R27,Y+4+1
000460 0fae      	ADD  R26,R30
000461 1fbf      	ADC  R27,R31
000462 91ec      	LD   R30,X
000463 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x1E:
000464 b5ed      	IN   R30,0x2D
000465 78e0      	ANDI R30,LOW(0x80)
000466 f3e9      	BREQ _0x1E
                 ;  }
                +
000467 5f0f     +SUBI R16 , LOW ( - 1 )
000468 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000469 cfee      	RJMP _0x1C
                 _0x1D:
                 ;SPCR = 0;
00046a e0e0      	LDI  R30,LOW(0)
00046b bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
00046c bded      	OUT  0x2D,R30
                 ;
                 ;CS_SRAM_SET;
00046d 9a28      	SBI  0x5,0
                 ;}
00046e 8119      	LDD  R17,Y+1
00046f 8108      	LDD  R16,Y+0
000470 940c 07dc 	JMP  _0x20C002B
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_ReadPixelBuffer(int startaddr, unsigned char* data, int length)
                 ;// 	:       ,   - ,  (Stquently, array)
                 ;//           	 nlcd_ReadPixelBuffer(startaddr,&data[0],length)
                 ;//	:
                 ;//  :		 nlcd_ReadPixelBuffer(startaddr,&data[0],length);
                 ;//******************************************************************************
                 ;//   SRAM 23X256
                 ;void nlcd_ReadPixelBuffer(int startaddr, unsigned char* data, int length)
                 ;{
                 ;int i;
                 ;CS_SRAM_RESET;
                 ;	startaddr -> Y+6
                 ;	*data -> Y+4
                 ;	length -> Y+2
                 ;	i -> R16,R17
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
                 ;SPSR = (1<<SPI2X);
                 ;SPDR = __READ_INST;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPDR = (startaddr)>>8;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;SPDR = startaddr;
                 ;while(!(SPSR & (1<<SPIF)));
                 ;  for(i=0; i<3; i++)
                 ;  {
                 ;  SPDR = __NULL_INST;
                 ;  while(!(SPSR & (1<<SPIF)));
                 ;  data[i] = SPDR;
                 ;  }
                 ;SPCR = 0;
                 ;SPSR = 0;
                 ;CS_SRAM_SET;
                 ;}
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_RenderPixelBuffer()
                 ;// 	:      
                 ;//           	 nlcd_RenderPixelBuffer()
                 ;//	:
                 ;//  :		 nlcd_RenderPixelBuffer();
                 ;//******************************************************************************
                 ;
                 ;void nlcd_RenderPixelBuffer()
                 ;{
                 _nlcd_RenderPixelBuffer:
                 ; .FSTART _nlcd_RenderPixelBuffer
                 ;int i=0;
                 ;int k=0;
                 ;unsigned char ppBufferSlice[3];
                 ;CS_SRAM_SET;
000472 9723      	SBIW R28,3
000473 940e 3f8b 	CALL __SAVELOCR4
                 ;	i -> R16,R17
                 ;	k -> R18,R19
                 ;	ppBufferSlice -> Y+4
                +
000475 e000     +LDI R16 , LOW ( 0 )
000476 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                +
000477 e020     +LDI R18 , LOW ( 0 )
000478 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
000479 9a28      	SBI  0x5,0
                 ;CS_LCD_RESET;
00047a 982a      	CBI  0x5,2
                 ; nlcd_SendCmd(LCD_PHILLIPS_PASET);   //    RAM
00047b e2ab      	LDI  R26,LOW(43)
00047c 940e 0398 	CALL _nlcd_SendCmd
                 ;   nlcd_SendDataByte(0);      // 
00047e e0a0      	LDI  R26,LOW(0)
00047f df2d      	RCALL _nlcd_SendDataByte
                 ;   nlcd_SendDataByte(131);
000480 e8a3      	LDI  R26,LOW(131)
000481 df2b      	RCALL _nlcd_SendDataByte
                 ;   nlcd_SendCmd(LCD_PHILLIPS_CASET);
000482 e2aa      	LDI  R26,LOW(42)
000483 940e 0398 	CALL _nlcd_SendCmd
                 ;   nlcd_SendDataByte(0);
000485 e0a0      	LDI  R26,LOW(0)
000486 df26      	RCALL _nlcd_SendDataByte
                 ;   nlcd_SendDataByte(131);      //
000487 e8a3      	LDI  R26,LOW(131)
000488 df24      	RCALL _nlcd_SendDataByte
                 ;nlcd_SendCmd(LCD_PHILLIPS_RAMWR);
000489 e2ac      	LDI  R26,LOW(44)
00048a 940e 0398 	CALL _nlcd_SendCmd
                 ;for(i=0;i < 8712;i++)
                +
00048c e000     +LDI R16 , LOW ( 0 )
00048d e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x31:
                +
00048e 3008     +CPI R16 , LOW ( 8712 )
00048f e2e2     +LDI R30 , HIGH ( 8712 )
000490 071e     +CPC R17 , R30
                 	__CPWRN 16,17,8712
000491 f00c      	BRLT PC+2
000492 c06a      	RJMP _0x32
                 ;{
                 ;//First Read Pixel Buffer Slice (slice for 3 pixels)
                 ;CS_LCD_SET;
000493 9a2a      	SBI  0x5,2
                 ;CS_SRAM_RESET;
000494 9828      	CBI  0x5,0
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
000495 e5e0      	LDI  R30,LOW(80)
000496 bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
000497 e0e1      	LDI  R30,LOW(1)
000498 bded      	OUT  0x2D,R30
                 ;SPDR = __READ_INST;
000499 e0e3      	LDI  R30,LOW(3)
00049a bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x33:
00049b b5ed      	IN   R30,0x2D
00049c 78e0      	ANDI R30,LOW(0x80)
00049d f3e9      	BREQ _0x33
                 ;SPDR = (i*3)>>8;
00049e 01f8      	MOVW R30,R16
00049f e0a3      	LDI  R26,LOW(3)
0004a0 e0b0      	LDI  R27,HIGH(3)
0004a1 940e 3e96 	CALL __MULW12
0004a3 940e 3e44 	CALL __ASRW8
0004a5 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x36:
0004a6 b5ed      	IN   R30,0x2D
0004a7 78e0      	ANDI R30,LOW(0x80)
0004a8 f3e9      	BREQ _0x36
                 ;SPDR = i*3;
0004a9 e0a3      	LDI  R26,LOW(3)
0004aa 020a      	MULS R16,R26
0004ab 01f0      	MOVW R30,R0
0004ac bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x39:
0004ad b5ed      	IN   R30,0x2D
0004ae 78e0      	ANDI R30,LOW(0x80)
0004af f3e9      	BREQ _0x39
                 ;  for(k=0; k<3; k++)
                +
0004b0 e020     +LDI R18 , LOW ( 0 )
0004b1 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 _0x3D:
                +
0004b2 3023     +CPI R18 , LOW ( 3 )
0004b3 e0e0     +LDI R30 , HIGH ( 3 )
0004b4 073e     +CPC R19 , R30
                 	__CPWRN 18,19,3
0004b5 f474      	BRGE _0x3E
                 ;  {
                 ;  SPDR = __NULL_INST;
0004b6 efef      	LDI  R30,LOW(255)
0004b7 bdee      	OUT  0x2E,R30
                 ;  while(!(SPSR & (1<<SPIF)));
                 _0x3F:
0004b8 b5ed      	IN   R30,0x2D
0004b9 78e0      	ANDI R30,LOW(0x80)
0004ba f3e9      	BREQ _0x3F
                 ;  ppBufferSlice[k] = SPDR;
0004bb 01de      	MOVW R26,R28
0004bc 9614      	ADIW R26,4
0004bd 0fa2      	ADD  R26,R18
0004be 1fb3      	ADC  R27,R19
0004bf b5ee      	IN   R30,0x2E
0004c0 93ec      	ST   X,R30
                 ;  }
                +
0004c1 5f2f     +SUBI R18 , LOW ( - 1 )
0004c2 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0004c3 cfee      	RJMP _0x3D
                 _0x3E:
                 ;SPCR = 0;
0004c4 e0e0      	LDI  R30,LOW(0)
0004c5 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0004c6 bded      	OUT  0x2D,R30
                 ;CS_SRAM_SET;
0004c7 9a28      	SBI  0x5,0
                 ;CS_LCD_RESET;
0004c8 982a      	CBI  0x5,2
                 ;//First byte
                 ;#asm
                 {
0004c9 e44b      ldi r20,0b1001011
0004ca b945      out 0x5,r20
0004cb 9a2d      SBI  0x5,5
0004cc 982d      CBI  0x5,5
                 }
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
0004cd e5e0      	LDI  R30,LOW(80)
0004ce bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
0004cf e0e1      	LDI  R30,LOW(1)
0004d0 bded      	OUT  0x2D,R30
                 ;SPDR = ppBufferSlice[0];
0004d1 81ec      	LDD  R30,Y+4
0004d2 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x42:
0004d3 b5ed      	IN   R30,0x2D
0004d4 78e0      	ANDI R30,LOW(0x80)
0004d5 f3e9      	BREQ _0x42
                 ;SPCR = 0;
0004d6 e0e0      	LDI  R30,LOW(0)
0004d7 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0004d8 bded      	OUT  0x2D,R30
                 ;//Second byte
                 ;#asm
                 {
0004d9 e44b      ldi r20,0b1001011
0004da b945      out 0x5,r20
0004db 9a2d      SBI  0x5,5
0004dc 982d      CBI  0x5,5
                 }
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
0004dd e5e0      	LDI  R30,LOW(80)
0004de bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
0004df e0e1      	LDI  R30,LOW(1)
0004e0 bded      	OUT  0x2D,R30
                 ;SPDR = ppBufferSlice[1];
0004e1 81ed      	LDD  R30,Y+5
0004e2 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x45:
0004e3 b5ed      	IN   R30,0x2D
0004e4 78e0      	ANDI R30,LOW(0x80)
0004e5 f3e9      	BREQ _0x45
                 ;SPCR = 0;
0004e6 e0e0      	LDI  R30,LOW(0)
0004e7 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0004e8 bded      	OUT  0x2D,R30
                 ;//Third byte
                 ;#asm
                 {
0004e9 e44b      ldi r20,0b1001011
0004ea b945      out 0x5,r20
0004eb 9a2d      SBI  0x5,5
0004ec 982d      CBI  0x5,5
                 }
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
0004ed e5e0      	LDI  R30,LOW(80)
0004ee bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
0004ef e0e1      	LDI  R30,LOW(1)
0004f0 bded      	OUT  0x2D,R30
                 ;SPDR = ppBufferSlice[2];
0004f1 81ee      	LDD  R30,Y+6
0004f2 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x48:
0004f3 b5ed      	IN   R30,0x2D
0004f4 78e0      	ANDI R30,LOW(0x80)
0004f5 f3e9      	BREQ _0x48
                 ;SPCR = 0;
0004f6 e0e0      	LDI  R30,LOW(0)
0004f7 bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
0004f8 bded      	OUT  0x2D,R30
                 ;        }
                +
0004f9 5f0f     +SUBI R16 , LOW ( - 1 )
0004fa 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0004fb 940c 048e 	JMP  _0x31
                 _0x32:
                 ;CS_LCD_SET;
0004fd 9a2a      	SBI  0x5,2
                 ;}
0004fe 940e 3f92 	CALL __LOADLOCR4
000500 c42c      	RJMP _0x20C002A
                 ; .FEND
                 ;
                 ;void nlcd_Clear(int color)
                 ;{
                 _nlcd_Clear:
                 ; .FSTART _nlcd_Clear
                 ;int i,j=0;
                 ;unsigned char ppBufferSlice[3];
                 ;ppBufferSlice[0] = color >> 4;
000501 93ba      	ST   -Y,R27
000502 93aa      	ST   -Y,R26
000503 9723      	SBIW R28,3
000504 940e 3f8b 	CALL __SAVELOCR4
                 ;	color -> Y+7
                 ;	i -> R16,R17
                 ;	j -> R18,R19
                 ;	ppBufferSlice -> Y+4
                +
000506 e020     +LDI R18 , LOW ( 0 )
000507 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
000508 81ef      	LDD  R30,Y+7
000509 85f8      	LDD  R31,Y+7+1
00050a 940e 3e2d 	CALL __ASRW4
00050c 83ec      	STD  Y+4,R30
                 ;ppBufferSlice[1] = ((color ) << 4) | ((color >> 8));
00050d 81ef      	LDD  R30,Y+7
00050e 95e2      	SWAP R30
00050f 7fe0      	ANDI R30,0xF0
000510 2fae      	MOV  R26,R30
000511 81ef      	LDD  R30,Y+7
000512 85f8      	LDD  R31,Y+7+1
000513 940e 3e44 	CALL __ASRW8
000515 2bea      	OR   R30,R26
000516 83ed      	STD  Y+5,R30
                 ;ppBufferSlice[2] = color;
000517 81ef      	LDD  R30,Y+7
000518 83ee      	STD  Y+6,R30
                 ;        for(i=0;i < 8713;i++)
                +
000519 e000     +LDI R16 , LOW ( 0 )
00051a e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x4C:
                +
00051b 3009     +CPI R16 , LOW ( 8713 )
00051c e2e2     +LDI R30 , HIGH ( 8713 )
00051d 071e     +CPC R17 , R30
                 	__CPWRN 16,17,8713
00051e f5ac      	BRGE _0x4D
                 ;		{
                 ;CS_SRAM_RESET;
00051f 9828      	CBI  0x5,0
                 ;SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
000520 e5e0      	LDI  R30,LOW(80)
000521 bdec      	OUT  0x2C,R30
                 ;SPSR = (1<<SPI2X);
000522 e0e1      	LDI  R30,LOW(1)
000523 bded      	OUT  0x2D,R30
                 ;SPDR = __WRITE_INST;
000524 e0e2      	LDI  R30,LOW(2)
000525 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x4E:
000526 b5ed      	IN   R30,0x2D
000527 78e0      	ANDI R30,LOW(0x80)
000528 f3e9      	BREQ _0x4E
                 ;SPDR = (i*3)>>8;
000529 01f8      	MOVW R30,R16
00052a e0a3      	LDI  R26,LOW(3)
00052b e0b0      	LDI  R27,HIGH(3)
00052c 940e 3e96 	CALL __MULW12
00052e 940e 3e44 	CALL __ASRW8
000530 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x51:
000531 b5ed      	IN   R30,0x2D
000532 78e0      	ANDI R30,LOW(0x80)
000533 f3e9      	BREQ _0x51
                 ;SPDR = i*3;
000534 e0a3      	LDI  R26,LOW(3)
000535 020a      	MULS R16,R26
000536 01f0      	MOVW R30,R0
000537 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x54:
000538 b5ed      	IN   R30,0x2D
000539 78e0      	ANDI R30,LOW(0x80)
00053a f3e9      	BREQ _0x54
                 ;  for(j=0; j<3; j++)
                +
00053b e020     +LDI R18 , LOW ( 0 )
00053c e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 _0x58:
                +
00053d 3023     +CPI R18 , LOW ( 3 )
00053e e0e0     +LDI R30 , HIGH ( 3 )
00053f 073e     +CPC R19 , R30
                 	__CPWRN 18,19,3
000540 f464      	BRGE _0x59
                 ;  {
                 ;SPDR = ppBufferSlice[j];
000541 01de      	MOVW R26,R28
000542 9614      	ADIW R26,4
000543 0fa2      	ADD  R26,R18
000544 1fb3      	ADC  R27,R19
000545 91ec      	LD   R30,X
000546 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0x5A:
000547 b5ed      	IN   R30,0x2D
000548 78e0      	ANDI R30,LOW(0x80)
000549 f3e9      	BREQ _0x5A
                 ;  }
                +
00054a 5f2f     +SUBI R18 , LOW ( - 1 )
00054b 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
00054c cff0      	RJMP _0x58
                 _0x59:
                 ;SPCR = 0;
00054d e0e0      	LDI  R30,LOW(0)
00054e bdec      	OUT  0x2C,R30
                 ;SPSR = 0;
00054f bded      	OUT  0x2D,R30
                 ;
                 ;CS_SRAM_SET;
000550 9a28      	SBI  0x5,0
                 ;        }
                +
000551 5f0f     +SUBI R16 , LOW ( - 1 )
000552 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000553 cfc7      	RJMP _0x4C
                 _0x4D:
                 ;}
000554 940e 3f92 	CALL __LOADLOCR4
000556 c583      	RJMP _0x20C0025
                 ; .FEND
                 ;
                 ;//*******************************************************************************************************
                 ;//	: 		 nlcd_Box(unsigned char x0, unsigned char y0, unsigned char x1, unsigned char y1, unsigned char fill, int colo ...
                 ;// 	:        x0, y0   x1, y1    ,  color
                 ;//           	 nlcd_Line(x0, y0, x1, y1, fill, color)
                 ;//	:   x:      0-131
                 ;//			     y:      0-131
                 ;//               fill:  1- , 0- 
                 ;//               color:  (12-bit . #define)
                 ;//  :		 nlcd_Box(20,30,40,50,1,RED);  //  
                 ;//*******************************************************************************************************
                 ;
                 ;void nlcd_Box(unsigned char x0, unsigned char y0, unsigned char x1, unsigned char y1, unsigned char fill, int color,int  ...
                 ;{
                 _nlcd_Box:
                 ; .FSTART _nlcd_Box
                 ;    unsigned char   xmin, xmax, ymin, ymax;
                 ;    int   i = 0,j = 0;
                 ;    unsigned char a = (color >> 4);
                 ;    unsigned char b = ((color ) << 4) | ((color >> 8) );
                 ;    unsigned char c = color;
                 ;    unsigned char ab = (colorborder >> 4);
                 ;    unsigned char bb = ((colorborder ) << 4) | ((colorborder >> 8) );
                 ;    unsigned char cb = colorborder;
                 ;    unsigned char pBufferSlice[3];
                 ;    unsigned char pBufferSliceBorder[3];
                 ;    pBufferSlice[0] = a;
000557 93ba      	ST   -Y,R27
000558 93aa      	ST   -Y,R26
000559 972e      	SBIW R28,14
00055a e0e0      	LDI  R30,LOW(0)
00055b 87ec      	STD  Y+12,R30
00055c 87ed      	STD  Y+13,R30
00055d 940e 3f89 	CALL __SAVELOCR6
                 ;	x0 -> Y+28
                 ;	y0 -> Y+27
                 ;	x1 -> Y+26
                 ;	y1 -> Y+25
                 ;	fill -> Y+24
                 ;	color -> Y+22
                 ;	colorborder -> Y+20
                 ;	xmin -> R17
                 ;	xmax -> R16
                 ;	ymin -> R19
                 ;	ymax -> R18
                 ;	i -> R20,R21
                 ;	j -> Y+18
                 ;	a -> Y+17
                 ;	b -> Y+16
                 ;	c -> Y+15
                 ;	ab -> Y+14
                 ;	bb -> Y+13
                 ;	cb -> Y+12
                 ;	pBufferSlice -> Y+9
                 ;	pBufferSliceBorder -> Y+6
                +
00055f e040     +LDI R20 , LOW ( 0 )
000560 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
000561 89ee      	LDD  R30,Y+22
000562 89ff      	LDD  R31,Y+22+1
000563 940e 3e2d 	CALL __ASRW4
000565 8be9      	STD  Y+17,R30
000566 89ee      	LDD  R30,Y+22
000567 95e2      	SWAP R30
000568 7fe0      	ANDI R30,0xF0
000569 2fae      	MOV  R26,R30
00056a 89ee      	LDD  R30,Y+22
00056b 89ff      	LDD  R31,Y+22+1
00056c 940e 3e44 	CALL __ASRW8
00056e 2bea      	OR   R30,R26
00056f 8be8      	STD  Y+16,R30
000570 89ee      	LDD  R30,Y+22
000571 87ef      	STD  Y+15,R30
000572 89ec      	LDD  R30,Y+20
000573 89fd      	LDD  R31,Y+20+1
000574 940e 3e2d 	CALL __ASRW4
000576 87ee      	STD  Y+14,R30
000577 89ec      	LDD  R30,Y+20
000578 95e2      	SWAP R30
000579 7fe0      	ANDI R30,0xF0
00057a 2fae      	MOV  R26,R30
00057b 89ec      	LDD  R30,Y+20
00057c 89fd      	LDD  R31,Y+20+1
00057d 940e 3e44 	CALL __ASRW8
00057f 2bea      	OR   R30,R26
000580 87ed      	STD  Y+13,R30
000581 89ec      	LDD  R30,Y+20
000582 87ec      	STD  Y+12,R30
000583 89e9      	LDD  R30,Y+17
000584 87e9      	STD  Y+9,R30
                 ;    pBufferSlice[1] = b;
000585 89e8      	LDD  R30,Y+16
000586 87ea      	STD  Y+10,R30
                 ;    pBufferSlice[2] = c;
000587 85ef      	LDD  R30,Y+15
000588 87eb      	STD  Y+11,R30
                 ;    pBufferSliceBorder[0] = ab;
000589 85ee      	LDD  R30,Y+14
00058a 83ee      	STD  Y+6,R30
                 ;    pBufferSliceBorder[1] = bb;
00058b 85ed      	LDD  R30,Y+13
00058c 83ef      	STD  Y+7,R30
                 ;    pBufferSliceBorder[2] = cb;
00058d 85ec      	LDD  R30,Y+12
00058e 87e8      	STD  Y+8,R30
                 ;    if (fill == FILL)                          //  ******************************************************
00058f 8da8      	LDD  R26,Y+24
000590 30a1      	CPI  R26,LOW(0x1)
000591 f009      	BREQ PC+2
000592 c067      	RJMP _0x5D
                 ;    {                                          //  *  -        *               ...
                 ;        xmin = (x0 <= x1) ? x0 : x1;          //  *                                                     *
000593 8dea      	LDD  R30,Y+26
000594 8dac      	LDD  R26,Y+28
000595 17ea      	CP   R30,R26
000596 f010      	BRLO _0x5E
000597 8dec      	LDD  R30,Y+28
000598 c001      	RJMP _0x5F
                 _0x5E:
000599 8dea      	LDD  R30,Y+26
                 _0x5F:
00059a 2f1e      	MOV  R17,R30
                 ; 		xmax = (x0 > x1) ? x0 : x1;           //  *         X  Y         *
00059b 8dea      	LDD  R30,Y+26
00059c 8dac      	LDD  R26,Y+28
00059d 17ea      	CP   R30,R26
00059e f410      	BRSH _0x61
00059f 8dec      	LDD  R30,Y+28
0005a0 c001      	RJMP _0x62
                 _0x61:
0005a1 8dea      	LDD  R30,Y+26
                 _0x62:
0005a2 2f0e      	MOV  R16,R30
                 ;		ymin = (y0 <= y1) ? y0 : y1;          //  *******************************************************
0005a3 8de9      	LDD  R30,Y+25
0005a4 8dab      	LDD  R26,Y+27
0005a5 17ea      	CP   R30,R26
0005a6 f010      	BRLO _0x64
0005a7 8deb      	LDD  R30,Y+27
0005a8 c001      	RJMP _0x65
                 _0x64:
0005a9 8de9      	LDD  R30,Y+25
                 _0x65:
0005aa 2f3e      	MOV  R19,R30
                 ;		ymax = (y0 > y1) ? y0 : y1;
0005ab 8de9      	LDD  R30,Y+25
0005ac 8dab      	LDD  R26,Y+27
0005ad 17ea      	CP   R30,R26
0005ae f410      	BRSH _0x67
0005af 8deb      	LDD  R30,Y+27
0005b0 c001      	RJMP _0x68
                 _0x67:
0005b1 8de9      	LDD  R30,Y+25
                 _0x68:
0005b2 2f2e      	MOV  R18,R30
                 ;                                              //    *****************************************************
                 ;  //   RAM
                 ;  for( i = (((ymin)*RESRAM_X + xmin)*3);i < (((ymax)*RESRAM_X + xmax + 1)*3); i+=3*(RES_X)/2)
0005b3 e4e2      	LDI  R30,LOW(66)
0005b4 9fe3      	MUL  R30,R19
0005b5 01f0      	MOVW R30,R0
0005b6 01df      	MOVW R26,R30
0005b7 27ee      	CLR  R30
0005b8 0fa1      	ADD  R26,R17
0005b9 1fbe      	ADC  R27,R30
0005ba e0e3      	LDI  R30,LOW(3)
0005bb e0f0      	LDI  R31,HIGH(3)
0005bc 940e 3e96 	CALL __MULW12
0005be 01af      	MOVW R20,R30
                 _0x6B:
0005bf e4e2      	LDI  R30,LOW(66)
0005c0 9fe2      	MUL  R30,R18
0005c1 01f0      	MOVW R30,R0
0005c2 01df      	MOVW R26,R30
0005c3 2fe0      	MOV  R30,R16
0005c4 e0f0      	LDI  R31,0
0005c5 0fea      	ADD  R30,R26
0005c6 1ffb      	ADC  R31,R27
0005c7 9631      	ADIW R30,1
0005c8 e0a3      	LDI  R26,LOW(3)
0005c9 e0b0      	LDI  R27,HIGH(3)
0005ca 940e 3e96 	CALL __MULW12
0005cc 174e      	CP   R20,R30
0005cd 075f      	CPC  R21,R31
0005ce f55c      	BRGE _0x6C
                 ;  {
                 ;     for(j = i; j < i + 3*(xmax-xmin+1);j+=3)
                +
0005cf 8b4a     +STD Y + 18 , R20
0005d0 8b5b     +STD Y + 18 + 1 , R21
                 	__PUTWSR 20,21,18
                 _0x6E:
0005d1 2fa0      	MOV  R26,R16
0005d2 27bb      	CLR  R27
0005d3 2fe1      	MOV  R30,R17
0005d4 e0f0      	LDI  R31,0
0005d5 940e 3f6a 	CALL __SWAPW12
0005d7 1bea      	SUB  R30,R26
0005d8 0bfb      	SBC  R31,R27
0005d9 9631      	ADIW R30,1
0005da e0a3      	LDI  R26,LOW(3)
0005db e0b0      	LDI  R27,HIGH(3)
0005dc 940e 3e96 	CALL __MULW12
0005de 0fe4      	ADD  R30,R20
0005df 1ff5      	ADC  R31,R21
0005e0 89aa      	LDD  R26,Y+18
0005e1 89bb      	LDD  R27,Y+18+1
0005e2 17ae      	CP   R26,R30
0005e3 07bf      	CPC  R27,R31
0005e4 f494      	BRGE _0x6F
                 ;     {
                 ;        nlcd_WritePixelBuffer(j,&pBufferSlice[0],3);
0005e5 89ea      	LDD  R30,Y+18
0005e6 89fb      	LDD  R31,Y+18+1
0005e7 93fa      	ST   -Y,R31
0005e8 93ea      	ST   -Y,R30
0005e9 01fe      	MOVW R30,R28
0005ea 963b      	ADIW R30,11
0005eb 93fa      	ST   -Y,R31
0005ec 93ea      	ST   -Y,R30
0005ed e0a3      	LDI  R26,LOW(3)
0005ee e0b0      	LDI  R27,0
0005ef 940e 043b 	CALL _nlcd_WritePixelBuffer
                 ;     }
0005f1 89ea      	LDD  R30,Y+18
0005f2 89fb      	LDD  R31,Y+18+1
0005f3 9633      	ADIW R30,3
0005f4 8bea      	STD  Y+18,R30
0005f5 8bfb      	STD  Y+18+1,R31
0005f6 cfda      	RJMP _0x6E
                 _0x6F:
                 ;  }
                +
0005f7 534a     +SUBI R20 , LOW ( - 198 )
0005f8 4f5f     +SBCI R21 , HIGH ( - 198 )
                 	__ADDWRN 20,21,198
0005f9 cfc5      	RJMP _0x6B
                 _0x6C:
                 ;
                 ;    }
                 ;    if(fill == BORDERFILL)
                 _0x5D:
0005fa 8da8      	LDD  R26,Y+24
0005fb 30a2      	CPI  R26,LOW(0x2)
0005fc f009      	BREQ PC+2
0005fd c124      	RJMP _0x70
                 ;    {
                 ;        xmin = (x0 <= x1) ? x0 : x1;
0005fe 8dea      	LDD  R30,Y+26
0005ff 8dac      	LDD  R26,Y+28
000600 17ea      	CP   R30,R26
000601 f010      	BRLO _0x71
000602 8dec      	LDD  R30,Y+28
000603 c001      	RJMP _0x72
                 _0x71:
000604 8dea      	LDD  R30,Y+26
                 _0x72:
000605 2f1e      	MOV  R17,R30
                 ; 		xmax = (x0 > x1) ? x0 : x1;
000606 8dea      	LDD  R30,Y+26
000607 8dac      	LDD  R26,Y+28
000608 17ea      	CP   R30,R26
000609 f410      	BRSH _0x74
00060a 8dec      	LDD  R30,Y+28
00060b c001      	RJMP _0x75
                 _0x74:
00060c 8dea      	LDD  R30,Y+26
                 _0x75:
00060d 2f0e      	MOV  R16,R30
                 ;		ymin = (y0 <= y1) ? y0 : y1;
00060e 8de9      	LDD  R30,Y+25
00060f 8dab      	LDD  R26,Y+27
000610 17ea      	CP   R30,R26
000611 f010      	BRLO _0x77
000612 8deb      	LDD  R30,Y+27
000613 c001      	RJMP _0x78
                 _0x77:
000614 8de9      	LDD  R30,Y+25
                 _0x78:
000615 2f3e      	MOV  R19,R30
                 ;		ymax = (y0 > y1) ? y0 : y1;
000616 8de9      	LDD  R30,Y+25
000617 8dab      	LDD  R26,Y+27
000618 17ea      	CP   R30,R26
000619 f410      	BRSH _0x7A
00061a 8deb      	LDD  R30,Y+27
00061b c001      	RJMP _0x7B
                 _0x7A:
00061c 8de9      	LDD  R30,Y+25
                 _0x7B:
00061d 2f2e      	MOV  R18,R30
                 ;        //   RAM
                 ;    for(i = (((ymin)*RESRAM_X + xmin)*3);i < (((ymin)*RESRAM_X + xmin)*3) + 3*(xmax-xmin+1);i+=3)
00061e e4e2      	LDI  R30,LOW(66)
00061f 9fe3      	MUL  R30,R19
000620 01f0      	MOVW R30,R0
000621 01df      	MOVW R26,R30
000622 27ee      	CLR  R30
000623 0fa1      	ADD  R26,R17
000624 1fbe      	ADC  R27,R30
000625 e0e3      	LDI  R30,LOW(3)
000626 e0f0      	LDI  R31,HIGH(3)
000627 940e 3e96 	CALL __MULW12
000629 01af      	MOVW R20,R30
                 _0x7E:
00062a e4e2      	LDI  R30,LOW(66)
00062b 9fe3      	MUL  R30,R19
00062c 01f0      	MOVW R30,R0
00062d 01df      	MOVW R26,R30
00062e 27ee      	CLR  R30
00062f 0fa1      	ADD  R26,R17
000630 1fbe      	ADC  R27,R30
000631 e0e3      	LDI  R30,LOW(3)
000632 e0f0      	LDI  R31,HIGH(3)
000633 940e 3e96 	CALL __MULW12
000635 01bf      	MOVW R22,R30
000636 2fa0      	MOV  R26,R16
000637 27bb      	CLR  R27
000638 2fe1      	MOV  R30,R17
000639 e0f0      	LDI  R31,0
00063a 940e 3f6a 	CALL __SWAPW12
00063c 1bea      	SUB  R30,R26
00063d 0bfb      	SBC  R31,R27
00063e 9631      	ADIW R30,1
00063f e0a3      	LDI  R26,LOW(3)
000640 e0b0      	LDI  R27,HIGH(3)
000641 940e 3e96 	CALL __MULW12
000643 0fe6      	ADD  R30,R22
000644 1ff7      	ADC  R31,R23
000645 174e      	CP   R20,R30
000646 075f      	CPC  R21,R31
000647 f46c      	BRGE _0x7F
                 ;     {
                 ;        nlcd_WritePixelBuffer(i,&pBufferSliceBorder[0],3);
000648 935a      	ST   -Y,R21
000649 934a      	ST   -Y,R20
00064a 01fe      	MOVW R30,R28
00064b 9638      	ADIW R30,8
00064c 93fa      	ST   -Y,R31
00064d 93ea      	ST   -Y,R30
00064e e0a3      	LDI  R26,LOW(3)
00064f e0b0      	LDI  R27,0
000650 940e 043b 	CALL _nlcd_WritePixelBuffer
                 ;     }
                +
000652 5f4d     +SUBI R20 , LOW ( - 3 )
000653 4f5f     +SBCI R21 , HIGH ( - 3 )
                 	__ADDWRN 20,21,3
000654 cfd5      	RJMP _0x7E
                 _0x7F:
                 ;  for( i = (((ymin)*RESRAM_X + xmin)*3) + 3*(RES_X)/2;i < (((ymax)*RESRAM_X + xmax + 1)*3)-3*(RES_X)/2; i+=3*(RES_X)/2)
000655 e4e2      	LDI  R30,LOW(66)
000656 9fe3      	MUL  R30,R19
000657 01f0      	MOVW R30,R0
000658 01df      	MOVW R26,R30
000659 27ee      	CLR  R30
00065a 0fa1      	ADD  R26,R17
00065b 1fbe      	ADC  R27,R30
00065c e0e3      	LDI  R30,LOW(3)
00065d e0f0      	LDI  R31,HIGH(3)
00065e 940e 3e96 	CALL __MULW12
000660 53ea      	SUBI R30,LOW(-198)
000661 4fff      	SBCI R31,HIGH(-198)
000662 01af      	MOVW R20,R30
                 _0x81:
000663 e4e2      	LDI  R30,LOW(66)
000664 9fe2      	MUL  R30,R18
000665 01f0      	MOVW R30,R0
000666 01df      	MOVW R26,R30
000667 2fe0      	MOV  R30,R16
000668 e0f0      	LDI  R31,0
000669 0fea      	ADD  R30,R26
00066a 1ffb      	ADC  R31,R27
00066b 9631      	ADIW R30,1
00066c e0a3      	LDI  R26,LOW(3)
00066d e0b0      	LDI  R27,HIGH(3)
00066e 940e 3e96 	CALL __MULW12
000670 5ce6      	SUBI R30,LOW(198)
000671 40f0      	SBCI R31,HIGH(198)
000672 174e      	CP   R20,R30
000673 075f      	CPC  R21,R31
000674 f00c      	BRLT PC+2
000675 c04a      	RJMP _0x82
                 ;  {
                 ;     for(j = i; j < i + 3*(xmax-xmin+1);j+=3)
                +
000676 8b4a     +STD Y + 18 , R20
000677 8b5b     +STD Y + 18 + 1 , R21
                 	__PUTWSR 20,21,18
                 _0x84:
000678 2fa0      	MOV  R26,R16
000679 27bb      	CLR  R27
00067a 2fe1      	MOV  R30,R17
00067b e0f0      	LDI  R31,0
00067c 940e 3f6a 	CALL __SWAPW12
00067e 1bea      	SUB  R30,R26
00067f 0bfb      	SBC  R31,R27
000680 9631      	ADIW R30,1
000681 e0a3      	LDI  R26,LOW(3)
000682 e0b0      	LDI  R27,HIGH(3)
000683 940e 3e96 	CALL __MULW12
000685 0fe4      	ADD  R30,R20
000686 1ff5      	ADC  R31,R21
000687 89aa      	LDD  R26,Y+18
000688 89bb      	LDD  R27,Y+18+1
000689 17ae      	CP   R26,R30
00068a 07bf      	CPC  R27,R31
00068b f58c      	BRGE _0x85
                 ;     {
                 ;        if(j == i || j == i + 3*(xmax-xmin+1) - 3)
00068c 174a      	CP   R20,R26
00068d 075b      	CPC  R21,R27
00068e f0a9      	BREQ _0x87
00068f 2fa0      	MOV  R26,R16
000690 27bb      	CLR  R27
000691 2fe1      	MOV  R30,R17
000692 e0f0      	LDI  R31,0
000693 940e 3f6a 	CALL __SWAPW12
000695 1bea      	SUB  R30,R26
000696 0bfb      	SBC  R31,R27
000697 9631      	ADIW R30,1
000698 e0a3      	LDI  R26,LOW(3)
000699 e0b0      	LDI  R27,HIGH(3)
00069a 940e 3e96 	CALL __MULW12
00069c 0fe4      	ADD  R30,R20
00069d 1ff5      	ADC  R31,R21
00069e 9733      	SBIW R30,3
00069f 89aa      	LDD  R26,Y+18
0006a0 89bb      	LDD  R27,Y+18+1
0006a1 17ea      	CP   R30,R26
0006a2 07fb      	CPC  R31,R27
0006a3 f439      	BRNE _0x86
                 _0x87:
                 ;        {
                 ;        nlcd_WritePixelBuffer(j,&pBufferSliceBorder[0],3);
0006a4 89ea      	LDD  R30,Y+18
0006a5 89fb      	LDD  R31,Y+18+1
0006a6 93fa      	ST   -Y,R31
0006a7 93ea      	ST   -Y,R30
0006a8 01fe      	MOVW R30,R28
0006a9 9638      	ADIW R30,8
0006aa c006      	RJMP _0x4D9
                 ;        }
                 ;        else
                 _0x86:
                 ;        {
                 ;        nlcd_WritePixelBuffer(j,&pBufferSlice[0],3);
0006ab 89ea      	LDD  R30,Y+18
0006ac 89fb      	LDD  R31,Y+18+1
0006ad 93fa      	ST   -Y,R31
0006ae 93ea      	ST   -Y,R30
0006af 01fe      	MOVW R30,R28
0006b0 963b      	ADIW R30,11
                 _0x4D9:
0006b1 93fa      	ST   -Y,R31
0006b2 93ea      	ST   -Y,R30
0006b3 e0a3      	LDI  R26,LOW(3)
0006b4 e0b0      	LDI  R27,0
0006b5 940e 043b 	CALL _nlcd_WritePixelBuffer
                 ;        }
                 ;     }
0006b7 89ea      	LDD  R30,Y+18
0006b8 89fb      	LDD  R31,Y+18+1
0006b9 9633      	ADIW R30,3
0006ba 8bea      	STD  Y+18,R30
0006bb 8bfb      	STD  Y+18+1,R31
0006bc cfbb      	RJMP _0x84
                 _0x85:
                 ;  }
                +
0006bd 534a     +SUBI R20 , LOW ( - 198 )
0006be 4f5f     +SBCI R21 , HIGH ( - 198 )
                 	__ADDWRN 20,21,198
0006bf cfa3      	RJMP _0x81
                 _0x82:
                 ;  for(i = (((ymin)*RESRAM_X + xmin)*3) + (ymax-ymin)*3*(RES_X)/2; i < (((ymin)*RESRAM_X + xmin)*3) + (ymax-ymin)*3*(RES_ ...
0006c0 e4e2      	LDI  R30,LOW(66)
0006c1 9fe3      	MUL  R30,R19
0006c2 01f0      	MOVW R30,R0
0006c3 01df      	MOVW R26,R30
0006c4 27ee      	CLR  R30
0006c5 0fa1      	ADD  R26,R17
0006c6 1fbe      	ADC  R27,R30
0006c7 e0e3      	LDI  R30,LOW(3)
0006c8 e0f0      	LDI  R31,HIGH(3)
0006c9 940e 3e96 	CALL __MULW12
0006cb 01bf      	MOVW R22,R30
0006cc 2fa2      	MOV  R26,R18
0006cd 27bb      	CLR  R27
0006ce 2fe3      	MOV  R30,R19
0006cf e0f0      	LDI  R31,0
0006d0 1bae      	SUB  R26,R30
0006d1 0bbf      	SBC  R27,R31
0006d2 e0e3      	LDI  R30,LOW(3)
0006d3 e0f0      	LDI  R31,HIGH(3)
0006d4 940e 3e96 	CALL __MULW12
0006d6 e8a4      	LDI  R26,LOW(132)
0006d7 e0b0      	LDI  R27,HIGH(132)
0006d8 940e 3e96 	CALL __MULW12
0006da 01df      	MOVW R26,R30
0006db e0e2      	LDI  R30,LOW(2)
0006dc e0f0      	LDI  R31,HIGH(2)
0006dd 940e 3ec1 	CALL __DIVW21
0006df 0fe6      	ADD  R30,R22
0006e0 1ff7      	ADC  R31,R23
0006e1 01af      	MOVW R20,R30
                 _0x8B:
0006e2 e4e2      	LDI  R30,LOW(66)
0006e3 9fe3      	MUL  R30,R19
0006e4 01f0      	MOVW R30,R0
0006e5 01df      	MOVW R26,R30
0006e6 27ee      	CLR  R30
0006e7 0fa1      	ADD  R26,R17
0006e8 1fbe      	ADC  R27,R30
0006e9 e0e3      	LDI  R30,LOW(3)
0006ea e0f0      	LDI  R31,HIGH(3)
0006eb 940e 3e96 	CALL __MULW12
0006ed 01bf      	MOVW R22,R30
0006ee 2fa2      	MOV  R26,R18
0006ef 27bb      	CLR  R27
0006f0 2fe3      	MOV  R30,R19
0006f1 e0f0      	LDI  R31,0
0006f2 1bae      	SUB  R26,R30
0006f3 0bbf      	SBC  R27,R31
0006f4 e0e3      	LDI  R30,LOW(3)
0006f5 e0f0      	LDI  R31,HIGH(3)
0006f6 940e 3e96 	CALL __MULW12
0006f8 e8a4      	LDI  R26,LOW(132)
0006f9 e0b0      	LDI  R27,HIGH(132)
0006fa 940e 3e96 	CALL __MULW12
0006fc 01df      	MOVW R26,R30
0006fd e0e2      	LDI  R30,LOW(2)
0006fe e0f0      	LDI  R31,HIGH(2)
0006ff 940e 3ec1 	CALL __DIVW21
                +
000701 0f6e     +ADD R22 , R30
000702 1f7f     +ADC R23 , R31
                 	__ADDWRR 22,23,30,31
000703 2fa0      	MOV  R26,R16
000704 27bb      	CLR  R27
000705 2fe1      	MOV  R30,R17
000706 e0f0      	LDI  R31,0
000707 940e 3f6a 	CALL __SWAPW12
000709 1bea      	SUB  R30,R26
00070a 0bfb      	SBC  R31,R27
00070b 9631      	ADIW R30,1
00070c e0a3      	LDI  R26,LOW(3)
00070d e0b0      	LDI  R27,HIGH(3)
00070e 940e 3e96 	CALL __MULW12
000710 0fe6      	ADD  R30,R22
000711 1ff7      	ADC  R31,R23
000712 174e      	CP   R20,R30
000713 075f      	CPC  R21,R31
000714 f46c      	BRGE _0x8C
                 ;     {
                 ;        nlcd_WritePixelBuffer(i,&pBufferSliceBorder[0],3);
000715 935a      	ST   -Y,R21
000716 934a      	ST   -Y,R20
000717 01fe      	MOVW R30,R28
000718 9638      	ADIW R30,8
000719 93fa      	ST   -Y,R31
00071a 93ea      	ST   -Y,R30
00071b e0a3      	LDI  R26,LOW(3)
00071c e0b0      	LDI  R27,0
00071d 940e 043b 	CALL _nlcd_WritePixelBuffer
                 ;     }
                +
00071f 5f4d     +SUBI R20 , LOW ( - 3 )
000720 4f5f     +SBCI R21 , HIGH ( - 3 )
                 	__ADDWRN 20,21,3
000721 cfc0      	RJMP _0x8B
                 _0x8C:
                 ;
                 ;    }
                 ;}
                 _0x70:
000722 940e 3f90 	CALL __LOADLOCR6
000724 966d      	ADIW R28,29
000725 9508      	RET
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//	: 		 nlcd_Circle(unsigned char x0, unsigned char y0, unsigned char radius, int color)
                 ;// 	:        x0, y0,     color
                 ;//           	 nlcd_Circle(x0, y0, radius, color)
                 ;//	:   x:        0-131
                 ;//			     y:        0-131
                 ;//               radius:   
                 ;//               color:  (12-bit . #define)
                 ;//  :		 nlcd_Circle(10,55,2,BLUE);
                 ;//******************************************************************************
                 ;/*void nlcd_Circle(unsigned char x0, unsigned char y0, unsigned char radius, int color)
                 ;{
                 ;    int f = 1 - radius;
                 ;	int ddF_x = 0;
                 ;    int ddF_y = -2 * radius;
                 ;    unsigned char x = 0;
                 ;    unsigned char y = radius;
                 ;
                 ;    nlcd_Pixel(x0, y0 + radius, color);
                 ;    nlcd_Pixel(x0, y0 - radius, color);
                 ;    nlcd_Pixel(x0 + radius, y0, color);
                 ;    nlcd_Pixel(x0 - radius, y0, color);
                 ;
                 ;    while (x < y)
                 ;	{
                 ;        if (f >= 0)
                 ;		{
                 ;
                 ;            y--;
                 ;            ddF_y += 2;
                 ;            f += ddF_y;
                 ;        }
                 ;
                 ;    x++;
                 ;    ddF_x += 2;
                 ;    f += ddF_x + 1;
                 ;
                 ;    nlcd_Pixel(x0 + x, y0 + y, color);
                 ;    nlcd_Pixel(x0 - x, y0 + y, color);
                 ;    nlcd_Pixel(x0 + x, y0 - y, color);
                 ;    nlcd_Pixel(x0 - x, y0 - y, color);
                 ;    nlcd_Pixel(x0 + y, y0 + x, color);
                 ;    nlcd_Pixel(x0 - y, y0 + x, color);
                 ;    nlcd_Pixel(x0 + y, y0 - x, color);
                 ;    nlcd_Pixel(x0 - y, y0 - x, color);
                 ;
                 ;    }
                 ;}      */
                 ;
                 ;//******************************************************************************
                 ;//	: 		nlcd_Char(char c, unsigned char x, unsigned char y, int fColor, int bColor)
                 ;// 	:
                 ;//	:
                 ;//  :
                 ;//******************************************************************************
                 ;void nlcd_Char(char c, unsigned char y, unsigned char x, int fColor, int bColor)
                 ;{
                 _nlcd_Char:
                 ; .FSTART _nlcd_Char
                 ;   int    i;
                 ;   int    j;
                 ;   unsigned char   nCols;
                 ;   unsigned char  nRows;
                 ;   unsigned char  nBytes;
                 ;   unsigned char   PixelRow;
                 ;   unsigned char   Mask;
                 ;   unsigned int   Word0, Word1;
                 ;   unsigned char *pFont,   *pChar;
                 ;   unsigned char a;
                 ;    unsigned char b;
                 ;    unsigned char d;
                 ;    unsigned char pBufferSlice[3];
                 ;
                 ;   pFont = (unsigned char *)Nokia6610_fnt8x8;
000726 93ba      	ST   -Y,R27
000727 93aa      	ST   -Y,R26
000728 9761      	SBIW R28,17
000729 940e 3f89 	CALL __SAVELOCR6
                 ;	c -> Y+29
                 ;	y -> Y+28
                 ;	x -> Y+27
                 ;	fColor -> Y+25
                 ;	bColor -> Y+23
                 ;	i -> R16,R17
                 ;	j -> R18,R19
                 ;	nCols -> R21
                 ;	nRows -> R20
                 ;	nBytes -> Y+22
                 ;	PixelRow -> Y+21
                 ;	Mask -> Y+20
                 ;	Word0 -> Y+18
                 ;	Word1 -> Y+16
                 ;	*pFont -> Y+14
                 ;	*pChar -> Y+12
                 ;	a -> Y+11
                 ;	b -> Y+10
                 ;	d -> Y+9
                 ;	pBufferSlice -> Y+6
00072b e6e8      	LDI  R30,LOW(_Nokia6610_fnt8x8*2)
00072c e0f0      	LDI  R31,HIGH(_Nokia6610_fnt8x8*2)
00072d 87ee      	STD  Y+14,R30
00072e 87ff      	STD  Y+14+1,R31
                 ;
                 ;   nCols = pgm_read_byte(pFont);
00072f 9154      	LPM  R21,Z
                 ;
                 ;   nRows = pgm_read_byte(pFont + 1);
000730 9631      	ADIW R30,1
000731 9144      	LPM  R20,Z
                 ;
                 ;   nBytes = pgm_read_byte(pFont + 2);
000732 85ee      	LDD  R30,Y+14
000733 85ff      	LDD  R31,Y+14+1
000734 9632      	ADIW R30,2
000735 9004      	LPM  R0,Z
000736 8a0e      	STD  Y+22,R0
                 ;
                 ;   pChar = pFont + (nBytes * (c - 0x1F));
000737 89ae      	LDD  R26,Y+22
000738 27bb      	CLR  R27
000739 8ded      	LDD  R30,Y+29
00073a e0f0      	LDI  R31,0
00073b 977f      	SBIW R30,31
00073c 940e 3e96 	CALL __MULW12
00073e 85ae      	LDD  R26,Y+14
00073f 85bf      	LDD  R27,Y+14+1
000740 0fea      	ADD  R30,R26
000741 1ffb      	ADC  R31,R27
000742 87ec      	STD  Y+12,R30
000743 87fd      	STD  Y+12+1,R31
                 ;
                 ;   for (i = 0; i<nRows; i++) // for 2x2 Box-Pixels !!!
                +
000744 e000     +LDI R16 , LOW ( 0 )
000745 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x8E:
000746 2fe4      	MOV  R30,R20
000747 01d8      	MOVW R26,R16
000748 e0f0      	LDI  R31,0
000749 17ae      	CP   R26,R30
00074a 07bf      	CPC  R27,R31
00074b f00c      	BRLT PC+2
00074c c06f      	RJMP _0x8F
                 ;   {
                 ;      PixelRow = pgm_read_byte(pChar++);
00074d 85ec      	LDD  R30,Y+12
00074e 85fd      	LDD  R31,Y+12+1
00074f 9005      	LPM  R0,Z+
000750 87ec      	STD  Y+12,R30
000751 87fd      	STD  Y+12+1,R31
000752 8a0d      	STD  Y+21,R0
                 ;      Mask = 0x80;
000753 e8e0      	LDI  R30,LOW(128)
000754 8bec      	STD  Y+20,R30
                 ;      for (j = 0; j < nCols/2; j++)
                +
000755 e020     +LDI R18 , LOW ( 0 )
000756 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 _0x91:
000757 2fa5      	MOV  R26,R21
000758 e0b0      	LDI  R27,0
000759 e0e2      	LDI  R30,LOW(2)
00075a e0f0      	LDI  R31,HIGH(2)
00075b 940e 3ec1 	CALL __DIVW21
00075d 172e      	CP   R18,R30
00075e 073f      	CPC  R19,R31
00075f f00c      	BRLT PC+2
000760 c058      	RJMP _0x92
                 ;	  {
                 ;         if ((PixelRow & Mask) == 0)
000761 89ec      	LDD  R30,Y+20
000762 89ad      	LDD  R26,Y+21
000763 23ea      	AND  R30,R26
000764 f419      	BRNE _0x93
                 ;         Word0 = bColor;
000765 89ef      	LDD  R30,Y+23
000766 8df8      	LDD  R31,Y+23+1
000767 c002      	RJMP _0x4DA
                 ;         else
                 _0x93:
                 ;         Word0 = fColor;
000768 8de9      	LDD  R30,Y+25
000769 8dfa      	LDD  R31,Y+25+1
                 _0x4DA:
00076a 8bea      	STD  Y+18,R30
00076b 8bfb      	STD  Y+18+1,R31
                 ;         Mask = Mask >> 1;
00076c 89ec      	LDD  R30,Y+20
00076d 95e6      	LSR  R30
00076e 8bec      	STD  Y+20,R30
                 ;         if ((PixelRow & Mask) == 0)
00076f 89ad      	LDD  R26,Y+21
000770 23ea      	AND  R30,R26
000771 f419      	BRNE _0x95
                 ;         Word1 = bColor;
000772 89ef      	LDD  R30,Y+23
000773 8df8      	LDD  R31,Y+23+1
000774 c002      	RJMP _0x4DB
                 ;         else
                 _0x95:
                 ;         Word1 = fColor;
000775 8de9      	LDD  R30,Y+25
000776 8dfa      	LDD  R31,Y+25+1
                 _0x4DB:
000777 8be8      	STD  Y+16,R30
000778 8bf9      	STD  Y+16+1,R31
                 ;    a = (Word0 >> 4);
000779 89ea      	LDD  R30,Y+18
00077a 89fb      	LDD  R31,Y+18+1
00077b 940e 3e36 	CALL __LSRW4
00077d 87eb      	STD  Y+11,R30
                 ;    b = ((Word0 ) << 4) | ((Word1 >> 8) );
00077e 89ea      	LDD  R30,Y+18
00077f 95e2      	SWAP R30
000780 7fe0      	ANDI R30,0xF0
000781 2fae      	MOV  R26,R30
000782 89e9      	LDD  R30,Y+17
000783 70f0      	ANDI R31,HIGH(0x0)
000784 2bea      	OR   R30,R26
000785 87ea      	STD  Y+10,R30
                 ;    d = Word1;
000786 89e8      	LDD  R30,Y+16
000787 87e9      	STD  Y+9,R30
                 ;    pBufferSlice[0] = a;
000788 85eb      	LDD  R30,Y+11
000789 83ee      	STD  Y+6,R30
                 ;    pBufferSlice[1] = b;
00078a 85ea      	LDD  R30,Y+10
00078b 83ef      	STD  Y+7,R30
                 ;    pBufferSlice[2] = d;
00078c 85e9      	LDD  R30,Y+9
00078d 87e8      	STD  Y+8,R30
                 ;  //   RAM
                 ;   nlcd_WritePixelBuffer(((y+i)*3*(RESRAM_X) + 3*(j + x/2)),&pBufferSlice[0],3);
00078e 8dec      	LDD  R30,Y+28
00078f e0f0      	LDI  R31,0
000790 0fe0      	ADD  R30,R16
000791 1ff1      	ADC  R31,R17
000792 e0a3      	LDI  R26,LOW(3)
000793 e0b0      	LDI  R27,HIGH(3)
000794 940e 3e96 	CALL __MULW12
000796 e4a2      	LDI  R26,LOW(66)
000797 e0b0      	LDI  R27,HIGH(66)
000798 940e 3e96 	CALL __MULW12
00079a 01bf      	MOVW R22,R30
00079b 8dab      	LDD  R26,Y+27
00079c e0b0      	LDI  R27,0
00079d e0e2      	LDI  R30,LOW(2)
00079e e0f0      	LDI  R31,HIGH(2)
00079f 940e 3ec1 	CALL __DIVW21
0007a1 0fe2      	ADD  R30,R18
0007a2 1ff3      	ADC  R31,R19
0007a3 e0a3      	LDI  R26,LOW(3)
0007a4 e0b0      	LDI  R27,HIGH(3)
0007a5 940e 3e96 	CALL __MULW12
0007a7 0fe6      	ADD  R30,R22
0007a8 1ff7      	ADC  R31,R23
0007a9 93fa      	ST   -Y,R31
0007aa 93ea      	ST   -Y,R30
0007ab 01fe      	MOVW R30,R28
0007ac 9638      	ADIW R30,8
0007ad 93fa      	ST   -Y,R31
0007ae 93ea      	ST   -Y,R30
0007af e0a3      	LDI  R26,LOW(3)
0007b0 e0b0      	LDI  R27,0
0007b1 940e 043b 	CALL _nlcd_WritePixelBuffer
                 ;         Mask = Mask >> 1;
0007b3 89ec      	LDD  R30,Y+20
0007b4 95e6      	LSR  R30
0007b5 8bec      	STD  Y+20,R30
                 ;      }
                +
0007b6 5f2f     +SUBI R18 , LOW ( - 1 )
0007b7 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0007b8 cf9e      	RJMP _0x91
                 _0x92:
                 ;   }
                +
0007b9 5f0f     +SUBI R16 , LOW ( - 1 )
0007ba 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0007bb cf8a      	RJMP _0x8E
                 _0x8F:
                 ;}
0007bc 940e 3f90 	CALL __LOADLOCR6
0007be 966e      	ADIW R28,30
0007bf 9508      	RET
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//	: 		nlcd_String(char *pString, unsigned char x, unsigned char  y,  int fColor, int bColor)
                 ;// 	:
                 ;//	:  x:        0-131
                 ;//			    y:        0-131
                 ;//              fColor:   (12-bit . #define)
                 ;//              bColor:   (12-bit . #define)
                 ;//  :		nlcd_String("Hello",40,12,WHITE,BLACK);
                 ;//******************************************************************************
                 ;void nlcd_String(char *pString, unsigned char x, unsigned char  y,  int fColor, int bColor)
                 ;{
                 _nlcd_String:
                 ; .FSTART _nlcd_String
                 ;   while (*pString != 0x00)
0007c0 93ba      	ST   -Y,R27
0007c1 93aa      	ST   -Y,R26
                 ;	*pString -> Y+6
                 ;	x -> Y+5
                 ;	y -> Y+4
                 ;	fColor -> Y+2
                 ;	bColor -> Y+0
                 _0x97:
0007c2 81ae      	LDD  R26,Y+6
0007c3 81bf      	LDD  R27,Y+6+1
0007c4 91ec      	LD   R30,X
0007c5 30e0      	CPI  R30,0
0007c6 f0a9      	BREQ _0x99
                 ;   {
                 ;      nlcd_Char(*pString++, x, y, fColor, bColor);
0007c7 91ed      	LD   R30,X+
0007c8 83ae      	STD  Y+6,R26
0007c9 83bf      	STD  Y+6+1,R27
0007ca 93ea      	ST   -Y,R30
0007cb 81ee      	LDD  R30,Y+6
0007cc 93ea      	ST   -Y,R30
0007cd 81ee      	LDD  R30,Y+6
0007ce 93ea      	ST   -Y,R30
0007cf 81ed      	LDD  R30,Y+5
0007d0 81fe      	LDD  R31,Y+5+1
0007d1 93fa      	ST   -Y,R31
0007d2 93ea      	ST   -Y,R30
0007d3 81ad      	LDD  R26,Y+5
0007d4 81be      	LDD  R27,Y+5+1
0007d5 df50      	RCALL _nlcd_Char
                 ;      y=y+8;
0007d6 81ec      	LDD  R30,Y+4
0007d7 5fe8      	SUBI R30,-LOW(8)
0007d8 83ec      	STD  Y+4,R30
                 ;      if (x > 131) break;
0007d9 81ad      	LDD  R26,Y+5
0007da 38a4      	CPI  R26,LOW(0x84)
0007db f330      	BRLO _0x97
                 ;   }
                 _0x99:
                 ;}
                 _0x20C002B:
0007dc 9628      	ADIW R28,8
0007dd 9508      	RET
                 ; .FEND
                 ;
                 ;#include "FatFS/mmc.c"
                 ;/*-----------------------------------------------------------------------*/
                 ;/* MMCv3/SDv1/SDv2 (in SPI mode) control module                          */
                 ;/*-----------------------------------------------------------------------*/
                 ;/*
                 ;/  Copyright (C) 2014, ChaN, all right reserved.
                 ;/
                 ;/ * This software is a free software and there is NO WARRANTY.
                 ;/ * No restriction on use. You can use, modify and redistribute it for
                 ;/   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
                 ;/ * Redistributions of source code must retain the above copyright notice.
                 ;/
                 ;/-------------------------------------------------------------------------*/
                 ;
                 ;#include <io.h>
                 ;#include "diskio.h"
                 ;#include "spi_2.c"
                 ;//***************************************************************************
                 ;//
                 ;//  Author(s)...: Pashgan    http://ChipEnable.Ru
                 ;//
                 ;//  Target(s)...: Mega
                 ;//
                 ;//  Compiler....:
                 ;//
                 ;//  Description.:  SPI
                 ;//
                 ;//  Data........: 26.07.13
                 ;//
                 ;//***************************************************************************
                 ;#include "spi_2.h"
                 ;	data -> Y+0
                 ;
                 ;
                 ;/* SPI*/
                 ;void SPI_Init(BYTE hs)
                 ;{
                 _SPI_Init:
                 ; .FSTART _SPI_Init
                 ;  /*  -
                 ;   ,  MISO */
                 ;// SPI_DDRXX |= (1<<SPI_MOSI)|(1<<SPI_SCK);
                 ; // SPI_DDRXX &= ~(1<<SPI_MISO);
                 ; SPI_DDRX |= (1<<SPI_SS);
0007de 93aa      	ST   -Y,R26
                 ;	hs -> Y+0
0007df 9a3b      	SBI  0x7,3
                 ;
                 ; // SPI_PORTXX |= (1<<SPI_MOSI)|(1<<SPI_SCK)|(1<<SPI_MISO);
                 ;  SPI_PORTX |= (1<<SPI_SS);
0007e0 9a43      	SBI  0x8,3
                 ;
                 ;  /* spi,  ,,  0*/
                 ; if(!hs)
0007e1 81e8      	LD   R30,Y
0007e2 30e0      	CPI  R30,0
0007e3 f421      	BRNE _0xA2
                 ; {
                 ; SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(1<<SPR0);
0007e4 e5e1      	LDI  R30,LOW(81)
0007e5 bdec      	OUT  0x2C,R30
                 ; SPSR = (0<<SPI2X);
0007e6 e0e0      	LDI  R30,LOW(0)
0007e7 c003      	RJMP _0x4DC
                 ; }
                 ; else
                 _0xA2:
                 ; {
                 ; SPCR = (0<<SPIE)|(1<<SPE)|(0<<DORD)|(1<<MSTR)|(0<<CPOL)|(0<<CPHA)|(0<<SPR1)|(0<<SPR0);
0007e8 e5e0      	LDI  R30,LOW(80)
0007e9 bdec      	OUT  0x2C,R30
                 ; SPSR = (1<<SPI2X);
0007ea e0e1      	LDI  R30,LOW(1)
                 _0x4DC:
0007eb bded      	OUT  0x2D,R30
                 ; }
                 ;}
0007ec c208      	RJMP _0x20C0026
                 ; .FEND
                 ;
                 ;void SPI_Release(void)
                 ;{
                 _SPI_Release:
                 ; .FSTART _SPI_Release
                 ;  SPCR = 0;
0007ed e0e0      	LDI  R30,LOW(0)
0007ee bdec      	OUT  0x2C,R30
                 ;  SPSR = 0;
0007ef bded      	OUT  0x2D,R30
                 ;}
0007f0 9508      	RET
                 ; .FEND
                 ;
                 ;/*    SPI*/
                 ;void SPI_WriteByte(uint8_t data)
                 ;{
                 ;   SPDR = data;
                 ;	data -> Y+0
                 ;   while(!(SPSR & (1<<SPIF)));
                 ;}
                 ;
                 ;/*    SPI*/
                 ;uint8_t SPI_ReadByte(void)
                 ;{
                 ;   SPDR = 0xff;
                 ;   while(!(SPSR & (1<<SPIF)));
                 ;   return SPDR;
                 ;}
                 ;
                 ;/*      SPI*/
                 ;uint8_t SPI_WriteReadByte(uint8_t data)
                 ;{
                 ;   SPDR = data;
                 ;	data -> Y+0
                 ;   while(!(SPSR & (1<<SPIF)));
                 ;   return SPDR;
                 ;}
                 ;
                 ;/*     SPI*/
                 ;void SPI_WriteArray(uint8_t num, uint8_t *data)
                 ;{
                 ;   while(num--){
                 ;	num -> Y+2
                 ;	*data -> Y+0
                 ;      SPDR = *data++;
                 ;      while(!(SPSR & (1<<SPIF)));
                 ;   }
                 ;}
                 ;
                 ;/*       SPI*/
                 ;void SPI_WriteReadArray(uint8_t num, uint8_t *data)
                 ;{
                 ;   while(num--){
                 ;	num -> Y+2
                 ;	*data -> Y+0
                 ;      SPDR = *data;
                 ;      while(!(SPSR & (1<<SPIF)));
                 ;      *data++ = SPDR;
                 ;   }
                 ;}
                 ;
                 ;#define CT_MMC				0x01	/* MMC ver 3 */
                 ;#define CT_SD1				0x02	/* SD ver 1 */
                 ;#define CT_SD2				0x04	/* SD ver 2 */
                 ;#define CT_SDC				(CT_SD1|CT_SD2)	/* SD */
                 ;#define CT_BLOCK			0x08	/* Block addressing */
                 ;
                 ;
                 ;/* Port controls  (Platform dependent) */
                 ;#define CS_LOW()	SPI_EnableSS_m(SPI_SS)		/* CS=low */
                 ;#define	CS_HIGH()	SPI_DisableSS_m(SPI_SS)			/* CS=high */
                 ;//#define MMC_CD		(!(PINB & 0x10))	/* Card detected.   yes:true, no:false, default:true */
                 ;//#define MMC_WP		(PINB & 0x20)		/* Write protected. yes:true, no:false, default:false */
                 ;#define	FCLK_SLOW()	SPCR = 0x52		/* Set slow clock (F_CPU / 64) */
                 ;#define	FCLK_FAST()	SPCR = 0x50		/* Set fast clock (F_CPU / 2) */
                 ;#define	FCLK_STOP()	SPCR = 0		/* Set fast clock (F_CPU / 2) */
                 ;
                 ;#define SELECT()	SPI_EnableSS_m(SPI_SS)	/* CS = L */
                 ;#define DESELECT()	SPI_DisableSS_m(SPI_SS)	/* CS = H */
                 ;#define MMC_SEL	    SPI_StatSS_m(SPI_SS)   	/* CS status (true:CS == L) */
                 ;#define FORWARD(d)	         		/* Data forwarding function (Console out in this example) */
                 ;
                 ;#define init_spi(hs)  SPI_Init(hs)    	/* Initialize SPI port (usi.S) */
                 ;#define release_spi() SPI_Release()
                 ;#define dly_100us() delay_us(100)	/* Delay 100 microseconds (usi.S) */
                 ;#define xmit_spi(d) SPI_WriteByte_m(d) /* Send a byte to the MMC (usi.S) */
                 ;#define rcv_spi()	SPI_ReadByte_i()   /* Send a 0xFF to the MMC and get the received byte (usi.S) */
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Module Private Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;/* Definitions for MMC/SDC command */
                 ;#define CMD0	(0x40+0)			/* GO_IDLE_STATE */
                 ;#define CMD1	(0x40+1)			/* SEND_OP_COND (MMC) */
                 ;#define	ACMD41	(0x40+0x80+41)	/* SEND_OP_COND (SDC) */
                 ;#define CMD8	(0x40+8)			/* SEND_IF_COND */
                 ;#define CMD9	(0x40+9)			/* SEND_CSD */
                 ;#define CMD10	(0x40+10)		/* SEND_CID */
                 ;#define CMD12	(0x40+12)		/* STOP_TRANSMISSION */
                 ;#define ACMD13	(0x40+0x80+13)	/* SD_STATUS (SDC) */
                 ;#define CMD16	(0x40+16)		/* SET_BLOCKLEN */
                 ;#define CMD17	(0x40+17)		/* READ_SINGLE_BLOCK */
                 ;#define CMD18	(0x40+18)		/* READ_MULTIPLE_BLOCK */
                 ;#define CMD23	(0x40+23)		/* SET_BLOCK_COUNT (MMC) */
                 ;#define	ACMD23	(0x40+0x80+23)	/* SET_WR_BLK_ERASE_COUNT (SDC) */
                 ;#define CMD24	(0x40+24)		/* WRITE_BLOCK */
                 ;#define CMD25	(0x40+25)		/* WRITE_MULTIPLE_BLOCK */
                 ;#define CMD32	(0x40+32)		/* ERASE_ER_BLK_START */
                 ;#define CMD33	(0x40+33)		/* ERASE_ER_BLK_END */
                 ;#define CMD38	(0x40+38)		/* ERASE */
                 ;#define CMD55	(0x40+55)		/* APP_CMD */
                 ;#define CMD58	(0x40+58)		/* READ_OCR */
                 ;
                 ;
                 ;static volatile
                 ;DSTATUS Stat = STA_NOINIT;	/* Disk status */
                 
                 	.DSEG
                 ;
                 ;static volatile
                 ;BYTE Timer1, Timer2;	/* 100Hz decrement timer */
                 ;
                 ;static
                 ;BYTE CardType;			/* Card type flags */
                 ;
                 ;
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Transmit/Receive data from/to MMC via SPI  (Platform dependent)       */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;/* Exchange a byte */
                 ;static
                 ;BYTE xchg_spi (		/* Returns received data */
                 ;	BYTE dat		/* Data to be sent */
                 ;)
                 ;{
                 
                 	.CSEG
                 _xchg_spi_G000:
                 ; .FSTART _xchg_spi_G000
                 ;	SPDR = dat;
0007f1 93aa      	ST   -Y,R26
                 ;	dat -> Y+0
0007f2 81e8      	LD   R30,Y
0007f3 bdee      	OUT  0x2E,R30
                 ;while(!(SPSR & (1<<SPIF)));
                 _0xBA:
0007f4 b5ed      	IN   R30,0x2D
0007f5 78e0      	ANDI R30,LOW(0x80)
0007f6 f3e9      	BREQ _0xBA
                 ;	return SPDR;
0007f7 b5ee      	IN   R30,0x2E
0007f8 c1fc      	RJMP _0x20C0026
                 ;}
                 ; .FEND
                 ;
                 ;/* Send a data block fast */
                 ;static
                 ;void xmit_spi_multi (
                 ;	const BYTE *p,	/* Data block to be sent */
                 ;	UINT cnt		/* Size of data block (must be multiple of 2) */
                 ;)
                 ;{
                 _xmit_spi_multi_G000:
                 ; .FSTART _xmit_spi_multi_G000
                 ;	do {
0007f9 93ba      	ST   -Y,R27
0007fa 93aa      	ST   -Y,R26
                 ;	*p -> Y+2
                 ;	cnt -> Y+0
                 _0xBE:
                 ;		SPDR = *p++; while(!(SPSR & (1<<SPIF)));
0007fb 81aa      	LDD  R26,Y+2
0007fc 81bb      	LDD  R27,Y+2+1
0007fd 91ed      	LD   R30,X+
0007fe 83aa      	STD  Y+2,R26
0007ff 83bb      	STD  Y+2+1,R27
000800 bdee      	OUT  0x2E,R30
                 _0xC0:
000801 b5ed      	IN   R30,0x2D
000802 78e0      	ANDI R30,LOW(0x80)
000803 f3e9      	BREQ _0xC0
                 ;		SPDR = *p++; while(!(SPSR & (1<<SPIF)));
000804 81aa      	LDD  R26,Y+2
000805 81bb      	LDD  R27,Y+2+1
000806 91ed      	LD   R30,X+
000807 83aa      	STD  Y+2,R26
000808 83bb      	STD  Y+2+1,R27
000809 bdee      	OUT  0x2E,R30
                 _0xC3:
00080a b5ed      	IN   R30,0x2D
00080b 78e0      	ANDI R30,LOW(0x80)
00080c f3e9      	BREQ _0xC3
                 ;	} while (cnt -= 2);
00080d 81e8      	LD   R30,Y
00080e 81f9      	LDD  R31,Y+1
00080f 9732      	SBIW R30,2
000810 83e8      	ST   Y,R30
000811 83f9      	STD  Y+1,R31
000812 f741      	BRNE _0xBE
                 ;}
000813 c5e0      	RJMP _0x20C0022
                 ; .FEND
                 ;
                 ;/* Receive a data block fast */
                 ;static
                 ;void rcvr_spi_multi (
                 ;	BYTE *p,	/* Data buffer */
                 ;	UINT cnt	/* Size of data block (must be multiple of 2) */
                 ;)
                 ;{
                 _rcvr_spi_multi_G000:
                 ; .FSTART _rcvr_spi_multi_G000
                 ;	do {
000814 93ba      	ST   -Y,R27
000815 93aa      	ST   -Y,R26
                 ;	*p -> Y+2
                 ;	cnt -> Y+0
                 _0xC7:
                 ;		SPDR = 0xFF; while(!(SPSR & (1<<SPIF))); *p++ = SPDR;
000816 efef      	LDI  R30,LOW(255)
000817 bdee      	OUT  0x2E,R30
                 _0xC9:
000818 b5ed      	IN   R30,0x2D
000819 78e0      	ANDI R30,LOW(0x80)
00081a f3e9      	BREQ _0xC9
00081b 81aa      	LDD  R26,Y+2
00081c 81bb      	LDD  R27,Y+2+1
00081d 9611      	ADIW R26,1
00081e 83aa      	STD  Y+2,R26
00081f 83bb      	STD  Y+2+1,R27
000820 9711      	SBIW R26,1
000821 b5ee      	IN   R30,0x2E
000822 93ec      	ST   X,R30
                 ;		SPDR = 0xFF; while(!(SPSR & (1<<SPIF))); *p++ = SPDR;
000823 efef      	LDI  R30,LOW(255)
000824 bdee      	OUT  0x2E,R30
                 _0xCC:
000825 b5ed      	IN   R30,0x2D
000826 78e0      	ANDI R30,LOW(0x80)
000827 f3e9      	BREQ _0xCC
000828 81aa      	LDD  R26,Y+2
000829 81bb      	LDD  R27,Y+2+1
00082a 9611      	ADIW R26,1
00082b 83aa      	STD  Y+2,R26
00082c 83bb      	STD  Y+2+1,R27
00082d 9711      	SBIW R26,1
00082e b5ee      	IN   R30,0x2E
00082f 93ec      	ST   X,R30
                 ;	} while (cnt -= 2);
000830 81e8      	LD   R30,Y
000831 81f9      	LDD  R31,Y+1
000832 9732      	SBIW R30,2
000833 83e8      	ST   Y,R30
000834 83f9      	STD  Y+1,R31
000835 f701      	BRNE _0xC7
                 ;}
000836 c5bd      	RJMP _0x20C0022
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Wait for card ready                                                   */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;int wait_ready (	/* 1:Ready, 0:Timeout */
                 ;	UINT wt			/* Timeout [ms] */
                 ;)
                 ;{
                 _wait_ready_G000:
                 ; .FSTART _wait_ready_G000
                 ;	BYTE d;
                 ;
                 ;
                 ;	WORD n = wt;
                 ;	do
000837 93ba      	ST   -Y,R27
000838 93aa      	ST   -Y,R26
000839 940e 3f8b 	CALL __SAVELOCR4
                 ;	wt -> Y+4
                 ;	d -> R17
                 ;	n -> R18,R19
                +
00083b 812c     +LDD R18 , Y + 4
00083c 813d     +LDD R19 , Y + 4 + 1
                 	__GETWRS 18,19,4
                 _0xD0:
                 ;    {
                 ;	    d = xchg_spi(0xFF);
00083d efaf      	LDI  R26,LOW(255)
00083e dfb2      	RCALL _xchg_spi_G000
00083f 2f1e      	MOV  R17,R30
                 ;    }
                 ;	while (d != 0xFF && --wt);
000840 3f1f      	CPI  R17,255
000841 f031      	BREQ _0xD2
000842 81ec      	LDD  R30,Y+4
000843 81fd      	LDD  R31,Y+4+1
000844 9731      	SBIW R30,1
000845 83ec      	STD  Y+4,R30
000846 83fd      	STD  Y+4+1,R31
000847 f409      	BRNE _0xD3
                 _0xD2:
000848 c001      	RJMP _0xD1
                 _0xD3:
000849 cff3      	RJMP _0xD0
                 _0xD1:
                 ;
                 ;	return (d == 0xFF) ? 1 : 0;
00084a 2fa1      	MOV  R26,R17
00084b e0b0      	LDI  R27,0
00084c 3faf      	CPI  R26,LOW(0xFF)
00084d e0e0      	LDI  R30,HIGH(0xFF)
00084e 07be      	CPC  R27,R30
00084f f419      	BRNE _0xD4
000850 e0e1      	LDI  R30,LOW(1)
000851 e0f0      	LDI  R31,HIGH(1)
000852 c002      	RJMP _0xD5
                 _0xD4:
000853 e0e0      	LDI  R30,LOW(0)
000854 e0f0      	LDI  R31,HIGH(0)
                 _0xD5:
000855 940e 3f92 	CALL __LOADLOCR4
000857 9626      	ADIW R28,6
000858 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Deselect the card and release SPI bus                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;void deselect (void)
                 ;{
                 _deselect_G000:
                 ; .FSTART _deselect_G000
                 ;	CS_HIGH();
000859 9a43      	SBI  0x8,3
                 ;	xchg_spi(0xFF);
00085a efaf      	LDI  R26,LOW(255)
00085b df95      	RCALL _xchg_spi_G000
                 ;}
00085c 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Select the card and wait for ready                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;int select (void)	/* 1:Successful, 0:Timeout */
                 ;{
                 _select_G000:
                 ; .FSTART _select_G000
                 ;	CS_LOW();		/* Set CS# low */
00085d 9843      	CBI  0x8,3
                 ;	xchg_spi(0xFF);	/* Dummy clock (force DO enabled) */
00085e efaf      	LDI  R26,LOW(255)
00085f df91      	RCALL _xchg_spi_G000
                 ;    delay_ms(10);
000860 e0aa      	LDI  R26,LOW(10)
000861 e0b0      	LDI  R27,0
000862 940e 3c19 	CALL _delay_ms
                 ;    wait_ready(500);
000864 efa4      	LDI  R26,LOW(500)
000865 e0b1      	LDI  R27,HIGH(500)
000866 dfd0      	RCALL _wait_ready_G000
                 ;     return 1;	/* Wait for card ready */
000867 e0e1      	LDI  R30,LOW(1)
000868 e0f0      	LDI  R31,HIGH(1)
000869 9508      	RET
                 ;   // PORTD.0 = 1;
                 ;	deselect();
00086a dfee      	RCALL _deselect_G000
                 ;	return 0;	/* Timeout */
00086b e0e0      	LDI  R30,LOW(0)
00086c e0f0      	LDI  R31,HIGH(0)
00086d 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Receive a data packet from MMC                                        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;int rcvr_datablock (
                 ;	BYTE *buff,			/* Data buffer to store received data */
                 ;	UINT btr			/* Byte count (must be multiple of 4) */
                 ;)
                 ;{
                 _rcvr_datablock_G000:
                 ; .FSTART _rcvr_datablock_G000
                 ;	BYTE token;
                 ;    WORD n = 20;
                 ;  //  release_spi();
                 ;  //  init_spi(1);
                 ;
                 ;	do {							/* Wait for data packet in timeout of 200ms */
00086e 93ba      	ST   -Y,R27
00086f 93aa      	ST   -Y,R26
000870 940e 3f8b 	CALL __SAVELOCR4
                 ;	*buff -> Y+6
                 ;	btr -> Y+4
                 ;	token -> R17
                 ;	n -> R18,R19
                +
000872 e124     +LDI R18 , LOW ( 20 )
000873 e030     +LDI R19 , HIGH ( 20 )
                 	__GETWRN 18,19,20
                 _0xD8:
                 ;		token = rcv_spi();
000874 efef      	LDI  R30,LOW(255)
000875 bdee      	OUT  0x2E,R30
                 _0x401109F:
000876 b5ed      	IN   R30,0x2D
000877 78e0      	ANDI R30,LOW(0x80)
000878 f3e9      	BREQ _0x401109F
000879 b5ee      	IN   R30,0x2E
00087a 2f1e      	MOV  R17,R30
                 ;        sprintf(terror,"error: %x",token);
00087b ebe3      	LDI  R30,LOW(_terror)
00087c e0f6      	LDI  R31,HIGH(_terror)
00087d 93fa      	ST   -Y,R31
00087e 93ea      	ST   -Y,R30
                +
00087f e1e4     +LDI R30 , LOW ( 2 * _0x0 + ( 0 ) )
000880 e0f4     +LDI R31 , HIGH ( 2 * _0x0 + ( 0 ) )
                 	__POINTW1FN _0x0,0
000881 93fa      	ST   -Y,R31
000882 93ea      	ST   -Y,R30
000883 2fe1      	MOV  R30,R17
000884 27ff      	CLR  R31
000885 2766      	CLR  R22
000886 2777      	CLR  R23
000887 940e 3f5a 	CALL __PUTPARD1
000889 e084      	LDI  R24,4
00088a 940e 3997 	CALL _sprintf
00088c 9628      	ADIW R28,8
                 ;	} while ((token == 0xFF) && --n);
00088d 3f1f      	CPI  R17,255
00088e f419      	BRNE _0xDA
                +
00088f 5021     +SUBI R18 , LOW ( 1 )
000890 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
000891 f409      	BRNE _0xDB
                 _0xDA:
000892 c001      	RJMP _0xD9
                 _0xDB:
000893 cfe0      	RJMP _0xD8
                 _0xD9:
                 ;	if (token != 0xFE) return 0;	/* If not valid data token, retutn with error */
000894 3f1e      	CPI  R17,254
000895 f029      	BREQ _0xDC
000896 e0e0      	LDI  R30,LOW(0)
000897 e0f0      	LDI  R31,HIGH(0)
000898 940e 3f92 	CALL __LOADLOCR4
00089a c5d6      	RJMP _0x20C0021
                 ;
                 ;	rcvr_spi_multi(buff, btr);		/* Receive the data block into buffer */
                 _0xDC:
00089b 81ee      	LDD  R30,Y+6
00089c 81ff      	LDD  R31,Y+6+1
00089d 93fa      	ST   -Y,R31
00089e 93ea      	ST   -Y,R30
00089f 81ae      	LDD  R26,Y+6
0008a0 81bf      	LDD  R27,Y+6+1
0008a1 df72      	RCALL _rcvr_spi_multi_G000
                 ;	xchg_spi(0xFF);					/* Discard CRC */
0008a2 efaf      	LDI  R26,LOW(255)
0008a3 df4d      	RCALL _xchg_spi_G000
                 ;	xchg_spi(0xFF);
0008a4 efaf      	LDI  R26,LOW(255)
0008a5 df4b      	RCALL _xchg_spi_G000
                 ;
                 ;	return 1;						/* Return with success */
0008a6 e0e1      	LDI  R30,LOW(1)
0008a7 e0f0      	LDI  R31,HIGH(1)
0008a8 940e 3f92 	CALL __LOADLOCR4
0008aa c5c6      	RJMP _0x20C0021
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Send a data packet to MMC                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if	_USE_WRITE
                 ;static
                 ;int xmit_datablock (
                 ;	const BYTE *buff,	/* 512 byte data block to be transmitted */
                 ;	BYTE token			/* Data/Stop token */
                 ;)
                 ;{
                 _xmit_datablock_G000:
                 ; .FSTART _xmit_datablock_G000
                 ;	BYTE resp;
                 ;
                 ;
                 ;	if (!wait_ready(500)) return 0;
0008ab 93aa      	ST   -Y,R26
0008ac 931a      	ST   -Y,R17
                 ;	*buff -> Y+2
                 ;	token -> Y+1
                 ;	resp -> R17
0008ad efa4      	LDI  R26,LOW(500)
0008ae e0b1      	LDI  R27,HIGH(500)
0008af df87      	RCALL _wait_ready_G000
0008b0 9730      	SBIW R30,0
0008b1 f421      	BRNE _0xDD
0008b2 e0e0      	LDI  R30,LOW(0)
0008b3 e0f0      	LDI  R31,HIGH(0)
0008b4 8118      	LDD  R17,Y+0
0008b5 c53e      	RJMP _0x20C0022
                 ;
                 ;	xchg_spi(token);					/* Xmit data token */
                 _0xDD:
0008b6 81a9      	LDD  R26,Y+1
0008b7 df39      	RCALL _xchg_spi_G000
                 ;	if (token != 0xFD) {	/* Is data token */
0008b8 81a9      	LDD  R26,Y+1
0008b9 3fad      	CPI  R26,LOW(0xFD)
0008ba f0a9      	BREQ _0xDE
                 ;		xmit_spi_multi(buff, 512);		/* Xmit the data block to the MMC */
0008bb 81ea      	LDD  R30,Y+2
0008bc 81fb      	LDD  R31,Y+2+1
0008bd 93fa      	ST   -Y,R31
0008be 93ea      	ST   -Y,R30
0008bf e0a0      	LDI  R26,LOW(512)
0008c0 e0b2      	LDI  R27,HIGH(512)
0008c1 df37      	RCALL _xmit_spi_multi_G000
                 ;		xchg_spi(0xFF);					/* CRC (Dummy) */
0008c2 efaf      	LDI  R26,LOW(255)
0008c3 df2d      	RCALL _xchg_spi_G000
                 ;		xchg_spi(0xFF);
0008c4 efaf      	LDI  R26,LOW(255)
0008c5 df2b      	RCALL _xchg_spi_G000
                 ;		resp = xchg_spi(0xFF);			/* Reveive data response */
0008c6 efaf      	LDI  R26,LOW(255)
0008c7 df29      	RCALL _xchg_spi_G000
0008c8 2f1e      	MOV  R17,R30
                 ;		if ((resp & 0x1F) != 0x05)		/* If not accepted, return with error */
0008c9 71ef      	ANDI R30,LOW(0x1F)
0008ca 30e5      	CPI  R30,LOW(0x5)
0008cb f021      	BREQ _0xDF
                 ;			return 0;
0008cc e0e0      	LDI  R30,LOW(0)
0008cd e0f0      	LDI  R31,HIGH(0)
0008ce 8118      	LDD  R17,Y+0
0008cf c524      	RJMP _0x20C0022
                 ;	}
                 _0xDF:
                 ;
                 ;	return 1;
                 _0xDE:
0008d0 e0e1      	LDI  R30,LOW(1)
0008d1 e0f0      	LDI  R31,HIGH(1)
0008d2 8118      	LDD  R17,Y+0
0008d3 c520      	RJMP _0x20C0022
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Send a command packet to MMC                                          */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;BYTE send_cmd (		/* Returns R1 resp (bit7==1:Send failed) */
                 ;	BYTE cmd,		/* Command index */
                 ;	DWORD arg		/* Argument */
                 ;)
                 ;{
                 _send_cmd_G000:
                 ; .FSTART _send_cmd_G000
                 ;	BYTE n, res;
                 ;	if (cmd & 0x80) {	/* ACMD<n> is the command sequense of CMD55-CMD<n> */
0008d4 940e 3f5f 	CALL __PUTPARD2
0008d6 931a      	ST   -Y,R17
0008d7 930a      	ST   -Y,R16
                 ;	cmd -> Y+6
                 ;	arg -> Y+2
                 ;	n -> R17
                 ;	res -> R16
0008d8 81ee      	LDD  R30,Y+6
0008d9 78e0      	ANDI R30,LOW(0x80)
0008da f071      	BREQ _0xE0
                 ;		cmd &= 0x7F;
0008db 81ee      	LDD  R30,Y+6
0008dc 77ef      	ANDI R30,0x7F
0008dd 83ee      	STD  Y+6,R30
                 ;		res = send_cmd(CMD55, 0);
0008de e7e7      	LDI  R30,LOW(119)
0008df 93ea      	ST   -Y,R30
                +
0008e0 e0a0     +LDI R26 , LOW ( 0x0 )
0008e1 e0b0     +LDI R27 , HIGH ( 0x0 )
0008e2 e080     +LDI R24 , BYTE3 ( 0x0 )
0008e3 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0008e4 dfef      	RCALL _send_cmd_G000
0008e5 2f0e      	MOV  R16,R30
                 ;		if (res > 1) return res;
0008e6 3002      	CPI  R16,2
0008e7 f008      	BRLO _0xE1
0008e8 c041      	RJMP _0x20C0029
                 ;	}
                 _0xE1:
                 ;
                 ;	/* Select the card */
                 ;	if (cmd != CMD12) {
                 _0xE0:
0008e9 81ae      	LDD  R26,Y+6
0008ea 34ac      	CPI  R26,LOW(0x4C)
0008eb f031      	BREQ _0xE2
                 ;		deselect();
0008ec df6c      	RCALL _deselect_G000
                 ;		if (!select()) return 0xFF;
0008ed df6f      	RCALL _select_G000
0008ee 9730      	SBIW R30,0
0008ef f411      	BRNE _0xE3
0008f0 efef      	LDI  R30,LOW(255)
0008f1 c039      	RJMP _0x20C0028
                 ;	}
                 _0xE3:
                 ;
                 ;/* Send command packet */
                 ;	xchg_spi(cmd);				/* Start + Command index */
                 _0xE2:
0008f2 81ae      	LDD  R26,Y+6
0008f3 defd      	RCALL _xchg_spi_G000
                 ;	xchg_spi((BYTE)(arg >> 24));		/* Argument[31..24] */
                +
0008f4 81aa     +LDD R26 , Y + 2
0008f5 81bb     +LDD R27 , Y + 2 + 1
0008f6 818c     +LDD R24 , Y + 2 + 2
0008f7 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0008f8 e1e8      	LDI  R30,LOW(24)
0008f9 940e 3e18 	CALL __LSRD12
0008fb 2fae      	MOV  R26,R30
0008fc def4      	RCALL _xchg_spi_G000
                 ;	xchg_spi((BYTE)(arg >> 16));		/* Argument[23..16] */
                +
0008fd 81ea     +LDD R30 , Y + 2
0008fe 81fb     +LDD R31 , Y + 2 + 1
0008ff 816c     +LDD R22 , Y + 2 + 2
000900 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
000901 940e 3e49 	CALL __LSRD16
000903 2fae      	MOV  R26,R30
000904 deec      	RCALL _xchg_spi_G000
                 ;	xchg_spi((BYTE)(arg >> 8));			/* Argument[15..8] */
                +
000905 81aa     +LDD R26 , Y + 2
000906 81bb     +LDD R27 , Y + 2 + 1
000907 818c     +LDD R24 , Y + 2 + 2
000908 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
000909 e0e8      	LDI  R30,LOW(8)
00090a 940e 3e18 	CALL __LSRD12
00090c 2fae      	MOV  R26,R30
00090d dee3      	RCALL _xchg_spi_G000
                 ;	xchg_spi((BYTE)arg);				/* Argument[7..0] */
00090e 81aa      	LDD  R26,Y+2
00090f dee1      	RCALL _xchg_spi_G000
                 ;	n = 0x01;							/* Dummy CRC + Stop */
000910 e011      	LDI  R17,LOW(1)
                 ;	if (cmd == CMD0) n = 0x95;			/* Valid CRC for CMD0(0) + Stop */
000911 81ae      	LDD  R26,Y+6
000912 34a0      	CPI  R26,LOW(0x40)
000913 f409      	BRNE _0xE4
000914 e915      	LDI  R17,LOW(149)
                 ;	if (cmd == CMD8) n = 0x87;			/* Valid CRC for CMD8(0x1AA) Stop */
                 _0xE4:
000915 81ae      	LDD  R26,Y+6
000916 34a8      	CPI  R26,LOW(0x48)
000917 f409      	BRNE _0xE5
000918 e817      	LDI  R17,LOW(135)
                 ;	xchg_spi(n);
                 _0xE5:
000919 2fa1      	MOV  R26,R17
00091a ded6      	RCALL _xchg_spi_G000
                 ;
                 ;	/* Receive command response */
                 ;	if (cmd == CMD12) xchg_spi(0xFF);		/* Skip a stuff byte when stop reading */
00091b 81ae      	LDD  R26,Y+6
00091c 34ac      	CPI  R26,LOW(0x4C)
00091d f411      	BRNE _0xE6
00091e efaf      	LDI  R26,LOW(255)
00091f ded1      	RCALL _xchg_spi_G000
                 ;	n = 10;								/* Wait for a valid response in timeout of 10 attempts */
                 _0xE6:
000920 e01a      	LDI  R17,LOW(10)
                 ;	do
                 _0xE8:
                 ;		res = xchg_spi(0xFF);
000921 efaf      	LDI  R26,LOW(255)
000922 dece      	RCALL _xchg_spi_G000
000923 2f0e      	MOV  R16,R30
                 ;	while ((res & 0x80) && --n);
000924 ff07      	SBRS R16,7
000925 c002      	RJMP _0xEA
000926 5011      	SUBI R17,LOW(1)
000927 f409      	BRNE _0xEB
                 _0xEA:
000928 c001      	RJMP _0xE9
                 _0xEB:
000929 cff7      	RJMP _0xE8
                 _0xE9:
                 ;	return res;			/* Return with the response value */
                 _0x20C0029:
00092a 2fe0      	MOV  R30,R16
                 _0x20C0028:
00092b 8119      	LDD  R17,Y+1
00092c 8108      	LDD  R16,Y+0
                 _0x20C002A:
00092d 9627      	ADIW R28,7
00092e 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Public Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Initialize Disk Drive                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;DSTATUS disk_initialize (
                 ;	BYTE pdrv		/* Physical drive nmuber (0) */
                 ;)
                 ;{
                 _disk_initialize:
                 ; .FSTART _disk_initialize
                 ;		BYTE n, cmd, ty, ocr[4];
                 ;	UINT tmr;
                 ;
                 ;
                 ;	if (pdrv) return STA_NOINIT;		/* Supports only single drive */
00092f 93aa      	ST   -Y,R26
000930 9724      	SBIW R28,4
000931 940e 3f89 	CALL __SAVELOCR6
                 ;	pdrv -> Y+10
                 ;	n -> R17
                 ;	cmd -> R16
                 ;	ty -> R19
                 ;	ocr -> Y+6
                 ;	tmr -> R20,R21
000933 85ea      	LDD  R30,Y+10
000934 30e0      	CPI  R30,0
000935 f011      	BREQ _0xEC
000936 e0e1      	LDI  R30,LOW(1)
000937 c0b1      	RJMP _0x20C0027
                 ;	//power_off();						/* Turn off the socket power to reset the card */
                 ;	//if (Stat & STA_NODISK) return Stat;	/* No card in the socket */
                 ;	//power_on();							/* Turn on the socket power */
                 ;	//FCLK_SLOW();
                 ;    init_spi(0);
                 _0xEC:
000938 e0a0      	LDI  R26,LOW(0)
000939 dea4      	RCALL _SPI_Init
                 ;	for (n = 10; n; n--) xchg_spi(0xFF);	/* 80 dummy clocks */
00093a e01a      	LDI  R17,LOW(10)
                 _0xEE:
00093b 3010      	CPI  R17,0
00093c f021      	BREQ _0xEF
00093d efaf      	LDI  R26,LOW(255)
00093e deb2      	RCALL _xchg_spi_G000
00093f 5011      	SUBI R17,1
000940 cffa      	RJMP _0xEE
                 _0xEF:
000941 e030      	LDI  R19,LOW(0)
                 ;		if (send_cmd(CMD0, 0) == 1) {			/* Enter Idle state */
000942 e4e0      	LDI  R30,LOW(64)
000943 93ea      	ST   -Y,R30
                +
000944 e0a0     +LDI R26 , LOW ( 0x0 )
000945 e0b0     +LDI R27 , HIGH ( 0x0 )
000946 e080     +LDI R24 , BYTE3 ( 0x0 )
000947 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000948 df8b      	RCALL _send_cmd_G000
000949 30e1      	CPI  R30,LOW(0x1)
00094a f009      	BREQ PC+2
00094b c090      	RJMP _0xF0
                 ;		if (send_cmd(CMD8, 0x1AA) == 1) {	/* SDv2 */
00094c e4e8      	LDI  R30,LOW(72)
00094d 93ea      	ST   -Y,R30
                +
00094e eaaa     +LDI R26 , LOW ( 0x1AA )
00094f e0b1     +LDI R27 , HIGH ( 0x1AA )
000950 e080     +LDI R24 , BYTE3 ( 0x1AA )
000951 e090     +LDI R25 , BYTE4 ( 0x1AA )
                 	__GETD2N 0x1AA
000952 df81      	RCALL _send_cmd_G000
000953 30e1      	CPI  R30,LOW(0x1)
000954 f009      	BREQ PC+2
000955 c056      	RJMP _0xF1
                 ;			for (n = 0; n < 4; n++)
000956 e010      	LDI  R17,LOW(0)
                 _0xF3:
000957 3014      	CPI  R17,4
000958 f478      	BRSH _0xF4
                 ;            {
                 ;             ocr[n] = rcv_spi();
000959 2fe1      	MOV  R30,R17
00095a e0f0      	LDI  R31,0
00095b 01de      	MOVW R26,R28
00095c 9616      	ADIW R26,6
00095d 0fae      	ADD  R26,R30
00095e 1fbf      	ADC  R27,R31
00095f efef      	LDI  R30,LOW(255)
000960 bdee      	OUT  0x2E,R30
                 _0x801109F:
000961 b5ed      	IN   R30,0x2D
000962 78e0      	ANDI R30,LOW(0x80)
000963 f3e9      	BREQ _0x801109F
000964 b5ee      	IN   R30,0x2E
000965 93ec      	ST   X,R30
                 ;             }		/* Get trailing return value of R7 resp */
000966 5f1f      	SUBI R17,-1
000967 cfef      	RJMP _0xF3
                 _0xF4:
                 ;			if (ocr[2] == 0x01 && ocr[3] == 0xAA) {			/* The card can work at vdd range of 2.7-3.6V */
000968 85a8      	LDD  R26,Y+8
000969 30a1      	CPI  R26,LOW(0x1)
00096a f419      	BRNE _0xF6
00096b 85a9      	LDD  R26,Y+9
00096c 3aaa      	CPI  R26,LOW(0xAA)
00096d f009      	BREQ _0xF7
                 _0xF6:
00096e c03c      	RJMP _0xF5
                 _0xF7:
                 ;				for (tmr = 10000; tmr && send_cmd(ACMD41, 1UL << 30); tmr--) dly_100us();	/* Wait for leaving idle state (ACMD41 wit ...
                +
00096f e140     +LDI R20 , LOW ( 10000 )
000970 e257     +LDI R21 , HIGH ( 10000 )
                 	__GETWRN 20,21,10000
                 _0xF9:
000971 2e04      	MOV  R0,R20
000972 2a05      	OR   R0,R21
000973 f049      	BREQ _0xFB
000974 eee9      	LDI  R30,LOW(233)
000975 93ea      	ST   -Y,R30
                +
000976 e0a0     +LDI R26 , LOW ( 0x40000000 )
000977 e0b0     +LDI R27 , HIGH ( 0x40000000 )
000978 e080     +LDI R24 , BYTE3 ( 0x40000000 )
000979 e490     +LDI R25 , BYTE4 ( 0x40000000 )
                 	__GETD2N 0x40000000
00097a df59      	RCALL _send_cmd_G000
00097b 30e0      	CPI  R30,0
00097c f409      	BRNE _0xFC
                 _0xFB:
00097d c007      	RJMP _0xFA
                 _0xFC:
                +
00097e ec88     +LDI R24 , LOW ( 200 )
00097f e090     +LDI R25 , HIGH ( 200 )
                +__DELAY_USW_LOOP :
000980 9701     +SBIW R24 , 1
000981 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 200
                +
000982 5041     +SUBI R20 , LOW ( 1 )
000983 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
000984 cfec      	RJMP _0xF9
                 _0xFA:
000985 2e04      	MOV  R0,R20
000986 2a05      	OR   R0,R21
000987 f049      	BREQ _0xFE
000988 e7ea      	LDI  R30,LOW(122)
000989 93ea      	ST   -Y,R30
                +
00098a e0a0     +LDI R26 , LOW ( 0x0 )
00098b e0b0     +LDI R27 , HIGH ( 0x0 )
00098c e080     +LDI R24 , BYTE3 ( 0x0 )
00098d e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
00098e df45      	RCALL _send_cmd_G000
00098f 30e0      	CPI  R30,0
000990 f009      	BREQ _0xFF
                 _0xFE:
000991 c019      	RJMP _0xFD
                 _0xFF:
                 ;					for (n = 0; n < 4; n++)
000992 e010      	LDI  R17,LOW(0)
                 _0x101:
000993 3014      	CPI  R17,4
000994 f478      	BRSH _0x102
                 ;                    {
                 ;                    ocr[n] = rcv_spi();
000995 2fe1      	MOV  R30,R17
000996 e0f0      	LDI  R31,0
000997 01de      	MOVW R26,R28
000998 9616      	ADIW R26,6
000999 0fae      	ADD  R26,R30
00099a 1fbf      	ADC  R27,R31
00099b efef      	LDI  R30,LOW(255)
00099c bdee      	OUT  0x2E,R30
                 _0xC01109F:
00099d b5ed      	IN   R30,0x2D
00099e 78e0      	ANDI R30,LOW(0x80)
00099f f3e9      	BREQ _0xC01109F
0009a0 b5ee      	IN   R30,0x2E
0009a1 93ec      	ST   X,R30
                 ;                    }
0009a2 5f1f      	SUBI R17,-1
0009a3 cfef      	RJMP _0x101
                 _0x102:
                 ;					ty = (ocr[0] & 0x40) ? CT_SD2 | CT_BLOCK : CT_SD2;	/* SDv2 (HC or SC) */
0009a4 81ee      	LDD  R30,Y+6
0009a5 74e0      	ANDI R30,LOW(0x40)
0009a6 f011      	BREQ _0x103
0009a7 e0ec      	LDI  R30,LOW(12)
0009a8 c001      	RJMP _0x104
                 _0x103:
0009a9 e0e4      	LDI  R30,LOW(4)
                 _0x104:
0009aa 2f3e      	MOV  R19,R30
                 ;				}
                 ;			}
                 _0xFD:
                 ;		} else {							/* SDv1 or MMCv3 */
                 _0xF5:
0009ab c030      	RJMP _0x106
                 _0xF1:
                 ;			if (send_cmd(ACMD41, 0) <= 1) 	{
0009ac eee9      	LDI  R30,LOW(233)
0009ad 93ea      	ST   -Y,R30
                +
0009ae e0a0     +LDI R26 , LOW ( 0x0 )
0009af e0b0     +LDI R27 , HIGH ( 0x0 )
0009b0 e080     +LDI R24 , BYTE3 ( 0x0 )
0009b1 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0009b2 df21      	RCALL _send_cmd_G000
0009b3 30e2      	CPI  R30,LOW(0x2)
0009b4 f418      	BRSH _0x107
                 ;				ty = CT_SD1; cmd = ACMD41;	/* SDv1 */
0009b5 e032      	LDI  R19,LOW(2)
0009b6 ee09      	LDI  R16,LOW(233)
                 ;			} else {
0009b7 c002      	RJMP _0x108
                 _0x107:
                 ;				ty = CT_MMC; cmd = CMD1;	/* MMCv3 */
0009b8 e031      	LDI  R19,LOW(1)
0009b9 e401      	LDI  R16,LOW(65)
                 ;			}
                 _0x108:
                 ;			for (tmr = 10000; tmr && send_cmd(cmd, 0); tmr--) dly_100us();	/* Wait for leaving idle state */
                +
0009ba e140     +LDI R20 , LOW ( 10000 )
0009bb e257     +LDI R21 , HIGH ( 10000 )
                 	__GETWRN 20,21,10000
                 _0x10A:
0009bc 2e04      	MOV  R0,R20
0009bd 2a05      	OR   R0,R21
0009be f041      	BREQ _0x10C
0009bf 930a      	ST   -Y,R16
                +
0009c0 e0a0     +LDI R26 , LOW ( 0x0 )
0009c1 e0b0     +LDI R27 , HIGH ( 0x0 )
0009c2 e080     +LDI R24 , BYTE3 ( 0x0 )
0009c3 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0009c4 df0f      	RCALL _send_cmd_G000
0009c5 30e0      	CPI  R30,0
0009c6 f409      	BRNE _0x10D
                 _0x10C:
0009c7 c007      	RJMP _0x10B
                 _0x10D:
                +
0009c8 ec88     +LDI R24 , LOW ( 200 )
0009c9 e090     +LDI R25 , HIGH ( 200 )
                +__DELAY_USW_LOOP :
0009ca 9701     +SBIW R24 , 1
0009cb f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 200
                +
0009cc 5041     +SUBI R20 , LOW ( 1 )
0009cd 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
0009ce cfed      	RJMP _0x10A
                 _0x10B:
0009cf 2e04      	MOV  R0,R20
0009d0 2a05      	OR   R0,R21
0009d1 f049      	BREQ _0x10F
0009d2 e5e0      	LDI  R30,LOW(80)
0009d3 93ea      	ST   -Y,R30
                +
0009d4 e0a0     +LDI R26 , LOW ( 0x200 )
0009d5 e0b2     +LDI R27 , HIGH ( 0x200 )
0009d6 e080     +LDI R24 , BYTE3 ( 0x200 )
0009d7 e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
0009d8 defb      	RCALL _send_cmd_G000
0009d9 30e0      	CPI  R30,0
0009da f009      	BREQ _0x10E
                 _0x10F:
                 ;				ty = 0;
0009db e030      	LDI  R19,LOW(0)
                 ;		}
                 _0x10E:
                 _0x106:
                 ;	}
                 ;	CardType = ty;
                 _0xF0:
0009dc 9330 06d6 	STS  _CardType_G000,R19
                 ;	deselect();
0009de de7a      	RCALL _deselect_G000
                 ;
                 ;	if (ty) {			/* Initialization succeded */
0009df 3030      	CPI  R19,0
0009e0 f031      	BREQ _0x111
                 ;		Stat &= ~STA_NOINIT;		/* Clear STA_NOINIT */
0009e1 91e0 06d3 	LDS  R30,_Stat_G000
0009e3 7fee      	ANDI R30,0xFE
0009e4 93e0 06d3 	STS  _Stat_G000,R30
                 ;		release_spi();
0009e6 de06      	RCALL _SPI_Release
                 ;	} else {			/* Initialization failed */
                 _0x111:
                 ;		//power_off();
                 ;	}
                 ;
                 ;	return Stat;
0009e7 91e0 06d3 	LDS  R30,_Stat_G000
                 _0x20C0027:
0009e9 940e 3f90 	CALL __LOADLOCR6
0009eb 962b      	ADIW R28,11
0009ec 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get Disk Status                                                       */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;DSTATUS disk_status (
                 ;	BYTE pdrv		/* Physical drive nmuber (0) */
                 ;)
                 ;{
                 _disk_status:
                 ; .FSTART _disk_status
                 ;	if (pdrv) return STA_NOINIT;	/* Supports only single drive */
0009ed 93aa      	ST   -Y,R26
                 ;	pdrv -> Y+0
0009ee 81e8      	LD   R30,Y
0009ef 30e0      	CPI  R30,0
0009f0 f011      	BREQ _0x113
0009f1 e0e1      	LDI  R30,LOW(1)
0009f2 c002      	RJMP _0x20C0026
                 ;	return Stat;
                 _0x113:
0009f3 91e0 06d3 	LDS  R30,_Stat_G000
                 _0x20C0026:
0009f5 9621      	ADIW R28,1
0009f6 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read Sector(s)                                                        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;DRESULT disk_read (
                 ;	BYTE pdrv,			/* Physical drive nmuber (0) */
                 ;	BYTE *buff,			/* Pointer to the data buffer to store read data */
                 ;	DWORD sector,		/* Start sector number (LBA) */
                 ;	UINT count			/* Sector count (1..128) */
                 ;)
                 ;{
                 _disk_read:
                 ; .FSTART _disk_read
                 ;		BYTE cmd;
                 ;    init_spi(1);
0009f7 93ba      	ST   -Y,R27
0009f8 93aa      	ST   -Y,R26
0009f9 931a      	ST   -Y,R17
                 ;	pdrv -> Y+9
                 ;	*buff -> Y+7
                 ;	sector -> Y+3
                 ;	count -> Y+1
                 ;	cmd -> R17
0009fa e0a1      	LDI  R26,LOW(1)
0009fb dde2      	RCALL _SPI_Init
                 ;
                 ;	if (pdrv || !count) return RES_PARERR;
0009fc 85e9      	LDD  R30,Y+9
0009fd 30e0      	CPI  R30,0
0009fe f421      	BRNE _0x115
0009ff 81e9      	LDD  R30,Y+1
000a00 81fa      	LDD  R31,Y+1+1
000a01 9730      	SBIW R30,0
000a02 f419      	BRNE _0x114
                 _0x115:
000a03 e0e4      	LDI  R30,LOW(4)
000a04 8118      	LDD  R17,Y+0
000a05 c397      	RJMP _0x20C0023
                 ;	if (Stat & STA_NOINIT) return RES_NOTRDY;
                 _0x114:
000a06 91e0 06d3 	LDS  R30,_Stat_G000
000a08 70e1      	ANDI R30,LOW(0x1)
000a09 f019      	BREQ _0x117
000a0a e0e3      	LDI  R30,LOW(3)
000a0b 8118      	LDD  R17,Y+0
000a0c c390      	RJMP _0x20C0023
                 ;
                 ;	if (!(CardType & CT_BLOCK)) sector *= 512;	/* Convert to byte address if needed */
                 _0x117:
000a0d 91e0 06d6 	LDS  R30,_CardType_G000
000a0f 70e8      	ANDI R30,LOW(0x8)
000a10 f471      	BRNE _0x118
                +
000a11 81eb     +LDD R30 , Y + 3
000a12 81fc     +LDD R31 , Y + 3 + 1
000a13 816d     +LDD R22 , Y + 3 + 2
000a14 817e     +LDD R23 , Y + 3 + 3
                 	__GETD1S 3
                +
000a15 e0a0     +LDI R26 , LOW ( 0x200 )
000a16 e0b2     +LDI R27 , HIGH ( 0x200 )
000a17 e080     +LDI R24 , BYTE3 ( 0x200 )
000a18 e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
000a19 940e 3e70 	CALL __MULD12U
                +
000a1b 83eb     +STD Y + 3 , R30
000a1c 83fc     +STD Y + 3 + 1 , R31
000a1d 836d     +STD Y + 3 + 2 , R22
000a1e 837e     +STD Y + 3 + 3 , R23
                 	__PUTD1S 3
                 ;
                 ;	cmd = count > 1 ? CMD18 : CMD17;			/*  READ_MULTIPLE_BLOCK : READ_SINGLE_BLOCK */
                 _0x118:
000a1f 81a9      	LDD  R26,Y+1
000a20 81ba      	LDD  R27,Y+1+1
000a21 9712      	SBIW R26,2
000a22 f010      	BRLO _0x119
000a23 e5e2      	LDI  R30,LOW(82)
000a24 c001      	RJMP _0x11A
                 _0x119:
000a25 e5e1      	LDI  R30,LOW(81)
                 _0x11A:
000a26 2f1e      	MOV  R17,R30
                 ;	if (send_cmd(cmd, sector) == 0) {
000a27 931a      	ST   -Y,R17
                +
000a28 81ac     +LDD R26 , Y + 4
000a29 81bd     +LDD R27 , Y + 4 + 1
000a2a 818e     +LDD R24 , Y + 4 + 2
000a2b 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
000a2c dea7      	RCALL _send_cmd_G000
000a2d 30e0      	CPI  R30,0
000a2e f4f1      	BRNE _0x11C
                 ;		do {
                 _0x11E:
                 ;			if (!rcvr_datablock(buff, 512)) break;
000a2f 81ef      	LDD  R30,Y+7
000a30 85f8      	LDD  R31,Y+7+1
000a31 93fa      	ST   -Y,R31
000a32 93ea      	ST   -Y,R30
000a33 e0a0      	LDI  R26,LOW(512)
000a34 e0b2      	LDI  R27,HIGH(512)
000a35 de38      	RCALL _rcvr_datablock_G000
000a36 9730      	SBIW R30,0
000a37 f061      	BREQ _0x11F
                 ;			buff += 512;
000a38 81ef      	LDD  R30,Y+7
000a39 85f8      	LDD  R31,Y+7+1
000a3a 50e0      	SUBI R30,LOW(-512)
000a3b 4ffe      	SBCI R31,HIGH(-512)
000a3c 83ef      	STD  Y+7,R30
000a3d 87f8      	STD  Y+7+1,R31
                 ;		} while (--count);
000a3e 81e9      	LDD  R30,Y+1
000a3f 81fa      	LDD  R31,Y+1+1
000a40 9731      	SBIW R30,1
000a41 83e9      	STD  Y+1,R30
000a42 83fa      	STD  Y+1+1,R31
000a43 f759      	BRNE _0x11E
                 _0x11F:
                 ;		if (cmd == CMD18) send_cmd(CMD12, 0);	/* STOP_TRANSMISSION */
000a44 3512      	CPI  R17,82
000a45 f439      	BRNE _0x121
000a46 e4ec      	LDI  R30,LOW(76)
000a47 93ea      	ST   -Y,R30
                +
000a48 e0a0     +LDI R26 , LOW ( 0x0 )
000a49 e0b0     +LDI R27 , HIGH ( 0x0 )
000a4a e080     +LDI R24 , BYTE3 ( 0x0 )
000a4b e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000a4c de87      	RCALL _send_cmd_G000
                 ;	}
                 _0x121:
                 ;	deselect();
                 _0x11C:
000a4d de0b      	RCALL _deselect_G000
                 ;    release_spi();
000a4e dd9e      	RCALL _SPI_Release
                 ;	return count ? RES_ERROR : RES_OK;
000a4f 81e9      	LDD  R30,Y+1
000a50 81fa      	LDD  R31,Y+1+1
000a51 9730      	SBIW R30,0
000a52 f011      	BREQ _0x122
000a53 e0e1      	LDI  R30,LOW(1)
000a54 c001      	RJMP _0x123
                 _0x122:
000a55 e0e0      	LDI  R30,LOW(0)
                 _0x123:
000a56 8118      	LDD  R17,Y+0
000a57 c345      	RJMP _0x20C0023
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Write Sector(s)                                                       */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if _USE_WRITE
                 ;DRESULT disk_write (
                 ;	BYTE pdrv,			/* Physical drive nmuber (0) */
                 ;	const BYTE *buff,	/* Pointer to the data to be written */
                 ;	DWORD sector,		/* Start sector number (LBA) */
                 ;	UINT count			/* Sector count (1..128) */
                 ;)
                 ;{
                 _disk_write:
                 ; .FSTART _disk_write
                 ;    init_spi(1);
000a58 93ba      	ST   -Y,R27
000a59 93aa      	ST   -Y,R26
                 ;	pdrv -> Y+8
                 ;	*buff -> Y+6
                 ;	sector -> Y+2
                 ;	count -> Y+0
000a5a e0a1      	LDI  R26,LOW(1)
000a5b dd82      	RCALL _SPI_Init
                 ;	if (pdrv || !count) return RES_PARERR;
000a5c 85e8      	LDD  R30,Y+8
000a5d 30e0      	CPI  R30,0
000a5e f421      	BRNE _0x126
000a5f 81e8      	LD   R30,Y
000a60 81f9      	LDD  R31,Y+1
000a61 9730      	SBIW R30,0
000a62 f411      	BRNE _0x125
                 _0x126:
000a63 e0e4      	LDI  R30,LOW(4)
000a64 c075      	RJMP _0x20C0025
                 ;	if (Stat & STA_NOINIT) return RES_NOTRDY;
                 _0x125:
000a65 91e0 06d3 	LDS  R30,_Stat_G000
000a67 70e1      	ANDI R30,LOW(0x1)
000a68 f011      	BREQ _0x128
000a69 e0e3      	LDI  R30,LOW(3)
000a6a c06f      	RJMP _0x20C0025
                 ;	if (Stat & STA_PROTECT) return RES_WRPRT;
                 _0x128:
000a6b 91e0 06d3 	LDS  R30,_Stat_G000
000a6d 70e4      	ANDI R30,LOW(0x4)
000a6e f011      	BREQ _0x129
000a6f e0e2      	LDI  R30,LOW(2)
000a70 c069      	RJMP _0x20C0025
                 ;
                 ;	if (!(CardType & CT_BLOCK)) sector *= 512;	/* Convert to byte address if needed */
                 _0x129:
000a71 91e0 06d6 	LDS  R30,_CardType_G000
000a73 70e8      	ANDI R30,LOW(0x8)
000a74 f471      	BRNE _0x12A
                +
000a75 81ea     +LDD R30 , Y + 2
000a76 81fb     +LDD R31 , Y + 2 + 1
000a77 816c     +LDD R22 , Y + 2 + 2
000a78 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
                +
000a79 e0a0     +LDI R26 , LOW ( 0x200 )
000a7a e0b2     +LDI R27 , HIGH ( 0x200 )
000a7b e080     +LDI R24 , BYTE3 ( 0x200 )
000a7c e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
000a7d 940e 3e70 	CALL __MULD12U
                +
000a7f 83ea     +STD Y + 2 , R30
000a80 83fb     +STD Y + 2 + 1 , R31
000a81 836c     +STD Y + 2 + 2 , R22
000a82 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;
                 ;	if (count == 1) {	/* Single block write */
                 _0x12A:
000a83 81a8      	LD   R26,Y
000a84 81b9      	LDD  R27,Y+1
000a85 9711      	SBIW R26,1
000a86 f4b1      	BRNE _0x12B
                 ;		if ((send_cmd(CMD24, sector) == 0)	/* WRITE_BLOCK */
                 ;           && xmit_datablock(buff, 0xFE))
000a87 e5e8      	LDI  R30,LOW(88)
000a88 93ea      	ST   -Y,R30
                +
000a89 81ab     +LDD R26 , Y + 3
000a8a 81bc     +LDD R27 , Y + 3 + 1
000a8b 818d     +LDD R24 , Y + 3 + 2
000a8c 819e     +LDD R25 , Y + 3 + 3
                 	__GETD2S 3
000a8d de46      	RCALL _send_cmd_G000
000a8e 30e0      	CPI  R30,0
000a8f f441      	BRNE _0x12D
000a90 81ee      	LDD  R30,Y+6
000a91 81ff      	LDD  R31,Y+6+1
000a92 93fa      	ST   -Y,R31
000a93 93ea      	ST   -Y,R30
000a94 efae      	LDI  R26,LOW(254)
000a95 de15      	RCALL _xmit_datablock_G000
000a96 9730      	SBIW R30,0
000a97 f409      	BRNE _0x12E
                 _0x12D:
000a98 c003      	RJMP _0x12C
                 _0x12E:
                 ;			count = 0;
000a99 e0e0      	LDI  R30,LOW(0)
000a9a 83e8      	STD  Y+0,R30
000a9b 83e9      	STD  Y+0+1,R30
                 ;	}
                 _0x12C:
                 ;	else {				/* Multiple block write */
000a9c c034      	RJMP _0x12F
                 _0x12B:
                 ;		if (CardType & CT_SDC) send_cmd(ACMD23, count);
000a9d 91e0 06d6 	LDS  R30,_CardType_G000
000a9f 70e6      	ANDI R30,LOW(0x6)
000aa0 f039      	BREQ _0x130
000aa1 ede7      	LDI  R30,LOW(215)
000aa2 93ea      	ST   -Y,R30
000aa3 81a9      	LDD  R26,Y+1
000aa4 81ba      	LDD  R27,Y+1+1
000aa5 2788      	CLR  R24
000aa6 2799      	CLR  R25
000aa7 de2c      	RCALL _send_cmd_G000
                 ;		if (send_cmd(CMD25, sector) == 0) {	/* WRITE_MULTIPLE_BLOCK */
                 _0x130:
000aa8 e5e9      	LDI  R30,LOW(89)
000aa9 93ea      	ST   -Y,R30
                +
000aaa 81ab     +LDD R26 , Y + 3
000aab 81bc     +LDD R27 , Y + 3 + 1
000aac 818d     +LDD R24 , Y + 3 + 2
000aad 819e     +LDD R25 , Y + 3 + 3
                 	__GETD2S 3
000aae de25      	RCALL _send_cmd_G000
000aaf 30e0      	CPI  R30,0
000ab0 f501      	BRNE _0x131
                 ;			do {
                 _0x133:
                 ;				if (!xmit_datablock(buff, 0xFC)) break;
000ab1 81ee      	LDD  R30,Y+6
000ab2 81ff      	LDD  R31,Y+6+1
000ab3 93fa      	ST   -Y,R31
000ab4 93ea      	ST   -Y,R30
000ab5 efac      	LDI  R26,LOW(252)
000ab6 ddf4      	RCALL _xmit_datablock_G000
000ab7 9730      	SBIW R30,0
000ab8 f061      	BREQ _0x134
                 ;				buff += 512;
000ab9 81ee      	LDD  R30,Y+6
000aba 81ff      	LDD  R31,Y+6+1
000abb 50e0      	SUBI R30,LOW(-512)
000abc 4ffe      	SBCI R31,HIGH(-512)
000abd 83ee      	STD  Y+6,R30
000abe 83ff      	STD  Y+6+1,R31
                 ;			} while (--count);
000abf 81e8      	LD   R30,Y
000ac0 81f9      	LDD  R31,Y+1
000ac1 9731      	SBIW R30,1
000ac2 83e8      	ST   Y,R30
000ac3 83f9      	STD  Y+1,R31
000ac4 f761      	BRNE _0x133
                 _0x134:
                 ;			if (!xmit_datablock(0, 0xFD))	/* STOP_TRAN token */
000ac5 e0e0      	LDI  R30,LOW(0)
000ac6 e0f0      	LDI  R31,HIGH(0)
000ac7 93fa      	ST   -Y,R31
000ac8 93ea      	ST   -Y,R30
000ac9 efad      	LDI  R26,LOW(253)
000aca dde0      	RCALL _xmit_datablock_G000
000acb 9730      	SBIW R30,0
000acc f421      	BRNE _0x136
                 ;				count = 1;
000acd e0e1      	LDI  R30,LOW(1)
000ace e0f0      	LDI  R31,HIGH(1)
000acf 83e8      	ST   Y,R30
000ad0 83f9      	STD  Y+1,R31
                 ;		}
                 _0x136:
                 ;	}
                 _0x131:
                 _0x12F:
                 ;	deselect();
000ad1 dd87      	RCALL _deselect_G000
                 ;    release_spi();
000ad2 dd1a      	RCALL _SPI_Release
                 ;	return count ? RES_ERROR : RES_OK;
000ad3 81e8      	LD   R30,Y
000ad4 81f9      	LDD  R31,Y+1
000ad5 9730      	SBIW R30,0
000ad6 f011      	BREQ _0x137
000ad7 e0e1      	LDI  R30,LOW(1)
000ad8 c001      	RJMP _0x138
                 _0x137:
000ad9 e0e0      	LDI  R30,LOW(0)
                 _0x138:
                 _0x20C0025:
000ada 9629      	ADIW R28,9
000adb 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Miscellaneous Functions                                               */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if _USE_IOCTL
                 ;DRESULT disk_ioctl (
                 ;	BYTE pdrv,		/* Physical drive nmuber (0) */
                 ;	BYTE cmd,		/* Control code */
                 ;	void *buff		/* Buffer to send/receive control data */
                 ;)
                 ;{
                 _disk_ioctl:
                 ; .FSTART _disk_ioctl
                 ;	DRESULT res;
                 ;	BYTE n, csd[16], *ptr = buff;
                 ;	DWORD csize;
                 ;
                 ;    init_spi(1);
000adc 93ba      	ST   -Y,R27
000add 93aa      	ST   -Y,R26
000ade 9764      	SBIW R28,20
000adf 940e 3f8b 	CALL __SAVELOCR4
                 ;	pdrv -> Y+27
                 ;	cmd -> Y+26
                 ;	*buff -> Y+24
                 ;	res -> R17
                 ;	n -> R16
                 ;	csd -> Y+8
                 ;	*ptr -> R18,R19
                 ;	csize -> Y+4
                +
000ae1 8d28     +LDD R18 , Y + 24
000ae2 8d39     +LDD R19 , Y + 24 + 1
                 	__GETWRS 18,19,24
000ae3 e0a1      	LDI  R26,LOW(1)
000ae4 dcf9      	RCALL _SPI_Init
                 ;	if (pdrv) return RES_PARERR;
000ae5 8deb      	LDD  R30,Y+27
000ae6 30e0      	CPI  R30,0
000ae7 f011      	BREQ _0x13A
000ae8 e0e4      	LDI  R30,LOW(4)
000ae9 c188      	RJMP _0x20C0024
                 ;
                 ;	res = RES_ERROR;
                 _0x13A:
000aea e011      	LDI  R17,LOW(1)
                 ;
                 ;	if (Stat & STA_NOINIT) return RES_NOTRDY;
000aeb 91e0 06d3 	LDS  R30,_Stat_G000
000aed 70e1      	ANDI R30,LOW(0x1)
000aee f011      	BREQ _0x13B
000aef e0e3      	LDI  R30,LOW(3)
000af0 c181      	RJMP _0x20C0024
                 ;
                 ;	switch (cmd) {
                 _0x13B:
000af1 8dea      	LDD  R30,Y+26
000af2 e0f0      	LDI  R31,0
                 ;	case CTRL_SYNC :		/* Make sure that no pending write process. Do not remove this or written sector might not left updat ...
000af3 9730      	SBIW R30,0
000af4 f429      	BRNE _0x13F
                 ;		if (select()) res = RES_OK;
000af5 dd67      	RCALL _select_G000
000af6 9730      	SBIW R30,0
000af7 f009      	BREQ _0x140
000af8 e010      	LDI  R17,LOW(0)
                 ;		break;
                 _0x140:
000af9 c175      	RJMP _0x13E
                 ;
                 ;	case GET_SECTOR_COUNT :	/* Get number of sectors on the disk (DWORD) */
                 _0x13F:
000afa 30e1      	CPI  R30,LOW(0x1)
000afb e0a0      	LDI  R26,HIGH(0x1)
000afc 07fa      	CPC  R31,R26
000afd f009      	BREQ PC+2
000afe c078      	RJMP _0x141
                 ;		if ((send_cmd(CMD9, 0) == 0) && rcvr_datablock(csd, 16)) {
000aff e4e9      	LDI  R30,LOW(73)
000b00 93ea      	ST   -Y,R30
                +
000b01 e0a0     +LDI R26 , LOW ( 0x0 )
000b02 e0b0     +LDI R27 , HIGH ( 0x0 )
000b03 e080     +LDI R24 , BYTE3 ( 0x0 )
000b04 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000b05 ddce      	RCALL _send_cmd_G000
000b06 30e0      	CPI  R30,0
000b07 f449      	BRNE _0x143
000b08 01fe      	MOVW R30,R28
000b09 9638      	ADIW R30,8
000b0a 93fa      	ST   -Y,R31
000b0b 93ea      	ST   -Y,R30
000b0c e1a0      	LDI  R26,LOW(16)
000b0d e0b0      	LDI  R27,0
000b0e dd5f      	RCALL _rcvr_datablock_G000
000b0f 9730      	SBIW R30,0
000b10 f409      	BRNE _0x144
                 _0x143:
000b11 c064      	RJMP _0x142
                 _0x144:
                 ;			if ((csd[0] >> 6) == 1) {	/* SDC ver 2.00 */
000b12 85a8      	LDD  R26,Y+8
000b13 e0b0      	LDI  R27,0
000b14 e0e6      	LDI  R30,LOW(6)
000b15 940e 3e03 	CALL __ASRW12
000b17 30e1      	CPI  R30,LOW(0x1)
000b18 e0a0      	LDI  R26,HIGH(0x1)
000b19 07fa      	CPC  R31,R26
000b1a f501      	BRNE _0x145
                 ;				csize = csd[9] + ((WORD)csd[8] << 8) + ((DWORD)(csd[7] & 63) << 16) + 1;
000b1b 89a9      	LDD  R26,Y+17
000b1c e0b0      	LDI  R27,0
000b1d e0e0      	LDI  R30,0
000b1e 89f8      	LDD  R31,Y+16
000b1f 0fae      	ADD  R26,R30
000b20 1fbf      	ADC  R27,R31
000b21 85ef      	LDD  R30,Y+15
000b22 e0f0      	LDI  R31,0
000b23 73ef      	ANDI R30,LOW(0x3F)
000b24 70f0      	ANDI R31,HIGH(0x3F)
000b25 940e 3e59 	CALL __CWD1
000b27 940e 3e4e 	CALL __LSLD16
000b29 2788      	CLR  R24
000b2a 2799      	CLR  R25
000b2b 940e 3dd0 	CALL __ADDD12
                +
000b2d 5fef     +SUBI R30 , LOW ( - 1 )
000b2e 4fff     +SBCI R31 , HIGH ( - 1 )
000b2f 4f6f     +SBCI R22 , BYTE3 ( - 1 )
000b30 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__ADDD1N 1
                +
000b31 83ec     +STD Y + 4 , R30
000b32 83fd     +STD Y + 4 + 1 , R31
000b33 836e     +STD Y + 4 + 2 , R22
000b34 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;				*(DWORD*)buff = csize << 10;
                +
000b35 81ac     +LDD R26 , Y + 4
000b36 81bd     +LDD R27 , Y + 4 + 1
000b37 818e     +LDD R24 , Y + 4 + 2
000b38 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
000b39 e0ea      	LDI  R30,LOW(10)
000b3a c034      	RJMP _0x4DD
                 ;			} else {					/* SDC ver 1.XX or MMC*/
                 _0x145:
                 ;				n = (csd[5] & 15) + ((csd[10] & 128) >> 7) + ((csd[9] & 3) << 1) + 2;
000b3b 85ed      	LDD  R30,Y+13
000b3c 70ef      	ANDI R30,LOW(0xF)
000b3d 2fae      	MOV  R26,R30
000b3e 89ea      	LDD  R30,Y+18
000b3f 78e0      	ANDI R30,LOW(0x80)
000b40 e0f0      	LDI  R31,0
000b41 940e 3e2f 	CALL __ASRW3
000b43 940e 3e2d 	CALL __ASRW4
000b45 0fae      	ADD  R26,R30
000b46 89e9      	LDD  R30,Y+17
000b47 70e3      	ANDI R30,LOW(0x3)
000b48 0fee      	LSL  R30
000b49 0fea      	ADD  R30,R26
000b4a 5fee      	SUBI R30,-LOW(2)
000b4b 2f0e      	MOV  R16,R30
                 ;				csize = (csd[8] >> 6) + ((WORD)csd[7] << 2) + ((WORD)(csd[6] & 3) << 10) + 1;
000b4c 89a8      	LDD  R26,Y+16
000b4d e0b0      	LDI  R27,0
000b4e e0e6      	LDI  R30,LOW(6)
000b4f 940e 3e03 	CALL __ASRW12
000b51 01df      	MOVW R26,R30
000b52 85ef      	LDD  R30,Y+15
000b53 e0f0      	LDI  R31,0
000b54 940e 3e28 	CALL __LSLW2
000b56 0fae      	ADD  R26,R30
000b57 1fbf      	ADC  R27,R31
000b58 85ee      	LDD  R30,Y+14
000b59 e0f0      	LDI  R31,0
000b5a 70e3      	ANDI R30,LOW(0x3)
000b5b 70f0      	ANDI R31,HIGH(0x3)
000b5c 0fee      	LSL  R30
000b5d 0fee      	LSL  R30
000b5e 2ffe      	MOV  R31,R30
000b5f e0e0      	LDI  R30,0
000b60 0fea      	ADD  R30,R26
000b61 1ffb      	ADC  R31,R27
000b62 9631      	ADIW R30,1
000b63 2766      	CLR  R22
000b64 2777      	CLR  R23
                +
000b65 83ec     +STD Y + 4 , R30
000b66 83fd     +STD Y + 4 + 1 , R31
000b67 836e     +STD Y + 4 + 2 , R22
000b68 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;				*(DWORD*)buff = csize << (n - 9);
000b69 2fe0      	MOV  R30,R16
000b6a 50e9      	SUBI R30,LOW(9)
                +
000b6b 81ac     +LDD R26 , Y + 4
000b6c 81bd     +LDD R27 , Y + 4 + 1
000b6d 818e     +LDD R24 , Y + 4 + 2
000b6e 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                 _0x4DD:
000b6f 940e 3e0c 	CALL __LSLD12
000b71 8da8      	LDD  R26,Y+24
000b72 8db9      	LDD  R27,Y+24+1
000b73 940e 3f3c 	CALL __PUTDP1
                 ;			}
                 ;			res = RES_OK;
000b75 e010      	LDI  R17,LOW(0)
                 ;		}
                 ;		break;
                 _0x142:
000b76 c0f8      	RJMP _0x13E
                 ;
                 ;	case GET_BLOCK_SIZE :	/* Get erase block size in unit of sector (DWORD) */
                 _0x141:
000b77 30e3      	CPI  R30,LOW(0x3)
000b78 e0a0      	LDI  R26,HIGH(0x3)
000b79 07fa      	CPC  R31,R26
000b7a f009      	BREQ PC+2
000b7b c085      	RJMP _0x147
                 ;		if (CardType & CT_SD2) {	/* SDv2? */
000b7c 91e0 06d6 	LDS  R30,_CardType_G000
000b7e 70e4      	ANDI R30,LOW(0x4)
000b7f f151      	BREQ _0x148
                 ;			if (send_cmd(ACMD13, 0) == 0) {	/* Read SD status */
000b80 eced      	LDI  R30,LOW(205)
000b81 93ea      	ST   -Y,R30
                +
000b82 e0a0     +LDI R26 , LOW ( 0x0 )
000b83 e0b0     +LDI R27 , HIGH ( 0x0 )
000b84 e080     +LDI R24 , BYTE3 ( 0x0 )
000b85 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000b86 dd4d      	RCALL _send_cmd_G000
000b87 30e0      	CPI  R30,0
000b88 f501      	BRNE _0x149
                 ;				xchg_spi(0xFF);
000b89 efaf      	LDI  R26,LOW(255)
000b8a dc66      	RCALL _xchg_spi_G000
                 ;				if (rcvr_datablock(csd, 16)) {				/* Read partial block */
000b8b 01fe      	MOVW R30,R28
000b8c 9638      	ADIW R30,8
000b8d 93fa      	ST   -Y,R31
000b8e 93ea      	ST   -Y,R30
000b8f e1a0      	LDI  R26,LOW(16)
000b90 e0b0      	LDI  R27,0
000b91 dcdc      	RCALL _rcvr_datablock_G000
000b92 9730      	SBIW R30,0
000b93 f0a9      	BREQ _0x14A
                 ;					for (n = 64 - 16; n; n--) xchg_spi(0xFF);	/* Purge trailing data */
000b94 e300      	LDI  R16,LOW(48)
                 _0x14C:
000b95 3000      	CPI  R16,0
000b96 f021      	BREQ _0x14D
000b97 efaf      	LDI  R26,LOW(255)
000b98 dc58      	RCALL _xchg_spi_G000
000b99 5001      	SUBI R16,1
000b9a cffa      	RJMP _0x14C
                 _0x14D:
000b9b 89ea      	LDD  R30,Y+18
000b9c 95e2      	SWAP R30
000b9d 70ef      	ANDI R30,0xF
                +
000b9e e1a0     +LDI R26 , LOW ( 0x10 )
000b9f e0b0     +LDI R27 , HIGH ( 0x10 )
000ba0 e080     +LDI R24 , BYTE3 ( 0x10 )
000ba1 e090     +LDI R25 , BYTE4 ( 0x10 )
                 	__GETD2N 0x10
000ba2 940e 3e0c 	CALL __LSLD12
000ba4 8da8      	LDD  R26,Y+24
000ba5 8db9      	LDD  R27,Y+24+1
000ba6 940e 3f3c 	CALL __PUTDP1
                 ;					res = RES_OK;
000ba8 e010      	LDI  R17,LOW(0)
                 ;				}
                 ;			}
                 _0x14A:
                 ;		} else {					/* SDv1 or MMCv3 */
                 _0x149:
000ba9 c056      	RJMP _0x14E
                 _0x148:
                 ;			if ((send_cmd(CMD9, 0) == 0) && rcvr_datablock(csd, 16)) {	/* Read CSD */
000baa e4e9      	LDI  R30,LOW(73)
000bab 93ea      	ST   -Y,R30
                +
000bac e0a0     +LDI R26 , LOW ( 0x0 )
000bad e0b0     +LDI R27 , HIGH ( 0x0 )
000bae e080     +LDI R24 , BYTE3 ( 0x0 )
000baf e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000bb0 dd23      	RCALL _send_cmd_G000
000bb1 30e0      	CPI  R30,0
000bb2 f449      	BRNE _0x150
000bb3 01fe      	MOVW R30,R28
000bb4 9638      	ADIW R30,8
000bb5 93fa      	ST   -Y,R31
000bb6 93ea      	ST   -Y,R30
000bb7 e1a0      	LDI  R26,LOW(16)
000bb8 e0b0      	LDI  R27,0
000bb9 dcb4      	RCALL _rcvr_datablock_G000
000bba 9730      	SBIW R30,0
000bbb f409      	BRNE _0x151
                 _0x150:
000bbc c043      	RJMP _0x14F
                 _0x151:
                 ;				if (CardType & CT_SD1) {	/* SDv1 */
000bbd 91e0 06d6 	LDS  R30,_CardType_G000
000bbf 70e2      	ANDI R30,LOW(0x2)
000bc0 f0d1      	BREQ _0x152
                 ;					*(DWORD*)buff = (((csd[10] & 63) << 1) + ((WORD)(csd[11] & 128) >> 7) + 1) << ((csd[13] >> 6) - 1);
000bc1 89ea      	LDD  R30,Y+18
000bc2 e0f0      	LDI  R31,0
000bc3 73ef      	ANDI R30,LOW(0x3F)
000bc4 70f0      	ANDI R31,HIGH(0x3F)
000bc5 0fee      	LSL  R30
000bc6 01df      	MOVW R26,R30
000bc7 89eb      	LDD  R30,Y+19
000bc8 e0f0      	LDI  R31,0
000bc9 78e0      	ANDI R30,LOW(0x80)
000bca 70f0      	ANDI R31,HIGH(0x80)
000bcb 940e 3e38 	CALL __LSRW3
000bcd 940e 3e36 	CALL __LSRW4
000bcf 0fae      	ADD  R26,R30
000bd0 1fbf      	ADC  R27,R31
000bd1 9611      	ADIW R26,1
000bd2 89ed      	LDD  R30,Y+21
000bd3 95e2      	SWAP R30
000bd4 70ef      	ANDI R30,0xF
000bd5 95e6      	LSR  R30
000bd6 95e6      	LSR  R30
000bd7 50e1      	SUBI R30,LOW(1)
000bd8 940e 3dfa 	CALL __LSLW12
000bda c01e      	RJMP _0x4DE
                 ;				} else {					/* MMCv3 */
                 _0x152:
                 ;					*(DWORD*)buff = ((WORD)((csd[10] & 124) >> 2) + 1) * (((csd[11] & 3) << 3) + ((csd[11] & 224) >> 5) + 1);
000bdb 89ea      	LDD  R30,Y+18
000bdc e0f0      	LDI  R31,0
000bdd 77ec      	ANDI R30,LOW(0x7C)
000bde 70f0      	ANDI R31,HIGH(0x7C)
000bdf 940e 3e31 	CALL __ASRW2
000be1 9631      	ADIW R30,1
000be2 010f      	MOVW R0,R30
000be3 89eb      	LDD  R30,Y+19
000be4 e0f0      	LDI  R31,0
000be5 70e3      	ANDI R30,LOW(0x3)
000be6 70f0      	ANDI R31,HIGH(0x3)
000be7 0fee      	LSL  R30
000be8 0fee      	LSL  R30
000be9 0fee      	LSL  R30
000bea 01df      	MOVW R26,R30
000beb 89eb      	LDD  R30,Y+19
000bec e0f0      	LDI  R31,0
000bed 7ee0      	ANDI R30,LOW(0xE0)
000bee 70f0      	ANDI R31,HIGH(0xE0)
000bef 95f5      	ASR  R31
000bf0 95e7      	ROR  R30
000bf1 940e 3e2d 	CALL __ASRW4
000bf3 0fea      	ADD  R30,R26
000bf4 1ffb      	ADC  R31,R27
000bf5 9631      	ADIW R30,1
000bf6 01d0      	MOVW R26,R0
000bf7 940e 3e68 	CALL __MULW12U
                 _0x4DE:
000bf9 8da8      	LDD  R26,Y+24
000bfa 8db9      	LDD  R27,Y+24+1
000bfb 2766      	CLR  R22
000bfc 2777      	CLR  R23
000bfd 940e 3f3c 	CALL __PUTDP1
                 ;				}
                 ;				res = RES_OK;
000bff e010      	LDI  R17,LOW(0)
                 ;			}
                 ;		}
                 _0x14F:
                 _0x14E:
                 ;		break;
000c00 c06e      	RJMP _0x13E
                 ;
                 ;	/* Following commands are never used by FatFs module */
                 ;
                 ;	case MMC_GET_TYPE :		/* Get card type flags (1 byte) */
                 _0x147:
000c01 30ea      	CPI  R30,LOW(0xA)
000c02 e0a0      	LDI  R26,HIGH(0xA)
000c03 07fa      	CPC  R31,R26
000c04 f431      	BRNE _0x154
                 ;		*ptr = CardType;
000c05 91e0 06d6 	LDS  R30,_CardType_G000
000c07 01d9      	MOVW R26,R18
000c08 93ec      	ST   X,R30
                 ;		res = RES_OK;
000c09 e010      	LDI  R17,LOW(0)
                 ;		break;
000c0a c064      	RJMP _0x13E
                 ;
                 ;	case MMC_GET_CSD :		/* Receive CSD as a data block (16 bytes) */
                 _0x154:
000c0b 30eb      	CPI  R30,LOW(0xB)
000c0c e0a0      	LDI  R26,HIGH(0xB)
000c0d 07fa      	CPC  R31,R26
000c0e f499      	BRNE _0x155
                 ;		if (send_cmd(CMD9, 0) == 0		/* READ_CSD */
                 ;			&& rcvr_datablock(ptr, 16))
000c0f e4e9      	LDI  R30,LOW(73)
000c10 93ea      	ST   -Y,R30
                +
000c11 e0a0     +LDI R26 , LOW ( 0x0 )
000c12 e0b0     +LDI R27 , HIGH ( 0x0 )
000c13 e080     +LDI R24 , BYTE3 ( 0x0 )
000c14 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000c15 dcbe      	RCALL _send_cmd_G000
000c16 30e0      	CPI  R30,0
000c17 f439      	BRNE _0x157
000c18 933a      	ST   -Y,R19
000c19 932a      	ST   -Y,R18
000c1a e1a0      	LDI  R26,LOW(16)
000c1b e0b0      	LDI  R27,0
000c1c dc51      	RCALL _rcvr_datablock_G000
000c1d 9730      	SBIW R30,0
000c1e f409      	BRNE _0x158
                 _0x157:
000c1f c001      	RJMP _0x156
                 _0x158:
                 ;			res = RES_OK;
000c20 e010      	LDI  R17,LOW(0)
                 ;		break;
                 _0x156:
000c21 c04d      	RJMP _0x13E
                 ;
                 ;	case MMC_GET_CID :		/* Receive CID as a data block (16 bytes) */
                 _0x155:
000c22 30ec      	CPI  R30,LOW(0xC)
000c23 e0a0      	LDI  R26,HIGH(0xC)
000c24 07fa      	CPC  R31,R26
000c25 f499      	BRNE _0x159
                 ;		if (send_cmd(CMD10, 0) == 0		/* READ_CID */
                 ;			&& rcvr_datablock(ptr, 16))
000c26 e4ea      	LDI  R30,LOW(74)
000c27 93ea      	ST   -Y,R30
                +
000c28 e0a0     +LDI R26 , LOW ( 0x0 )
000c29 e0b0     +LDI R27 , HIGH ( 0x0 )
000c2a e080     +LDI R24 , BYTE3 ( 0x0 )
000c2b e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000c2c dca7      	RCALL _send_cmd_G000
000c2d 30e0      	CPI  R30,0
000c2e f439      	BRNE _0x15B
000c2f 933a      	ST   -Y,R19
000c30 932a      	ST   -Y,R18
000c31 e1a0      	LDI  R26,LOW(16)
000c32 e0b0      	LDI  R27,0
000c33 dc3a      	RCALL _rcvr_datablock_G000
000c34 9730      	SBIW R30,0
000c35 f409      	BRNE _0x15C
                 _0x15B:
000c36 c001      	RJMP _0x15A
                 _0x15C:
                 ;			res = RES_OK;
000c37 e010      	LDI  R17,LOW(0)
                 ;		break;
                 _0x15A:
000c38 c036      	RJMP _0x13E
                 ;
                 ;	case MMC_GET_OCR :		/* Receive OCR as an R3 resp (4 bytes) */
                 _0x159:
000c39 30ed      	CPI  R30,LOW(0xD)
000c3a e0a0      	LDI  R26,HIGH(0xD)
000c3b 07fa      	CPC  R31,R26
000c3c f4c9      	BRNE _0x15D
                 ;		if (send_cmd(CMD58, 0) == 0) {	/* READ_OCR */
000c3d e7ea      	LDI  R30,LOW(122)
000c3e 93ea      	ST   -Y,R30
                +
000c3f e0a0     +LDI R26 , LOW ( 0x0 )
000c40 e0b0     +LDI R27 , HIGH ( 0x0 )
000c41 e080     +LDI R24 , BYTE3 ( 0x0 )
000c42 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000c43 dc90      	RCALL _send_cmd_G000
000c44 30e0      	CPI  R30,0
000c45 f479      	BRNE _0x15E
                 ;			for (n = 4; n; n--) *ptr++ = xchg_spi(0xFF);
000c46 e004      	LDI  R16,LOW(4)
                 _0x160:
000c47 3000      	CPI  R16,0
000c48 f059      	BREQ _0x161
000c49 933f      	PUSH R19
000c4a 932f      	PUSH R18
                +
000c4b 5f2f     +SUBI R18 , LOW ( - 1 )
000c4c 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
000c4d efaf      	LDI  R26,LOW(255)
000c4e dba2      	RCALL _xchg_spi_G000
000c4f 91af      	POP  R26
000c50 91bf      	POP  R27
000c51 93ec      	ST   X,R30
000c52 5001      	SUBI R16,1
000c53 cff3      	RJMP _0x160
                 _0x161:
000c54 e010      	LDI  R17,LOW(0)
                 ;		}
                 ;		break;
                 _0x15E:
000c55 c019      	RJMP _0x13E
                 ;
                 ;	case MMC_GET_SDSTAT :	/* Receive SD statsu as a data block (64 bytes) */
                 _0x15D:
000c56 30ee      	CPI  R30,LOW(0xE)
000c57 e0a0      	LDI  R26,HIGH(0xE)
000c58 07fa      	CPC  R31,R26
000c59 f4a1      	BRNE _0x165
                 ;		if (send_cmd(ACMD13, 0) == 0) {	/* SD_STATUS */
000c5a eced      	LDI  R30,LOW(205)
000c5b 93ea      	ST   -Y,R30
                +
000c5c e0a0     +LDI R26 , LOW ( 0x0 )
000c5d e0b0     +LDI R27 , HIGH ( 0x0 )
000c5e e080     +LDI R24 , BYTE3 ( 0x0 )
000c5f e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000c60 dc73      	RCALL _send_cmd_G000
000c61 30e0      	CPI  R30,0
000c62 f451      	BRNE _0x163
                 ;			xchg_spi(0xFF);
000c63 efaf      	LDI  R26,LOW(255)
000c64 db8c      	RCALL _xchg_spi_G000
                 ;			if (rcvr_datablock(ptr, 64))
000c65 933a      	ST   -Y,R19
000c66 932a      	ST   -Y,R18
000c67 e4a0      	LDI  R26,LOW(64)
000c68 e0b0      	LDI  R27,0
000c69 dc04      	RCALL _rcvr_datablock_G000
000c6a 9730      	SBIW R30,0
000c6b f009      	BREQ _0x164
                 ;				res = RES_OK;
000c6c e010      	LDI  R17,LOW(0)
                 ;		}
                 _0x164:
                 ;		break;
                 _0x163:
000c6d c001      	RJMP _0x13E
                 ;
                 ;	//case CTRL_POWER_OFF :	/* Power off */
                 ;	//	power_off();
                 ;	//	Stat |= STA_NOINIT;
                 ;	//	res = RES_OK;
                 ;	//	break;
                 ;
                 ;	default:
                 _0x165:
                 ;		res = RES_PARERR;
000c6e e014      	LDI  R17,LOW(4)
                 ;	}
                 _0x13E:
                 ;
                 ;	deselect();
000c6f dbe9      	RCALL _deselect_G000
                 ;    release_spi();
000c70 db7c      	RCALL _SPI_Release
                 ;	return res;
000c71 2fe1      	MOV  R30,R17
                 _0x20C0024:
000c72 940e 3f92 	CALL __LOADLOCR4
000c74 966c      	ADIW R28,28
000c75 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Device Timer Interrupt Procedure                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;/* This function must be called in period of 10ms                        */
                 ;
                 ;void disk_timerproc (void)
                 ;{
                 ;	BYTE n, s;
                 ;
                 ;
                 ;	n = Timer1;				/* 100Hz decrement timer */
                 ;	n -> R17
                 ;	s -> R16
                 ;	if (n) Timer1 = --n;
                 ;	n = Timer2;
                 ;	if (n) Timer2 = --n;
                 ;
                 ;	s = Stat;
                 ;
                 ;	//if (MMC_WP)				/* Write protected */
                 ;	//	s |= STA_PROTECT;
                 ;	//else					/* Write enabled */
                 ;		s &= ~STA_PROTECT;
                 ;
                 ;	//if (MMC_CD)				/* Card inserted */
                 ;	//	s &= ~STA_NODISK;
                 ;	//else					/* Socket empty */
                 ;		s |= (STA_NODISK | STA_NOINIT);
                 ;
                 ;	Stat = s;				/* Update MMC status */
                 ;}
                 ;#include "vrgl_primitives.c"
                 ;#include "Nokia6610_lcd_lib.h"
                 ;#include "vrgl_primitives.h"
                 ;#include <delay.h>
                 ;
                 ;
                 ;void VRGL_CreateBox(unsigned char nX,unsigned char nY, unsigned char sX,unsigned char sY,int nColor,unsigned char bFill)
                 ;{
                 ;nlcd_Box(nX,nY,nX+sX,nY+sY,bFill,nColor,0);
                 ;	nX -> Y+6
                 ;	nY -> Y+5
                 ;	sX -> Y+4
                 ;	sY -> Y+3
                 ;	nColor -> Y+1
                 ;	bFill -> Y+0
                 ;}
                 ;
                 ;void VRGL_CreateLine(unsigned char nX0,unsigned char nY0, unsigned char nX1,unsigned char nY1,int nColor)
                 ;{
                 ;//nlcd_Line(nX0,nY0,nX1,nY1,nColor);
                 ;}
                 ;
                 ;#include "twi/twim.c"
                 ;//***************************************************************************
                 ;//
                 ;//  Author(s)...:    http://ChipEnable.Ru
                 ;//
                 ;//  Target(s)...: mega16
                 ;//
                 ;//  Compiler....: CodeVision
                 ;//
                 ;//  Description.:   TWI .
                 ;//                   Atmel`  - AVR315.
                 ;//
                 ;//  Data........: 13.11.13
                 ;//
                 ;//***************************************************************************
                 ;#include "twim.h"
                 ;
                 ;#define TWSR_MASK     0xfc
                 ;
                 ;volatile static uint8_t twiBuf[TWI_BUFFER_SIZE];
                 ;volatile static uint8_t twiState = TWI_NO_STATE;
                 
                 	.DSEG
                 ;volatile static uint8_t twiMsgSize;
                 ;
                 ;/*     twi */
                 ;uint8_t pre[4] = {2, 8, 32, 128};
                 ;
                 ;/****************************************************************************
                 ;     SCL 
                 ;****************************************************************************/
                 ;uint8_t TWI_MasterInit(uint16_t fr)
                 ;{
                 
                 	.CSEG
                 _TWI_MasterInit:
                 ; .FSTART _TWI_MasterInit
                 ;  uint8_t i;
                 ;  uint16_t twbrValue;
                 ;
                 ;  for(i = 0; i<4; i++){
000c76 93ba      	ST   -Y,R27
000c77 93aa      	ST   -Y,R26
000c78 940e 3f8b 	CALL __SAVELOCR4
                 ;	fr -> Y+4
                 ;	i -> R17
                 ;	twbrValue -> R18,R19
000c7a e010      	LDI  R17,LOW(0)
                 _0x16B:
000c7b 3014      	CPI  R17,4
000c7c f550      	BRSH _0x16C
                 ;    twbrValue = ((((F_CPU)/1000UL)/fr)-16)/pre[i];
000c7d 81ec      	LDD  R30,Y+4
000c7e 81fd      	LDD  R31,Y+4+1
000c7f e4a0      	LDI  R26,LOW(8000)
000c80 e1bf      	LDI  R27,HIGH(8000)
000c81 940e 3eae 	CALL __DIVW21U
000c83 9770      	SBIW R30,16
000c84 01df      	MOVW R26,R30
000c85 2fe1      	MOV  R30,R17
000c86 e0f0      	LDI  R31,0
000c87 51ef      	SUBI R30,LOW(-_pre)
000c88 4ff9      	SBCI R31,HIGH(-_pre)
000c89 81e0      	LD   R30,Z
000c8a e0f0      	LDI  R31,0
000c8b 940e 3eae 	CALL __DIVW21U
000c8d 019f      	MOVW R18,R30
                 ;    if ((twbrValue > 0)&& (twbrValue < 256)){
000c8e 2400      	CLR  R0
000c8f 1602      	CP   R0,R18
000c90 0603      	CPC  R0,R19
000c91 f420      	BRSH _0x16E
                +
000c92 3020     +CPI R18 , LOW ( 256 )
000c93 e0e1     +LDI R30 , HIGH ( 256 )
000c94 073e     +CPC R19 , R30
                 	__CPWRN 18,19,256
000c95 f008      	BRLO _0x16F
                 _0x16E:
000c96 c00e      	RJMP _0x16D
                 _0x16F:
                 ;       TWBR = (uint8_t)twbrValue;
000c97 9320 00b8 	STS  184,R18
                 ;       TWSR = i;
000c99 9310 00b9 	STS  185,R17
                 ;       TWDR = 0xFF;
000c9b efef      	LDI  R30,LOW(255)
000c9c 93e0 00bb 	STS  187,R30
                 ;       TWCR = (1<<TWEN);
000c9e e0e4      	LDI  R30,LOW(4)
000c9f 93e0 00bc 	STS  188,R30
                 ;       return TWI_SUCCESS;
000ca1 efef      	LDI  R30,LOW(255)
000ca2 940e 3f92 	CALL __LOADLOCR4
000ca4 c34b      	RJMP _0x20C001F
                 ;    }
                 ;  }
                 _0x16D:
000ca5 5f1f      	SUBI R17,-1
000ca6 cfd4      	RJMP _0x16B
                 _0x16C:
                 ;  return 0;
000ca7 e0e0      	LDI  R30,LOW(0)
000ca8 940e 3f92 	CALL __LOADLOCR4
000caa c345      	RJMP _0x20C001F
                 ;}
                 ; .FEND
                 ;
                 ;/****************************************************************************
                 ;  -    TWI .   
                 ;****************************************************************************/
                 ;static uint8_t TWI_TransceiverBusy(void)
                 ;{
                 _TWI_TransceiverBusy_G000:
                 ; .FSTART _TWI_TransceiverBusy_G000
                 ;  return (TWCR & (1<<TWIE));
000cab 91e0 00bc 	LDS  R30,188
000cad 70e1      	ANDI R30,LOW(0x1)
000cae 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;/****************************************************************************
                 ;   TWI 
                 ;****************************************************************************/
                 ;uint8_t TWI_GetState(void)
                 ;{
                 ;  while (TWI_TransceiverBusy());
                 ;  return twiState;
                 ;}
                 ;
                 ;/****************************************************************************
                 ;   msg  msgSize   TWI 
                 ;****************************************************************************/
                 ;void TWI_SendData(uint8_t *msg, uint8_t msgSize)
                 ;{
                 _TWI_SendData:
                 ; .FSTART _TWI_SendData
                 ;  uint8_t i;
                 ;
                 ;  while(TWI_TransceiverBusy());   //,  TWI  
000caf 93aa      	ST   -Y,R26
000cb0 931a      	ST   -Y,R17
                 ;	*msg -> Y+2
                 ;	msgSize -> Y+1
                 ;	i -> R17
                 _0x173:
000cb1 dff9      	RCALL _TWI_TransceiverBusy_G000
000cb2 30e0      	CPI  R30,0
000cb3 f7e9      	BRNE _0x173
                 ;
                 ;  twiMsgSize = msgSize;           // .   
000cb4 81e9      	LDD  R30,Y+1
000cb5 93e0 06e0 	STS  _twiMsgSize_G000,R30
                 ;  twiBuf[0]  = msg[0];            //   
000cb7 81aa      	LDD  R26,Y+2
000cb8 81bb      	LDD  R27,Y+2+1
000cb9 91ec      	LD   R30,X
000cba 93e0 06d7 	STS  _twiBuf_G000,R30
                 ;
                 ;  if (!(msg[0] & (TRUE<<TWI_READ_BIT))){   //    SLA+W
000cbc 70e1      	ANDI R30,LOW(0x1)
000cbd f499      	BRNE _0x176
                 ;    for (i = 1; i < msgSize; i++){         //    
000cbe e011      	LDI  R17,LOW(1)
                 _0x178:
000cbf 81e9      	LDD  R30,Y+1
000cc0 171e      	CP   R17,R30
000cc1 f478      	BRSH _0x179
                 ;      twiBuf[i] = msg[i];
000cc2 2fe1      	MOV  R30,R17
000cc3 e0f0      	LDI  R31,0
000cc4 52e9      	SUBI R30,LOW(-_twiBuf_G000)
000cc5 4ff9      	SBCI R31,HIGH(-_twiBuf_G000)
000cc6 010f      	MOVW R0,R30
000cc7 81aa      	LDD  R26,Y+2
000cc8 81bb      	LDD  R27,Y+2+1
000cc9 27ee      	CLR  R30
000cca 0fa1      	ADD  R26,R17
000ccb 1fbe      	ADC  R27,R30
000ccc 91ec      	LD   R30,X
000ccd 01d0      	MOVW R26,R0
000cce 93ec      	ST   X,R30
                 ;    }
000ccf 5f1f      	SUBI R17,-1
000cd0 cfee      	RJMP _0x178
                 _0x179:
                 ;  }
                 ;
                 ;  twiState = TWI_NO_STATE ;
                 _0x176:
000cd1 efe8      	LDI  R30,LOW(248)
000cd2 93e0 06df 	STS  _twiState_G000,R30
                 ;  TWCR = (1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWSTA); //     
000cd4 eae5      	LDI  R30,LOW(165)
000cd5 93e0 00bc 	STS  188,R30
                 ;}
000cd7 8118      	LDD  R17,Y+0
000cd8 c11b      	RJMP _0x20C0022
                 ; .FEND
                 ;
                 ;/****************************************************************************
                 ;      msg   msgSize .
                 ;****************************************************************************/
                 ;uint8_t TWI_GetData(uint8_t *msg, uint8_t msgSize)
                 ;{
                 _TWI_GetData:
                 ; .FSTART _TWI_GetData
                 ;  uint8_t i;
                 ;
                 ;  while(TWI_TransceiverBusy());    //,  TWI  
000cd9 93aa      	ST   -Y,R26
000cda 931a      	ST   -Y,R17
                 ;	*msg -> Y+2
                 ;	msgSize -> Y+1
                 ;	i -> R17
                 _0x17A:
000cdb dfcf      	RCALL _TWI_TransceiverBusy_G000
000cdc 30e0      	CPI  R30,0
000cdd f7e9      	BRNE _0x17A
                 ;
                 ;  if(twiState == TWI_SUCCESS){     //   ,
000cde 91a0 06df 	LDS  R26,_twiState_G000
000ce0 3faf      	CPI  R26,LOW(0xFF)
000ce1 f489      	BRNE _0x17D
                 ;    for(i = 0; i < msgSize; i++){  //       
000ce2 e010      	LDI  R17,LOW(0)
                 _0x17F:
000ce3 81e9      	LDD  R30,Y+1
000ce4 171e      	CP   R17,R30
000ce5 f468      	BRSH _0x180
                 ;      msg[i] = twiBuf[i];
000ce6 81aa      	LDD  R26,Y+2
000ce7 81bb      	LDD  R27,Y+2+1
000ce8 27ee      	CLR  R30
000ce9 0fa1      	ADD  R26,R17
000cea 1fbe      	ADC  R27,R30
000ceb 2fe1      	MOV  R30,R17
000cec e0f0      	LDI  R31,0
000ced 52e9      	SUBI R30,LOW(-_twiBuf_G000)
000cee 4ff9      	SBCI R31,HIGH(-_twiBuf_G000)
000cef 81e0      	LD   R30,Z
000cf0 93ec      	ST   X,R30
                 ;    }
000cf1 5f1f      	SUBI R17,-1
000cf2 cff0      	RJMP _0x17F
                 _0x180:
                 ;  }
                 ;
                 ;  return twiState;
                 _0x17D:
000cf3 91e0 06df 	LDS  R30,_twiState_G000
000cf5 8118      	LDD  R17,Y+0
000cf6 c0fd      	RJMP _0x20C0022
                 ;}
                 ; .FEND
                 ;
                 ;/****************************************************************************
                 ;   TWI 
                 ;****************************************************************************/
                 ;interrupt [TWI] void TWI_Isr(void)
                 ;{
                 _TWI_Isr:
                 ; .FSTART _TWI_Isr
000cf7 93aa      	ST   -Y,R26
000cf8 93ba      	ST   -Y,R27
000cf9 93ea      	ST   -Y,R30
000cfa 93fa      	ST   -Y,R31
000cfb b7ef      	IN   R30,SREG
000cfc 93ea      	ST   -Y,R30
                 ;  static uint8_t ptr;
                 ;  uint8_t stat = TWSR & TWSR_MASK;
                 ;
                 ;  switch (stat){
000cfd 931a      	ST   -Y,R17
                 ;	stat -> R17
000cfe 91e0 00b9 	LDS  R30,185
000d00 7fec      	ANDI R30,LOW(0xFC)
000d01 2f1e      	MOV  R17,R30
000d02 e0f0      	LDI  R31,0
                 ;
                 ;    case TWI_START:                   //  START 
000d03 30e8      	CPI  R30,LOW(0x8)
000d04 e0a0      	LDI  R26,HIGH(0x8)
000d05 07fa      	CPC  R31,R26
000d06 f021      	BREQ _0x185
                 ;    case TWI_REP_START:               //   START 
000d07 31e0      	CPI  R30,LOW(0x10)
000d08 e0a0      	LDI  R26,HIGH(0x10)
000d09 07fa      	CPC  R31,R26
000d0a f421      	BRNE _0x186
                 _0x185:
                 ;       ptr = 0;
000d0b e0e0      	LDI  R30,LOW(0)
000d0c 93e0 06e5 	STS  _ptr_S000002F000,R30
                 ;
                 ;    case TWI_MTX_ADR_ACK:             //    SLA+W   
000d0e c004      	RJMP _0x187
                 _0x186:
000d0f 31e8      	CPI  R30,LOW(0x18)
000d10 e0a0      	LDI  R26,HIGH(0x18)
000d11 07fa      	CPC  R31,R26
000d12 f409      	BRNE _0x188
                 _0x187:
                 ;    case TWI_MTX_DATA_ACK:            //       
000d13 c004      	RJMP _0x189
                 _0x188:
000d14 32e8      	CPI  R30,LOW(0x28)
000d15 e0a0      	LDI  R26,HIGH(0x28)
000d16 07fa      	CPC  R31,R26
000d17 f4f1      	BRNE _0x18A
                 _0x189:
                 ;       if (ptr < twiMsgSize){
000d18 91e0 06e0 	LDS  R30,_twiMsgSize_G000
000d1a 91a0 06e5 	LDS  R26,_ptr_S000002F000
000d1c 17ae      	CP   R26,R30
000d1d f488      	BRSH _0x18B
                 ;          TWDR = twiBuf[ptr];                    //     
000d1e 91e0 06e5 	LDS  R30,_ptr_S000002F000
000d20 e0f0      	LDI  R31,0
000d21 52e9      	SUBI R30,LOW(-_twiBuf_G000)
000d22 4ff9      	SBCI R31,HIGH(-_twiBuf_G000)
000d23 81e0      	LD   R30,Z
000d24 93e0 00bb 	STS  187,R30
                 ;          TWCR = (1<<TWEN)|(1<<TWIE)|(1<<TWINT); //  TWINT
000d26 e8e5      	LDI  R30,LOW(133)
000d27 93e0 00bc 	STS  188,R30
                 ;          ptr++;
000d29 91e0 06e5 	LDS  R30,_ptr_S000002F000
000d2b 5fef      	SUBI R30,-LOW(1)
000d2c 93e0 06e5 	STS  _ptr_S000002F000,R30
                 ;       }
                 ;       else{
000d2e c006      	RJMP _0x18C
                 _0x18B:
                 ;          twiState = TWI_SUCCESS;
000d2f efef      	LDI  R30,LOW(255)
000d30 93e0 06df 	STS  _twiState_G000,R30
                 ;          TWCR = (1<<TWEN)|(1<<TWINT)|(1<<TWSTO)|(0<<TWIE); //  ,  ,   ...
000d32 e9e4      	LDI  R30,LOW(148)
000d33 93e0 00bc 	STS  188,R30
                 ;       }
                 _0x18C:
                 ;       break;
000d35 c042      	RJMP _0x183
                 ;
                 ;    case TWI_MRX_DATA_ACK:          //     
                 _0x18A:
000d36 35e0      	CPI  R30,LOW(0x50)
000d37 e0a0      	LDI  R26,HIGH(0x50)
000d38 07fa      	CPC  R31,R26
000d39 f471      	BRNE _0x18D
                 ;       twiBuf[ptr] = TWDR;
000d3a 91a0 06e5 	LDS  R26,_ptr_S000002F000
000d3c e0b0      	LDI  R27,0
000d3d 52a9      	SUBI R26,LOW(-_twiBuf_G000)
000d3e 4fb9      	SBCI R27,HIGH(-_twiBuf_G000)
000d3f 91e0 00bb 	LDS  R30,187
000d41 93ec      	ST   X,R30
                 ;       ptr++;
000d42 91e0 06e5 	LDS  R30,_ptr_S000002F000
000d44 5fef      	SUBI R30,-LOW(1)
000d45 93e0 06e5 	STS  _ptr_S000002F000,R30
                 ;
                 ;    case TWI_MRX_ADR_ACK:           //   SLA+R   
000d47 c004      	RJMP _0x18E
                 _0x18D:
000d48 34e0      	CPI  R30,LOW(0x40)
000d49 e0a0      	LDI  R26,HIGH(0x40)
000d4a 07fa      	CPC  R31,R26
000d4b f481      	BRNE _0x18F
                 _0x18E:
                 ;      if (ptr < (twiMsgSize-1)){
000d4c 91e0 06e0 	LDS  R30,_twiMsgSize_G000
000d4e e0f0      	LDI  R31,0
000d4f 9731      	SBIW R30,1
000d50 91a0 06e5 	LDS  R26,_ptr_S000002F000
000d52 e0b0      	LDI  R27,0
000d53 17ae      	CP   R26,R30
000d54 07bf      	CPC  R27,R31
000d55 f414      	BRGE _0x190
                 ;        TWCR = (1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWEA);  //     ,   ...
000d56 ece5      	LDI  R30,LOW(197)
000d57 c001      	RJMP _0x4DF
                 ;      }
                 ;      else {
                 _0x190:
                 ;        TWCR = (1<<TWEN)|(1<<TWIE)|(1<<TWINT);            //   ,   
000d58 e8e5      	LDI  R30,LOW(133)
                 _0x4DF:
000d59 93e0 00bc 	STS  188,R30
                 ;      }
                 ;      break;
000d5b c01c      	RJMP _0x183
                 ;
                 ;    case TWI_MRX_DATA_NACK:       //     
                 _0x18F:
000d5c 35e8      	CPI  R30,LOW(0x58)
000d5d e0a0      	LDI  R26,HIGH(0x58)
000d5e 07fa      	CPC  R31,R26
000d5f f469      	BRNE _0x192
                 ;      twiBuf[ptr] = TWDR;
000d60 91a0 06e5 	LDS  R26,_ptr_S000002F000
000d62 e0b0      	LDI  R27,0
000d63 52a9      	SUBI R26,LOW(-_twiBuf_G000)
000d64 4fb9      	SBCI R27,HIGH(-_twiBuf_G000)
000d65 91e0 00bb 	LDS  R30,187
000d67 93ec      	ST   X,R30
                 ;      twiState = TWI_SUCCESS;
000d68 efef      	LDI  R30,LOW(255)
000d69 93e0 06df 	STS  _twiState_G000,R30
                 ;      TWCR = (1<<TWEN)|(1<<TWINT)|(1<<TWSTO); //  
000d6b e9e4      	LDI  R30,LOW(148)
000d6c c009      	RJMP _0x4E0
                 ;      break;
                 ;
                 ;    case TWI_ARB_LOST:          //  
                 _0x192:
000d6d 33e8      	CPI  R30,LOW(0x38)
000d6e e0a0      	LDI  R26,HIGH(0x38)
000d6f 07fa      	CPC  R31,R26
000d70 f411      	BRNE _0x193
                 ;      TWCR = (1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWSTA); //   TWINT,   
000d71 eae5      	LDI  R30,LOW(165)
000d72 c003      	RJMP _0x4E0
                 ;      break;
                 ;
                 ;    case TWI_MTX_ADR_NACK:      //    SLA+W    
                 _0x193:
                 ;    case TWI_MRX_ADR_NACK:      //    SLA+R    
                 _0x195:
                 ;    case TWI_MTX_DATA_NACK:     //        
                 ;    case TWI_BUS_ERROR:         //    -     
                 ;    default:
                 ;      twiState = stat;
000d73 9310 06df 	STS  _twiState_G000,R17
                 ;      TWCR = (1<<TWEN)|(0<<TWIE)|(0<<TWINT)|(0<<TWEA)|(0<<TWSTA)|(0<<TWSTO)|(0<<TWWC); // 
000d75 e0e4      	LDI  R30,LOW(4)
                 _0x4E0:
000d76 93e0 00bc 	STS  188,R30
                 ;  }
                 _0x183:
                 ;}
000d78 9119      	LD   R17,Y+
000d79 91e9      	LD   R30,Y+
000d7a bfef      	OUT  SREG,R30
000d7b 91f9      	LD   R31,Y+
000d7c 91e9      	LD   R30,Y+
000d7d 91b9      	LD   R27,Y+
000d7e 91a9      	LD   R26,Y+
000d7f 9518      	RETI
                 ; .FEND
                 ;#include "FatFS/ff.c"
                 ;/*----------------------------------------------------------------------------/
                 ;/  FatFs - FAT file system module  R0.10                 (C)ChaN, 2013
                 ;/-----------------------------------------------------------------------------/
                 ;/ FatFs module is a generic FAT file system module for small embedded systems.
                 ;/ This is a free software that opened for education, research and commercial
                 ;/ developments under license policy of following terms.
                 ;/
                 ;/  Copyright (C) 2013, ChaN, all right reserved.
                 ;/
                 ;/ * The FatFs module is a free software and there is NO WARRANTY.
                 ;/ * No restriction on use. You can use, modify and redistribute it for
                 ;/   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
                 ;/ * Redistributions of source code must retain the above copyright notice.
                 ;/
                 ;/-----------------------------------------------------------------------------/
                 ;/ Feb 26,'06 R0.00  Prototype.
                 ;/
                 ;/ Apr 29,'06 R0.01  First stable version.
                 ;/
                 ;/ Jun 01,'06 R0.02  Added FAT12 support.
                 ;/                   Removed unbuffered mode.
                 ;/                   Fixed a problem on small (<32M) partition.
                 ;/ Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
                 ;/
                 ;/ Sep 22,'06 R0.03  Added f_rename().
                 ;/                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
                 ;/ Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
                 ;/                   Fixed f_mkdir() creates incorrect directory on FAT32.
                 ;/
                 ;/ Feb 04,'07 R0.04  Supported multiple drive system.
                 ;/                   Changed some interfaces for multiple drive system.
                 ;/                   Changed f_mountdrv() to f_mount().
                 ;/                   Added f_mkfs().
                 ;/ Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
                 ;/                   Added a capability of extending file size to f_lseek().
                 ;/                   Added minimization level 3.
                 ;/                   Fixed an endian sensitive code in f_mkfs().
                 ;/ May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
                 ;/                   Added FSINFO support.
                 ;/                   Fixed DBCS name can result FR_INVALID_NAME.
                 ;/                   Fixed short seek (<= csize) collapses the file object.
                 ;/
                 ;/ Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
                 ;/                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
                 ;/                   Fixed f_mkdir() on FAT32 creates incorrect directory.
                 ;/ Feb 03,'08 R0.05a Added f_truncate() and f_utime().
                 ;/                   Fixed off by one error at FAT sub-type determination.
                 ;/                   Fixed btr in f_read() can be mistruncated.
                 ;/                   Fixed cached sector is not flushed when create and close without write.
                 ;/
                 ;/ Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
                 ;/                   Improved performance of f_lseek() on moving to the same or following cluster.
                 ;/
                 ;/ Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
                 ;/                   Added long file name feature.
                 ;/                   Added multiple code page feature.
                 ;/                   Added re-entrancy for multitask operation.
                 ;/                   Added auto cluster size selection to f_mkfs().
                 ;/                   Added rewind option to f_readdir().
                 ;/                   Changed result code of critical errors.
                 ;/                   Renamed string functions to avoid name collision.
                 ;/ Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
                 ;/                   Added multiple sector size feature.
                 ;/ Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
                 ;/                   Fixed wrong cache control in f_lseek().
                 ;/                   Added relative path feature.
                 ;/                   Added f_chdir() and f_chdrive().
                 ;/                   Added proper case conversion to extended character.
                 ;/ Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
                 ;/                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
                 ;/                   Fixed name matching error on the 13 character boundary.
                 ;/                   Added a configuration option, _LFN_UNICODE.
                 ;/                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
                 ;/
                 ;/ May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
                 ;/                   Added file lock feature. (_FS_SHARE)
                 ;/                   Added fast seek feature. (_USE_FASTSEEK)
                 ;/                   Changed some types on the API, XCHAR->TCHAR.
                 ;/                   Changed .fname in the FILINFO structure on Unicode cfg.
                 ;/                   String functions support UTF-8 encoding files on Unicode cfg.
                 ;/ Aug 16,'10 R0.08a Added f_getcwd().
                 ;/                   Added sector erase feature. (_USE_ERASE)
                 ;/                   Moved file lock semaphore table from fs object to the bss.
                 ;/                   Fixed a wrong directory entry is created on non-LFN cfg when the given name contains ';'.
                 ;/                   Fixed f_mkfs() creates wrong FAT32 volume.
                 ;/ Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
                 ;/                   f_lseek() reports required table size on creating CLMP.
                 ;/                   Extended format syntax of f_printf().
                 ;/                   Ignores duplicated directory separators in given path name.
                 ;/
                 ;/ Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature.
                 ;/                   Added f_fdisk().
                 ;/ Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
                 ;/                   Changed option name _FS_SHARE to _FS_LOCK.
                 ;/                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
                 ;/ Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
                 ;/
                 ;/ Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
                 ;/                   Added f_closedir().
                 ;/                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
                 ;/                   Added forced mount feature with changes of f_mount().
                 ;/                   Improved behavior of volume auto detection.
                 ;/                   Improved write throughput of f_puts() and f_printf().
                 ;/                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
                 ;/                   Fixed f_write() can be truncated when the file size is close to 4GB.
                 ;/                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
                 ;/---------------------------------------------------------------------------*/
                 ;
                 ;#include "ff.h"			/* Declarations of FatFs API */
                 ;#include "diskio.h"		/* Declarations of disk I/O functions */
                 ;#include "option/unicode.c"
                 ;#include "../ff.h"
                 ;
                 ;#if _USE_LFN != 0
                 ;
                 ;#if   _CODE_PAGE == 932
                 ;#include "cc932.c"
                 ;#elif _CODE_PAGE == 936
                 ;#include "cc936.c"
                 ;#elif _CODE_PAGE == 949
                 ;#include "cc949.c"
                 ;#elif _CODE_PAGE == 950
                 ;#include "cc950.c"
                 ;#else
                 ;#include "ccsbcs.c"
                 ;#endif
                 ;
                 ;#endif
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Module Private Definitions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;#if _FATFS != 80960	/* Revision ID */
                 ;#error Wrong include file (ff.h).
                 ;#endif
                 ;
                 ;
                 ;/* Definitions on sector size */
                 ;#if _MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
                 ;#error Wrong sector size.
                 ;#endif
                 ;#if _MAX_SS != 512
                 ;#define	SS(fs)	((fs)->ssize)	/* Variable sector size */
                 ;#else
                 ;#define	SS(fs)	512U			/* Fixed sector size */
                 ;#endif
                 ;
                 ;
                 ;/* Reentrancy related */
                 ;#if _FS_REENTRANT
                 ;#if _USE_LFN == 1
                 ;#error Static LFN work area cannot be used at thread-safe configuration.
                 ;#endif
                 ;#define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
                 ;#define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
                 ;#else
                 ;#define	ENTER_FF(fs)
                 ;#define LEAVE_FF(fs, res)	return res
                 ;#endif
                 ;
                 ;#define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
                 ;
                 ;
                 ;/* File access control feature */
                 ;#if _FS_LOCK
                 ;#if _FS_READONLY
                 ;#error _FS_LOCK must be 0 at read-only cfg.
                 ;#endif
                 ;typedef struct {
                 ;	FATFS *fs;				/* Object ID 1, volume (NULL:blank entry) */
                 ;	DWORD clu;				/* Object ID 2, directory */
                 ;	WORD idx;				/* Object ID 3, directory index */
                 ;	WORD ctr;				/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
                 ;} FILESEM;
                 ;#endif
                 ;
                 ;
                 ;
                 ;/* DBCS code ranges and SBCS extend character conversion table */
                 ;
                 ;#if _CODE_PAGE == 932	/* Japanese Shift-JIS */
                 ;#define _DF1S	0x81	/* DBC 1st byte range 1 start */
                 ;#define _DF1E	0x9F	/* DBC 1st byte range 1 end */
                 ;#define _DF2S	0xE0	/* DBC 1st byte range 2 start */
                 ;#define _DF2E	0xFC	/* DBC 1st byte range 2 end */
                 ;#define _DS1S	0x40	/* DBC 2nd byte range 1 start */
                 ;#define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
                 ;#define _DS2S	0x80	/* DBC 2nd byte range 2 start */
                 ;#define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
                 ;
                 ;#elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
                 ;#define _DF1S	0x81
                 ;#define _DF1E	0xFE
                 ;#define _DS1S	0x40
                 ;#define _DS1E	0x7E
                 ;#define _DS2S	0x80
                 ;#define _DS2E	0xFE
                 ;
                 ;#elif _CODE_PAGE == 949	/* Korean */
                 ;#define _DF1S	0x81
                 ;#define _DF1E	0xFE
                 ;#define _DS1S	0x41
                 ;#define _DS1E	0x5A
                 ;#define _DS2S	0x61
                 ;#define _DS2E	0x7A
                 ;#define _DS3S	0x81
                 ;#define _DS3E	0xFE
                 ;
                 ;#elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
                 ;#define _DF1S	0x81
                 ;#define _DF1E	0xFE
                 ;#define _DS1S	0x40
                 ;#define _DS1E	0x7E
                 ;#define _DS2S	0xA1
                 ;#define _DS2E	0xFE
                 ;
                 ;#elif _CODE_PAGE == 437	/* U.S. (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x90,0x92,0x92,0x4F,0x99 ...
                 ;				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 720	/* Arabic (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 737	/* Greek (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94 ...
                 ;				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 775	/* Baltic (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99 ...
                 ;				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99 ...
                 ;				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x90,0x91,0x91,0xE2,0x99 ...
                 ;				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x91,0x91,0x93,0x93,0x95 ...
                 ;				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0 ...
                 ;				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 857	/* Turkish (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99 ...
                 ;				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99 ...
                 ;				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 862	/* Hebrew (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 866	/* Russian (OEM) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xA3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x80,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB2,0xA5,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1253 /* Greek (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1254 /* Turkish (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1256 /* Arabic (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,0xF3,0x4F,0xF5,0xF6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1257 /* Baltic (Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
                 ;#define _DF1S	0
                 ;#define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94 ...
                 ;				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0 ...
                 ;
                 ;#elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
                 ;#if _USE_LFN
                 ;#error Cannot use LFN feature without valid code page.
                 ;#endif
                 ;#define _DF1S	0
                 ;
                 ;#else
                 ;#error Unknown code page
                 ;
                 ;#endif
                 ;
                 ;
                 ;/* Character code support macros */
                 ;#define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
                 ;#define IsLower(c)	(((c)>='a')&&((c)<='z'))
                 ;#define IsDigit(c)	(((c)>='0')&&((c)<='9'))
                 ;
                 ;#if _DF1S		/* Code page is DBCS */
                 ;
                 ;#ifdef _DF2S	/* Two 1st byte areas */
                 ;#define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) <= _DF2E))
                 ;#else			/* One 1st byte area */
                 ;#define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
                 ;#endif
                 ;
                 ;#ifdef _DS3S	/* Three 2nd byte areas */
                 ;#define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) <= _DS2E) || ((BYTE)( ...
                 ;#else			/* Two 2nd byte areas */
                 ;#define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) <= _DS2E))
                 ;#endif
                 ;
                 ;#else			/* Code page is SBCS */
                 ;
                 ;#define IsDBCS1(c)	0
                 ;#define IsDBCS2(c)	0
                 ;
                 ;#endif /* _DF1S */
                 ;
                 ;
                 ;/* Name status flags */
                 ;#define NS			11		/* Index of name status byte in fn[] */
                 ;#define NS_LOSS		0x01	/* Out of 8.3 format */
                 ;#define NS_LFN		0x02	/* Force to create LFN entry */
                 ;#define NS_LAST		0x04	/* Last segment */
                 ;#define NS_BODY		0x08	/* Lower case flag (body) */
                 ;#define NS_EXT		0x10	/* Lower case flag (ext) */
                 ;#define NS_DOT		0x20	/* Dot entry */
                 ;
                 ;
                 ;/* FAT sub-type boundaries */
                 ;#define MIN_FAT16	4086U	/* Minimum number of clusters for FAT16 */
                 ;#define	MIN_FAT32	65526U	/* Minimum number of clusters for FAT32 */
                 ;
                 ;
                 ;/* FatFs refers the members in the FAT structures as byte array instead of
                 ;/ structure member because the structure is not binary compatible between
                 ;/ different platforms */
                 ;
                 ;#define BS_jmpBoot			0	/* Jump instruction (3) */
                 ;#define BS_OEMName			3	/* OEM name (8) */
                 ;#define BPB_BytsPerSec		11	/* Sector size [byte] (2) */
                 ;#define BPB_SecPerClus		13	/* Cluster size [sector] (1) */
                 ;#define BPB_RsvdSecCnt		14	/* Size of reserved area [sector] (2) */
                 ;#define BPB_NumFATs			16	/* Number of FAT copies (1) */
                 ;#define BPB_RootEntCnt		17	/* Number of root directory entries for FAT12/16 (2) */
                 ;#define BPB_TotSec16		19	/* Volume size [sector] (2) */
                 ;#define BPB_Media			21	/* Media descriptor (1) */
                 ;#define BPB_FATSz16			22	/* FAT size [sector] (2) */
                 ;#define BPB_SecPerTrk		24	/* Track size [sector] (2) */
                 ;#define BPB_NumHeads		26	/* Number of heads (2) */
                 ;#define BPB_HiddSec			28	/* Number of special hidden sectors (4) */
                 ;#define BPB_TotSec32		32	/* Volume size [sector] (4) */
                 ;#define BS_DrvNum			36	/* Physical drive number (2) */
                 ;#define BS_BootSig			38	/* Extended boot signature (1) */
                 ;#define BS_VolID			39	/* Volume serial number (4) */
                 ;#define BS_VolLab			43	/* Volume label (8) */
                 ;#define BS_FilSysType		54	/* File system type (1) */
                 ;#define BPB_FATSz32			36	/* FAT size [sector] (4) */
                 ;#define BPB_ExtFlags		40	/* Extended flags (2) */
                 ;#define BPB_FSVer			42	/* File system version (2) */
                 ;#define BPB_RootClus		44	/* Root directory first cluster (4) */
                 ;#define BPB_FSInfo			48	/* Offset of FSINFO sector (2) */
                 ;#define BPB_BkBootSec		50	/* Offset of backup boot sector (2) */
                 ;#define BS_DrvNum32			64	/* Physical drive number (2) */
                 ;#define BS_BootSig32		66	/* Extended boot signature (1) */
                 ;#define BS_VolID32			67	/* Volume serial number (4) */
                 ;#define BS_VolLab32			71	/* Volume label (8) */
                 ;#define BS_FilSysType32		82	/* File system type (1) */
                 ;#define	FSI_LeadSig			0	/* FSI: Leading signature (4) */
                 ;#define	FSI_StrucSig		484	/* FSI: Structure signature (4) */
                 ;#define	FSI_Free_Count		488	/* FSI: Number of free clusters (4) */
                 ;#define	FSI_Nxt_Free		492	/* FSI: Last allocated cluster (4) */
                 ;#define MBR_Table			446	/* MBR: Partition table offset (2) */
                 ;#define	SZ_PTE				16	/* MBR: Size of a partition table entry */
                 ;#define BS_55AA				510	/* Boot sector signature (2) */
                 ;
                 ;#define	DIR_Name			0	/* Short file name (11) */
                 ;#define	DIR_Attr			11	/* Attribute (1) */
                 ;#define	DIR_NTres			12	/* NT flag (1) */
                 ;#define DIR_CrtTimeTenth	13	/* Created time sub-second (1) */
                 ;#define	DIR_CrtTime			14	/* Created time (2) */
                 ;#define	DIR_CrtDate			16	/* Created date (2) */
                 ;#define DIR_LstAccDate		18	/* Last accessed date (2) */
                 ;#define	DIR_FstClusHI		20	/* Higher 16-bit of first cluster (2) */
                 ;#define	DIR_WrtTime			22	/* Modified time (2) */
                 ;#define	DIR_WrtDate			24	/* Modified date (2) */
                 ;#define	DIR_FstClusLO		26	/* Lower 16-bit of first cluster (2) */
                 ;#define	DIR_FileSize		28	/* File size (4) */
                 ;#define	LDIR_Ord			0	/* LFN entry order and LLE flag (1) */
                 ;#define	LDIR_Attr			11	/* LFN attribute (1) */
                 ;#define	LDIR_Type			12	/* LFN type (1) */
                 ;#define	LDIR_Chksum			13	/* Sum of corresponding SFN entry */
                 ;#define	LDIR_FstClusLO		26	/* Filled by zero (0) */
                 ;#define	SZ_DIR				32		/* Size of a directory entry */
                 ;#define	LLE					0x40	/* Last long entry flag in LDIR_Ord */
                 ;#define	DDE					0xE5	/* Deleted directory entry mark in DIR_Name[0] */
                 ;#define	NDDE				0x05	/* Replacement of the character collides with DDE */
                 ;
                 ;
                 ;/*------------------------------------------------------------*/
                 ;/* Module private work area                                   */
                 ;/*------------------------------------------------------------*/
                 ;/* Note that uninitialized variables with static duration are
                 ;/  zeroed/nulled at start-up. If not, the compiler or start-up
                 ;/  routine is out of ANSI-C standard.
                 ;*/
                 ;
                 ;#if _VOLUMES
                 ;static
                 ;FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
                 ;#else
                 ;#error Number of volumes must not be 0.
                 ;#endif
                 ;
                 ;static
                 ;WORD Fsid;				/* File system mount ID */
                 ;
                 ;#if _FS_RPATH && _VOLUMES >= 2
                 ;static
                 ;BYTE CurrVol;			/* Current drive */
                 ;#endif
                 ;
                 ;#if _FS_LOCK
                 ;static
                 ;FILESEM	Files[_FS_LOCK];	/* Open object lock semaphores */
                 ;#endif
                 ;
                 ;#if _USE_LFN == 0			/* No LFN feature */
                 ;#define	DEF_NAMEBUF			BYTE sfn[12]
                 ;#define INIT_BUF(dobj)		(dobj).fn = sfn
                 ;#define	FREE_BUF()
                 ;
                 ;#elif _USE_LFN == 1			/* LFN feature with static working buffer */
                 ;static
                 ;WCHAR LfnBuf[_MAX_LFN+1];
                 ;#define	DEF_NAMEBUF			BYTE sfn[12]
                 ;#define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
                 ;#define	FREE_BUF()
                 ;
                 ;#elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
                 ;#define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR lbuf[_MAX_LFN+1]
                 ;#define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
                 ;#define	FREE_BUF()
                 ;
                 ;#elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
                 ;#define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR *lfn
                 ;#define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); \
                 ;							  if (!lfn) LEAVE_FF((dobj).fs, FR_NOT_ENOUGH_CORE); \
                 ;							  (dobj).lfn = lfn;	(dobj).fn = sfn; }
                 ;#define	FREE_BUF()			ff_memfree(lfn)
                 ;
                 ;#else
                 ;#error Wrong LFN configuration.
                 ;#endif
                 ;
                 ;
                 ;#ifdef _EXCVT
                 ;static
                 ;const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Module Private Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* String functions                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;/* Copy memory to memory */
                 ;static
                 ;void mem_cpy (void* dst, const void* src, UINT cnt) {
                 _mem_cpy_G000:
                 ; .FSTART _mem_cpy_G000
                 ;	BYTE *d = (BYTE*)dst;
                 ;	const BYTE *s = (const BYTE*)src;
                 ;
                 ;#if _WORD_ACCESS == 1
                 ;	while (cnt >= sizeof (int)) {
                 ;		*(int*)d = *(int*)s;
                 ;		d += sizeof (int); s += sizeof (int);
                 ;		cnt -= sizeof (int);
                 ;	}
                 ;#endif
                 ;	while (cnt--)
000d80 93ba      	ST   -Y,R27
000d81 93aa      	ST   -Y,R26
000d82 940e 3f8b 	CALL __SAVELOCR4
                 ;	*dst -> Y+8
                 ;	*src -> Y+6
                 ;	cnt -> Y+4
                 ;	*d -> R16,R17
                 ;	*s -> R18,R19
                +
000d84 8508     +LDD R16 , Y + 8
000d85 8519     +LDD R17 , Y + 8 + 1
                 	__GETWRS 16,17,8
                +
000d86 812e     +LDD R18 , Y + 6
000d87 813f     +LDD R19 , Y + 6 + 1
                 	__GETWRS 18,19,6
                 _0x19C:
000d88 81ec      	LDD  R30,Y+4
000d89 81fd      	LDD  R31,Y+4+1
000d8a 9731      	SBIW R30,1
000d8b 83ec      	STD  Y+4,R30
000d8c 83fd      	STD  Y+4+1,R31
000d8d 9631      	ADIW R30,1
000d8e f061      	BREQ _0x19E
                 ;		*d++ = *s++;
000d8f 931f      	PUSH R17
000d90 930f      	PUSH R16
                +
000d91 5f0f     +SUBI R16 , LOW ( - 1 )
000d92 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000d93 01d9      	MOVW R26,R18
                +
000d94 5f2f     +SUBI R18 , LOW ( - 1 )
000d95 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
000d96 91ec      	LD   R30,X
000d97 91af      	POP  R26
000d98 91bf      	POP  R27
000d99 93ec      	ST   X,R30
000d9a cfed      	RJMP _0x19C
                 _0x19E:
000d9b 940e 3f92 	CALL __LOADLOCR4
                 _0x20C0023:
000d9d 962a      	ADIW R28,10
000d9e 9508      	RET
                 ; .FEND
                 ;
                 ;/* Fill memory */
                 ;static
                 ;void mem_set (void* dst, int val, UINT cnt) {
                 _mem_set_G000:
                 ; .FSTART _mem_set_G000
                 ;	BYTE *d = (BYTE*)dst;
                 ;
                 ;	while (cnt--)
000d9f 93ba      	ST   -Y,R27
000da0 93aa      	ST   -Y,R26
000da1 931a      	ST   -Y,R17
000da2 930a      	ST   -Y,R16
                 ;	*dst -> Y+6
                 ;	val -> Y+4
                 ;	cnt -> Y+2
                 ;	*d -> R16,R17
                +
000da3 810e     +LDD R16 , Y + 6
000da4 811f     +LDD R17 , Y + 6 + 1
                 	__GETWRS 16,17,6
                 _0x19F:
000da5 81ea      	LDD  R30,Y+2
000da6 81fb      	LDD  R31,Y+2+1
000da7 9731      	SBIW R30,1
000da8 83ea      	STD  Y+2,R30
000da9 83fb      	STD  Y+2+1,R31
000daa 9631      	ADIW R30,1
000dab f049      	BREQ _0x1A1
                 ;		*d++ = (BYTE)val;
000dac 931f      	PUSH R17
000dad 930f      	PUSH R16
                +
000dae 5f0f     +SUBI R16 , LOW ( - 1 )
000daf 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000db0 81ec      	LDD  R30,Y+4
000db1 91af      	POP  R26
000db2 91bf      	POP  R27
000db3 93ec      	ST   X,R30
000db4 cff0      	RJMP _0x19F
                 _0x1A1:
000db5 c0b9      	RJMP _0x20C0020
                 ; .FEND
                 ;
                 ;/* Compare memory to memory */
                 ;static
                 ;int mem_cmp (const void* dst, const void* src, UINT cnt) {
                 _mem_cmp_G000:
                 ; .FSTART _mem_cmp_G000
                 ;	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
                 ;	int r = 0;
                 ;
                 ;	while (cnt-- && (r = *d++ - *s++) == 0) ;
000db6 93ba      	ST   -Y,R27
000db7 93aa      	ST   -Y,R26
000db8 940e 3f89 	CALL __SAVELOCR6
                 ;	*dst -> Y+10
                 ;	*src -> Y+8
                 ;	cnt -> Y+6
                 ;	*d -> R16,R17
                 ;	*s -> R18,R19
                 ;	r -> R20,R21
                +
000dba 850a     +LDD R16 , Y + 10
000dbb 851b     +LDD R17 , Y + 10 + 1
                 	__GETWRS 16,17,10
                +
000dbc 8528     +LDD R18 , Y + 8
000dbd 8539     +LDD R19 , Y + 8 + 1
                 	__GETWRS 18,19,8
                +
000dbe e040     +LDI R20 , LOW ( 0 )
000dbf e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x1A2:
000dc0 81ee      	LDD  R30,Y+6
000dc1 81ff      	LDD  R31,Y+6+1
000dc2 9731      	SBIW R30,1
000dc3 83ee      	STD  Y+6,R30
000dc4 83ff      	STD  Y+6+1,R31
000dc5 9631      	ADIW R30,1
000dc6 f081      	BREQ _0x1A5
000dc7 01d8      	MOVW R26,R16
                +
000dc8 5f0f     +SUBI R16 , LOW ( - 1 )
000dc9 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000dca 900c      	LD   R0,X
000dcb 2411      	CLR  R1
000dcc 01d9      	MOVW R26,R18
                +
000dcd 5f2f     +SUBI R18 , LOW ( - 1 )
000dce 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
000dcf 91ac      	LD   R26,X
000dd0 27bb      	CLR  R27
000dd1 01f0      	MOVW R30,R0
000dd2 1bea      	SUB  R30,R26
000dd3 0bfb      	SBC  R31,R27
000dd4 01af      	MOVW R20,R30
000dd5 9730      	SBIW R30,0
000dd6 f009      	BREQ _0x1A6
                 _0x1A5:
000dd7 c001      	RJMP _0x1A4
                 _0x1A6:
000dd8 cfe7      	RJMP _0x1A2
                 _0x1A4:
                 ;	return r;
000dd9 01fa      	MOVW R30,R20
000dda c34d      	RJMP _0x20C001E
                 ;}
                 ; .FEND
                 ;
                 ;/* Check if chr is contained in the string */
                 ;static
                 ;int chk_chr (const char* str, int chr) {
                 _chk_chr_G000:
                 ; .FSTART _chk_chr_G000
                 ;	while (*str && *str != chr) str++;
000ddb 93ba      	ST   -Y,R27
000ddc 93aa      	ST   -Y,R26
                 ;	*str -> Y+2
                 ;	chr -> Y+0
                 _0x1A7:
000ddd 81aa      	LDD  R26,Y+2
000dde 81bb      	LDD  R27,Y+2+1
000ddf 91ec      	LD   R30,X
000de0 30e0      	CPI  R30,0
000de1 f039      	BREQ _0x1AA
000de2 91ac      	LD   R26,X
000de3 81e8      	LD   R30,Y
000de4 81f9      	LDD  R31,Y+1
000de5 e0b0      	LDI  R27,0
000de6 17ea      	CP   R30,R26
000de7 07fb      	CPC  R31,R27
000de8 f409      	BRNE _0x1AB
                 _0x1AA:
000de9 c006      	RJMP _0x1A9
                 _0x1AB:
000dea 81ea      	LDD  R30,Y+2
000deb 81fb      	LDD  R31,Y+2+1
000dec 9631      	ADIW R30,1
000ded 83ea      	STD  Y+2,R30
000dee 83fb      	STD  Y+2+1,R31
000def cfed      	RJMP _0x1A7
                 _0x1A9:
000df0 81aa      	LDD  R26,Y+2
000df1 81bb      	LDD  R27,Y+2+1
000df2 91ec      	LD   R30,X
000df3 e0f0      	LDI  R31,0
                 _0x20C0022:
000df4 9624      	ADIW R28,4
000df5 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Request/Release grant to access the volume                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _FS_REENTRANT
                 ;static
                 ;int lock_fs (
                 ;	FATFS* fs		/* File system object */
                 ;)
                 ;{
                 ;	return ff_req_grant(fs->sobj);
                 ;}
                 ;
                 ;
                 ;static
                 ;void unlock_fs (
                 ;	FATFS* fs,		/* File system object */
                 ;	FRESULT res		/* Result code to be returned */
                 ;)
                 ;{
                 ;	if (fs &&
                 ;		res != FR_NOT_ENABLED &&
                 ;		res != FR_INVALID_DRIVE &&
                 ;		res != FR_INVALID_OBJECT &&
                 ;		res != FR_TIMEOUT) {
                 ;		ff_rel_grant(fs->sobj);
                 ;	}
                 ;}
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* File lock control functions                                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _FS_LOCK
                 ;
                 ;static
                 ;FRESULT chk_lock (	/* Check if the file can be accessed */
                 ;	DIR* dp,		/* Directory object pointing the file to be checked */
                 ;	int acc			/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
                 ;)
                 ;{
                 ;	UINT i, be;
                 ;
                 ;	/* Search file semaphore table */
                 ;	for (i = be = 0; i < _FS_LOCK; i++) {
                 ;		if (Files[i].fs) {	/* Existing entry */
                 ;			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
                 ;				Files[i].clu == dp->sclust &&
                 ;				Files[i].idx == dp->index) break;
                 ;		} else {			/* Blank entry */
                 ;			be = 1;
                 ;		}
                 ;	}
                 ;	if (i == _FS_LOCK)	/* The object is not opened */
                 ;		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new object? */
                 ;
                 ;	/* The object has been opened. Reject any open against writing file and all write mode open */
                 ;	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
                 ;}
                 ;
                 ;
                 ;static
                 ;int enq_lock (void)	/* Check if an entry is available for a new object */
                 ;{
                 ;	UINT i;
                 ;
                 ;	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
                 ;	return (i == _FS_LOCK) ? 0 : 1;
                 ;}
                 ;
                 ;
                 ;static
                 ;UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
                 ;	DIR* dp,	/* Directory object pointing the file to register or increment */
                 ;	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
                 ;)
                 ;{
                 ;	UINT i;
                 ;
                 ;
                 ;	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
                 ;		if (Files[i].fs == dp->fs &&
                 ;			Files[i].clu == dp->sclust &&
                 ;			Files[i].idx == dp->index) break;
                 ;	}
                 ;
                 ;	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
                 ;		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
                 ;		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
                 ;		Files[i].fs = dp->fs;
                 ;		Files[i].clu = dp->sclust;
                 ;		Files[i].idx = dp->index;
                 ;		Files[i].ctr = 0;
                 ;	}
                 ;
                 ;	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
                 ;
                 ;	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
                 ;
                 ;	return i + 1;
                 ;}
                 ;
                 ;
                 ;static
                 ;FRESULT dec_lock (	/* Decrement object open counter */
                 ;	UINT i			/* Semaphore index (1..) */
                 ;)
                 ;{
                 ;	WORD n;
                 ;	FRESULT res;
                 ;
                 ;
                 ;	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
                 ;		n = Files[i].ctr;
                 ;		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
                 ;		if (n) n--;					/* Decrement read mode open count */
                 ;		Files[i].ctr = n;
                 ;		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
                 ;		res = FR_OK;
                 ;	} else {
                 ;		res = FR_INT_ERR;			/* Invalid index nunber */
                 ;	}
                 ;	return res;
                 ;}
                 ;
                 ;
                 ;static
                 ;void clear_lock (	/* Clear lock entries of the volume */
                 ;	FATFS *fs
                 ;)
                 ;{
                 ;	UINT i;
                 ;
                 ;	for (i = 0; i < _FS_LOCK; i++) {
                 ;		if (Files[i].fs == fs) Files[i].fs = 0;
                 ;	}
                 ;}
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Move/Flush disk access window in the file system object               */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;static
                 ;FRESULT sync_window (
                 ;	FATFS* fs		/* File system object */
                 ;)
                 ;{
                 _sync_window_G000:
                 ; .FSTART _sync_window_G000
                 ;	DWORD wsect;
                 ;	UINT nf;
                 ;
                 ;
                 ;	if (fs->wflag) {	/* Write back the sector if it is dirty */
000df6 93ba      	ST   -Y,R27
000df7 93aa      	ST   -Y,R26
000df8 9724      	SBIW R28,4
000df9 931a      	ST   -Y,R17
000dfa 930a      	ST   -Y,R16
                 ;	*fs -> Y+6
                 ;	wsect -> Y+2
                 ;	nf -> R16,R17
000dfb 81ee      	LDD  R30,Y+6
000dfc 81ff      	LDD  R31,Y+6+1
000dfd 81e4      	LDD  R30,Z+4
000dfe 30e0      	CPI  R30,0
000dff f409      	BRNE PC+2
000e00 c06d      	RJMP _0x1AC
                 ;		wsect = fs->winsect;	/* Current sector number */
000e01 81ae      	LDD  R26,Y+6
000e02 81bf      	LDD  R27,Y+6+1
000e03 969a      	ADIW R26,42
000e04 940e 3f31 	CALL __GETD1P
                +
000e06 83ea     +STD Y + 2 , R30
000e07 83fb     +STD Y + 2 + 1 , R31
000e08 836c     +STD Y + 2 + 2 , R22
000e09 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;		if (disk_write(fs->drv, fs->win, wsect, 1))
000e0a 81ee      	LDD  R30,Y+6
000e0b 81ff      	LDD  R31,Y+6+1
000e0c 81a1      	LDD  R26,Z+1
000e0d 93aa      	ST   -Y,R26
000e0e 81ef      	LDD  R30,Y+7
000e0f 85f8      	LDD  R31,Y+7+1
000e10 96be      	ADIW R30,46
000e11 93fa      	ST   -Y,R31
000e12 93ea      	ST   -Y,R30
                +
000e13 81ed     +LDD R30 , Y + 5
000e14 81fe     +LDD R31 , Y + 5 + 1
000e15 816f     +LDD R22 , Y + 5 + 2
000e16 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
000e17 940e 3f5a 	CALL __PUTPARD1
000e19 e0a1      	LDI  R26,LOW(1)
000e1a e0b0      	LDI  R27,0
000e1b dc3c      	RCALL _disk_write
000e1c 30e0      	CPI  R30,0
000e1d f011      	BREQ _0x1AD
                 ;			return FR_DISK_ERR;
000e1e e0e1      	LDI  R30,LOW(1)
000e1f c04f      	RJMP _0x20C0020
                 ;		fs->wflag = 0;
                 _0x1AD:
000e20 81ae      	LDD  R26,Y+6
000e21 81bf      	LDD  R27,Y+6+1
000e22 9614      	ADIW R26,4
000e23 e0e0      	LDI  R30,LOW(0)
000e24 93ec      	ST   X,R30
                 ;		if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
000e25 81ae      	LDD  R26,Y+6
000e26 81bf      	LDD  R27,Y+6+1
000e27 965e      	ADIW R26,30
000e28 940e 3f31 	CALL __GETD1P
                +
000e2a 81aa     +LDD R26 , Y + 2
000e2b 81bb     +LDD R27 , Y + 2 + 1
000e2c 818c     +LDD R24 , Y + 2 + 2
000e2d 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
000e2e 940e 3f64 	CALL __SWAPD12
000e30 940e 3dda 	CALL __SUBD12
000e32 937f      	PUSH R23
000e33 936f      	PUSH R22
000e34 93ff      	PUSH R31
000e35 93ef      	PUSH R30
000e36 81ae      	LDD  R26,Y+6
000e37 81bf      	LDD  R27,Y+6+1
000e38 9656      	ADIW R26,22
000e39 940e 3f31 	CALL __GETD1P
000e3b 91af      	POP  R26
000e3c 91bf      	POP  R27
000e3d 918f      	POP  R24
000e3e 919f      	POP  R25
000e3f 940e 3f84 	CALL __CPD21
000e41 f560      	BRSH _0x1AE
                 ;			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
000e42 81ee      	LDD  R30,Y+6
000e43 81ff      	LDD  R31,Y+6+1
000e44 8103      	LDD  R16,Z+3
000e45 2711      	CLR  R17
                 _0x1B0:
                +
000e46 3002     +CPI R16 , LOW ( 2 )
000e47 e0e0     +LDI R30 , HIGH ( 2 )
000e48 071e     +CPC R17 , R30
                 	__CPWRN 16,17,2
000e49 f120      	BRLO _0x1B1
                 ;				wsect += fs->fsize;
000e4a 81ae      	LDD  R26,Y+6
000e4b 81bf      	LDD  R27,Y+6+1
000e4c 9656      	ADIW R26,22
000e4d 940e 3f31 	CALL __GETD1P
                +
000e4f 81aa     +LDD R26 , Y + 2
000e50 81bb     +LDD R27 , Y + 2 + 1
000e51 818c     +LDD R24 , Y + 2 + 2
000e52 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
000e53 940e 3dd0 	CALL __ADDD12
                +
000e55 83ea     +STD Y + 2 , R30
000e56 83fb     +STD Y + 2 + 1 , R31
000e57 836c     +STD Y + 2 + 2 , R22
000e58 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;				disk_write(fs->drv, fs->win, wsect, 1);
000e59 81ee      	LDD  R30,Y+6
000e5a 81ff      	LDD  R31,Y+6+1
000e5b 81a1      	LDD  R26,Z+1
000e5c 93aa      	ST   -Y,R26
000e5d 81ef      	LDD  R30,Y+7
000e5e 85f8      	LDD  R31,Y+7+1
000e5f 96be      	ADIW R30,46
000e60 93fa      	ST   -Y,R31
000e61 93ea      	ST   -Y,R30
                +
000e62 81ed     +LDD R30 , Y + 5
000e63 81fe     +LDD R31 , Y + 5 + 1
000e64 816f     +LDD R22 , Y + 5 + 2
000e65 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
000e66 940e 3f5a 	CALL __PUTPARD1
000e68 e0a1      	LDI  R26,LOW(1)
000e69 e0b0      	LDI  R27,0
000e6a dbed      	RCALL _disk_write
                 ;			}
                +
000e6b 5001     +SUBI R16 , LOW ( 1 )
000e6c 4010     +SBCI R17 , HIGH ( 1 )
                 	__SUBWRN 16,17,1
000e6d cfd8      	RJMP _0x1B0
                 _0x1B1:
                 ;		}
                 ;	}
                 _0x1AE:
                 ;	return FR_OK;
                 _0x1AC:
000e6e e0e0      	LDI  R30,LOW(0)
                 _0x20C0020:
000e6f 8119      	LDD  R17,Y+1
000e70 8108      	LDD  R16,Y+0
                 _0x20C0021:
000e71 9628      	ADIW R28,8
000e72 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;static
                 ;FRESULT move_window (
                 ;	FATFS* fs,		/* File system object */
                 ;	DWORD sector	/* Sector number to make appearance in the fs->win[] */
                 ;)
                 ;{
                 _move_window_G000:
                 ; .FSTART _move_window_G000
                 ;	if (sector != fs->winsect)
000e73 940e 3f5f 	CALL __PUTPARD2
                 ;	*fs -> Y+4
                 ;	sector -> Y+0
000e75 81ac      	LDD  R26,Y+4
000e76 81bd      	LDD  R27,Y+4+1
000e77 969a      	ADIW R26,42
000e78 940e 3f31 	CALL __GETD1P
000e7a 940e 3f4b 	CALL __GETD2S0
000e7c 940e 3f7f 	CALL __CPD12
000e7e f121      	BREQ _0x1B2
                 ;    {	/* Changed current window */
                 ;#if !_FS_READONLY
                 ;		if (sync_window(fs) != FR_OK)
000e7f 81ac      	LDD  R26,Y+4
000e80 81bd      	LDD  R27,Y+4+1
000e81 df74      	RCALL _sync_window_G000
000e82 30e0      	CPI  R30,0
000e83 f011      	BREQ _0x1B3
                 ;			return FR_DISK_ERR;
000e84 e0e1      	LDI  R30,LOW(1)
000e85 c16a      	RJMP _0x20C001F
                 ;#endif
                 ;		if (disk_read(fs->drv, fs->win, sector, 1))
                 _0x1B3:
000e86 81ec      	LDD  R30,Y+4
000e87 81fd      	LDD  R31,Y+4+1
000e88 81a1      	LDD  R26,Z+1
000e89 93aa      	ST   -Y,R26
000e8a 81ed      	LDD  R30,Y+5
000e8b 81fe      	LDD  R31,Y+5+1
000e8c 96be      	ADIW R30,46
000e8d 93fa      	ST   -Y,R31
000e8e 93ea      	ST   -Y,R30
                +
000e8f 81eb     +LDD R30 , Y + 3
000e90 81fc     +LDD R31 , Y + 3 + 1
000e91 816d     +LDD R22 , Y + 3 + 2
000e92 817e     +LDD R23 , Y + 3 + 3
                 	__GETD1S 3
000e93 940e 3f5a 	CALL __PUTPARD1
000e95 e0a1      	LDI  R26,LOW(1)
000e96 e0b0      	LDI  R27,0
000e97 db5f      	RCALL _disk_read
000e98 30e0      	CPI  R30,0
000e99 f011      	BREQ _0x1B4
                 ;        {
                 ;            // PORTD.0 = 1;
                 ;			return FR_DISK_ERR;
000e9a e0e1      	LDI  R30,LOW(1)
000e9b c154      	RJMP _0x20C001F
                 ;        }
                 ;		fs->winsect = sector;
                 _0x1B4:
000e9c 940e 3f46 	CALL __GETD1S0
                +
000e9e 81ac     +LDD R26 , Y + 4
000e9f 81bd     +LDD R27 , Y + 4 + 1
000ea0 969a     +ADIW R26 , 42
000ea1 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 4,42
                 ;	}
                 ;
                 ;	return FR_OK;
                 _0x1B2:
000ea3 e0e0      	LDI  R30,LOW(0)
000ea4 c14b      	RJMP _0x20C001F
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Synchronize file system and strage device                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;static
                 ;FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
                 ;	FATFS* fs		/* File system object */
                 ;)
                 ;{
                 _sync_fs_G000:
                 ; .FSTART _sync_fs_G000
                 ;	FRESULT res;
                 ;
                 ;
                 ;	res = sync_window(fs);
000ea5 93ba      	ST   -Y,R27
000ea6 93aa      	ST   -Y,R26
000ea7 931a      	ST   -Y,R17
                 ;	*fs -> Y+1
                 ;	res -> R17
000ea8 81a9      	LDD  R26,Y+1
000ea9 81ba      	LDD  R27,Y+1+1
000eaa df4b      	RCALL _sync_window_G000
000eab 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
000eac 3010      	CPI  R17,0
000ead f009      	BREQ PC+2
000eae c102      	RJMP _0x1B5
                 ;		/* Update FSINFO sector if needed */
                 ;		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
000eaf 81a9      	LDD  R26,Y+1
000eb0 81ba      	LDD  R27,Y+1+1
000eb1 91ac      	LD   R26,X
000eb2 30a3      	CPI  R26,LOW(0x3)
000eb3 f429      	BRNE _0x1B7
000eb4 81e9      	LDD  R30,Y+1
000eb5 81fa      	LDD  R31,Y+1+1
000eb6 81a5      	LDD  R26,Z+5
000eb7 30a1      	CPI  R26,LOW(0x1)
000eb8 f009      	BREQ _0x1B8
                 _0x1B7:
000eb9 c0eb      	RJMP _0x1B6
                 _0x1B8:
                 ;			/* Create FSINFO structure */
                 ;			mem_set(fs->win, 0, SS(fs));
000eba 81e9      	LDD  R30,Y+1
000ebb 81fa      	LDD  R31,Y+1+1
000ebc 96be      	ADIW R30,46
000ebd 93fa      	ST   -Y,R31
000ebe 93ea      	ST   -Y,R30
000ebf e0e0      	LDI  R30,LOW(0)
000ec0 e0f0      	LDI  R31,HIGH(0)
000ec1 93fa      	ST   -Y,R31
000ec2 93ea      	ST   -Y,R30
000ec3 e0a0      	LDI  R26,LOW(512)
000ec4 e0b2      	LDI  R27,HIGH(512)
000ec5 ded9      	RCALL _mem_set_G000
                 ;			ST_WORD(fs->win+BS_55AA, 0xAA55);
000ec6 81e9      	LDD  R30,Y+1
000ec7 81fa      	LDD  R31,Y+1+1
000ec8 96be      	ADIW R30,46
000ec9 50e2      	SUBI R30,LOW(-510)
000eca 4ffe      	SBCI R31,HIGH(-510)
000ecb e5a5      	LDI  R26,LOW(85)
000ecc 83a0      	STD  Z+0,R26
000ecd 81e9      	LDD  R30,Y+1
000ece 81fa      	LDD  R31,Y+1+1
000ecf 96be      	ADIW R30,46
000ed0 50e1      	SUBI R30,LOW(-511)
000ed1 4ffe      	SBCI R31,HIGH(-511)
000ed2 eaaa      	LDI  R26,LOW(170)
000ed3 83a0      	STD  Z+0,R26
                 ;			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
000ed4 81e9      	LDD  R30,Y+1
000ed5 81fa      	LDD  R31,Y+1+1
000ed6 96be      	ADIW R30,46
000ed7 e5a2      	LDI  R26,LOW(82)
000ed8 83a0      	STD  Z+0,R26
000ed9 81e9      	LDD  R30,Y+1
000eda 81fa      	LDD  R31,Y+1+1
000edb 96bf      	ADIW R30,47
000edc 83a0      	STD  Z+0,R26
000edd 81e9      	LDD  R30,Y+1
000ede 81fa      	LDD  R31,Y+1+1
000edf 96f0      	ADIW R30,48
000ee0 e6a1      	LDI  R26,LOW(97)
000ee1 83a0      	STD  Z+0,R26
000ee2 81e9      	LDD  R30,Y+1
000ee3 81fa      	LDD  R31,Y+1+1
000ee4 96f1      	ADIW R30,49
000ee5 e4a1      	LDI  R26,LOW(65)
000ee6 83a0      	STD  Z+0,R26
                 ;			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
000ee7 81e9      	LDD  R30,Y+1
000ee8 81fa      	LDD  R31,Y+1+1
000ee9 96be      	ADIW R30,46
000eea 51ec      	SUBI R30,LOW(-484)
000eeb 4ffe      	SBCI R31,HIGH(-484)
000eec e7a2      	LDI  R26,LOW(114)
000eed 83a0      	STD  Z+0,R26
000eee 81e9      	LDD  R30,Y+1
000eef 81fa      	LDD  R31,Y+1+1
000ef0 96be      	ADIW R30,46
000ef1 51eb      	SUBI R30,LOW(-485)
000ef2 4ffe      	SBCI R31,HIGH(-485)
000ef3 83a0      	STD  Z+0,R26
000ef4 81e9      	LDD  R30,Y+1
000ef5 81fa      	LDD  R31,Y+1+1
000ef6 96be      	ADIW R30,46
000ef7 51ea      	SUBI R30,LOW(-486)
000ef8 4ffe      	SBCI R31,HIGH(-486)
000ef9 e4a1      	LDI  R26,LOW(65)
000efa 83a0      	STD  Z+0,R26
000efb 81e9      	LDD  R30,Y+1
000efc 81fa      	LDD  R31,Y+1+1
000efd 96be      	ADIW R30,46
000efe 51e9      	SUBI R30,LOW(-487)
000eff 4ffe      	SBCI R31,HIGH(-487)
000f00 e6a1      	LDI  R26,LOW(97)
000f01 83a0      	STD  Z+0,R26
                 ;			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
000f02 81e9      	LDD  R30,Y+1
000f03 81fa      	LDD  R31,Y+1+1
000f04 96be      	ADIW R30,46
000f05 51e8      	SUBI R30,LOW(-488)
000f06 4ffe      	SBCI R31,HIGH(-488)
000f07 01df      	MOVW R26,R30
000f08 81e9      	LDD  R30,Y+1
000f09 81fa      	LDD  R31,Y+1+1
000f0a 85e6      	LDD  R30,Z+14
000f0b 93ec      	ST   X,R30
000f0c 81e9      	LDD  R30,Y+1
000f0d 81fa      	LDD  R31,Y+1+1
000f0e 96be      	ADIW R30,46
000f0f 51e7      	SUBI R30,LOW(-489)
000f10 4ffe      	SBCI R31,HIGH(-489)
000f11 010f      	MOVW R0,R30
000f12 81e9      	LDD  R30,Y+1
000f13 81fa      	LDD  R31,Y+1+1
000f14 85a6      	LDD  R26,Z+14
000f15 85b7      	LDD  R27,Z+15
000f16 01fd      	MOVW R30,R26
000f17 2fef      	MOV  R30,R31
000f18 e0f0      	LDI  R31,0
000f19 01d0      	MOVW R26,R0
000f1a 93ec      	ST   X,R30
000f1b 81e9      	LDD  R30,Y+1
000f1c 81fa      	LDD  R31,Y+1+1
000f1d 96be      	ADIW R30,46
000f1e 51e6      	SUBI R30,LOW(-490)
000f1f 4ffe      	SBCI R31,HIGH(-490)
000f20 010f      	MOVW R0,R30
000f21 81e9      	LDD  R30,Y+1
000f22 81fa      	LDD  R31,Y+1+1
                +
000f23 85a6     +LDD R26 , Z + 14
000f24 85b7     +LDD R27 , Z + 14 + 1
000f25 8980     +LDD R24 , Z + 14 + 2
000f26 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
000f27 01fd      	MOVW R30,R26
000f28 01bc      	MOVW R22,R24
000f29 940e 3e49 	CALL __LSRD16
000f2b 01d0      	MOVW R26,R0
000f2c 93ec      	ST   X,R30
000f2d 81e9      	LDD  R30,Y+1
000f2e 81fa      	LDD  R31,Y+1+1
000f2f 96be      	ADIW R30,46
000f30 51e5      	SUBI R30,LOW(-491)
000f31 4ffe      	SBCI R31,HIGH(-491)
000f32 93ff      	PUSH R31
000f33 93ef      	PUSH R30
000f34 81e9      	LDD  R30,Y+1
000f35 81fa      	LDD  R31,Y+1+1
                +
000f36 85a6     +LDD R26 , Z + 14
000f37 85b7     +LDD R27 , Z + 14 + 1
000f38 8980     +LDD R24 , Z + 14 + 2
000f39 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
000f3a e1e8      	LDI  R30,LOW(24)
000f3b 940e 3e18 	CALL __LSRD12
000f3d 91af      	POP  R26
000f3e 91bf      	POP  R27
000f3f 93ec      	ST   X,R30
                 ;			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
000f40 81e9      	LDD  R30,Y+1
000f41 81fa      	LDD  R31,Y+1+1
000f42 96be      	ADIW R30,46
000f43 51e4      	SUBI R30,LOW(-492)
000f44 4ffe      	SBCI R31,HIGH(-492)
000f45 01df      	MOVW R26,R30
000f46 81e9      	LDD  R30,Y+1
000f47 81fa      	LDD  R31,Y+1+1
000f48 85e2      	LDD  R30,Z+10
000f49 93ec      	ST   X,R30
000f4a 81e9      	LDD  R30,Y+1
000f4b 81fa      	LDD  R31,Y+1+1
000f4c 96be      	ADIW R30,46
000f4d 51e3      	SUBI R30,LOW(-493)
000f4e 4ffe      	SBCI R31,HIGH(-493)
000f4f 010f      	MOVW R0,R30
000f50 81e9      	LDD  R30,Y+1
000f51 81fa      	LDD  R31,Y+1+1
000f52 85a2      	LDD  R26,Z+10
000f53 85b3      	LDD  R27,Z+11
000f54 01fd      	MOVW R30,R26
000f55 2fef      	MOV  R30,R31
000f56 e0f0      	LDI  R31,0
000f57 01d0      	MOVW R26,R0
000f58 93ec      	ST   X,R30
000f59 81e9      	LDD  R30,Y+1
000f5a 81fa      	LDD  R31,Y+1+1
000f5b 96be      	ADIW R30,46
000f5c 51e2      	SUBI R30,LOW(-494)
000f5d 4ffe      	SBCI R31,HIGH(-494)
000f5e 010f      	MOVW R0,R30
000f5f 81e9      	LDD  R30,Y+1
000f60 81fa      	LDD  R31,Y+1+1
                +
000f61 85a2     +LDD R26 , Z + 10
000f62 85b3     +LDD R27 , Z + 10 + 1
000f63 8584     +LDD R24 , Z + 10 + 2
000f64 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
000f65 01fd      	MOVW R30,R26
000f66 01bc      	MOVW R22,R24
000f67 940e 3e49 	CALL __LSRD16
000f69 01d0      	MOVW R26,R0
000f6a 93ec      	ST   X,R30
000f6b 81e9      	LDD  R30,Y+1
000f6c 81fa      	LDD  R31,Y+1+1
000f6d 96be      	ADIW R30,46
000f6e 51e1      	SUBI R30,LOW(-495)
000f6f 4ffe      	SBCI R31,HIGH(-495)
000f70 93ff      	PUSH R31
000f71 93ef      	PUSH R30
000f72 81e9      	LDD  R30,Y+1
000f73 81fa      	LDD  R31,Y+1+1
                +
000f74 85a2     +LDD R26 , Z + 10
000f75 85b3     +LDD R27 , Z + 10 + 1
000f76 8584     +LDD R24 , Z + 10 + 2
000f77 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
000f78 e1e8      	LDI  R30,LOW(24)
000f79 940e 3e18 	CALL __LSRD12
000f7b 91af      	POP  R26
000f7c 91bf      	POP  R27
000f7d 93ec      	ST   X,R30
                 ;			/* Write it into the FSINFO sector */
                 ;			fs->winsect = fs->volbase + 1;
000f7e 81a9      	LDD  R26,Y+1
000f7f 81ba      	LDD  R27,Y+1+1
000f80 965a      	ADIW R26,26
000f81 940e 3f31 	CALL __GETD1P
                +
000f83 5fef     +SUBI R30 , LOW ( - 1 )
000f84 4fff     +SBCI R31 , HIGH ( - 1 )
000f85 4f6f     +SBCI R22 , BYTE3 ( - 1 )
000f86 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__ADDD1N 1
                +
000f87 81a9     +LDD R26 , Y + 1
000f88 81ba     +LDD R27 , Y + 1 + 1
000f89 969a     +ADIW R26 , 42
000f8a 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 1,42
                 ;			disk_write(fs->drv, fs->win, fs->winsect, 1);
000f8c 81e9      	LDD  R30,Y+1
000f8d 81fa      	LDD  R31,Y+1+1
000f8e 81a1      	LDD  R26,Z+1
000f8f 93aa      	ST   -Y,R26
000f90 81ea      	LDD  R30,Y+2
000f91 81fb      	LDD  R31,Y+2+1
000f92 96be      	ADIW R30,46
000f93 93fa      	ST   -Y,R31
000f94 93ea      	ST   -Y,R30
000f95 81ec      	LDD  R30,Y+4
000f96 81fd      	LDD  R31,Y+4+1
                +
000f97 a5a2     +LDD R26 , Z + 42
000f98 a5b3     +LDD R27 , Z + 42 + 1
000f99 a584     +LDD R24 , Z + 42 + 2
000f9a a595     +LDD R25 , Z + 42 + 3
                 	__GETD2Z 42
000f9b 940e 3f5f 	CALL __PUTPARD2
000f9d e0a1      	LDI  R26,LOW(1)
000f9e e0b0      	LDI  R27,0
000f9f dab8      	RCALL _disk_write
                 ;			fs->fsi_flag = 0;
000fa0 81a9      	LDD  R26,Y+1
000fa1 81ba      	LDD  R27,Y+1+1
000fa2 9615      	ADIW R26,5
000fa3 e0e0      	LDI  R30,LOW(0)
000fa4 93ec      	ST   X,R30
                 ;		}
                 ;		/* Make sure that no pending write process in the physical drive */
                 ;		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
                 _0x1B6:
000fa5 81e9      	LDD  R30,Y+1
000fa6 81fa      	LDD  R31,Y+1+1
000fa7 81a1      	LDD  R26,Z+1
000fa8 93aa      	ST   -Y,R26
000fa9 e0e0      	LDI  R30,LOW(0)
000faa 93ea      	ST   -Y,R30
000fab e0a0      	LDI  R26,LOW(0)
000fac e0b0      	LDI  R27,0
000fad db2e      	RCALL _disk_ioctl
000fae 30e0      	CPI  R30,0
000faf f009      	BREQ _0x1B9
                 ;			res = FR_DISK_ERR;
000fb0 e011      	LDI  R17,LOW(1)
                 ;	}
                 _0x1B9:
                 ;
                 ;	return res;
                 _0x1B5:
000fb1 2fe1      	MOV  R30,R17
000fb2 8118      	LDD  R17,Y+0
000fb3 9623      	ADIW R28,3
000fb4 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get sector# from cluster#                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;
                 ;DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
                 ;	FATFS* fs,		/* File system object */
                 ;	DWORD clst		/* Cluster# to be converted */
                 ;)
                 ;{
                 _clust2sect:
                 ; .FSTART _clust2sect
                 ;	clst -= 2;
000fb5 940e 3f5f 	CALL __PUTPARD2
                 ;	*fs -> Y+4
                 ;	clst -> Y+0
000fb7 940e 3f46 	CALL __GETD1S0
                +
000fb9 50e2     +SUBI R30 , LOW ( 2 )
000fba 40f0     +SBCI R31 , HIGH ( 2 )
000fbb 4060     +SBCI R22 , BYTE3 ( 2 )
000fbc 4070     +SBCI R23 , BYTE4 ( 2 )
                 	__SUBD1N 2
000fbd 940e 3f50 	CALL __PUTD1S0
                 ;	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
000fbf 81ec      	LDD  R30,Y+4
000fc0 81fd      	LDD  R31,Y+4+1
                +
000fc1 89a2     +LDD R26 , Z + 18
000fc2 89b3     +LDD R27 , Z + 18 + 1
000fc3 8984     +LDD R24 , Z + 18 + 2
000fc4 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
                +
000fc5 e0e2     +LDI R30 , LOW ( 0x2 )
000fc6 e0f0     +LDI R31 , HIGH ( 0x2 )
000fc7 e060     +LDI R22 , BYTE3 ( 0x2 )
000fc8 e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
000fc9 940e 3f64 	CALL __SWAPD12
000fcb 940e 3dda 	CALL __SUBD12
000fcd 940e 3f4b 	CALL __GETD2S0
000fcf 940e 3f84 	CALL __CPD21
000fd1 f028      	BRLO _0x1BA
                +
000fd2 e0e0     +LDI R30 , LOW ( 0x0 )
000fd3 e0f0     +LDI R31 , HIGH ( 0x0 )
000fd4 e060     +LDI R22 , BYTE3 ( 0x0 )
000fd5 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
000fd6 c019      	RJMP _0x20C001F
                 ;	return clst * fs->csize + fs->database;
                 _0x1BA:
000fd7 81ec      	LDD  R30,Y+4
000fd8 81fd      	LDD  R31,Y+4+1
000fd9 81e2      	LDD  R30,Z+2
000fda e0f0      	LDI  R31,0
000fdb 940e 3f4b 	CALL __GETD2S0
000fdd 940e 3e59 	CALL __CWD1
000fdf 940e 3e70 	CALL __MULD12U
000fe1 937f      	PUSH R23
000fe2 936f      	PUSH R22
000fe3 93ff      	PUSH R31
000fe4 93ef      	PUSH R30
000fe5 81ac      	LDD  R26,Y+4
000fe6 81bd      	LDD  R27,Y+4+1
000fe7 9696      	ADIW R26,38
000fe8 940e 3f31 	CALL __GETD1P
000fea 91af      	POP  R26
000feb 91bf      	POP  R27
000fec 918f      	POP  R24
000fed 919f      	POP  R25
000fee 940e 3dd0 	CALL __ADDD12
                 _0x20C001F:
000ff0 9626      	ADIW R28,6
000ff1 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT access - Read value of a FAT entry                                */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, Else:Cluster status */
                 ;	FATFS* fs,	/* File system object */
                 ;	DWORD clst	/* Cluster# to get the link information */
                 ;)
                 ;{
                 _get_fat:
                 ; .FSTART _get_fat
                 ;	UINT wc, bc;
                 ;	BYTE *p;
                 ;
                 ;
                 ;	if (clst < 2 || clst >= fs->n_fatent)	/* Check range */
000ff2 940e 3f5f 	CALL __PUTPARD2
000ff4 940e 3f89 	CALL __SAVELOCR6
                 ;	*fs -> Y+10
                 ;	clst -> Y+6
                 ;	wc -> R16,R17
                 ;	bc -> R18,R19
                 ;	*p -> R20,R21
                +
000ff6 81ae     +LDD R26 , Y + 6
000ff7 81bf     +LDD R27 , Y + 6 + 1
000ff8 8588     +LDD R24 , Y + 6 + 2
000ff9 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
                +
000ffa 30a2     +CPI R26 , LOW ( 0x2 )
000ffb e0e0     +LDI R30 , HIGH ( 0x2 )
000ffc 07be     +CPC R27 , R30
000ffd e0e0     +LDI R30 , BYTE3 ( 0x2 )
000ffe 078e     +CPC R24 , R30
000fff e0e0     +LDI R30 , BYTE4 ( 0x2 )
001000 079e     +CPC R25 , R30
                 	__CPD2N 0x2
001001 f060      	BRLO _0x1BC
001002 85aa      	LDD  R26,Y+10
001003 85bb      	LDD  R27,Y+10+1
001004 9652      	ADIW R26,18
001005 940e 3f31 	CALL __GETD1P
                +
001007 81ae     +LDD R26 , Y + 6
001008 81bf     +LDD R27 , Y + 6 + 1
001009 8588     +LDD R24 , Y + 6 + 2
00100a 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
00100b 940e 3f84 	CALL __CPD21
00100d f028      	BRLO _0x1BB
                 _0x1BC:
                 ;		return 1;
                +
00100e e0e1     +LDI R30 , LOW ( 0x1 )
00100f e0f0     +LDI R31 , HIGH ( 0x1 )
001010 e060     +LDI R22 , BYTE3 ( 0x1 )
001011 e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
001012 c115      	RJMP _0x20C001E
                 ;
                 ;	switch (fs->fs_type) {
                 _0x1BB:
001013 85aa      	LDD  R26,Y+10
001014 85bb      	LDD  R27,Y+10+1
001015 91ec      	LD   R30,X
001016 e0f0      	LDI  R31,0
                 ;	case FS_FAT12 :
001017 30e1      	CPI  R30,LOW(0x1)
001018 e0a0      	LDI  R26,HIGH(0x1)
001019 07fa      	CPC  R31,R26
00101a f009      	BREQ PC+2
00101b c068      	RJMP _0x1C1
                 ;		bc = (UINT)clst; bc += bc / 2;
                +
00101c 812e     +LDD R18 , Y + 6
00101d 813f     +LDD R19 , Y + 6 + 1
                 	__GETWRS 18,19,6
00101e 01f9      	MOVW R30,R18
00101f 95f6      	LSR  R31
001020 95e7      	ROR  R30
                +
001021 0f2e     +ADD R18 , R30
001022 1f3f     +ADC R19 , R31
                 	__ADDWRR 18,19,30,31
                 ;		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
001023 85ea      	LDD  R30,Y+10
001024 85fb      	LDD  R31,Y+10+1
001025 93fa      	ST   -Y,R31
001026 93ea      	ST   -Y,R30
001027 85ec      	LDD  R30,Y+12
001028 85fd      	LDD  R31,Y+12+1
                +
001029 8da6     +LDD R26 , Z + 30
00102a 8db7     +LDD R27 , Z + 30 + 1
00102b a180     +LDD R24 , Z + 30 + 2
00102c a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
00102d 939f      	PUSH R25
00102e 938f      	PUSH R24
00102f 93bf      	PUSH R27
001030 93af      	PUSH R26
001031 01d9      	MOVW R26,R18
001032 e0e0      	LDI  R30,LOW(512)
001033 e0f2      	LDI  R31,HIGH(512)
001034 940e 3eae 	CALL __DIVW21U
001036 91af      	POP  R26
001037 91bf      	POP  R27
001038 918f      	POP  R24
001039 919f      	POP  R25
00103a 2766      	CLR  R22
00103b 2777      	CLR  R23
00103c 940e 3dd5 	CALL __ADDD21
00103e de34      	RCALL _move_window_G000
00103f 30e0      	CPI  R30,0
001040 f009      	BREQ _0x1C2
001041 c0e2      	RJMP _0x1C0
                 ;		wc = fs->win[bc % SS(fs)]; bc++;
                 _0x1C2:
001042 85aa      	LDD  R26,Y+10
001043 85bb      	LDD  R27,Y+10+1
001044 969e      	ADIW R26,46
001045 01f9      	MOVW R30,R18
001046 70f1      	ANDI R31,HIGH(0x1FF)
001047 0fae      	ADD  R26,R30
001048 1fbf      	ADC  R27,R31
001049 910c      	LD   R16,X
00104a 2711      	CLR  R17
                +
00104b 5f2f     +SUBI R18 , LOW ( - 1 )
00104c 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
                 ;		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
00104d 85ea      	LDD  R30,Y+10
00104e 85fb      	LDD  R31,Y+10+1
00104f 93fa      	ST   -Y,R31
001050 93ea      	ST   -Y,R30
001051 85ec      	LDD  R30,Y+12
001052 85fd      	LDD  R31,Y+12+1
                +
001053 8da6     +LDD R26 , Z + 30
001054 8db7     +LDD R27 , Z + 30 + 1
001055 a180     +LDD R24 , Z + 30 + 2
001056 a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
001057 939f      	PUSH R25
001058 938f      	PUSH R24
001059 93bf      	PUSH R27
00105a 93af      	PUSH R26
00105b 01d9      	MOVW R26,R18
00105c e0e0      	LDI  R30,LOW(512)
00105d e0f2      	LDI  R31,HIGH(512)
00105e 940e 3eae 	CALL __DIVW21U
001060 91af      	POP  R26
001061 91bf      	POP  R27
001062 918f      	POP  R24
001063 919f      	POP  R25
001064 2766      	CLR  R22
001065 2777      	CLR  R23
001066 940e 3dd5 	CALL __ADDD21
001068 de0a      	RCALL _move_window_G000
001069 30e0      	CPI  R30,0
00106a f009      	BREQ _0x1C3
00106b c0b8      	RJMP _0x1C0
                 ;		wc |= fs->win[bc % SS(fs)] << 8;
                 _0x1C3:
00106c 85aa      	LDD  R26,Y+10
00106d 85bb      	LDD  R27,Y+10+1
00106e 969e      	ADIW R26,46
00106f 01f9      	MOVW R30,R18
001070 70f1      	ANDI R31,HIGH(0x1FF)
001071 0fae      	ADD  R26,R30
001072 1fbf      	ADC  R27,R31
001073 91ec      	LD   R30,X
001074 2ffe      	MOV  R31,R30
001075 e0e0      	LDI  R30,0
                +
001076 2b0e     +OR R16 , R30
001077 2b1f     +OR R17 , R31
                 	__ORWRR 16,17,30,31
                 ;		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
001078 81ee      	LDD  R30,Y+6
001079 70e1      	ANDI R30,LOW(0x1)
00107a f021      	BREQ _0x1C4
00107b 01f8      	MOVW R30,R16
00107c 940e 3e36 	CALL __LSRW4
00107e c002      	RJMP _0x4E1
                 _0x1C4:
00107f 01f8      	MOVW R30,R16
001080 70ff      	ANDI R31,HIGH(0xFFF)
                 _0x4E1:
001081 2766      	CLR  R22
001082 2777      	CLR  R23
001083 c0a4      	RJMP _0x20C001E
                 ;
                 ;	case FS_FAT16 :
                 _0x1C1:
001084 30e2      	CPI  R30,LOW(0x2)
001085 e0a0      	LDI  R26,HIGH(0x2)
001086 07fa      	CPC  R31,R26
001087 f5c9      	BRNE _0x1C7
                 ;		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
001088 85ea      	LDD  R30,Y+10
001089 85fb      	LDD  R31,Y+10+1
00108a 93fa      	ST   -Y,R31
00108b 93ea      	ST   -Y,R30
00108c 85ec      	LDD  R30,Y+12
00108d 85fd      	LDD  R31,Y+12+1
                +
00108e 8da6     +LDD R26 , Z + 30
00108f 8db7     +LDD R27 , Z + 30 + 1
001090 a180     +LDD R24 , Z + 30 + 2
001091 a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
001092 939f      	PUSH R25
001093 938f      	PUSH R24
001094 93bf      	PUSH R27
001095 93af      	PUSH R26
                +
001096 85a8     +LDD R26 , Y + 8
001097 85b9     +LDD R27 , Y + 8 + 1
001098 858a     +LDD R24 , Y + 8 + 2
001099 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
                +
00109a e0e0     +LDI R30 , LOW ( 0x100 )
00109b e0f1     +LDI R31 , HIGH ( 0x100 )
00109c e060     +LDI R22 , BYTE3 ( 0x100 )
00109d e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
00109e 940e 3ec6 	CALL __DIVD21U
0010a0 91af      	POP  R26
0010a1 91bf      	POP  R27
0010a2 918f      	POP  R24
0010a3 919f      	POP  R25
0010a4 940e 3dd5 	CALL __ADDD21
0010a6 ddcc      	RCALL _move_window_G000
0010a7 30e0      	CPI  R30,0
0010a8 f009      	BREQ _0x1C8
0010a9 c07a      	RJMP _0x1C0
                 ;		p = &fs->win[clst * 2 % SS(fs)];
                 _0x1C8:
0010aa 81ae      	LDD  R26,Y+6
0010ab 81bf      	LDD  R27,Y+6+1
0010ac e0e2      	LDI  R30,LOW(2)
0010ad 940e 3e90 	CALL __MULB1W2U
0010af 70f1      	ANDI R31,HIGH(0x1FF)
0010b0 85aa      	LDD  R26,Y+10
0010b1 85bb      	LDD  R27,Y+10+1
0010b2 969e      	ADIW R26,46
0010b3 0fea      	ADD  R30,R26
0010b4 1ffb      	ADC  R31,R27
0010b5 01af      	MOVW R20,R30
                 ;		return LD_WORD(p);
0010b6 81f1      	LDD  R31,Z+1
0010b7 e0e0      	LDI  R30,LOW(0)
0010b8 010f      	MOVW R0,R30
0010b9 01da      	MOVW R26,R20
0010ba 91ec      	LD   R30,X
0010bb e0f0      	LDI  R31,0
0010bc 29e0      	OR   R30,R0
0010bd 29f1      	OR   R31,R1
0010be 2766      	CLR  R22
0010bf 2777      	CLR  R23
0010c0 c067      	RJMP _0x20C001E
                 ;
                 ;	case FS_FAT32 :
                 _0x1C7:
0010c1 30e3      	CPI  R30,LOW(0x3)
0010c2 e0a0      	LDI  R26,HIGH(0x3)
0010c3 07fa      	CPC  R31,R26
0010c4 f009      	BREQ PC+2
0010c5 c05e      	RJMP _0x1C0
                 ;		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))))
0010c6 85ea      	LDD  R30,Y+10
0010c7 85fb      	LDD  R31,Y+10+1
0010c8 93fa      	ST   -Y,R31
0010c9 93ea      	ST   -Y,R30
0010ca 85ec      	LDD  R30,Y+12
0010cb 85fd      	LDD  R31,Y+12+1
                +
0010cc 8da6     +LDD R26 , Z + 30
0010cd 8db7     +LDD R27 , Z + 30 + 1
0010ce a180     +LDD R24 , Z + 30 + 2
0010cf a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
0010d0 939f      	PUSH R25
0010d1 938f      	PUSH R24
0010d2 93bf      	PUSH R27
0010d3 93af      	PUSH R26
                +
0010d4 85a8     +LDD R26 , Y + 8
0010d5 85b9     +LDD R27 , Y + 8 + 1
0010d6 858a     +LDD R24 , Y + 8 + 2
0010d7 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
                +
0010d8 e8e0     +LDI R30 , LOW ( 0x80 )
0010d9 e0f0     +LDI R31 , HIGH ( 0x80 )
0010da e060     +LDI R22 , BYTE3 ( 0x80 )
0010db e070     +LDI R23 , BYTE4 ( 0x80 )
                 	__GETD1N 0x80
0010dc 940e 3ec6 	CALL __DIVD21U
0010de 91af      	POP  R26
0010df 91bf      	POP  R27
0010e0 918f      	POP  R24
0010e1 919f      	POP  R25
0010e2 940e 3dd5 	CALL __ADDD21
0010e4 dd8e      	RCALL _move_window_G000
0010e5 30e0      	CPI  R30,0
0010e6 f5e9      	BRNE _0x1C0
                 ;         {
                 ;         break;
                 ;         }
                 ;		p = &fs->win[clst * 4 % SS(fs)];
0010e7 81ae      	LDD  R26,Y+6
0010e8 81bf      	LDD  R27,Y+6+1
0010e9 e0e4      	LDI  R30,LOW(4)
0010ea 940e 3e90 	CALL __MULB1W2U
0010ec 70f1      	ANDI R31,HIGH(0x1FF)
0010ed 85aa      	LDD  R26,Y+10
0010ee 85bb      	LDD  R27,Y+10+1
0010ef 969e      	ADIW R26,46
0010f0 0fea      	ADD  R30,R26
0010f1 1ffb      	ADC  R31,R27
0010f2 01af      	MOVW R20,R30
                 ;		return LD_DWORD(p) & 0x0FFFFFFF;
0010f3 81e3      	LDD  R30,Z+3
0010f4 e0f0      	LDI  R31,0
0010f5 940e 3e59 	CALL __CWD1
0010f7 01df      	MOVW R26,R30
0010f8 01cb      	MOVW R24,R22
0010f9 e1e8      	LDI  R30,LOW(24)
0010fa 940e 3e0c 	CALL __LSLD12
0010fc 01df      	MOVW R26,R30
0010fd 01cb      	MOVW R24,R22
0010fe 01fa      	MOVW R30,R20
0010ff 81e2      	LDD  R30,Z+2
001100 e0f0      	LDI  R31,0
001101 940e 3e59 	CALL __CWD1
001103 940e 3e4e 	CALL __LSLD16
001105 940e 3de9 	CALL __ORD12
001107 01df      	MOVW R26,R30
001108 01cb      	MOVW R24,R22
001109 01fa      	MOVW R30,R20
00110a 81f1      	LDD  R31,Z+1
00110b e0e0      	LDI  R30,LOW(0)
00110c 2766      	CLR  R22
00110d 2777      	CLR  R23
00110e 940e 3de9 	CALL __ORD12
001110 937f      	PUSH R23
001111 936f      	PUSH R22
001112 93ff      	PUSH R31
001113 93ef      	PUSH R30
001114 01da      	MOVW R26,R20
001115 91ec      	LD   R30,X
001116 91af      	POP  R26
001117 91bf      	POP  R27
001118 918f      	POP  R24
001119 919f      	POP  R25
00111a 27ff      	CLR  R31
00111b 2766      	CLR  R22
00111c 2777      	CLR  R23
00111d 940e 3de9 	CALL __ORD12
                +
00111f 7fef     +ANDI R30 , LOW ( 0xFFFFFFF )
001120 7fff     +ANDI R31 , HIGH ( 0xFFFFFFF )
001121 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFFF )
001122 707f     +ANDI R23 , BYTE4 ( 0xFFFFFFF )
                 	__ANDD1N 0xFFFFFFF
001123 c004      	RJMP _0x20C001E
                 ;	}
                 _0x1C0:
                 ;	return 0xFFFFFFFF;	/* An error occurred at the disk I/O layer */
                +
001124 efef     +LDI R30 , LOW ( 0xFFFFFFFF )
001125 efff     +LDI R31 , HIGH ( 0xFFFFFFFF )
001126 ef6f     +LDI R22 , BYTE3 ( 0xFFFFFFFF )
001127 ef7f     +LDI R23 , BYTE4 ( 0xFFFFFFFF )
                 	__GETD1N 0xFFFFFFFF
                 _0x20C001E:
001128 940e 3f90 	CALL __LOADLOCR6
00112a 962c      	ADIW R28,12
00112b 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT access - Change value of a FAT entry                              */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;
                 ;FRESULT put_fat (
                 ;	FATFS* fs,	/* File system object */
                 ;	DWORD clst,	/* Cluster# to be changed in range of 2 to fs->n_fatent - 1 */
                 ;	DWORD val	/* New value to mark the cluster */
                 ;)
                 ;{
                 _put_fat:
                 ; .FSTART _put_fat
                 ;	UINT bc;
                 ;	BYTE *p;
                 ;	FRESULT res;
                 ;
                 ;
                 ;	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
00112c 940e 3f5f 	CALL __PUTPARD2
00112e 940e 3f89 	CALL __SAVELOCR6
                 ;	*fs -> Y+14
                 ;	clst -> Y+10
                 ;	val -> Y+6
                 ;	bc -> R16,R17
                 ;	*p -> R18,R19
                 ;	res -> R21
                +
001130 85aa     +LDD R26 , Y + 10
001131 85bb     +LDD R27 , Y + 10 + 1
001132 858c     +LDD R24 , Y + 10 + 2
001133 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
                +
001134 30a2     +CPI R26 , LOW ( 0x2 )
001135 e0e0     +LDI R30 , HIGH ( 0x2 )
001136 07be     +CPC R27 , R30
001137 e0e0     +LDI R30 , BYTE3 ( 0x2 )
001138 078e     +CPC R24 , R30
001139 e0e0     +LDI R30 , BYTE4 ( 0x2 )
00113a 079e     +CPC R25 , R30
                 	__CPD2N 0x2
00113b f060      	BRLO _0x1CC
00113c 85ae      	LDD  R26,Y+14
00113d 85bf      	LDD  R27,Y+14+1
00113e 9652      	ADIW R26,18
00113f 940e 3f31 	CALL __GETD1P
                +
001141 85aa     +LDD R26 , Y + 10
001142 85bb     +LDD R27 , Y + 10 + 1
001143 858c     +LDD R24 , Y + 10 + 2
001144 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
001145 940e 3f84 	CALL __CPD21
001147 f010      	BRLO _0x1CB
                 _0x1CC:
                 ;		res = FR_INT_ERR;
001148 e052      	LDI  R21,LOW(2)
                 ;
                 ;	} else {
001149 c162      	RJMP _0x1CE
                 _0x1CB:
                 ;		switch (fs->fs_type) {
00114a 85ae      	LDD  R26,Y+14
00114b 85bf      	LDD  R27,Y+14+1
00114c 91ec      	LD   R30,X
00114d e0f0      	LDI  R31,0
                 ;		case FS_FAT12 :
00114e 30e1      	CPI  R30,LOW(0x1)
00114f e0a0      	LDI  R26,HIGH(0x1)
001150 07fa      	CPC  R31,R26
001151 f009      	BREQ PC+2
001152 c08f      	RJMP _0x1D2
                 ;			bc = (UINT)clst; bc += bc / 2;
                +
001153 850a     +LDD R16 , Y + 10
001154 851b     +LDD R17 , Y + 10 + 1
                 	__GETWRS 16,17,10
001155 01f8      	MOVW R30,R16
001156 95f6      	LSR  R31
001157 95e7      	ROR  R30
                +
001158 0f0e     +ADD R16 , R30
001159 1f1f     +ADC R17 , R31
                 	__ADDWRR 16,17,30,31
                 ;			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
00115a 85ee      	LDD  R30,Y+14
00115b 85ff      	LDD  R31,Y+14+1
00115c 93fa      	ST   -Y,R31
00115d 93ea      	ST   -Y,R30
00115e 89e8      	LDD  R30,Y+16
00115f 89f9      	LDD  R31,Y+16+1
                +
001160 8da6     +LDD R26 , Z + 30
001161 8db7     +LDD R27 , Z + 30 + 1
001162 a180     +LDD R24 , Z + 30 + 2
001163 a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
001164 939f      	PUSH R25
001165 938f      	PUSH R24
001166 93bf      	PUSH R27
001167 93af      	PUSH R26
001168 01d8      	MOVW R26,R16
001169 e0e0      	LDI  R30,LOW(512)
00116a e0f2      	LDI  R31,HIGH(512)
00116b 940e 3eae 	CALL __DIVW21U
00116d 91af      	POP  R26
00116e 91bf      	POP  R27
00116f 918f      	POP  R24
001170 919f      	POP  R25
001171 2766      	CLR  R22
001172 2777      	CLR  R23
001173 940e 3dd5 	CALL __ADDD21
001175 dcfd      	RCALL _move_window_G000
001176 2f5e      	MOV  R21,R30
                 ;			if (res != FR_OK) break;
001177 3050      	CPI  R21,0
001178 f009      	BREQ _0x1D3
001179 c12d      	RJMP _0x1D1
                 ;			p = &fs->win[bc % SS(fs)];
                 _0x1D3:
00117a 85ae      	LDD  R26,Y+14
00117b 85bf      	LDD  R27,Y+14+1
00117c 969e      	ADIW R26,46
00117d 01f8      	MOVW R30,R16
00117e 70f1      	ANDI R31,HIGH(0x1FF)
00117f 0fea      	ADD  R30,R26
001180 1ffb      	ADC  R31,R27
001181 019f      	MOVW R18,R30
                 ;			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
001182 85ea      	LDD  R30,Y+10
001183 70e1      	ANDI R30,LOW(0x1)
001184 f051      	BREQ _0x1D4
001185 01d9      	MOVW R26,R18
001186 91ec      	LD   R30,X
001187 70ef      	ANDI R30,LOW(0xF)
001188 2fae      	MOV  R26,R30
001189 81ee      	LDD  R30,Y+6
00118a e0f0      	LDI  R31,0
00118b 940e 3e24 	CALL __LSLW4
00118d 2bea      	OR   R30,R26
00118e c001      	RJMP _0x1D5
                 _0x1D4:
00118f 81ee      	LDD  R30,Y+6
                 _0x1D5:
001190 01d9      	MOVW R26,R18
001191 93ec      	ST   X,R30
                 ;			bc++;
                +
001192 5f0f     +SUBI R16 , LOW ( - 1 )
001193 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
                 ;			fs->wflag = 1;
001194 85ae      	LDD  R26,Y+14
001195 85bf      	LDD  R27,Y+14+1
001196 9614      	ADIW R26,4
001197 e0e1      	LDI  R30,LOW(1)
001198 93ec      	ST   X,R30
                 ;			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
001199 85ee      	LDD  R30,Y+14
00119a 85ff      	LDD  R31,Y+14+1
00119b 93fa      	ST   -Y,R31
00119c 93ea      	ST   -Y,R30
00119d 89e8      	LDD  R30,Y+16
00119e 89f9      	LDD  R31,Y+16+1
                +
00119f 8da6     +LDD R26 , Z + 30
0011a0 8db7     +LDD R27 , Z + 30 + 1
0011a1 a180     +LDD R24 , Z + 30 + 2
0011a2 a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
0011a3 939f      	PUSH R25
0011a4 938f      	PUSH R24
0011a5 93bf      	PUSH R27
0011a6 93af      	PUSH R26
0011a7 01d8      	MOVW R26,R16
0011a8 e0e0      	LDI  R30,LOW(512)
0011a9 e0f2      	LDI  R31,HIGH(512)
0011aa 940e 3eae 	CALL __DIVW21U
0011ac 91af      	POP  R26
0011ad 91bf      	POP  R27
0011ae 918f      	POP  R24
0011af 919f      	POP  R25
0011b0 2766      	CLR  R22
0011b1 2777      	CLR  R23
0011b2 940e 3dd5 	CALL __ADDD21
0011b4 dcbe      	RCALL _move_window_G000
0011b5 2f5e      	MOV  R21,R30
                 ;			if (res != FR_OK) break;
0011b6 3050      	CPI  R21,0
0011b7 f009      	BREQ _0x1D7
0011b8 c0ee      	RJMP _0x1D1
                 ;			p = &fs->win[bc % SS(fs)];
                 _0x1D7:
0011b9 85ae      	LDD  R26,Y+14
0011ba 85bf      	LDD  R27,Y+14+1
0011bb 969e      	ADIW R26,46
0011bc 01f8      	MOVW R30,R16
0011bd 70f1      	ANDI R31,HIGH(0x1FF)
0011be 0fea      	ADD  R30,R26
0011bf 1ffb      	ADC  R31,R27
0011c0 019f      	MOVW R18,R30
                 ;			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
0011c1 85ea      	LDD  R30,Y+10
0011c2 70e1      	ANDI R30,LOW(0x1)
0011c3 f059      	BREQ _0x1D8
                +
0011c4 81ae     +LDD R26 , Y + 6
0011c5 81bf     +LDD R27 , Y + 6 + 1
0011c6 8588     +LDD R24 , Y + 6 + 2
0011c7 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
0011c8 e0e4      	LDI  R30,LOW(4)
0011c9 940e 3e18 	CALL __LSRD12
0011cb 27ff      	CLR  R31
0011cc 2766      	CLR  R22
0011cd 2777      	CLR  R23
0011ce c010      	RJMP _0x1D9
                 _0x1D8:
0011cf 01d9      	MOVW R26,R18
0011d0 91ec      	LD   R30,X
0011d1 7fe0      	ANDI R30,LOW(0xF0)
0011d2 2e1e      	MOV  R1,R30
                +
0011d3 81ae     +LDD R26 , Y + 6
0011d4 81bf     +LDD R27 , Y + 6 + 1
0011d5 8588     +LDD R24 , Y + 6 + 2
0011d6 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
0011d7 e0e8      	LDI  R30,LOW(8)
0011d8 940e 3e18 	CALL __LSRD12
0011da 27ff      	CLR  R31
0011db 2766      	CLR  R22
0011dc 2777      	CLR  R23
0011dd 70ef      	ANDI R30,LOW(0xF)
0011de 29e1      	OR   R30,R1
                 _0x1D9:
0011df 01d9      	MOVW R26,R18
0011e0 93ec      	ST   X,R30
                 ;			break;
0011e1 c0c5      	RJMP _0x1D1
                 ;
                 ;		case FS_FAT16 :
                 _0x1D2:
0011e2 30e2      	CPI  R30,LOW(0x2)
0011e3 e0a0      	LDI  R26,HIGH(0x2)
0011e4 07fa      	CPC  R31,R26
0011e5 f5b9      	BRNE _0x1DB
                 ;			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
0011e6 85ee      	LDD  R30,Y+14
0011e7 85ff      	LDD  R31,Y+14+1
0011e8 93fa      	ST   -Y,R31
0011e9 93ea      	ST   -Y,R30
0011ea 89e8      	LDD  R30,Y+16
0011eb 89f9      	LDD  R31,Y+16+1
                +
0011ec 8da6     +LDD R26 , Z + 30
0011ed 8db7     +LDD R27 , Z + 30 + 1
0011ee a180     +LDD R24 , Z + 30 + 2
0011ef a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
0011f0 939f      	PUSH R25
0011f1 938f      	PUSH R24
0011f2 93bf      	PUSH R27
0011f3 93af      	PUSH R26
                +
0011f4 85ac     +LDD R26 , Y + 12
0011f5 85bd     +LDD R27 , Y + 12 + 1
0011f6 858e     +LDD R24 , Y + 12 + 2
0011f7 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
0011f8 e0e0     +LDI R30 , LOW ( 0x100 )
0011f9 e0f1     +LDI R31 , HIGH ( 0x100 )
0011fa e060     +LDI R22 , BYTE3 ( 0x100 )
0011fb e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
0011fc 940e 3ec6 	CALL __DIVD21U
0011fe 91af      	POP  R26
0011ff 91bf      	POP  R27
001200 918f      	POP  R24
001201 919f      	POP  R25
001202 940e 3dd5 	CALL __ADDD21
001204 dc6e      	RCALL _move_window_G000
001205 2f5e      	MOV  R21,R30
                 ;			if (res != FR_OK) break;
001206 3050      	CPI  R21,0
001207 f009      	BREQ _0x1DC
001208 c09e      	RJMP _0x1D1
                 ;			p = &fs->win[clst * 2 % SS(fs)];
                 _0x1DC:
001209 85aa      	LDD  R26,Y+10
00120a 85bb      	LDD  R27,Y+10+1
00120b e0e2      	LDI  R30,LOW(2)
00120c 940e 3e90 	CALL __MULB1W2U
00120e 70f1      	ANDI R31,HIGH(0x1FF)
00120f 85ae      	LDD  R26,Y+14
001210 85bf      	LDD  R27,Y+14+1
001211 969e      	ADIW R26,46
001212 0fea      	ADD  R30,R26
001213 1ffb      	ADC  R31,R27
001214 019f      	MOVW R18,R30
                 ;			ST_WORD(p, (WORD)val);
001215 81ee      	LDD  R30,Y+6
001216 01d9      	MOVW R26,R18
001217 93ec      	ST   X,R30
001218 81ef      	LDD  R30,Y+7
                +
001219 01d9     +MOVW R26 , R18
00121a 9611     +ADIW R26 , 1
00121b 93ec     +ST X , R30
                 	__PUTB1RNS 18,1
                 ;			break;
00121c c08a      	RJMP _0x1D1
                 ;
                 ;		case FS_FAT32 :
                 _0x1DB:
00121d 30e3      	CPI  R30,LOW(0x3)
00121e e0a0      	LDI  R26,HIGH(0x3)
00121f 07fa      	CPC  R31,R26
001220 f009      	BREQ PC+2
001221 c084      	RJMP _0x1DF
                 ;			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
001222 85ee      	LDD  R30,Y+14
001223 85ff      	LDD  R31,Y+14+1
001224 93fa      	ST   -Y,R31
001225 93ea      	ST   -Y,R30
001226 89e8      	LDD  R30,Y+16
001227 89f9      	LDD  R31,Y+16+1
                +
001228 8da6     +LDD R26 , Z + 30
001229 8db7     +LDD R27 , Z + 30 + 1
00122a a180     +LDD R24 , Z + 30 + 2
00122b a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
00122c 939f      	PUSH R25
00122d 938f      	PUSH R24
00122e 93bf      	PUSH R27
00122f 93af      	PUSH R26
                +
001230 85ac     +LDD R26 , Y + 12
001231 85bd     +LDD R27 , Y + 12 + 1
001232 858e     +LDD R24 , Y + 12 + 2
001233 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
001234 e8e0     +LDI R30 , LOW ( 0x80 )
001235 e0f0     +LDI R31 , HIGH ( 0x80 )
001236 e060     +LDI R22 , BYTE3 ( 0x80 )
001237 e070     +LDI R23 , BYTE4 ( 0x80 )
                 	__GETD1N 0x80
001238 940e 3ec6 	CALL __DIVD21U
00123a 91af      	POP  R26
00123b 91bf      	POP  R27
00123c 918f      	POP  R24
00123d 919f      	POP  R25
00123e 940e 3dd5 	CALL __ADDD21
001240 dc32      	RCALL _move_window_G000
001241 2f5e      	MOV  R21,R30
                 ;			if (res != FR_OK) break;
001242 3050      	CPI  R21,0
001243 f009      	BREQ _0x1DE
001244 c062      	RJMP _0x1D1
                 ;			p = &fs->win[clst * 4 % SS(fs)];
                 _0x1DE:
001245 85aa      	LDD  R26,Y+10
001246 85bb      	LDD  R27,Y+10+1
001247 e0e4      	LDI  R30,LOW(4)
001248 940e 3e90 	CALL __MULB1W2U
00124a 70f1      	ANDI R31,HIGH(0x1FF)
00124b 85ae      	LDD  R26,Y+14
00124c 85bf      	LDD  R27,Y+14+1
00124d 969e      	ADIW R26,46
00124e 0fea      	ADD  R30,R26
00124f 1ffb      	ADC  R31,R27
001250 019f      	MOVW R18,R30
                 ;			val |= LD_DWORD(p) & 0xF0000000;
001251 81e3      	LDD  R30,Z+3
001252 e0f0      	LDI  R31,0
001253 940e 3e59 	CALL __CWD1
001255 01df      	MOVW R26,R30
001256 01cb      	MOVW R24,R22
001257 e1e8      	LDI  R30,LOW(24)
001258 940e 3e0c 	CALL __LSLD12
00125a 01df      	MOVW R26,R30
00125b 01cb      	MOVW R24,R22
00125c 01f9      	MOVW R30,R18
00125d 81e2      	LDD  R30,Z+2
00125e e0f0      	LDI  R31,0
00125f 940e 3e59 	CALL __CWD1
001261 940e 3e4e 	CALL __LSLD16
001263 940e 3de9 	CALL __ORD12
001265 01df      	MOVW R26,R30
001266 01cb      	MOVW R24,R22
001267 01f9      	MOVW R30,R18
001268 81f1      	LDD  R31,Z+1
001269 e0e0      	LDI  R30,LOW(0)
00126a 2766      	CLR  R22
00126b 2777      	CLR  R23
00126c 940e 3de9 	CALL __ORD12
00126e 937f      	PUSH R23
00126f 936f      	PUSH R22
001270 93ff      	PUSH R31
001271 93ef      	PUSH R30
001272 01d9      	MOVW R26,R18
001273 91ec      	LD   R30,X
001274 91af      	POP  R26
001275 91bf      	POP  R27
001276 918f      	POP  R24
001277 919f      	POP  R25
001278 27ff      	CLR  R31
001279 2766      	CLR  R22
00127a 2777      	CLR  R23
00127b 940e 3de9 	CALL __ORD12
                +
00127d 70e0     +ANDI R30 , LOW ( 0xF0000000 )
00127e 70f0     +ANDI R31 , HIGH ( 0xF0000000 )
00127f 7060     +ANDI R22 , BYTE3 ( 0xF0000000 )
001280 7f70     +ANDI R23 , BYTE4 ( 0xF0000000 )
                 	__ANDD1N 0xF0000000
                +
001281 81ae     +LDD R26 , Y + 6
001282 81bf     +LDD R27 , Y + 6 + 1
001283 8588     +LDD R24 , Y + 6 + 2
001284 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
001285 940e 3de9 	CALL __ORD12
                +
001287 83ee     +STD Y + 6 , R30
001288 83ff     +STD Y + 6 + 1 , R31
001289 8768     +STD Y + 6 + 2 , R22
00128a 8779     +STD Y + 6 + 3 , R23
                 	__PUTD1S 6
                 ;			ST_DWORD(p, val);
00128b 81ee      	LDD  R30,Y+6
00128c 01d9      	MOVW R26,R18
00128d 93ec      	ST   X,R30
00128e 81ef      	LDD  R30,Y+7
                +
00128f 01d9     +MOVW R26 , R18
001290 9611     +ADIW R26 , 1
001291 93ec     +ST X , R30
                 	__PUTB1RNS 18,1
                +
001292 81ee     +LDD R30 , Y + 6
001293 81ff     +LDD R31 , Y + 6 + 1
001294 8568     +LDD R22 , Y + 6 + 2
001295 8579     +LDD R23 , Y + 6 + 3
                 	__GETD1S 6
001296 940e 3e49 	CALL __LSRD16
                +
001298 01d9     +MOVW R26 , R18
001299 9612     +ADIW R26 , 2
00129a 93ec     +ST X , R30
                 	__PUTB1RNS 18,2
                +
00129b 81ae     +LDD R26 , Y + 6
00129c 81bf     +LDD R27 , Y + 6 + 1
00129d 8588     +LDD R24 , Y + 6 + 2
00129e 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
00129f e1e8      	LDI  R30,LOW(24)
0012a0 940e 3e18 	CALL __LSRD12
                +
0012a2 01d9     +MOVW R26 , R18
0012a3 9613     +ADIW R26 , 3
0012a4 93ec     +ST X , R30
                 	__PUTB1RNS 18,3
                 ;			break;
0012a5 c001      	RJMP _0x1D1
                 ;
                 ;		default :
                 _0x1DF:
                 ;			res = FR_INT_ERR;
0012a6 e052      	LDI  R21,LOW(2)
                 ;		}
                 _0x1D1:
                 ;		fs->wflag = 1;
0012a7 85ae      	LDD  R26,Y+14
0012a8 85bf      	LDD  R27,Y+14+1
0012a9 9614      	ADIW R26,4
0012aa e0e1      	LDI  R30,LOW(1)
0012ab 93ec      	ST   X,R30
                 ;	}
                 _0x1CE:
                 ;
                 ;	return res;
0012ac 2fe5      	MOV  R30,R21
0012ad 940e 3f90 	CALL __LOADLOCR6
0012af 9660      	ADIW R28,16
0012b0 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif /* !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT handling - Remove a cluster chain                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;static
                 ;FRESULT remove_chain (
                 ;	FATFS* fs,			/* File system object */
                 ;	DWORD clst			/* Cluster# to remove a chain from */
                 ;)
                 ;{
                 _remove_chain_G000:
                 ; .FSTART _remove_chain_G000
                 ;	FRESULT res;
                 ;	DWORD nxt;
                 ;#if _USE_ERASE
                 ;	DWORD scl = clst, ecl = clst, rt[2];
                 ;#endif
                 ;
                 ;	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
0012b1 940e 3f5f 	CALL __PUTPARD2
0012b3 9724      	SBIW R28,4
0012b4 931a      	ST   -Y,R17
                 ;	*fs -> Y+9
                 ;	clst -> Y+5
                 ;	res -> R17
                 ;	nxt -> Y+1
                +
0012b5 81ad     +LDD R26 , Y + 5
0012b6 81be     +LDD R27 , Y + 5 + 1
0012b7 818f     +LDD R24 , Y + 5 + 2
0012b8 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
                +
0012b9 30a2     +CPI R26 , LOW ( 0x2 )
0012ba e0e0     +LDI R30 , HIGH ( 0x2 )
0012bb 07be     +CPC R27 , R30
0012bc e0e0     +LDI R30 , BYTE3 ( 0x2 )
0012bd 078e     +CPC R24 , R30
0012be e0e0     +LDI R30 , BYTE4 ( 0x2 )
0012bf 079e     +CPC R25 , R30
                 	__CPD2N 0x2
0012c0 f060      	BRLO _0x1E1
0012c1 85a9      	LDD  R26,Y+9
0012c2 85ba      	LDD  R27,Y+9+1
0012c3 9652      	ADIW R26,18
0012c4 940e 3f31 	CALL __GETD1P
                +
0012c6 81ad     +LDD R26 , Y + 5
0012c7 81be     +LDD R27 , Y + 5 + 1
0012c8 818f     +LDD R24 , Y + 5 + 2
0012c9 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
0012ca 940e 3f84 	CALL __CPD21
0012cc f010      	BRLO _0x1E0
                 _0x1E1:
                 ;		res = FR_INT_ERR;
0012cd e012      	LDI  R17,LOW(2)
                 ;
                 ;	} else {
0012ce c075      	RJMP _0x1E3
                 _0x1E0:
                 ;		res = FR_OK;
0012cf e010      	LDI  R17,LOW(0)
                 ;		while (clst < fs->n_fatent) {			/* Not a last link? */
                 _0x1E4:
0012d0 85a9      	LDD  R26,Y+9
0012d1 85ba      	LDD  R27,Y+9+1
0012d2 9652      	ADIW R26,18
0012d3 940e 3f31 	CALL __GETD1P
                +
0012d5 81ad     +LDD R26 , Y + 5
0012d6 81be     +LDD R27 , Y + 5 + 1
0012d7 818f     +LDD R24 , Y + 5 + 2
0012d8 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
0012d9 940e 3f84 	CALL __CPD21
0012db f008      	BRLO PC+2
0012dc c067      	RJMP _0x1E6
                 ;			nxt = get_fat(fs, clst);			/* Get cluster status */
0012dd 85e9      	LDD  R30,Y+9
0012de 85fa      	LDD  R31,Y+9+1
0012df 93fa      	ST   -Y,R31
0012e0 93ea      	ST   -Y,R30
                +
0012e1 81af     +LDD R26 , Y + 7
0012e2 85b8     +LDD R27 , Y + 7 + 1
0012e3 8589     +LDD R24 , Y + 7 + 2
0012e4 859a     +LDD R25 , Y + 7 + 3
                 	__GETD2S 7
0012e5 dd0c      	RCALL _get_fat
                +
0012e6 83e9     +STD Y + 1 , R30
0012e7 83fa     +STD Y + 1 + 1 , R31
0012e8 836b     +STD Y + 1 + 2 , R22
0012e9 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ;			if (nxt == 0) break;				/* Empty cluster? */
0012ea 940e 3f71 	CALL __CPD10
0012ec f409      	BRNE _0x1E7
0012ed c056      	RJMP _0x1E6
                 ;			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
                 _0x1E7:
                +
0012ee 81a9     +LDD R26 , Y + 1
0012ef 81ba     +LDD R27 , Y + 1 + 1
0012f0 818b     +LDD R24 , Y + 1 + 2
0012f1 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
0012f2 30a1     +CPI R26 , LOW ( 0x1 )
0012f3 e0e0     +LDI R30 , HIGH ( 0x1 )
0012f4 07be     +CPC R27 , R30
0012f5 e0e0     +LDI R30 , BYTE3 ( 0x1 )
0012f6 078e     +CPC R24 , R30
0012f7 e0e0     +LDI R30 , BYTE4 ( 0x1 )
0012f8 079e     +CPC R25 , R30
                 	__CPD2N 0x1
0012f9 f411      	BRNE _0x1E8
0012fa e012      	LDI  R17,LOW(2)
0012fb c048      	RJMP _0x1E6
                 ;			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
                 _0x1E8:
                +
0012fc 81a9     +LDD R26 , Y + 1
0012fd 81ba     +LDD R27 , Y + 1 + 1
0012fe 818b     +LDD R24 , Y + 1 + 2
0012ff 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
                +
001300 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001301 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
001302 07be     +CPC R27 , R30
001303 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
001304 078e     +CPC R24 , R30
001305 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
001306 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
001307 f411      	BRNE _0x1E9
001308 e011      	LDI  R17,LOW(1)
001309 c03a      	RJMP _0x1E6
                 ;			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
                 _0x1E9:
00130a 85e9      	LDD  R30,Y+9
00130b 85fa      	LDD  R31,Y+9+1
00130c 93fa      	ST   -Y,R31
00130d 93ea      	ST   -Y,R30
                +
00130e 81ef     +LDD R30 , Y + 7
00130f 85f8     +LDD R31 , Y + 7 + 1
001310 8569     +LDD R22 , Y + 7 + 2
001311 857a     +LDD R23 , Y + 7 + 3
                 	__GETD1S 7
001312 940e 3f5a 	CALL __PUTPARD1
                +
001314 e0a0     +LDI R26 , LOW ( 0x0 )
001315 e0b0     +LDI R27 , HIGH ( 0x0 )
001316 e080     +LDI R24 , BYTE3 ( 0x0 )
001317 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
001318 de13      	RCALL _put_fat
001319 2f1e      	MOV  R17,R30
                 ;			if (res != FR_OK) break;
00131a 3010      	CPI  R17,0
00131b f541      	BRNE _0x1E6
                 ;			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
00131c 85e9      	LDD  R30,Y+9
00131d 85fa      	LDD  R31,Y+9+1
                +
00131e 85a6     +LDD R26 , Z + 14
00131f 85b7     +LDD R27 , Z + 14 + 1
001320 8980     +LDD R24 , Z + 14 + 2
001321 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
                +
001322 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001323 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
001324 07be     +CPC R27 , R30
001325 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
001326 078e     +CPC R24 , R30
001327 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
001328 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
001329 f089      	BREQ _0x1EB
                 ;				fs->free_clust++;
00132a 85a9      	LDD  R26,Y+9
00132b 85ba      	LDD  R27,Y+9+1
00132c 961e      	ADIW R26,14
00132d 940e 3f37 	CALL __GETD1P_INC
                +
00132f 5fef     +SUBI R30 , LOW ( - 1 )
001330 4fff     +SBCI R31 , HIGH ( - 1 )
001331 4f6f     +SBCI R22 , BYTE3 ( - 1 )
001332 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
001333 940e 3f41 	CALL __PUTDP1_DEC
                 ;				fs->fsi_flag |= 1;
001335 85a9      	LDD  R26,Y+9
001336 85ba      	LDD  R27,Y+9+1
001337 9615      	ADIW R26,5
001338 91ec      	LD   R30,X
001339 60e1      	ORI  R30,1
00133a 93ec      	ST   X,R30
                 ;			}
                 ;#if _USE_ERASE
                 ;			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
                 ;				ecl = nxt;
                 ;			} else {				/* End of contiguous clusters */
                 ;				rt[0] = clust2sect(fs, scl);					/* Start sector */
                 ;				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
                 ;				disk_ioctl(fs->drv, CTRL_ERASE_SECTOR, rt);		/* Erase the block */
                 ;				scl = ecl = nxt;
                 ;			}
                 ;#endif
                 ;			clst = nxt;	/* Next cluster */
                 _0x1EB:
                +
00133b 81e9     +LDD R30 , Y + 1
00133c 81fa     +LDD R31 , Y + 1 + 1
00133d 816b     +LDD R22 , Y + 1 + 2
00133e 817c     +LDD R23 , Y + 1 + 3
                 	__GETD1S 1
                +
00133f 83ed     +STD Y + 5 , R30
001340 83fe     +STD Y + 5 + 1 , R31
001341 836f     +STD Y + 5 + 2 , R22
001342 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ;		}
001343 cf8c      	RJMP _0x1E4
                 _0x1E6:
                 ;	}
                 _0x1E3:
                 ;
                 ;	return res;
001344 2fe1      	MOV  R30,R17
001345 8118      	LDD  R17,Y+0
001346 962b      	ADIW R28,11
001347 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT handling - Stretch or Create a cluster chain                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;static
                 ;DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster# */
                 ;	FATFS* fs,			/* File system object */
                 ;	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
                 ;)
                 ;{
                 _create_chain_G000:
                 ; .FSTART _create_chain_G000
                 ;	DWORD cs, ncl, scl;
                 ;	FRESULT res;
                 ;
                 ;
                 ;	if (clst == 0) {		/* Create a new chain */
001348 940e 3f5f 	CALL __PUTPARD2
00134a 972c      	SBIW R28,12
00134b 931a      	ST   -Y,R17
                 ;	*fs -> Y+17
                 ;	clst -> Y+13
                 ;	cs -> Y+9
                 ;	ncl -> Y+5
                 ;	scl -> Y+1
                 ;	res -> R17
                +
00134c 85ed     +LDD R30 , Y + 13
00134d 85fe     +LDD R31 , Y + 13 + 1
00134e 856f     +LDD R22 , Y + 13 + 2
00134f 8978     +LDD R23 , Y + 13 + 3
                 	__GETD1S 13
001350 940e 3f71 	CALL __CPD10
001352 f509      	BRNE _0x1EC
                 ;		scl = fs->last_clust;			/* Get suggested start point */
001353 89a9      	LDD  R26,Y+17
001354 89ba      	LDD  R27,Y+17+1
001355 961a      	ADIW R26,10
001356 940e 3f31 	CALL __GETD1P
                +
001358 83e9     +STD Y + 1 , R30
001359 83fa     +STD Y + 1 + 1 , R31
00135a 836b     +STD Y + 1 + 2 , R22
00135b 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ;		if (!scl || scl >= fs->n_fatent) scl = 1;
00135c 940e 3f71 	CALL __CPD10
00135e f061      	BREQ _0x1EE
00135f 89a9      	LDD  R26,Y+17
001360 89ba      	LDD  R27,Y+17+1
001361 9652      	ADIW R26,18
001362 940e 3f31 	CALL __GETD1P
                +
001364 81a9     +LDD R26 , Y + 1
001365 81ba     +LDD R27 , Y + 1 + 1
001366 818b     +LDD R24 , Y + 1 + 2
001367 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
001368 940e 3f84 	CALL __CPD21
00136a f040      	BRLO _0x1ED
                 _0x1EE:
                +
00136b e0e1     +LDI R30 , LOW ( 0x1 )
00136c e0f0     +LDI R31 , HIGH ( 0x1 )
00136d e060     +LDI R22 , BYTE3 ( 0x1 )
00136e e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
                +
00136f 83e9     +STD Y + 1 , R30
001370 83fa     +STD Y + 1 + 1 , R31
001371 836b     +STD Y + 1 + 2 , R22
001372 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ;	}
                 _0x1ED:
                 ;	else {					/* Stretch the current chain */
001373 c037      	RJMP _0x1F0
                 _0x1EC:
                 ;		cs = get_fat(fs, clst);			/* Check the cluster status */
001374 89e9      	LDD  R30,Y+17
001375 89fa      	LDD  R31,Y+17+1
001376 93fa      	ST   -Y,R31
001377 93ea      	ST   -Y,R30
                +
001378 85af     +LDD R26 , Y + 15
001379 89b8     +LDD R27 , Y + 15 + 1
00137a 8989     +LDD R24 , Y + 15 + 2
00137b 899a     +LDD R25 , Y + 15 + 3
                 	__GETD2S 15
00137c dc75      	RCALL _get_fat
                +
00137d 87e9     +STD Y + 9 , R30
00137e 87fa     +STD Y + 9 + 1 , R31
00137f 876b     +STD Y + 9 + 2 , R22
001380 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
                 ;		if (cs < 2) return 1;			/* It is an invalid cluster */
                +
001381 85a9     +LDD R26 , Y + 9
001382 85ba     +LDD R27 , Y + 9 + 1
001383 858b     +LDD R24 , Y + 9 + 2
001384 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
                +
001385 30a2     +CPI R26 , LOW ( 0x2 )
001386 e0e0     +LDI R30 , HIGH ( 0x2 )
001387 07be     +CPC R27 , R30
001388 e0e0     +LDI R30 , BYTE3 ( 0x2 )
001389 078e     +CPC R24 , R30
00138a e0e0     +LDI R30 , BYTE4 ( 0x2 )
00138b 079e     +CPC R25 , R30
                 	__CPD2N 0x2
00138c f428      	BRSH _0x1F1
                +
00138d e0e1     +LDI R30 , LOW ( 0x1 )
00138e e0f0     +LDI R31 , HIGH ( 0x1 )
00138f e060     +LDI R22 , BYTE3 ( 0x1 )
001390 e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
001391 c0f4      	RJMP _0x20C001D
                 ;		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
                 _0x1F1:
001392 89a9      	LDD  R26,Y+17
001393 89ba      	LDD  R27,Y+17+1
001394 9652      	ADIW R26,18
001395 940e 3f31 	CALL __GETD1P
                +
001397 85a9     +LDD R26 , Y + 9
001398 85ba     +LDD R27 , Y + 9 + 1
001399 858b     +LDD R24 , Y + 9 + 2
00139a 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
00139b 940e 3f84 	CALL __CPD21
00139d f428      	BRSH _0x1F2
                +
00139e 85e9     +LDD R30 , Y + 9
00139f 85fa     +LDD R31 , Y + 9 + 1
0013a0 856b     +LDD R22 , Y + 9 + 2
0013a1 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
0013a2 c0e3      	RJMP _0x20C001D
                 ;		scl = clst;
                 _0x1F2:
                +
0013a3 85ed     +LDD R30 , Y + 13
0013a4 85fe     +LDD R31 , Y + 13 + 1
0013a5 856f     +LDD R22 , Y + 13 + 2
0013a6 8978     +LDD R23 , Y + 13 + 3
                 	__GETD1S 13
                +
0013a7 83e9     +STD Y + 1 , R30
0013a8 83fa     +STD Y + 1 + 1 , R31
0013a9 836b     +STD Y + 1 + 2 , R22
0013aa 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ;	}
                 _0x1F0:
                 ;
                 ;	ncl = scl;				/* Start cluster */
                +
0013ab 81e9     +LDD R30 , Y + 1
0013ac 81fa     +LDD R31 , Y + 1 + 1
0013ad 816b     +LDD R22 , Y + 1 + 2
0013ae 817c     +LDD R23 , Y + 1 + 3
                 	__GETD1S 1
                +
0013af 83ed     +STD Y + 5 , R30
0013b0 83fe     +STD Y + 5 + 1 , R31
0013b1 836f     +STD Y + 5 + 2 , R22
0013b2 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ;	for (;;) {
                 _0x1F4:
                 ;		ncl++;							/* Next cluster */
                +
0013b3 81ed     +LDD R30 , Y + 5
0013b4 81fe     +LDD R31 , Y + 5 + 1
0013b5 816f     +LDD R22 , Y + 5 + 2
0013b6 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
                +
0013b7 5fef     +SUBI R30 , LOW ( - 1 )
0013b8 4fff     +SBCI R31 , HIGH ( - 1 )
0013b9 4f6f     +SBCI R22 , BYTE3 ( - 1 )
0013ba 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
                +
0013bb 83ed     +STD Y + 5 , R30
0013bc 83fe     +STD Y + 5 + 1 , R31
0013bd 836f     +STD Y + 5 + 2 , R22
0013be 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ;		if (ncl >= fs->n_fatent) {		/* Wrap around */
0013bf 89a9      	LDD  R26,Y+17
0013c0 89ba      	LDD  R27,Y+17+1
0013c1 9652      	ADIW R26,18
0013c2 940e 3f31 	CALL __GETD1P
                +
0013c4 81ad     +LDD R26 , Y + 5
0013c5 81be     +LDD R27 , Y + 5 + 1
0013c6 818f     +LDD R24 , Y + 5 + 2
0013c7 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
0013c8 940e 3f84 	CALL __CPD21
0013ca f0c0      	BRLO _0x1F6
                 ;			ncl = 2;
                +
0013cb e0e2     +LDI R30 , LOW ( 0x2 )
0013cc e0f0     +LDI R31 , HIGH ( 0x2 )
0013cd e060     +LDI R22 , BYTE3 ( 0x2 )
0013ce e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
                +
0013cf 83ed     +STD Y + 5 , R30
0013d0 83fe     +STD Y + 5 + 1 , R31
0013d1 836f     +STD Y + 5 + 2 , R22
0013d2 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ;			if (ncl > scl) return 0;	/* No free cluster */
                +
0013d3 81e9     +LDD R30 , Y + 1
0013d4 81fa     +LDD R31 , Y + 1 + 1
0013d5 816b     +LDD R22 , Y + 1 + 2
0013d6 817c     +LDD R23 , Y + 1 + 3
                 	__GETD1S 1
                +
0013d7 81ad     +LDD R26 , Y + 5
0013d8 81be     +LDD R27 , Y + 5 + 1
0013d9 818f     +LDD R24 , Y + 5 + 2
0013da 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
0013db 940e 3f7f 	CALL __CPD12
0013dd f428      	BRSH _0x1F7
                +
0013de e0e0     +LDI R30 , LOW ( 0x0 )
0013df e0f0     +LDI R31 , HIGH ( 0x0 )
0013e0 e060     +LDI R22 , BYTE3 ( 0x0 )
0013e1 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
0013e2 c0a3      	RJMP _0x20C001D
                 ;		}
                 _0x1F7:
                 ;		cs = get_fat(fs, ncl);			/* Get the cluster status */
                 _0x1F6:
0013e3 89e9      	LDD  R30,Y+17
0013e4 89fa      	LDD  R31,Y+17+1
0013e5 93fa      	ST   -Y,R31
0013e6 93ea      	ST   -Y,R30
                +
0013e7 81af     +LDD R26 , Y + 7
0013e8 85b8     +LDD R27 , Y + 7 + 1
0013e9 8589     +LDD R24 , Y + 7 + 2
0013ea 859a     +LDD R25 , Y + 7 + 3
                 	__GETD2S 7
0013eb dc06      	RCALL _get_fat
                +
0013ec 87e9     +STD Y + 9 , R30
0013ed 87fa     +STD Y + 9 + 1 , R31
0013ee 876b     +STD Y + 9 + 2 , R22
0013ef 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
                 ;		if (cs == 0) break;				/* Found a free cluster */
0013f0 940e 3f71 	CALL __CPD10
0013f2 f151      	BREQ _0x1F5
                 ;		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
                +
0013f3 85a9     +LDD R26 , Y + 9
0013f4 85ba     +LDD R27 , Y + 9 + 1
0013f5 858b     +LDD R24 , Y + 9 + 2
0013f6 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
                +
0013f7 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
0013f8 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
0013f9 07be     +CPC R27 , R30
0013fa efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
0013fb 078e     +CPC R24 , R30
0013fc efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
0013fd 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
0013fe f041      	BREQ _0x1FA
                +
0013ff 30a1     +CPI R26 , LOW ( 0x1 )
001400 e0e0     +LDI R30 , HIGH ( 0x1 )
001401 07be     +CPC R27 , R30
001402 e0e0     +LDI R30 , BYTE3 ( 0x1 )
001403 078e     +CPC R24 , R30
001404 e0e0     +LDI R30 , BYTE4 ( 0x1 )
001405 079e     +CPC R25 , R30
                 	__CPD2N 0x1
001406 f429      	BRNE _0x1F9
                 _0x1FA:
                 ;			return cs;
                +
001407 85e9     +LDD R30 , Y + 9
001408 85fa     +LDD R31 , Y + 9 + 1
001409 856b     +LDD R22 , Y + 9 + 2
00140a 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
00140b c07a      	RJMP _0x20C001D
                 ;		if (ncl == scl) return 0;		/* No free cluster */
                 _0x1F9:
                +
00140c 81e9     +LDD R30 , Y + 1
00140d 81fa     +LDD R31 , Y + 1 + 1
00140e 816b     +LDD R22 , Y + 1 + 2
00140f 817c     +LDD R23 , Y + 1 + 3
                 	__GETD1S 1
                +
001410 81ad     +LDD R26 , Y + 5
001411 81be     +LDD R27 , Y + 5 + 1
001412 818f     +LDD R24 , Y + 5 + 2
001413 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
001414 940e 3f7f 	CALL __CPD12
001416 f429      	BRNE _0x1FC
                +
001417 e0e0     +LDI R30 , LOW ( 0x0 )
001418 e0f0     +LDI R31 , HIGH ( 0x0 )
001419 e060     +LDI R22 , BYTE3 ( 0x0 )
00141a e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
00141b c06a      	RJMP _0x20C001D
                 ;	}
                 _0x1FC:
00141c cf96      	RJMP _0x1F4
                 _0x1F5:
                 ;
                 ;	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
00141d 89e9      	LDD  R30,Y+17
00141e 89fa      	LDD  R31,Y+17+1
00141f 93fa      	ST   -Y,R31
001420 93ea      	ST   -Y,R30
                +
001421 81ef     +LDD R30 , Y + 7
001422 85f8     +LDD R31 , Y + 7 + 1
001423 8569     +LDD R22 , Y + 7 + 2
001424 857a     +LDD R23 , Y + 7 + 3
                 	__GETD1S 7
001425 940e 3f5a 	CALL __PUTPARD1
                +
001427 efaf     +LDI R26 , LOW ( 0xFFFFFFF )
001428 efbf     +LDI R27 , HIGH ( 0xFFFFFFF )
001429 ef8f     +LDI R24 , BYTE3 ( 0xFFFFFFF )
00142a e09f     +LDI R25 , BYTE4 ( 0xFFFFFFF )
                 	__GETD2N 0xFFFFFFF
00142b dd00      	RCALL _put_fat
00142c 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK && clst != 0) {
00142d 3010      	CPI  R17,0
00142e f439      	BRNE _0x1FE
                +
00142f 85ad     +LDD R26 , Y + 13
001430 85be     +LDD R27 , Y + 13 + 1
001431 858f     +LDD R24 , Y + 13 + 2
001432 8998     +LDD R25 , Y + 13 + 3
                 	__GETD2S 13
001433 940e 3f79 	CALL __CPD02
001435 f409      	BRNE _0x1FF
                 _0x1FE:
001436 c010      	RJMP _0x1FD
                 _0x1FF:
                 ;		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
001437 89e9      	LDD  R30,Y+17
001438 89fa      	LDD  R31,Y+17+1
001439 93fa      	ST   -Y,R31
00143a 93ea      	ST   -Y,R30
                +
00143b 85ef     +LDD R30 , Y + 15
00143c 89f8     +LDD R31 , Y + 15 + 1
00143d 8969     +LDD R22 , Y + 15 + 2
00143e 897a     +LDD R23 , Y + 15 + 3
                 	__GETD1S 15
00143f 940e 3f5a 	CALL __PUTPARD1
                +
001441 85ab     +LDD R26 , Y + 11
001442 85bc     +LDD R27 , Y + 11 + 1
001443 858d     +LDD R24 , Y + 11 + 2
001444 859e     +LDD R25 , Y + 11 + 3
                 	__GETD2S 11
001445 dce6      	RCALL _put_fat
001446 2f1e      	MOV  R17,R30
                 ;	}
                 ;	if (res == FR_OK) {
                 _0x1FD:
001447 3010      	CPI  R17,0
001448 f541      	BRNE _0x200
                 ;		fs->last_clust = ncl;			/* Update FSINFO */
                +
001449 81ed     +LDD R30 , Y + 5
00144a 81fe     +LDD R31 , Y + 5 + 1
00144b 816f     +LDD R22 , Y + 5 + 2
00144c 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
                +
00144d 89a9     +LDD R26 , Y + 17
00144e 89ba     +LDD R27 , Y + 17 + 1
00144f 961a     +ADIW R26 , 10
001450 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 17,10
                 ;		if (fs->free_clust != 0xFFFFFFFF) {
001452 89e9      	LDD  R30,Y+17
001453 89fa      	LDD  R31,Y+17+1
                +
001454 85a6     +LDD R26 , Z + 14
001455 85b7     +LDD R27 , Z + 14 + 1
001456 8980     +LDD R24 , Z + 14 + 2
001457 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
                +
001458 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001459 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
00145a 07be     +CPC R27 , R30
00145b efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
00145c 078e     +CPC R24 , R30
00145d efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
00145e 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
00145f f081      	BREQ _0x201
                 ;			fs->free_clust--;
001460 89a9      	LDD  R26,Y+17
001461 89ba      	LDD  R27,Y+17+1
001462 961e      	ADIW R26,14
001463 940e 3f37 	CALL __GETD1P_INC
001465 9731      	SBIW R30,1
001466 4060      	SBCI R22,0
001467 4070      	SBCI R23,0
001468 940e 3f41 	CALL __PUTDP1_DEC
                 ;			fs->fsi_flag |= 1;
00146a 89a9      	LDD  R26,Y+17
00146b 89ba      	LDD  R27,Y+17+1
00146c 9615      	ADIW R26,5
00146d 91ec      	LD   R30,X
00146e 60e1      	ORI  R30,1
00146f 93ec      	ST   X,R30
                 ;		}
                 ;	} else {
                 _0x201:
001470 c011      	RJMP _0x202
                 _0x200:
                 ;		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
001471 2fa1      	MOV  R26,R17
001472 e0b0      	LDI  R27,0
001473 9711      	SBIW R26,1
001474 f429      	BRNE _0x203
                +
001475 efef     +LDI R30 , LOW ( 0xFFFFFFFF )
001476 efff     +LDI R31 , HIGH ( 0xFFFFFFFF )
001477 ef6f     +LDI R22 , BYTE3 ( 0xFFFFFFFF )
001478 ef7f     +LDI R23 , BYTE4 ( 0xFFFFFFFF )
                 	__GETD1N 0xFFFFFFFF
001479 c004      	RJMP _0x204
                 _0x203:
                +
00147a e0e1     +LDI R30 , LOW ( 0x1 )
00147b e0f0     +LDI R31 , HIGH ( 0x1 )
00147c e060     +LDI R22 , BYTE3 ( 0x1 )
00147d e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
                 _0x204:
                +
00147e 83ed     +STD Y + 5 , R30
00147f 83fe     +STD Y + 5 + 1 , R31
001480 836f     +STD Y + 5 + 2 , R22
001481 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
                 ;	}
                 _0x202:
                 ;
                 ;	return ncl;		/* Return new cluster number or error code */
                +
001482 81ed     +LDD R30 , Y + 5
001483 81fe     +LDD R31 , Y + 5 + 1
001484 816f     +LDD R22 , Y + 5 + 2
001485 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
                 _0x20C001D:
001486 8118      	LDD  R17,Y+0
001487 9663      	ADIW R28,19
001488 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif /* !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT handling - Convert offset into cluster with link map table        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if _USE_FASTSEEK
                 ;static
                 ;DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
                 ;	FIL* fp,		/* Pointer to the file object */
                 ;	DWORD ofs		/* File offset to be converted to cluster# */
                 ;)
                 ;{
                 ;	DWORD cl, ncl, *tbl;
                 ;
                 ;
                 ;	tbl = fp->cltbl + 1;	/* Top of CLMT */
                 ;	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
                 ;	for (;;) {
                 ;		ncl = *tbl++;			/* Number of cluters in the fragment */
                 ;		if (!ncl) return 0;		/* End of table? (error) */
                 ;		if (cl < ncl) break;	/* In this fragment? */
                 ;		cl -= ncl; tbl++;		/* Next fragment */
                 ;	}
                 ;	return cl + *tbl;	/* Return the cluster number */
                 ;}
                 ;#endif	/* _USE_FASTSEEK */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Set directory index                              */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_sdi (
                 ;	DIR* dp,		/* Pointer to directory object */
                 ;	WORD idx		/* Index of directory table */
                 ;)
                 ;{
                 _dir_sdi_G000:
                 ; .FSTART _dir_sdi_G000
                 ;	DWORD clst;
                 ;	WORD ic;
                 ;
                 ;
                 ;	dp->index = idx;
001489 93ba      	ST   -Y,R27
00148a 93aa      	ST   -Y,R26
00148b 9724      	SBIW R28,4
00148c 931a      	ST   -Y,R17
00148d 930a      	ST   -Y,R16
                 ;	*dp -> Y+8
                 ;	idx -> Y+6
                 ;	clst -> Y+2
                 ;	ic -> R16,R17
00148e 81ee      	LDD  R30,Y+6
00148f 81ff      	LDD  R31,Y+6+1
                +
001490 85a8     +LDD R26 , Y + 8
001491 85b9     +LDD R27 , Y + 8 + 1
001492 9614     +ADIW R26 , 4
001493 93ed     +ST X + , R30
001494 93fc     +ST X , R31
                 	__PUTW1SNS 8,4
                 ;	clst = dp->sclust;
001495 85a8      	LDD  R26,Y+8
001496 85b9      	LDD  R27,Y+8+1
001497 9616      	ADIW R26,6
001498 940e 3f31 	CALL __GETD1P
                +
00149a 83ea     +STD Y + 2 , R30
00149b 83fb     +STD Y + 2 + 1 , R31
00149c 836c     +STD Y + 2 + 2 , R22
00149d 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
                +
00149e 81aa     +LDD R26 , Y + 2
00149f 81bb     +LDD R27 , Y + 2 + 1
0014a0 818c     +LDD R24 , Y + 2 + 2
0014a1 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
0014a2 30a1     +CPI R26 , LOW ( 0x1 )
0014a3 e0e0     +LDI R30 , HIGH ( 0x1 )
0014a4 07be     +CPC R27 , R30
0014a5 e0e0     +LDI R30 , BYTE3 ( 0x1 )
0014a6 078e     +CPC R24 , R30
0014a7 e0e0     +LDI R30 , BYTE4 ( 0x1 )
0014a8 079e     +CPC R25 , R30
                 	__CPD2N 0x1
0014a9 f079      	BREQ _0x207
0014aa 85a8      	LDD  R26,Y+8
0014ab 85b9      	LDD  R27,Y+8+1
0014ac 940e 3f2d 	CALL __GETW1P
0014ae 9672      	ADIW R30,18
0014af 01df      	MOVW R26,R30
0014b0 940e 3f31 	CALL __GETD1P
                +
0014b2 81aa     +LDD R26 , Y + 2
0014b3 81bb     +LDD R27 , Y + 2 + 1
0014b4 818c     +LDD R24 , Y + 2 + 2
0014b5 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0014b6 940e 3f84 	CALL __CPD21
0014b8 f020      	BRLO _0x206
                 _0x207:
                 ;		return FR_INT_ERR;
0014b9 e0e2      	LDI  R30,LOW(2)
0014ba 8119      	LDD  R17,Y+1
0014bb 8108      	LDD  R16,Y+0
0014bc c561      	RJMP _0x20C001A
                 ;	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
                 _0x206:
                +
0014bd 81ea     +LDD R30 , Y + 2
0014be 81fb     +LDD R31 , Y + 2 + 1
0014bf 816c     +LDD R22 , Y + 2 + 2
0014c0 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
0014c1 940e 3f71 	CALL __CPD10
0014c3 f439      	BRNE _0x20A
0014c4 85a8      	LDD  R26,Y+8
0014c5 85b9      	LDD  R27,Y+8+1
0014c6 940e 3f2d 	CALL __GETW1P
0014c8 81a0      	LD   R26,Z
0014c9 30a3      	CPI  R26,LOW(0x3)
0014ca f009      	BREQ _0x20B
                 _0x20A:
0014cb c00c      	RJMP _0x209
                 _0x20B:
                 ;		clst = dp->fs->dirbase;
0014cc 85a8      	LDD  R26,Y+8
0014cd 85b9      	LDD  R27,Y+8+1
0014ce 940e 3f2d 	CALL __GETW1P
0014d0 96b2      	ADIW R30,34
0014d1 01df      	MOVW R26,R30
0014d2 940e 3f31 	CALL __GETD1P
                +
0014d4 83ea     +STD Y + 2 , R30
0014d5 83fb     +STD Y + 2 + 1 , R31
0014d6 836c     +STD Y + 2 + 2 , R22
0014d7 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;
                 ;	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
                 _0x209:
                +
0014d8 81ea     +LDD R30 , Y + 2
0014d9 81fb     +LDD R31 , Y + 2 + 1
0014da 816c     +LDD R22 , Y + 2 + 2
0014db 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
0014dc 940e 3f71 	CALL __CPD10
0014de f4f9      	BRNE _0x20C
                 ;		dp->clust = clst;
                +
0014df 85a8     +LDD R26 , Y + 8
0014e0 85b9     +LDD R27 , Y + 8 + 1
0014e1 961a     +ADIW R26 , 10
0014e2 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 8,10
                 ;		if (idx >= dp->fs->n_rootdir)		/* Index is out of range */
0014e4 85a8      	LDD  R26,Y+8
0014e5 85b9      	LDD  R27,Y+8+1
0014e6 940e 3f2d 	CALL __GETW1P
0014e8 9638      	ADIW R30,8
0014e9 01df      	MOVW R26,R30
0014ea 940e 3f2d 	CALL __GETW1P
0014ec 81ae      	LDD  R26,Y+6
0014ed 81bf      	LDD  R27,Y+6+1
0014ee 17ae      	CP   R26,R30
0014ef 07bf      	CPC  R27,R31
0014f0 f020      	BRLO _0x20D
                 ;			return FR_INT_ERR;
0014f1 e0e2      	LDI  R30,LOW(2)
0014f2 8119      	LDD  R17,Y+1
0014f3 8108      	LDD  R16,Y+0
0014f4 c529      	RJMP _0x20C001A
                 ;		dp->sect = dp->fs->dirbase + idx / (SS(dp->fs) / SZ_DIR);	/* Sector# */
                 _0x20D:
0014f5 85a8      	LDD  R26,Y+8
0014f6 85b9      	LDD  R27,Y+8+1
0014f7 940e 3f2d 	CALL __GETW1P
0014f9 96b2      	ADIW R30,34
0014fa 01df      	MOVW R26,R30
0014fb 940e 3f31 	CALL __GETD1P
0014fd c067      	RJMP _0x4E2
                 ;	}
                 ;	else {				/* Dynamic table (sub-dirs or root-directory in FAT32) */
                 _0x20C:
                 ;		ic = SS(dp->fs) / SZ_DIR * dp->fs->csize;	/* Entries per cluster */
0014fe 85a8      	LDD  R26,Y+8
0014ff 85b9      	LDD  R27,Y+8+1
001500 940e 3f2d 	CALL __GETW1P
001502 81e2      	LDD  R30,Z+2
001503 e1a0      	LDI  R26,LOW(16)
001504 9fea      	MUL  R30,R26
001505 0180      	MOVW R16,R0
                 ;		while (idx >= ic) {	/* Follow cluster chain */
                 _0x20F:
001506 81ae      	LDD  R26,Y+6
001507 81bf      	LDD  R27,Y+6+1
001508 17a0      	CP   R26,R16
001509 07b1      	CPC  R27,R17
00150a f408      	BRSH PC+2
00150b c045      	RJMP _0x211
                 ;			clst = get_fat(dp->fs, clst);				/* Get next cluster */
00150c 85a8      	LDD  R26,Y+8
00150d 85b9      	LDD  R27,Y+8+1
00150e 940e 3f2d 	CALL __GETW1P
001510 93fa      	ST   -Y,R31
001511 93ea      	ST   -Y,R30
                +
001512 81ac     +LDD R26 , Y + 4
001513 81bd     +LDD R27 , Y + 4 + 1
001514 818e     +LDD R24 , Y + 4 + 2
001515 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
001516 dadb      	RCALL _get_fat
                +
001517 83ea     +STD Y + 2 , R30
001518 83fb     +STD Y + 2 + 1 , R31
001519 836c     +STD Y + 2 + 2 , R22
00151a 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
                +
00151b 81aa     +LDD R26 , Y + 2
00151c 81bb     +LDD R27 , Y + 2 + 1
00151d 818c     +LDD R24 , Y + 2 + 2
00151e 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
00151f 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001520 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
001521 07be     +CPC R27 , R30
001522 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
001523 078e     +CPC R24 , R30
001524 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
001525 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
001526 f421      	BRNE _0x212
001527 e0e1      	LDI  R30,LOW(1)
001528 8119      	LDD  R17,Y+1
001529 8108      	LDD  R16,Y+0
00152a c4f3      	RJMP _0x20C001A
                 ;			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or int error */
                 _0x212:
                +
00152b 81aa     +LDD R26 , Y + 2
00152c 81bb     +LDD R27 , Y + 2 + 1
00152d 818c     +LDD R24 , Y + 2 + 2
00152e 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
00152f 30a2     +CPI R26 , LOW ( 0x2 )
001530 e0e0     +LDI R30 , HIGH ( 0x2 )
001531 07be     +CPC R27 , R30
001532 e0e0     +LDI R30 , BYTE3 ( 0x2 )
001533 078e     +CPC R24 , R30
001534 e0e0     +LDI R30 , BYTE4 ( 0x2 )
001535 079e     +CPC R25 , R30
                 	__CPD2N 0x2
001536 f078      	BRLO _0x214
001537 85a8      	LDD  R26,Y+8
001538 85b9      	LDD  R27,Y+8+1
001539 940e 3f2d 	CALL __GETW1P
00153b 9672      	ADIW R30,18
00153c 01df      	MOVW R26,R30
00153d 940e 3f31 	CALL __GETD1P
                +
00153f 81aa     +LDD R26 , Y + 2
001540 81bb     +LDD R27 , Y + 2 + 1
001541 818c     +LDD R24 , Y + 2 + 2
001542 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
001543 940e 3f84 	CALL __CPD21
001545 f020      	BRLO _0x213
                 _0x214:
                 ;				return FR_INT_ERR;
001546 e0e2      	LDI  R30,LOW(2)
001547 8119      	LDD  R17,Y+1
001548 8108      	LDD  R16,Y+0
001549 c4d4      	RJMP _0x20C001A
                 ;			idx -= ic;
                 _0x213:
00154a 81ee      	LDD  R30,Y+6
00154b 81ff      	LDD  R31,Y+6+1
00154c 1be0      	SUB  R30,R16
00154d 0bf1      	SBC  R31,R17
00154e 83ee      	STD  Y+6,R30
00154f 83ff      	STD  Y+6+1,R31
                 ;		}
001550 cfb5      	RJMP _0x20F
                 _0x211:
                 ;		dp->clust = clst;
                +
001551 81ea     +LDD R30 , Y + 2
001552 81fb     +LDD R31 , Y + 2 + 1
001553 816c     +LDD R22 , Y + 2 + 2
001554 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
                +
001555 85a8     +LDD R26 , Y + 8
001556 85b9     +LDD R27 , Y + 8 + 1
001557 961a     +ADIW R26 , 10
001558 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 8,10
                 ;		dp->sect = clust2sect(dp->fs, clst) + idx / (SS(dp->fs) / SZ_DIR);	/* Sector# */
00155a 85a8      	LDD  R26,Y+8
00155b 85b9      	LDD  R27,Y+8+1
00155c 940e 3f2d 	CALL __GETW1P
00155e 93fa      	ST   -Y,R31
00155f 93ea      	ST   -Y,R30
                +
001560 81ac     +LDD R26 , Y + 4
001561 81bd     +LDD R27 , Y + 4 + 1
001562 818e     +LDD R24 , Y + 4 + 2
001563 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
001564 da50      	RCALL _clust2sect
                 _0x4E2:
001565 01df      	MOVW R26,R30
001566 01cb      	MOVW R24,R22
001567 81ee      	LDD  R30,Y+6
001568 81ff      	LDD  R31,Y+6+1
001569 940e 3e36 	CALL __LSRW4
00156b 2766      	CLR  R22
00156c 2777      	CLR  R23
00156d 940e 3dd0 	CALL __ADDD12
                +
00156f 85a8     +LDD R26 , Y + 8
001570 85b9     +LDD R27 , Y + 8 + 1
001571 961e     +ADIW R26 , 14
001572 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 8,14
                 ;	}
                 ;
                 ;	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector */
001574 85a8      	LDD  R26,Y+8
001575 85b9      	LDD  R27,Y+8+1
001576 940e 3f2d 	CALL __GETW1P
001578 96be      	ADIW R30,46
001579 01df      	MOVW R26,R30
00157a 81ee      	LDD  R30,Y+6
00157b 81ff      	LDD  R31,Y+6+1
00157c 70ef      	ANDI R30,LOW(0xF)
00157d 70f0      	ANDI R31,HIGH(0xF)
00157e 0fee      	LSL  R30
00157f 940e 3e24 	CALL __LSLW4
001581 0fea      	ADD  R30,R26
001582 1ffb      	ADC  R31,R27
                +
001583 85a8     +LDD R26 , Y + 8
001584 85b9     +LDD R27 , Y + 8 + 1
001585 9652     +ADIW R26 , 18
001586 93ed     +ST X + , R30
001587 93fc     +ST X , R31
                 	__PUTW1SNS 8,18
                 ;
                 ;	return FR_OK;	/* Seek succeeded */
001588 e0e0      	LDI  R30,LOW(0)
001589 8119      	LDD  R17,Y+1
00158a 8108      	LDD  R16,Y+0
00158b c492      	RJMP _0x20C001A
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Move directory table index next                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
                 ;	DIR* dp,		/* Pointer to the directory object */
                 ;	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
                 ;)
                 ;{
                 _dir_next_G000:
                 ; .FSTART _dir_next_G000
                 ;	DWORD clst;
                 ;	WORD i;
                 ;
                 ;
                 ;	i = dp->index + 1;
00158c 93ba      	ST   -Y,R27
00158d 93aa      	ST   -Y,R26
00158e 9724      	SBIW R28,4
00158f 931a      	ST   -Y,R17
001590 930a      	ST   -Y,R16
                 ;	*dp -> Y+8
                 ;	stretch -> Y+6
                 ;	clst -> Y+2
                 ;	i -> R16,R17
001591 85a8      	LDD  R26,Y+8
001592 85b9      	LDD  R27,Y+8+1
001593 9614      	ADIW R26,4
001594 940e 3f2d 	CALL __GETW1P
001596 9631      	ADIW R30,1
001597 018f      	MOVW R16,R30
                 ;	if (!i || !dp->sect)	/* Report EOT when index has reached 65535 */
001598 2e00      	MOV  R0,R16
001599 2a01      	OR   R0,R17
00159a f041      	BREQ _0x217
00159b 85a8      	LDD  R26,Y+8
00159c 85b9      	LDD  R27,Y+8+1
00159d 961e      	ADIW R26,14
00159e 940e 3f31 	CALL __GETD1P
0015a0 940e 3f71 	CALL __CPD10
0015a2 f421      	BRNE _0x216
                 _0x217:
                 ;		return FR_NO_FILE;
0015a3 e0e4      	LDI  R30,LOW(4)
0015a4 8119      	LDD  R17,Y+1
0015a5 8108      	LDD  R16,Y+0
0015a6 c477      	RJMP _0x20C001A
                 ;
                 ;	if (!(i % (SS(dp->fs) / SZ_DIR))) {	/* Sector changed? */
                 _0x216:
0015a7 01f8      	MOVW R30,R16
0015a8 70ef      	ANDI R30,LOW(0xF)
0015a9 f009      	BREQ PC+2
0015aa c14b      	RJMP _0x219
                 ;		dp->sect++;					/* Next sector */
0015ab 85a8      	LDD  R26,Y+8
0015ac 85b9      	LDD  R27,Y+8+1
0015ad 961e      	ADIW R26,14
0015ae 940e 3f37 	CALL __GETD1P_INC
                +
0015b0 5fef     +SUBI R30 , LOW ( - 1 )
0015b1 4fff     +SBCI R31 , HIGH ( - 1 )
0015b2 4f6f     +SBCI R22 , BYTE3 ( - 1 )
0015b3 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
0015b4 940e 3f41 	CALL __PUTDP1_DEC
                 ;
                 ;		if (!dp->clust) {		/* Static table */
0015b6 85a8      	LDD  R26,Y+8
0015b7 85b9      	LDD  R27,Y+8+1
0015b8 961a      	ADIW R26,10
0015b9 940e 3f31 	CALL __GETD1P
0015bb 940e 3f71 	CALL __CPD10
0015bd f481      	BRNE _0x21A
                 ;			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
0015be 85a8      	LDD  R26,Y+8
0015bf 85b9      	LDD  R27,Y+8+1
0015c0 940e 3f2d 	CALL __GETW1P
0015c2 9638      	ADIW R30,8
0015c3 01df      	MOVW R26,R30
0015c4 940e 3f2d 	CALL __GETW1P
0015c6 170e      	CP   R16,R30
0015c7 071f      	CPC  R17,R31
0015c8 f020      	BRLO _0x21B
                 ;				return FR_NO_FILE;
0015c9 e0e4      	LDI  R30,LOW(4)
0015ca 8119      	LDD  R17,Y+1
0015cb 8108      	LDD  R16,Y+0
0015cc c451      	RJMP _0x20C001A
                 ;		}
                 _0x21B:
                 ;		else {					/* Dynamic table */
0015cd c128      	RJMP _0x21C
                 _0x21A:
                 ;			if (((i / (SS(dp->fs) / SZ_DIR)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
0015ce 01f8      	MOVW R30,R16
0015cf 940e 3e36 	CALL __LSRW4
0015d1 010f      	MOVW R0,R30
0015d2 85a8      	LDD  R26,Y+8
0015d3 85b9      	LDD  R27,Y+8+1
0015d4 940e 3f2d 	CALL __GETW1P
0015d6 81e2      	LDD  R30,Z+2
0015d7 e0f0      	LDI  R31,0
0015d8 9731      	SBIW R30,1
0015d9 21e0      	AND  R30,R0
0015da 21f1      	AND  R31,R1
0015db 9730      	SBIW R30,0
0015dc f009      	BREQ PC+2
0015dd c118      	RJMP _0x21D
                 ;				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
0015de 940e 3f2d 	CALL __GETW1P
0015e0 93fa      	ST   -Y,R31
0015e1 93ea      	ST   -Y,R30
0015e2 85ea      	LDD  R30,Y+10
0015e3 85fb      	LDD  R31,Y+10+1
                +
0015e4 85a2     +LDD R26 , Z + 10
0015e5 85b3     +LDD R27 , Z + 10 + 1
0015e6 8584     +LDD R24 , Z + 10 + 2
0015e7 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
0015e8 da09      	RCALL _get_fat
                +
0015e9 83ea     +STD Y + 2 , R30
0015ea 83fb     +STD Y + 2 + 1 , R31
0015eb 836c     +STD Y + 2 + 2 , R22
0015ec 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 ;				if (clst <= 1) return FR_INT_ERR;
                +
0015ed 81aa     +LDD R26 , Y + 2
0015ee 81bb     +LDD R27 , Y + 2 + 1
0015ef 818c     +LDD R24 , Y + 2 + 2
0015f0 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
0015f1 30a2     +CPI R26 , LOW ( 0x2 )
0015f2 e0e0     +LDI R30 , HIGH ( 0x2 )
0015f3 07be     +CPC R27 , R30
0015f4 e0e0     +LDI R30 , BYTE3 ( 0x2 )
0015f5 078e     +CPC R24 , R30
0015f6 e0e0     +LDI R30 , BYTE4 ( 0x2 )
0015f7 079e     +CPC R25 , R30
                 	__CPD2N 0x2
0015f8 f420      	BRSH _0x21E
0015f9 e0e2      	LDI  R30,LOW(2)
0015fa 8119      	LDD  R17,Y+1
0015fb 8108      	LDD  R16,Y+0
0015fc c421      	RJMP _0x20C001A
                 ;				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
                 _0x21E:
                +
0015fd 81aa     +LDD R26 , Y + 2
0015fe 81bb     +LDD R27 , Y + 2 + 1
0015ff 818c     +LDD R24 , Y + 2 + 2
001600 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
001601 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001602 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
001603 07be     +CPC R27 , R30
001604 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
001605 078e     +CPC R24 , R30
001606 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
001607 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
001608 f421      	BRNE _0x21F
001609 e0e1      	LDI  R30,LOW(1)
00160a 8119      	LDD  R17,Y+1
00160b 8108      	LDD  R16,Y+0
00160c c411      	RJMP _0x20C001A
                 ;				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
                 _0x21F:
00160d 85a8      	LDD  R26,Y+8
00160e 85b9      	LDD  R27,Y+8+1
00160f 940e 3f2d 	CALL __GETW1P
001611 9672      	ADIW R30,18
001612 01df      	MOVW R26,R30
001613 940e 3f31 	CALL __GETD1P
                +
001615 81aa     +LDD R26 , Y + 2
001616 81bb     +LDD R27 , Y + 2 + 1
001617 818c     +LDD R24 , Y + 2 + 2
001618 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
001619 940e 3f84 	CALL __CPD21
00161b f408      	BRSH PC+2
00161c c0c0      	RJMP _0x220
                 ;#if !_FS_READONLY
                 ;					BYTE c;
                 ;					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
00161d 9721      	SBIW R28,1
                 ;	*dp -> Y+9
                 ;	stretch -> Y+7
                 ;	clst -> Y+3
                 ;	c -> Y+0
00161e 81ef      	LDD  R30,Y+7
00161f 85f8      	LDD  R31,Y+7+1
001620 9730      	SBIW R30,0
001621 f429      	BRNE _0x221
001622 e0e4      	LDI  R30,LOW(4)
001623 9621      	ADIW R28,1
001624 8119      	LDD  R17,Y+1
001625 8108      	LDD  R16,Y+0
001626 c3f7      	RJMP _0x20C001A
                 ;					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
                 _0x221:
001627 85a9      	LDD  R26,Y+9
001628 85ba      	LDD  R27,Y+9+1
001629 940e 3f2d 	CALL __GETW1P
00162b 93fa      	ST   -Y,R31
00162c 93ea      	ST   -Y,R30
00162d 85eb      	LDD  R30,Y+11
00162e 85fc      	LDD  R31,Y+11+1
                +
00162f 85a2     +LDD R26 , Z + 10
001630 85b3     +LDD R27 , Z + 10 + 1
001631 8584     +LDD R24 , Z + 10 + 2
001632 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
001633 dd14      	RCALL _create_chain_G000
                +
001634 83eb     +STD Y + 3 , R30
001635 83fc     +STD Y + 3 + 1 , R31
001636 836d     +STD Y + 3 + 2 , R22
001637 837e     +STD Y + 3 + 3 , R23
                 	__PUTD1S 3
                 ;					if (clst == 0) return FR_DENIED;			/* No free cluster */
001638 940e 3f71 	CALL __CPD10
00163a f429      	BRNE _0x222
00163b e0e7      	LDI  R30,LOW(7)
00163c 9621      	ADIW R28,1
00163d 8119      	LDD  R17,Y+1
00163e 8108      	LDD  R16,Y+0
00163f c3de      	RJMP _0x20C001A
                 ;					if (clst == 1) return FR_INT_ERR;
                 _0x222:
                +
001640 81ab     +LDD R26 , Y + 3
001641 81bc     +LDD R27 , Y + 3 + 1
001642 818d     +LDD R24 , Y + 3 + 2
001643 819e     +LDD R25 , Y + 3 + 3
                 	__GETD2S 3
                +
001644 30a1     +CPI R26 , LOW ( 0x1 )
001645 e0e0     +LDI R30 , HIGH ( 0x1 )
001646 07be     +CPC R27 , R30
001647 e0e0     +LDI R30 , BYTE3 ( 0x1 )
001648 078e     +CPC R24 , R30
001649 e0e0     +LDI R30 , BYTE4 ( 0x1 )
00164a 079e     +CPC R25 , R30
                 	__CPD2N 0x1
00164b f429      	BRNE _0x223
00164c e0e2      	LDI  R30,LOW(2)
00164d 9621      	ADIW R28,1
00164e 8119      	LDD  R17,Y+1
00164f 8108      	LDD  R16,Y+0
001650 c3cd      	RJMP _0x20C001A
                 ;					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
                 _0x223:
                +
001651 81ab     +LDD R26 , Y + 3
001652 81bc     +LDD R27 , Y + 3 + 1
001653 818d     +LDD R24 , Y + 3 + 2
001654 819e     +LDD R25 , Y + 3 + 3
                 	__GETD2S 3
                +
001655 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
001656 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
001657 07be     +CPC R27 , R30
001658 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
001659 078e     +CPC R24 , R30
00165a efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
00165b 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
00165c f429      	BRNE _0x224
00165d e0e1      	LDI  R30,LOW(1)
00165e 9621      	ADIW R28,1
00165f 8119      	LDD  R17,Y+1
001660 8108      	LDD  R16,Y+0
001661 c3bc      	RJMP _0x20C001A
                 ;					/* Clean-up stretched table */
                 ;					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
                 _0x224:
001662 85a9      	LDD  R26,Y+9
001663 85ba      	LDD  R27,Y+9+1
001664 940e 3f2d 	CALL __GETW1P
001666 01df      	MOVW R26,R30
001667 940e 0df6 	CALL _sync_window_G000
001669 30e0      	CPI  R30,0
00166a f029      	BREQ _0x225
00166b e0e1      	LDI  R30,LOW(1)
00166c 9621      	ADIW R28,1
00166d 8119      	LDD  R17,Y+1
00166e 8108      	LDD  R16,Y+0
00166f c3ae      	RJMP _0x20C001A
                 ;					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
                 _0x225:
001670 85a9      	LDD  R26,Y+9
001671 85ba      	LDD  R27,Y+9+1
001672 940e 3f2d 	CALL __GETW1P
001674 96be      	ADIW R30,46
001675 93fa      	ST   -Y,R31
001676 93ea      	ST   -Y,R30
001677 e0e0      	LDI  R30,LOW(0)
001678 e0f0      	LDI  R31,HIGH(0)
001679 93fa      	ST   -Y,R31
00167a 93ea      	ST   -Y,R30
00167b e0a0      	LDI  R26,LOW(512)
00167c e0b2      	LDI  R27,HIGH(512)
00167d 940e 0d9f 	CALL _mem_set_G000
                 ;					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
00167f 85a9      	LDD  R26,Y+9
001680 85ba      	LDD  R27,Y+9+1
001681 940e 3f2d 	CALL __GETW1P
001683 01df      	MOVW R26,R30
001684 96ba      	ADIW R30,42
001685 93ff      	PUSH R31
001686 93ef      	PUSH R30
001687 01fd      	MOVW R30,R26
001688 93fa      	ST   -Y,R31
001689 93ea      	ST   -Y,R30
                +
00168a 81ad     +LDD R26 , Y + 5
00168b 81be     +LDD R27 , Y + 5 + 1
00168c 818f     +LDD R24 , Y + 5 + 2
00168d 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
00168e d926      	RCALL _clust2sect
00168f 91af      	POP  R26
001690 91bf      	POP  R27
001691 940e 3f3c 	CALL __PUTDP1
                 ;					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
001693 e0e0      	LDI  R30,LOW(0)
001694 83e8      	ST   Y,R30
                 _0x227:
001695 85a9      	LDD  R26,Y+9
001696 85ba      	LDD  R27,Y+9+1
001697 940e 3f2d 	CALL __GETW1P
001699 81e2      	LDD  R30,Z+2
00169a 81a8      	LD   R26,Y
00169b 17ae      	CP   R26,R30
00169c f538      	BRSH _0x228
                 ;						dp->fs->wflag = 1;
00169d 85a9      	LDD  R26,Y+9
00169e 85ba      	LDD  R27,Y+9+1
00169f 940e 3f2d 	CALL __GETW1P
0016a1 9634      	ADIW R30,4
0016a2 e0a1      	LDI  R26,LOW(1)
0016a3 83a0      	STD  Z+0,R26
                 ;						if (sync_window(dp->fs)) return FR_DISK_ERR;
0016a4 85a9      	LDD  R26,Y+9
0016a5 85ba      	LDD  R27,Y+9+1
0016a6 940e 3f2d 	CALL __GETW1P
0016a8 01df      	MOVW R26,R30
0016a9 940e 0df6 	CALL _sync_window_G000
0016ab 30e0      	CPI  R30,0
0016ac f029      	BREQ _0x229
0016ad e0e1      	LDI  R30,LOW(1)
0016ae 9621      	ADIW R28,1
0016af 8119      	LDD  R17,Y+1
0016b0 8108      	LDD  R16,Y+0
0016b1 c36c      	RJMP _0x20C001A
                 ;						dp->fs->winsect++;
                 _0x229:
0016b2 85a9      	LDD  R26,Y+9
0016b3 85ba      	LDD  R27,Y+9+1
0016b4 940e 3f2d 	CALL __GETW1P
0016b6 96ba      	ADIW R30,42
0016b7 01df      	MOVW R26,R30
0016b8 940e 3f37 	CALL __GETD1P_INC
                +
0016ba 5fef     +SUBI R30 , LOW ( - 1 )
0016bb 4fff     +SBCI R31 , HIGH ( - 1 )
0016bc 4f6f     +SBCI R22 , BYTE3 ( - 1 )
0016bd 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
0016be 940e 3f41 	CALL __PUTDP1_DEC
                 ;					}
0016c0 81e8      	LD   R30,Y
0016c1 5fef      	SUBI R30,-LOW(1)
0016c2 83e8      	ST   Y,R30
0016c3 cfd1      	RJMP _0x227
                 _0x228:
                 ;					dp->fs->winsect -= c;						/* Rewind window offset */
0016c4 85a9      	LDD  R26,Y+9
0016c5 85ba      	LDD  R27,Y+9+1
0016c6 940e 3f2d 	CALL __GETW1P
0016c8 96ba      	ADIW R30,42
0016c9 93ff      	PUSH R31
0016ca 93ef      	PUSH R30
0016cb 01df      	MOVW R26,R30
0016cc 940e 3f31 	CALL __GETD1P
0016ce 01df      	MOVW R26,R30
0016cf 01cb      	MOVW R24,R22
0016d0 81e8      	LD   R30,Y
0016d1 e0f0      	LDI  R31,0
0016d2 940e 3e59 	CALL __CWD1
0016d4 940e 3f64 	CALL __SWAPD12
0016d6 940e 3dda 	CALL __SUBD12
0016d8 91af      	POP  R26
0016d9 91bf      	POP  R27
0016da 940e 3f3c 	CALL __PUTDP1
                 ;#else
                 ;					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
                 ;					return FR_NO_FILE;							/* Report EOT */
                 ;#endif
                 ;				}
0016dc 9621      	ADIW R28,1
                 ;				dp->clust = clst;				/* Initialize data for new cluster */
                 _0x220:
                +
0016dd 81ea     +LDD R30 , Y + 2
0016de 81fb     +LDD R31 , Y + 2 + 1
0016df 816c     +LDD R22 , Y + 2 + 2
0016e0 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
                +
0016e1 85a8     +LDD R26 , Y + 8
0016e2 85b9     +LDD R27 , Y + 8 + 1
0016e3 961a     +ADIW R26 , 10
0016e4 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 8,10
                 ;				dp->sect = clust2sect(dp->fs, clst);
0016e6 85a8      	LDD  R26,Y+8
0016e7 85b9      	LDD  R27,Y+8+1
0016e8 940e 3f2d 	CALL __GETW1P
0016ea 93fa      	ST   -Y,R31
0016eb 93ea      	ST   -Y,R30
                +
0016ec 81ac     +LDD R26 , Y + 4
0016ed 81bd     +LDD R27 , Y + 4 + 1
0016ee 818e     +LDD R24 , Y + 4 + 2
0016ef 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
0016f0 d8c4      	RCALL _clust2sect
                +
0016f1 85a8     +LDD R26 , Y + 8
0016f2 85b9     +LDD R27 , Y + 8 + 1
0016f3 961e     +ADIW R26 , 14
0016f4 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 8,14
                 ;			}
                 ;		}
                 _0x21D:
                 _0x21C:
                 ;	}
                 ;
                 ;	dp->index = i;	/* Current index */
                 _0x219:
0016f6 01f8      	MOVW R30,R16
                +
0016f7 85a8     +LDD R26 , Y + 8
0016f8 85b9     +LDD R27 , Y + 8 + 1
0016f9 9614     +ADIW R26 , 4
0016fa 93ed     +ST X + , R30
0016fb 93fc     +ST X , R31
                 	__PUTW1SNS 8,4
                 ;	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
0016fc 85a8      	LDD  R26,Y+8
0016fd 85b9      	LDD  R27,Y+8+1
0016fe 940e 3f2d 	CALL __GETW1P
001700 96be      	ADIW R30,46
001701 01df      	MOVW R26,R30
001702 01f8      	MOVW R30,R16
001703 70ef      	ANDI R30,LOW(0xF)
001704 70f0      	ANDI R31,HIGH(0xF)
001705 0fee      	LSL  R30
001706 940e 3e24 	CALL __LSLW4
001708 0fea      	ADD  R30,R26
001709 1ffb      	ADC  R31,R27
                +
00170a 85a8     +LDD R26 , Y + 8
00170b 85b9     +LDD R27 , Y + 8 + 1
00170c 9652     +ADIW R26 , 18
00170d 93ed     +ST X + , R30
00170e 93fc     +ST X , R31
                 	__PUTW1SNS 8,18
                 ;
                 ;	return FR_OK;
00170f e0e0      	LDI  R30,LOW(0)
001710 8119      	LDD  R17,Y+1
001711 8108      	LDD  R16,Y+0
001712 c30b      	RJMP _0x20C001A
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Reserve directory entry                          */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if !_FS_READONLY
                 ;static
                 ;FRESULT dir_alloc (
                 ;	DIR* dp,	/* Pointer to the directory object */
                 ;	UINT nent	/* Number of contiguous entries to allocate (1-21) */
                 ;)
                 ;{
                 _dir_alloc_G000:
                 ; .FSTART _dir_alloc_G000
                 ;	FRESULT res;
                 ;	UINT n;
                 ;
                 ;
                 ;	res = dir_sdi(dp, 0);
001713 93ba      	ST   -Y,R27
001714 93aa      	ST   -Y,R26
001715 940e 3f8b 	CALL __SAVELOCR4
                 ;	*dp -> Y+6
                 ;	nent -> Y+4
                 ;	res -> R17
                 ;	n -> R18,R19
001717 81ee      	LDD  R30,Y+6
001718 81ff      	LDD  R31,Y+6+1
001719 93fa      	ST   -Y,R31
00171a 93ea      	ST   -Y,R30
00171b e0a0      	LDI  R26,LOW(0)
00171c e0b0      	LDI  R27,0
00171d dd6b      	RCALL _dir_sdi_G000
00171e 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
00171f 3010      	CPI  R17,0
001720 f5a9      	BRNE _0x22A
                 ;		n = 0;
                +
001721 e020     +LDI R18 , LOW ( 0 )
001722 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 ;		do {
                 _0x22C:
                 ;			res = move_window(dp->fs, dp->sect);
001723 81ae      	LDD  R26,Y+6
001724 81bf      	LDD  R27,Y+6+1
001725 940e 3f2d 	CALL __GETW1P
001727 93fa      	ST   -Y,R31
001728 93ea      	ST   -Y,R30
001729 85e8      	LDD  R30,Y+8
00172a 85f9      	LDD  R31,Y+8+1
                +
00172b 85a6     +LDD R26 , Z + 14
00172c 85b7     +LDD R27 , Z + 14 + 1
00172d 8980     +LDD R24 , Z + 14 + 2
00172e 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
00172f 940e 0e73 	CALL _move_window_G000
001731 2f1e      	MOV  R17,R30
                 ;			if (res != FR_OK) break;
001732 3010      	CPI  R17,0
001733 f511      	BRNE _0x22D
                 ;			if (dp->dir[0] == DDE || dp->dir[0] == 0) {	/* Is it a blank entry? */
001734 81ee      	LDD  R30,Y+6
001735 81ff      	LDD  R31,Y+6+1
001736 89a2      	LDD  R26,Z+18
001737 89b3      	LDD  R27,Z+19
001738 91ac      	LD   R26,X
001739 3ea5      	CPI  R26,LOW(0xE5)
00173a f029      	BREQ _0x230
00173b 89a2      	LDD  R26,Z+18
00173c 89b3      	LDD  R27,Z+19
00173d 91ac      	LD   R26,X
00173e 30a0      	CPI  R26,LOW(0x0)
00173f f451      	BRNE _0x22F
                 _0x230:
                 ;				if (++n == nent) break;	/* A block of contiguous entries is found */
001740 01f9      	MOVW R30,R18
001741 9631      	ADIW R30,1
001742 019f      	MOVW R18,R30
001743 01df      	MOVW R26,R30
001744 81ec      	LDD  R30,Y+4
001745 81fd      	LDD  R31,Y+4+1
001746 17ea      	CP   R30,R26
001747 07fb      	CPC  R31,R27
001748 f069      	BREQ _0x22D
                 ;			} else {
001749 c002      	RJMP _0x233
                 _0x22F:
                 ;				n = 0;					/* Not a blank entry. Restart to search */
                +
00174a e020     +LDI R18 , LOW ( 0 )
00174b e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                 ;			}
                 _0x233:
                 ;			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
00174c 81ee      	LDD  R30,Y+6
00174d 81ff      	LDD  R31,Y+6+1
00174e 93fa      	ST   -Y,R31
00174f 93ea      	ST   -Y,R30
001750 e0a1      	LDI  R26,LOW(1)
001751 e0b0      	LDI  R27,0
001752 de39      	RCALL _dir_next_G000
001753 2f1e      	MOV  R17,R30
                 ;		} while (res == FR_OK);
001754 3010      	CPI  R17,0
001755 f269      	BREQ _0x22C
                 _0x22D:
                 ;	}
                 ;	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
                 _0x22A:
001756 3014      	CPI  R17,4
001757 f409      	BRNE _0x234
001758 e017      	LDI  R17,LOW(7)
                 ;	return res;
                 _0x234:
001759 c375      	RJMP _0x20C0018
                 ;}
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Load/Store start cluster number                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;DWORD ld_clust (
                 ;	FATFS* fs,	/* Pointer to the fs object */
                 ;	BYTE* dir	/* Pointer to the directory entry */
                 ;)
                 ;{
                 _ld_clust_G000:
                 ; .FSTART _ld_clust_G000
                 ;	DWORD cl;
                 ;
                 ;	cl = LD_WORD(dir+DIR_FstClusLO);
00175a 93ba      	ST   -Y,R27
00175b 93aa      	ST   -Y,R26
00175c 9724      	SBIW R28,4
                 ;	*fs -> Y+6
                 ;	*dir -> Y+4
                 ;	cl -> Y+0
00175d 81ec      	LDD  R30,Y+4
00175e 81fd      	LDD  R31,Y+4+1
00175f 8db3      	LDD  R27,Z+27
001760 e0a0      	LDI  R26,LOW(0)
001761 8de2      	LDD  R30,Z+26
001762 e0f0      	LDI  R31,0
001763 2bea      	OR   R30,R26
001764 2bfb      	OR   R31,R27
001765 2766      	CLR  R22
001766 2777      	CLR  R23
001767 940e 3f50 	CALL __PUTD1S0
                 ;	if (fs->fs_type == FS_FAT32)
001769 81ae      	LDD  R26,Y+6
00176a 81bf      	LDD  R27,Y+6+1
00176b 91ac      	LD   R26,X
00176c 30a3      	CPI  R26,LOW(0x3)
00176d f491      	BRNE _0x235
                 ;		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
00176e 81ec      	LDD  R30,Y+4
00176f 81fd      	LDD  R31,Y+4+1
001770 89b5      	LDD  R27,Z+21
001771 e0a0      	LDI  R26,LOW(0)
001772 89e4      	LDD  R30,Z+20
001773 e0f0      	LDI  R31,0
001774 2bea      	OR   R30,R26
001775 2bfb      	OR   R31,R27
001776 2766      	CLR  R22
001777 2777      	CLR  R23
001778 940e 3e4e 	CALL __LSLD16
00177a 940e 3f4b 	CALL __GETD2S0
00177c 940e 3de9 	CALL __ORD12
00177e 940e 3f50 	CALL __PUTD1S0
                 ;
                 ;	return cl;
                 _0x235:
001780 940e 3f46 	CALL __GETD1S0
001782 c34f      	RJMP _0x20C0017
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;static
                 ;void st_clust (
                 ;	BYTE* dir,	/* Pointer to the directory entry */
                 ;	DWORD cl	/* Value to be set */
                 ;)
                 ;{
                 _st_clust_G000:
                 ; .FSTART _st_clust_G000
                 ;	ST_WORD(dir+DIR_FstClusLO, cl);
001783 940e 3f5f 	CALL __PUTPARD2
                 ;	*dir -> Y+4
                 ;	cl -> Y+0
001785 81e8      	LD   R30,Y
                +
001786 81ac     +LDD R26 , Y + 4
001787 81bd     +LDD R27 , Y + 4 + 1
001788 965a     +ADIW R26 , 26
001789 93ec     +ST X , R30
                 	__PUTB1SNS 4,26
00178a 81e9      	LDD  R30,Y+1
                +
00178b 81ac     +LDD R26 , Y + 4
00178c 81bd     +LDD R27 , Y + 4 + 1
00178d 965b     +ADIW R26 , 27
00178e 93ec     +ST X , R30
                 	__PUTB1SNS 4,27
                 ;	ST_WORD(dir+DIR_FstClusHI, cl >> 16);
00178f 940e 3f46 	CALL __GETD1S0
001791 940e 3e49 	CALL __LSRD16
                +
001793 81ac     +LDD R26 , Y + 4
001794 81bd     +LDD R27 , Y + 4 + 1
001795 9654     +ADIW R26 , 20
001796 93ec     +ST X , R30
                 	__PUTB1SNS 4,20
001797 940e 3f46 	CALL __GETD1S0
001799 940e 3e49 	CALL __LSRD16
00179b 2766      	CLR  R22
00179c 2777      	CLR  R23
00179d 2fef      	MOV  R30,R31
00179e e0f0      	LDI  R31,0
                +
00179f 81ac     +LDD R26 , Y + 4
0017a0 81bd     +LDD R27 , Y + 4 + 1
0017a1 9655     +ADIW R26 , 21
0017a2 93ec     +ST X , R30
                 	__PUTB1SNS 4,21
                 ;}
0017a3 c3e7      	RJMP _0x20C0016
                 ; .FEND
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LFN
                 ;static
                 ;const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the directory entry */
                 ;
                 ;
                 ;static
                 ;int cmp_lfn (			/* 1:Matched, 0:Not matched */
                 ;	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
                 ;	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
                 ;)
                 ;{
                 ;	UINT i, s;
                 ;	WCHAR wc, uc;
                 ;
                 ;
                 ;	i = ((dir[LDIR_Ord] & ~LLE) - 1) * 13;	/* Get offset in the LFN buffer */
                 ;	s = 0; wc = 1;
                 ;	do {
                 ;		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
                 ;		if (wc) {	/* Last character has not been processed */
                 ;			wc = ff_wtoupper(uc);		/* Convert it to upper case */
                 ;			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
                 ;				return 0;				/* Not matched */
                 ;		} else {
                 ;			if (uc != 0xFFFF) return 0;	/* Check filler */
                 ;		}
                 ;	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
                 ;
                 ;	if ((dir[LDIR_Ord] & LLE) && wc && lfnbuf[i])	/* Last segment matched but different length */
                 ;		return 0;
                 ;
                 ;	return 1;						/* The part of LFN matched */
                 ;}
                 ;
                 ;
                 ;
                 ;static
                 ;int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
                 ;	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
                 ;	BYTE* dir			/* Pointer to the directory entry */
                 ;)
                 ;{
                 ;	UINT i, s;
                 ;	WCHAR wc, uc;
                 ;
                 ;
                 ;	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
                 ;
                 ;	s = 0; wc = 1;
                 ;	do {
                 ;		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
                 ;		if (wc) {	/* Last character has not been processed */
                 ;			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
                 ;			lfnbuf[i++] = wc = uc;			/* Store it */
                 ;		} else {
                 ;			if (uc != 0xFFFF) return 0;		/* Check filler */
                 ;		}
                 ;	} while (++s < 13);						/* Read all character in the entry */
                 ;
                 ;	if (dir[LDIR_Ord] & LLE) {				/* Put terminator if it is the last LFN part */
                 ;		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
                 ;		lfnbuf[i] = 0;
                 ;	}
                 ;
                 ;	return 1;
                 ;}
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;static
                 ;void fit_lfn (
                 ;	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
                 ;	BYTE* dir,				/* Pointer to the directory entry */
                 ;	BYTE ord,				/* LFN order (1-20) */
                 ;	BYTE sum				/* SFN sum */
                 ;)
                 ;{
                 ;	UINT i, s;
                 ;	WCHAR wc;
                 ;
                 ;
                 ;	dir[LDIR_Chksum] = sum;			/* Set check sum */
                 ;	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
                 ;	dir[LDIR_Type] = 0;
                 ;	ST_WORD(dir+LDIR_FstClusLO, 0);
                 ;
                 ;	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
                 ;	s = wc = 0;
                 ;	do {
                 ;		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
                 ;		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
                 ;		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
                 ;	} while (++s < 13);
                 ;	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
                 ;	dir[LDIR_Ord] = ord;			/* Set the LFN order */
                 ;}
                 ;
                 ;#endif
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create numbered name                                                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LFN
                 ;void gen_numname (
                 ;	BYTE* dst,			/* Pointer to generated SFN */
                 ;	const BYTE* src,	/* Pointer to source SFN to be modified */
                 ;	const WCHAR* lfn,	/* Pointer to LFN */
                 ;	WORD seq			/* Sequence number */
                 ;)
                 ;{
                 ;	BYTE ns[8], c;
                 ;	UINT i, j;
                 ;
                 ;
                 ;	mem_cpy(dst, src, 11);
                 ;
                 ;	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
                 ;		do seq = (seq >> 1) + (seq << 15) + (WORD)*lfn++; while (*lfn);
                 ;	}
                 ;
                 ;	/* itoa (hexdecimal) */
                 ;	i = 7;
                 ;	do {
                 ;		c = (seq % 16) + '0';
                 ;		if (c > '9') c += 7;
                 ;		ns[i--] = c;
                 ;		seq /= 16;
                 ;	} while (seq);
                 ;	ns[i] = '~';
                 ;
                 ;	/* Append the number */
                 ;	for (j = 0; j < i && dst[j] != ' '; j++) {
                 ;		if (IsDBCS1(dst[j])) {
                 ;			if (j == i - 1) break;
                 ;			j++;
                 ;		}
                 ;	}
                 ;	do {
                 ;		dst[j++] = (i < 8) ? ns[i++] : ' ';
                 ;	} while (j < 8);
                 ;}
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Calculate sum of an SFN                                               */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LFN
                 ;static
                 ;BYTE sum_sfn (
                 ;	const BYTE* dir		/* Pointer to the SFN entry */
                 ;)
                 ;{
                 ;	BYTE sum = 0;
                 ;	UINT n = 11;
                 ;
                 ;	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
                 ;	return sum;
                 ;}
                 ;#endif
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Find an object in the directory                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_find (
                 ;	DIR* dp			/* Pointer to the directory object linked to the file name */
                 ;)
                 ;{
                 _dir_find_G000:
                 ; .FSTART _dir_find_G000
                 ;	FRESULT res;
                 ;	BYTE c, *dir;
                 ;#if _USE_LFN
                 ;	BYTE a, ord, sum;
                 ;#endif
                 ;
                 ;	res = dir_sdi(dp, 0);			/* Rewind directory object */
0017a4 93ba      	ST   -Y,R27
0017a5 93aa      	ST   -Y,R26
0017a6 940e 3f8b 	CALL __SAVELOCR4
                 ;	*dp -> Y+4
                 ;	res -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
0017a8 81ec      	LDD  R30,Y+4
0017a9 81fd      	LDD  R31,Y+4+1
0017aa 93fa      	ST   -Y,R31
0017ab 93ea      	ST   -Y,R30
0017ac e0a0      	LDI  R26,LOW(0)
0017ad e0b0      	LDI  R27,0
0017ae dcda      	RCALL _dir_sdi_G000
0017af 2f1e      	MOV  R17,R30
                 ;	if (res != FR_OK) return res;
0017b0 3010      	CPI  R17,0
0017b1 f019      	BREQ _0x236
0017b2 940e 3f92 	CALL __LOADLOCR4
0017b4 c3d6      	RJMP _0x20C0016
                 ;
                 ;#if _USE_LFN
                 ;	ord = sum = 0xFF;
                 ;#endif
                 ;	do {
                 _0x236:
                 _0x238:
                 ;		res = move_window(dp->fs, dp->sect);
0017b5 81ac      	LDD  R26,Y+4
0017b6 81bd      	LDD  R27,Y+4+1
0017b7 940e 3f2d 	CALL __GETW1P
0017b9 93fa      	ST   -Y,R31
0017ba 93ea      	ST   -Y,R30
0017bb 81ee      	LDD  R30,Y+6
0017bc 81ff      	LDD  R31,Y+6+1
                +
0017bd 85a6     +LDD R26 , Z + 14
0017be 85b7     +LDD R27 , Z + 14 + 1
0017bf 8980     +LDD R24 , Z + 14 + 2
0017c0 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
0017c1 940e 0e73 	CALL _move_window_G000
0017c3 2f1e      	MOV  R17,R30
                 ;		if (res != FR_OK) break;
0017c4 3010      	CPI  R17,0
0017c5 f549      	BRNE _0x239
                 ;		dir = dp->dir;					/* Ptr to the directory entry of current index */
0017c6 81ac      	LDD  R26,Y+4
0017c7 81bd      	LDD  R27,Y+4+1
0017c8 9652      	ADIW R26,18
0017c9 912d      	LD   R18,X+
0017ca 913c      	LD   R19,X
                 ;		c = dir[DIR_Name];
0017cb 01d9      	MOVW R26,R18
0017cc 910c      	LD   R16,X
                 ;		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
0017cd 3000      	CPI  R16,0
0017ce f411      	BRNE _0x23B
0017cf e014      	LDI  R17,LOW(4)
0017d0 c01e      	RJMP _0x239
                 ;#if _USE_LFN	/* LFN configuration */
                 ;		a = dir[DIR_Attr] & AM_MASK;
                 ;		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
                 ;			ord = 0xFF;
                 ;		} else {
                 ;			if (a == AM_LFN) {			/* An LFN entry is found */
                 ;				if (dp->lfn) {
                 ;					if (c & LLE) {		/* Is it start of LFN sequence? */
                 ;						sum = dir[LDIR_Chksum];
                 ;						c &= ~LLE; ord = c;	/* LFN start order */
                 ;						dp->lfn_idx = dp->index;
                 ;					}
                 ;					/* Check validity of the LFN entry and compare it with given name */
                 ;					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
                 ;				}
                 ;			} else {					/* An SFN entry is found */
                 ;				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
                 ;				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
                 ;				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
                 ;			}
                 ;		}
                 ;#else		/* Non LFN configuration */
                 ;		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
                 _0x23B:
0017d1 01f9      	MOVW R30,R18
0017d2 85e3      	LDD  R30,Z+11
0017d3 70e8      	ANDI R30,LOW(0x8)
0017d4 f471      	BRNE _0x23D
0017d5 933a      	ST   -Y,R19
0017d6 932a      	ST   -Y,R18
0017d7 81ee      	LDD  R30,Y+6
0017d8 81ff      	LDD  R31,Y+6+1
0017d9 89a4      	LDD  R26,Z+20
0017da 89b5      	LDD  R27,Z+21
0017db 93ba      	ST   -Y,R27
0017dc 93aa      	ST   -Y,R26
0017dd e0ab      	LDI  R26,LOW(11)
0017de e0b0      	LDI  R27,0
0017df 940e 0db6 	CALL _mem_cmp_G000
0017e1 9730      	SBIW R30,0
0017e2 f009      	BREQ _0x23E
                 _0x23D:
0017e3 c001      	RJMP _0x23C
                 _0x23E:
                 ;			break;
0017e4 c00a      	RJMP _0x239
                 ;#endif
                 ;		res = dir_next(dp, 0);		/* Next entry */
                 _0x23C:
0017e5 81ec      	LDD  R30,Y+4
0017e6 81fd      	LDD  R31,Y+4+1
0017e7 93fa      	ST   -Y,R31
0017e8 93ea      	ST   -Y,R30
0017e9 e0a0      	LDI  R26,LOW(0)
0017ea e0b0      	LDI  R27,0
0017eb dda0      	RCALL _dir_next_G000
0017ec 2f1e      	MOV  R17,R30
                 ;	} while (res == FR_OK);
0017ed 3010      	CPI  R17,0
0017ee f231      	BREQ _0x238
                 _0x239:
                 ;
                 ;	return res;
0017ef 2fe1      	MOV  R30,R17
0017f0 940e 3f92 	CALL __LOADLOCR4
0017f2 c398      	RJMP _0x20C0016
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read an object from the directory                                     */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
                 ;static
                 ;FRESULT dir_read (
                 ;	DIR* dp,		/* Pointer to the directory object */
                 ;	int vol			/* Filtered by 0:file/directory or 1:volume label */
                 ;)
                 ;{
                 _dir_read_G000:
                 ; .FSTART _dir_read_G000
                 ;	FRESULT res;
                 ;	BYTE a, c, *dir;
                 ;#if _USE_LFN
                 ;	BYTE ord = 0xFF, sum = 0xFF;
                 ;#endif
                 ;
                 ;	res = FR_NO_FILE;
0017f3 93ba      	ST   -Y,R27
0017f4 93aa      	ST   -Y,R26
0017f5 940e 3f89 	CALL __SAVELOCR6
                 ;	*dp -> Y+8
                 ;	vol -> Y+6
                 ;	res -> R17
                 ;	a -> R16
                 ;	c -> R19
                 ;	*dir -> R20,R21
0017f7 e014      	LDI  R17,LOW(4)
                 ;	while (dp->sect) {
                 _0x23F:
0017f8 85a8      	LDD  R26,Y+8
0017f9 85b9      	LDD  R27,Y+8+1
0017fa 961e      	ADIW R26,14
0017fb 940e 3f31 	CALL __GETD1P
0017fd 940e 3f71 	CALL __CPD10
0017ff f409      	BRNE PC+2
001800 c041      	RJMP _0x241
                 ;		res = move_window(dp->fs, dp->sect);
001801 85a8      	LDD  R26,Y+8
001802 85b9      	LDD  R27,Y+8+1
001803 940e 3f2d 	CALL __GETW1P
001805 93fa      	ST   -Y,R31
001806 93ea      	ST   -Y,R30
001807 85ea      	LDD  R30,Y+10
001808 85fb      	LDD  R31,Y+10+1
                +
001809 85a6     +LDD R26 , Z + 14
00180a 85b7     +LDD R27 , Z + 14 + 1
00180b 8980     +LDD R24 , Z + 14 + 2
00180c 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
00180d 940e 0e73 	CALL _move_window_G000
00180f 2f1e      	MOV  R17,R30
                 ;		if (res != FR_OK) break;
001810 3010      	CPI  R17,0
001811 f581      	BRNE _0x241
                 ;		dir = dp->dir;					/* Ptr to the directory entry of current index */
001812 85a8      	LDD  R26,Y+8
001813 85b9      	LDD  R27,Y+8+1
001814 9652      	ADIW R26,18
001815 914d      	LD   R20,X+
001816 915c      	LD   R21,X
                 ;		c = dir[DIR_Name];
001817 01da      	MOVW R26,R20
001818 913c      	LD   R19,X
                 ;		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
001819 3030      	CPI  R19,0
00181a f411      	BRNE _0x243
00181b e014      	LDI  R17,LOW(4)
00181c c025      	RJMP _0x241
                 ;		a = dir[DIR_Attr] & AM_MASK;
                 _0x243:
00181d 01fa      	MOVW R30,R20
00181e 85e3      	LDD  R30,Z+11
00181f 73ef      	ANDI R30,LOW(0x3F)
001820 2f0e      	MOV  R16,R30
                 ;#if _USE_LFN	/* LFN configuration */
                 ;		if (c == DDE || (!_FS_RPATH && c == '.') || (int)(a == AM_VOL) != vol) {	/* An entry without valid data */
                 ;			ord = 0xFF;
                 ;		} else {
                 ;			if (a == AM_LFN) {			/* An LFN entry is found */
                 ;				if (c & LLE) {			/* Is it start of LFN sequence? */
                 ;					sum = dir[LDIR_Chksum];
                 ;					c &= ~LLE; ord = c;
                 ;					dp->lfn_idx = dp->index;
                 ;				}
                 ;				/* Check LFN validity and capture it */
                 ;				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
                 ;			} else {					/* An SFN entry is found */
                 ;				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
                 ;					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
                 ;				break;
                 ;			}
                 ;		}
                 ;#else		/* Non LFN configuration */
                 ;		if (c != DDE && (_FS_RPATH || c != '.') && a != AM_LFN && (int)(a == AM_VOL) == vol)	/* Is it a valid entry? */
001821 3e35      	CPI  R19,229
001822 f091      	BREQ _0x245
001823 e0e0      	LDI  R30,LOW(0)
001824 30e0      	CPI  R30,0
001825 f411      	BRNE _0x246
001826 323e      	CPI  R19,46
001827 f069      	BREQ _0x245
                 _0x246:
001828 300f      	CPI  R16,15
001829 f059      	BREQ _0x245
00182a 2fa0      	MOV  R26,R16
00182b e0e8      	LDI  R30,LOW(8)
00182c 940e 3e63 	CALL __EQB12
00182e e0f0      	LDI  R31,0
00182f 01df      	MOVW R26,R30
001830 81ee      	LDD  R30,Y+6
001831 81ff      	LDD  R31,Y+6+1
001832 17ea      	CP   R30,R26
001833 07fb      	CPC  R31,R27
001834 f009      	BREQ _0x248
                 _0x245:
001835 c001      	RJMP _0x244
                 _0x248:
                 ;			break;
001836 c00b      	RJMP _0x241
                 ;#endif
                 ;		res = dir_next(dp, 0);				/* Next entry */
                 _0x244:
001837 85e8      	LDD  R30,Y+8
001838 85f9      	LDD  R31,Y+8+1
001839 93fa      	ST   -Y,R31
00183a 93ea      	ST   -Y,R30
00183b e0a0      	LDI  R26,LOW(0)
00183c e0b0      	LDI  R27,0
00183d dd4e      	RCALL _dir_next_G000
00183e 2f1e      	MOV  R17,R30
                 ;		if (res != FR_OK) break;
00183f 3010      	CPI  R17,0
001840 f409      	BRNE _0x241
                 ;	}
001841 cfb6      	RJMP _0x23F
                 _0x241:
                 ;
                 ;	if (res != FR_OK) dp->sect = 0;
001842 3010      	CPI  R17,0
001843 f049      	BREQ _0x24A
001844 85a8      	LDD  R26,Y+8
001845 85b9      	LDD  R27,Y+8+1
001846 961e      	ADIW R26,14
                +
001847 e0e0     +LDI R30 , LOW ( 0x0 )
001848 e0f0     +LDI R31 , HIGH ( 0x0 )
001849 e060     +LDI R22 , BYTE3 ( 0x0 )
00184a e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
00184b 940e 3f3c 	CALL __PUTDP1
                 ;
                 ;	return res;
                 _0x24A:
00184d 2fe1      	MOV  R30,R17
00184e c1cd      	RJMP _0x20C0019
                 ;}
                 ; .FEND
                 ;#endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Register an object to the directory                                   */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY
                 ;static
                 ;FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_DISK_ERR:Disk error */
                 ;	DIR* dp				/* Target directory with object name to be created */
                 ;)
                 ;{
                 _dir_register_G000:
                 ; .FSTART _dir_register_G000
                 ;	FRESULT res;
                 ;#if _USE_LFN	/* LFN configuration */
                 ;	WORD n, ne;
                 ;	BYTE sn[12], *fn, sum;
                 ;	WCHAR *lfn;
                 ;
                 ;
                 ;	fn = dp->fn; lfn = dp->lfn;
                 ;	mem_cpy(sn, fn, 12);
                 ;
                 ;	if (_FS_RPATH && (sn[NS] & NS_DOT))		/* Cannot create dot entry */
                 ;		return FR_INVALID_NAME;
                 ;
                 ;	if (sn[NS] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
                 ;		fn[NS] = 0; dp->lfn = 0;			/* Find only SFN */
                 ;		for (n = 1; n < 100; n++) {
                 ;			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
                 ;			res = dir_find(dp);				/* Check if the name collides with existing SFN */
                 ;			if (res != FR_OK) break;
                 ;		}
                 ;		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
                 ;		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
                 ;		fn[NS] = sn[NS]; dp->lfn = lfn;
                 ;	}
                 ;
                 ;	if (sn[NS] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
                 ;		for (n = 0; lfn[n]; n++) ;
                 ;		ne = (n + 25) / 13;
                 ;	} else {						/* Otherwise allocate an entry for an SFN  */
                 ;		ne = 1;
                 ;	}
                 ;	res = dir_alloc(dp, ne);		/* Allocate entries */
                 ;
                 ;	if (res == FR_OK && --ne) {		/* Set LFN entry if needed */
                 ;		res = dir_sdi(dp, (WORD)(dp->index - ne));
                 ;		if (res == FR_OK) {
                 ;			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
                 ;			do {					/* Store LFN entries in bottom first */
                 ;				res = move_window(dp->fs, dp->sect);
                 ;				if (res != FR_OK) break;
                 ;				fit_lfn(dp->lfn, dp->dir, (BYTE)ne, sum);
                 ;				dp->fs->wflag = 1;
                 ;				res = dir_next(dp, 0);	/* Next entry */
                 ;			} while (res == FR_OK && --ne);
                 ;		}
                 ;	}
                 ;#else	/* Non LFN configuration */
                 ;	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
00184f 93ba      	ST   -Y,R27
001850 93aa      	ST   -Y,R26
001851 931a      	ST   -Y,R17
                 ;	*dp -> Y+1
                 ;	res -> R17
001852 81e9      	LDD  R30,Y+1
001853 81fa      	LDD  R31,Y+1+1
001854 93fa      	ST   -Y,R31
001855 93ea      	ST   -Y,R30
001856 e0a1      	LDI  R26,LOW(1)
001857 e0b0      	LDI  R27,0
001858 deba      	RCALL _dir_alloc_G000
001859 2f1e      	MOV  R17,R30
                 ;#endif
                 ;
                 ;	if (res == FR_OK) {				/* Set SFN entry */
00185a 3010      	CPI  R17,0
00185b f5b1      	BRNE _0x24B
                 ;		res = move_window(dp->fs, dp->sect);
00185c 81a9      	LDD  R26,Y+1
00185d 81ba      	LDD  R27,Y+1+1
00185e 940e 3f2d 	CALL __GETW1P
001860 93fa      	ST   -Y,R31
001861 93ea      	ST   -Y,R30
001862 81eb      	LDD  R30,Y+3
001863 81fc      	LDD  R31,Y+3+1
                +
001864 85a6     +LDD R26 , Z + 14
001865 85b7     +LDD R27 , Z + 14 + 1
001866 8980     +LDD R24 , Z + 14 + 2
001867 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
001868 940e 0e73 	CALL _move_window_G000
00186a 2f1e      	MOV  R17,R30
                 ;		if (res == FR_OK) {
00186b 3010      	CPI  R17,0
00186c f529      	BRNE _0x24C
                 ;			mem_set(dp->dir, 0, SZ_DIR);	/* Clean the entry */
00186d 81e9      	LDD  R30,Y+1
00186e 81fa      	LDD  R31,Y+1+1
00186f 89a2      	LDD  R26,Z+18
001870 89b3      	LDD  R27,Z+19
001871 93ba      	ST   -Y,R27
001872 93aa      	ST   -Y,R26
001873 e0e0      	LDI  R30,LOW(0)
001874 e0f0      	LDI  R31,HIGH(0)
001875 93fa      	ST   -Y,R31
001876 93ea      	ST   -Y,R30
001877 e2a0      	LDI  R26,LOW(32)
001878 e0b0      	LDI  R27,0
001879 940e 0d9f 	CALL _mem_set_G000
                 ;			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
00187b 81e9      	LDD  R30,Y+1
00187c 81fa      	LDD  R31,Y+1+1
00187d 89a2      	LDD  R26,Z+18
00187e 89b3      	LDD  R27,Z+19
00187f 93ba      	ST   -Y,R27
001880 93aa      	ST   -Y,R26
001881 81eb      	LDD  R30,Y+3
001882 81fc      	LDD  R31,Y+3+1
001883 89a4      	LDD  R26,Z+20
001884 89b5      	LDD  R27,Z+21
001885 93ba      	ST   -Y,R27
001886 93aa      	ST   -Y,R26
001887 e0ab      	LDI  R26,LOW(11)
001888 e0b0      	LDI  R27,0
001889 940e 0d80 	CALL _mem_cpy_G000
                 ;#if _USE_LFN
                 ;			dp->dir[DIR_NTres] = dp->fn[NS] & (NS_BODY | NS_EXT);	/* Put NT flag */
                 ;#endif
                 ;			dp->fs->wflag = 1;
00188b 81a9      	LDD  R26,Y+1
00188c 81ba      	LDD  R27,Y+1+1
00188d 940e 3f2d 	CALL __GETW1P
00188f 9634      	ADIW R30,4
001890 e0a1      	LDI  R26,LOW(1)
001891 83a0      	STD  Z+0,R26
                 ;		}
                 ;	}
                 _0x24C:
                 ;
                 ;	return res;
                 _0x24B:
001892 c02d      	RJMP _0x20C001C
                 ;}
                 ; .FEND
                 ;#endif /* !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Remove an object from the directory                                   */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if !_FS_READONLY && !_FS_MINIMIZE
                 ;static
                 ;FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
                 ;	DIR* dp				/* Directory object pointing the entry to be removed */
                 ;)
                 ;{
                 _dir_remove_G000:
                 ; .FSTART _dir_remove_G000
                 ;	FRESULT res;
                 ;#if _USE_LFN	/* LFN configuration */
                 ;	WORD i;
                 ;
                 ;	i = dp->index;	/* SFN index */
                 ;	res = dir_sdi(dp, (WORD)((dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx));	/* Goto the SFN or top of the LFN entries */
                 ;	if (res == FR_OK) {
                 ;		do {
                 ;			res = move_window(dp->fs, dp->sect);
                 ;			if (res != FR_OK) break;
                 ;			*dp->dir = DDE;			/* Mark the entry "deleted" */
                 ;			dp->fs->wflag = 1;
                 ;			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
                 ;			res = dir_next(dp, 0);		/* Next entry */
                 ;		} while (res == FR_OK);
                 ;		if (res == FR_NO_FILE) res = FR_INT_ERR;
                 ;	}
                 ;
                 ;#else			/* Non LFN configuration */
                 ;	res = dir_sdi(dp, dp->index);
001893 93ba      	ST   -Y,R27
001894 93aa      	ST   -Y,R26
001895 931a      	ST   -Y,R17
                 ;	*dp -> Y+1
                 ;	res -> R17
001896 81e9      	LDD  R30,Y+1
001897 81fa      	LDD  R31,Y+1+1
001898 93fa      	ST   -Y,R31
001899 93ea      	ST   -Y,R30
00189a 81eb      	LDD  R30,Y+3
00189b 81fc      	LDD  R31,Y+3+1
00189c 81a4      	LDD  R26,Z+4
00189d 81b5      	LDD  R27,Z+5
00189e dbea      	RCALL _dir_sdi_G000
00189f 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
0018a0 3010      	CPI  R17,0
0018a1 f4f1      	BRNE _0x24D
                 ;		res = move_window(dp->fs, dp->sect);
0018a2 81a9      	LDD  R26,Y+1
0018a3 81ba      	LDD  R27,Y+1+1
0018a4 940e 3f2d 	CALL __GETW1P
0018a6 93fa      	ST   -Y,R31
0018a7 93ea      	ST   -Y,R30
0018a8 81eb      	LDD  R30,Y+3
0018a9 81fc      	LDD  R31,Y+3+1
                +
0018aa 85a6     +LDD R26 , Z + 14
0018ab 85b7     +LDD R27 , Z + 14 + 1
0018ac 8980     +LDD R24 , Z + 14 + 2
0018ad 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
0018ae 940e 0e73 	CALL _move_window_G000
0018b0 2f1e      	MOV  R17,R30
                 ;		if (res == FR_OK) {
0018b1 3010      	CPI  R17,0
0018b2 f469      	BRNE _0x24E
                 ;			*dp->dir = DDE;			/* Mark the entry "deleted" */
0018b3 81e9      	LDD  R30,Y+1
0018b4 81fa      	LDD  R31,Y+1+1
0018b5 89a2      	LDD  R26,Z+18
0018b6 89b3      	LDD  R27,Z+19
0018b7 eee5      	LDI  R30,LOW(229)
0018b8 93ec      	ST   X,R30
                 ;			dp->fs->wflag = 1;
0018b9 81a9      	LDD  R26,Y+1
0018ba 81ba      	LDD  R27,Y+1+1
0018bb 940e 3f2d 	CALL __GETW1P
0018bd 9634      	ADIW R30,4
0018be e0a1      	LDI  R26,LOW(1)
0018bf 83a0      	STD  Z+0,R26
                 ;		}
                 ;	}
                 _0x24E:
                 ;#endif
                 ;
                 ;	return res;
                 _0x24D:
                 _0x20C001C:
0018c0 2fe1      	MOV  R30,R17
0018c1 8118      	LDD  R17,Y+0
0018c2 9623      	ADIW R28,3
0018c3 9508      	RET
                 ;}
                 ; .FEND
                 ;#endif /* !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Pick a segment and create the object name in directory form           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT create_name (
                 ;	DIR* dp,			/* Pointer to the directory object */
                 ;	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
                 ;)
                 ;{
                 _create_name_G000:
                 ; .FSTART _create_name_G000
                 ;#if _USE_LFN	/* LFN configuration */
                 ;	BYTE b, cf;
                 ;	WCHAR w, *lfn;
                 ;	UINT i, ni, si, di;
                 ;	const TCHAR *p;
                 ;
                 ;	/* Create LFN in Unicode */
                 ;	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
                 ;	lfn = dp->lfn;
                 ;	si = di = 0;
                 ;	for (;;) {
                 ;		w = p[si++];					/* Get a character */
                 ;		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
                 ;		if (di >= _MAX_LFN)				/* Reject too long name */
                 ;			return FR_INVALID_NAME;
                 ;#if !_LFN_UNICODE
                 ;		w &= 0xFF;
                 ;		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
                 ;			b = (BYTE)p[si++];			/* Get 2nd byte */
                 ;			if (!IsDBCS2(b))
                 ;				return FR_INVALID_NAME;	/* Reject invalid sequence */
                 ;			w = (w << 8) + b;			/* Create a DBC */
                 ;		}
                 ;		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
                 ;		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
                 ;#endif
                 ;		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
                 ;			return FR_INVALID_NAME;
                 ;		lfn[di++] = w;					/* Store the Unicode character */
                 ;	}
                 ;	*path = &p[si];						/* Return pointer to the next segment */
                 ;	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
                 ;#if _FS_RPATH
                 ;	if ((di == 1 && lfn[di-1] == '.') || /* Is this a dot entry? */
                 ;		(di == 2 && lfn[di-1] == '.' && lfn[di-2] == '.')) {
                 ;		lfn[di] = 0;
                 ;		for (i = 0; i < 11; i++)
                 ;			dp->fn[i] = (i < di) ? '.' : ' ';
                 ;		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
                 ;		return FR_OK;
                 ;	}
                 ;#endif
                 ;	while (di) {						/* Strip trailing spaces and dots */
                 ;		w = lfn[di-1];
                 ;		if (w != ' ' && w != '.') break;
                 ;		di--;
                 ;	}
                 ;	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
                 ;
                 ;	lfn[di] = 0;						/* LFN is created */
                 ;
                 ;	/* Create SFN in directory form */
                 ;	mem_set(dp->fn, ' ', 11);
                 ;	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
                 ;	if (si) cf |= NS_LOSS | NS_LFN;
                 ;	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
                 ;
                 ;	b = i = 0; ni = 8;
                 ;	for (;;) {
                 ;		w = lfn[si++];					/* Get an LFN character */
                 ;		if (!w) break;					/* Break on end of the LFN */
                 ;		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
                 ;			cf |= NS_LOSS | NS_LFN; continue;
                 ;		}
                 ;
                 ;		if (i >= ni || si == di) {		/* Extension or end of SFN */
                 ;			if (ni == 11) {				/* Long extension */
                 ;				cf |= NS_LOSS | NS_LFN; break;
                 ;			}
                 ;			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
                 ;			if (si > di) break;			/* No extension */
                 ;			si = di; i = 8; ni = 11;	/* Enter extension section */
                 ;			b <<= 2; continue;
                 ;		}
                 ;
                 ;		if (w >= 0x80) {				/* Non ASCII character */
                 ;#ifdef _EXCVT
                 ;			w = ff_convert(w, 0);		/* Unicode -> OEM code */
                 ;			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
                 ;#else
                 ;			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
                 ;#endif
                 ;			cf |= NS_LFN;				/* Force create LFN entry */
                 ;		}
                 ;
                 ;		if (_DF1S && w >= 0x100) {		/* Double byte character (always false on SBCS cfg) */
                 ;			if (i >= ni - 1) {
                 ;				cf |= NS_LOSS | NS_LFN; i = ni; continue;
                 ;			}
                 ;			dp->fn[i++] = (BYTE)(w >> 8);
                 ;		} else {						/* Single byte character */
                 ;			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
                 ;				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
                 ;			} else {
                 ;				if (IsUpper(w)) {		/* ASCII large capital */
                 ;					b |= 2;
                 ;				} else {
                 ;					if (IsLower(w)) {	/* ASCII small capital */
                 ;						b |= 1; w -= 0x20;
                 ;					}
                 ;				}
                 ;			}
                 ;		}
                 ;		dp->fn[i++] = (BYTE)w;
                 ;	}
                 ;
                 ;	if (dp->fn[0] == DDE) dp->fn[0] = NDDE;	/* If the first character collides with deleted mark, replace it with 0x05 */
                 ;
                 ;	if (ni == 8) b <<= 2;
                 ;	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capitals */
                 ;		cf |= NS_LFN;
                 ;	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are created */
                 ;		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
                 ;		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
                 ;	}
                 ;
                 ;	dp->fn[NS] = cf;	/* SFN is created */
                 ;
                 ;	return FR_OK;
                 ;
                 ;
                 ;#else	/* Non-LFN configuration */
                 ;	BYTE b, c, d, *sfn;
                 ;	UINT ni, si, i;
                 ;	const char *p;
                 ;
                 ;	/* Create file name in directory form */
                 ;	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
0018c4 93ba      	ST   -Y,R27
0018c5 93aa      	ST   -Y,R26
0018c6 9728      	SBIW R28,8
0018c7 940e 3f89 	CALL __SAVELOCR6
                 ;	*dp -> Y+16
                 ;	*path -> Y+14
                 ;	b -> R17
                 ;	c -> R16
                 ;	d -> R19
                 ;	*sfn -> R20,R21
                 ;	ni -> Y+12
                 ;	si -> Y+10
                 ;	i -> Y+8
                 ;	*p -> Y+6
0018c9 85ae      	LDD  R26,Y+14
0018ca 85bf      	LDD  R27,Y+14+1
0018cb 940e 3f2d 	CALL __GETW1P
0018cd 83ee      	STD  Y+6,R30
0018ce 83ff      	STD  Y+6+1,R31
                 _0x250:
0018cf 81ae      	LDD  R26,Y+6
0018d0 81bf      	LDD  R27,Y+6+1
0018d1 91ac      	LD   R26,X
0018d2 32af      	CPI  R26,LOW(0x2F)
0018d3 f029      	BREQ _0x252
0018d4 81ae      	LDD  R26,Y+6
0018d5 81bf      	LDD  R27,Y+6+1
0018d6 91ac      	LD   R26,X
0018d7 35ac      	CPI  R26,LOW(0x5C)
0018d8 f431      	BRNE _0x251
                 _0x252:
0018d9 81ee      	LDD  R30,Y+6
0018da 81ff      	LDD  R31,Y+6+1
0018db 9631      	ADIW R30,1
0018dc 83ee      	STD  Y+6,R30
0018dd 83ff      	STD  Y+6+1,R31
0018de cff0      	RJMP _0x250
                 _0x251:
                 ;	sfn = dp->fn;
0018df 89a8      	LDD  R26,Y+16
0018e0 89b9      	LDD  R27,Y+16+1
0018e1 9654      	ADIW R26,20
0018e2 914d      	LD   R20,X+
0018e3 915c      	LD   R21,X
                 ;	mem_set(sfn, ' ', 11);
0018e4 935a      	ST   -Y,R21
0018e5 934a      	ST   -Y,R20
0018e6 e2e0      	LDI  R30,LOW(32)
0018e7 e0f0      	LDI  R31,HIGH(32)
0018e8 93fa      	ST   -Y,R31
0018e9 93ea      	ST   -Y,R30
0018ea e0ab      	LDI  R26,LOW(11)
0018eb e0b0      	LDI  R27,0
0018ec 940e 0d9f 	CALL _mem_set_G000
                 ;	si = i = b = 0; ni = 8;
0018ee e0e0      	LDI  R30,LOW(0)
0018ef 2f1e      	MOV  R17,R30
0018f0 e0f0      	LDI  R31,0
0018f1 87e8      	STD  Y+8,R30
0018f2 87f9      	STD  Y+8+1,R31
0018f3 87ea      	STD  Y+10,R30
0018f4 87fb      	STD  Y+10+1,R31
0018f5 e0e8      	LDI  R30,LOW(8)
0018f6 e0f0      	LDI  R31,HIGH(8)
0018f7 87ec      	STD  Y+12,R30
0018f8 87fd      	STD  Y+12+1,R31
                 ;#if _FS_RPATH
                 ;	if (p[si] == '.') { /* Is this a dot entry? */
                 ;		for (;;) {
                 ;			c = (BYTE)p[si++];
                 ;			if (c != '.' || si >= 3) break;
                 ;			sfn[i++] = c;
                 ;		}
                 ;		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
                 ;		*path = &p[si];									/* Return pointer to the next segment */
                 ;		sfn[NS] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
                 ;		return FR_OK;
                 ;	}
                 ;#endif
                 ;	for (;;) {
                 _0x255:
                 ;		c = (BYTE)p[si++];
0018f9 85ea      	LDD  R30,Y+10
0018fa 85fb      	LDD  R31,Y+10+1
0018fb 9631      	ADIW R30,1
0018fc 87ea      	STD  Y+10,R30
0018fd 87fb      	STD  Y+10+1,R31
0018fe 9731      	SBIW R30,1
0018ff 81ae      	LDD  R26,Y+6
001900 81bf      	LDD  R27,Y+6+1
001901 0fae      	ADD  R26,R30
001902 1fbf      	ADC  R27,R31
001903 910c      	LD   R16,X
                 ;		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
001904 3201      	CPI  R16,33
001905 f020      	BRLO _0x258
001906 320f      	CPI  R16,47
001907 f011      	BREQ _0x258
001908 350c      	CPI  R16,92
001909 f409      	BRNE _0x257
                 _0x258:
00190a c04a      	RJMP _0x256
                 ;		if (c == '.' || i >= ni) {
                 _0x257:
00190b 320e      	CPI  R16,46
00190c f039      	BREQ _0x25B
00190d 85ec      	LDD  R30,Y+12
00190e 85fd      	LDD  R31,Y+12+1
00190f 85a8      	LDD  R26,Y+8
001910 85b9      	LDD  R27,Y+8+1
001911 17ae      	CP   R26,R30
001912 07bf      	CPC  R27,R31
001913 f098      	BRLO _0x25A
                 _0x25B:
                 ;			if (ni != 8 || c != '.') return FR_INVALID_NAME;
001914 85ac      	LDD  R26,Y+12
001915 85bd      	LDD  R27,Y+12+1
001916 9718      	SBIW R26,8
001917 f411      	BRNE _0x25E
001918 320e      	CPI  R16,46
001919 f011      	BREQ _0x25D
                 _0x25E:
00191a e0e6      	LDI  R30,LOW(6)
00191b c069      	RJMP _0x20C001B
                 ;			i = 8; ni = 11;
                 _0x25D:
00191c e0e8      	LDI  R30,LOW(8)
00191d e0f0      	LDI  R31,HIGH(8)
00191e 87e8      	STD  Y+8,R30
00191f 87f9      	STD  Y+8+1,R31
001920 e0eb      	LDI  R30,LOW(11)
001921 e0f0      	LDI  R31,HIGH(11)
001922 87ec      	STD  Y+12,R30
001923 87fd      	STD  Y+12+1,R31
                 ;			b <<= 2; continue;
001924 0f11      	LSL  R17
001925 0f11      	LSL  R17
001926 c02d      	RJMP _0x254
                 ;		}
                 ;		if (c >= 0x80) {				/* Extended character? */
                 _0x25A:
001927 3800      	CPI  R16,128
001928 f040      	BRLO _0x260
                 ;			b |= 3;						/* Eliminate NT flag */
001929 6013      	ORI  R17,LOW(3)
                 ;#ifdef _EXCVT
                 ;			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
00192a 2fe0      	MOV  R30,R16
00192b e0f0      	LDI  R31,0
00192c 58e0      	SUBI R30,LOW(128)
00192d 40f0      	SBCI R31,HIGH(128)
00192e 59e0      	SUBI R30,LOW(-_ExCvt_G000*2)
00192f 4ffc      	SBCI R31,HIGH(-_ExCvt_G000*2)
001930 9104      	LPM  R16,Z
                 ;#else
                 ;#if !_DF1S
                 ;			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
                 ;#endif
                 ;#endif
                 ;		}
                 ;		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
                 _0x260:
                 ;			d = (BYTE)p[si++];			/* Get 2nd byte */
                 ;			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
                 ;				return FR_INVALID_NAME;
                 ;			sfn[i++] = c;
                 ;			sfn[i++] = d;
                 ;		} else {						/* Single byte code */
                 ;			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
                +
001931 ebe0     +LDI R30 , LOW ( _0x267 + ( 0 ) )
001932 e0f5     +LDI R31 , HIGH ( _0x267 + ( 0 ) )
                 	__POINTW1MN _0x267,0
001933 93fa      	ST   -Y,R31
001934 93ea      	ST   -Y,R30
001935 2fa0      	MOV  R26,R16
001936 27bb      	CLR  R27
001937 940e 0ddb 	CALL _chk_chr_G000
001939 9730      	SBIW R30,0
00193a f011      	BREQ _0x266
                 ;				return FR_INVALID_NAME;
00193b e0e6      	LDI  R30,LOW(6)
00193c c048      	RJMP _0x20C001B
                 ;			if (IsUpper(c)) {			/* ASCII large capital? */
                 _0x266:
00193d 3401      	CPI  R16,65
00193e f010      	BRLO _0x269
00193f 350b      	CPI  R16,91
001940 f008      	BRLO _0x26A
                 _0x269:
001941 c002      	RJMP _0x268
                 _0x26A:
                 ;				b |= 2;
001942 6012      	ORI  R17,LOW(2)
                 ;			} else {
001943 c007      	RJMP _0x26B
                 _0x268:
                 ;				if (IsLower(c)) {		/* ASCII small capital? */
001944 3601      	CPI  R16,97
001945 f010      	BRLO _0x26D
001946 370b      	CPI  R16,123
001947 f008      	BRLO _0x26E
                 _0x26D:
001948 c002      	RJMP _0x26C
                 _0x26E:
                 ;					b |= 1; c -= 0x20;
001949 6011      	ORI  R17,LOW(1)
00194a 5200      	SUBI R16,LOW(32)
                 ;				}
                 ;			}
                 _0x26C:
                 _0x26B:
                 ;			sfn[i++] = c;
00194b 85e8      	LDD  R30,Y+8
00194c 85f9      	LDD  R31,Y+8+1
00194d 9631      	ADIW R30,1
00194e 87e8      	STD  Y+8,R30
00194f 87f9      	STD  Y+8+1,R31
001950 9731      	SBIW R30,1
001951 0fe4      	ADD  R30,R20
001952 1ff5      	ADC  R31,R21
001953 8300      	ST   Z,R16
                 ;		}
                 ;	}
                 _0x254:
001954 cfa4      	RJMP _0x255
                 _0x256:
                 ;	*path = &p[si];						/* Return pointer to the next segment */
001955 85ea      	LDD  R30,Y+10
001956 85fb      	LDD  R31,Y+10+1
001957 81ae      	LDD  R26,Y+6
001958 81bf      	LDD  R27,Y+6+1
001959 0fea      	ADD  R30,R26
00195a 1ffb      	ADC  R31,R27
00195b 85ae      	LDD  R26,Y+14
00195c 85bf      	LDD  R27,Y+14+1
00195d 93ed      	ST   X+,R30
00195e 93fc      	ST   X,R31
                 ;	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
00195f 3201      	CPI  R16,33
001960 f410      	BRSH _0x26F
001961 e0e4      	LDI  R30,LOW(4)
001962 c001      	RJMP _0x270
                 _0x26F:
001963 e0e0      	LDI  R30,LOW(0)
                 _0x270:
001964 2f0e      	MOV  R16,R30
                 ;
                 ;	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
001965 85e8      	LDD  R30,Y+8
001966 85f9      	LDD  R31,Y+8+1
001967 9730      	SBIW R30,0
001968 f411      	BRNE _0x272
001969 e0e6      	LDI  R30,LOW(6)
00196a c01a      	RJMP _0x20C001B
                 ;	if (sfn[0] == DDE) sfn[0] = NDDE;	/* When first character collides with DDE, replace it with 0x05 */
                 _0x272:
00196b 01da      	MOVW R26,R20
00196c 91ac      	LD   R26,X
00196d 3ea5      	CPI  R26,LOW(0xE5)
00196e f419      	BRNE _0x273
00196f 01da      	MOVW R26,R20
001970 e0e5      	LDI  R30,LOW(5)
001971 93ec      	ST   X,R30
                 ;
                 ;	if (ni == 8) b <<= 2;
                 _0x273:
001972 85ac      	LDD  R26,Y+12
001973 85bd      	LDD  R27,Y+12+1
001974 9718      	SBIW R26,8
001975 f411      	BRNE _0x274
001976 0f11      	LSL  R17
001977 0f11      	LSL  R17
                 ;	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
                 _0x274:
001978 2fe1      	MOV  R30,R17
001979 70e3      	ANDI R30,LOW(0x3)
00197a 30e1      	CPI  R30,LOW(0x1)
00197b f409      	BRNE _0x275
00197c 6100      	ORI  R16,LOW(16)
                 ;	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
                 _0x275:
00197d 2fe1      	MOV  R30,R17
00197e 70ec      	ANDI R30,LOW(0xC)
00197f 30e4      	CPI  R30,LOW(0x4)
001980 f409      	BRNE _0x276
001981 6008      	ORI  R16,LOW(8)
                 ;
                 ;	sfn[NS] = c;		/* Store NT flag, File name is created */
                 _0x276:
001982 01fa      	MOVW R30,R20
                +
001983 8703     +STD Z + 11 , R16
                 	__PUTBZR 16,11
                 ;
                 ;	return FR_OK;
001984 e0e0      	LDI  R30,LOW(0)
                 _0x20C001B:
001985 940e 3f90 	CALL __LOADLOCR6
001987 9662      	ADIW R28,18
001988 9508      	RET
                 ;#endif
                 ;}
                 ; .FEND
                 
                 	.DSEG
                 _0x267:
0005b0           	.BYTE 0xF
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get file information from directory entry                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
                 ;static
                 ;void get_fileinfo (		/* No return code */
                 ;	DIR* dp,			/* Pointer to the directory object */
                 ;	FILINFO* fno	 	/* Pointer to the file information to be filled */
                 ;)
                 ;{
                 
                 	.CSEG
                 _get_fileinfo_G000:
                 ; .FSTART _get_fileinfo_G000
                 ;	UINT i;
                 ;	TCHAR *p, c;
                 ;
                 ;
                 ;	p = fno->fname;
001989 93ba      	ST   -Y,R27
00198a 93aa      	ST   -Y,R26
00198b 940e 3f89 	CALL __SAVELOCR6
                 ;	*dp -> Y+8
                 ;	*fno -> Y+6
                 ;	i -> R16,R17
                 ;	*p -> R18,R19
                 ;	c -> R21
00198d 81ee      	LDD  R30,Y+6
00198e 81ff      	LDD  R31,Y+6+1
00198f 9639      	ADIW R30,9
001990 019f      	MOVW R18,R30
                 ;	if (dp->sect) {		/* Get SFN */
001991 85a8      	LDD  R26,Y+8
001992 85b9      	LDD  R27,Y+8+1
001993 961e      	ADIW R26,14
001994 940e 3f31 	CALL __GETD1P
001996 940e 3f71 	CALL __CPD10
001998 f409      	BRNE PC+2
001999 c07f      	RJMP _0x277
                 ;		BYTE *dir = dp->dir;
                 ;
                 ;		i = 0;
00199a 9722      	SBIW R28,2
                 ;	*dp -> Y+10
                 ;	*fno -> Y+8
                 ;	*dir -> Y+0
00199b 85aa      	LDD  R26,Y+10
00199c 85bb      	LDD  R27,Y+10+1
00199d 9652      	ADIW R26,18
00199e 940e 3f2d 	CALL __GETW1P
0019a0 83e8      	ST   Y,R30
0019a1 83f9      	STD  Y+1,R31
                +
0019a2 e000     +LDI R16 , LOW ( 0 )
0019a3 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 ;		while (i < 11) {		/* Copy name body and extension */
                 _0x278:
                +
0019a4 300b     +CPI R16 , LOW ( 11 )
0019a5 e0e0     +LDI R30 , HIGH ( 11 )
0019a6 071e     +CPC R17 , R30
                 	__CPWRN 16,17,11
0019a7 f500      	BRSH _0x27A
                 ;			c = (TCHAR)dir[i++];
0019a8 01f8      	MOVW R30,R16
                +
0019a9 5f0f     +SUBI R16 , LOW ( - 1 )
0019aa 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0019ab 81a8      	LD   R26,Y
0019ac 81b9      	LDD  R27,Y+1
0019ad 0fae      	ADD  R26,R30
0019ae 1fbf      	ADC  R27,R31
0019af 915c      	LD   R21,X
                 ;			if (c == ' ') continue;			/* Skip padding spaces */
0019b0 3250      	CPI  R21,32
0019b1 f391      	BREQ _0x278
                 ;			if (c == NDDE) c = (TCHAR)DDE;	/* Restore replaced DDE character */
0019b2 3055      	CPI  R21,5
0019b3 f409      	BRNE _0x27C
0019b4 ee55      	LDI  R21,LOW(229)
                 ;			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
                 _0x27C:
0019b5 e0e9      	LDI  R30,LOW(9)
0019b6 e0f0      	LDI  R31,HIGH(9)
0019b7 17e0      	CP   R30,R16
0019b8 07f1      	CPC  R31,R17
0019b9 f429      	BRNE _0x27D
0019ba 01d9      	MOVW R26,R18
                +
0019bb 5f2f     +SUBI R18 , LOW ( - 1 )
0019bc 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0019bd e2ee      	LDI  R30,LOW(46)
0019be 93ec      	ST   X,R30
                 ;#if _USE_LFN
                 ;			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
                 ;				c += 0x20;			/* To lower */
                 ;#if _LFN_UNICODE
                 ;			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
                 ;				c = c << 8 | dir[i++];
                 ;			c = ff_convert(c, 1);	/* OEM -> Unicode */
                 ;			if (!c) c = '?';
                 ;#endif
                 ;#endif
                 ;			*p++ = c;
                 _0x27D:
0019bf 933f      	PUSH R19
0019c0 932f      	PUSH R18
                +
0019c1 5f2f     +SUBI R18 , LOW ( - 1 )
0019c2 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0019c3 2fe5      	MOV  R30,R21
0019c4 91af      	POP  R26
0019c5 91bf      	POP  R27
0019c6 93ec      	ST   X,R30
                 ;		}
0019c7 cfdc      	RJMP _0x278
                 _0x27A:
                 ;		fno->fattrib = dir[DIR_Attr];				/* Attribute */
0019c8 81e8      	LD   R30,Y
0019c9 81f9      	LDD  R31,Y+1
0019ca 85e3      	LDD  R30,Z+11
                +
0019cb 85a8     +LDD R26 , Y + 8
0019cc 85b9     +LDD R27 , Y + 8 + 1
0019cd 9618     +ADIW R26 , 8
0019ce 93ec     +ST X , R30
                 	__PUTB1SNS 8,8
                 ;		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
0019cf 81e8      	LD   R30,Y
0019d0 81f9      	LDD  R31,Y+1
0019d1 8de7      	LDD  R30,Z+31
0019d2 e0f0      	LDI  R31,0
0019d3 940e 3e59 	CALL __CWD1
0019d5 01df      	MOVW R26,R30
0019d6 01cb      	MOVW R24,R22
0019d7 e1e8      	LDI  R30,LOW(24)
0019d8 940e 3e0c 	CALL __LSLD12
0019da 01df      	MOVW R26,R30
0019db 01cb      	MOVW R24,R22
0019dc 81e8      	LD   R30,Y
0019dd 81f9      	LDD  R31,Y+1
0019de 8de6      	LDD  R30,Z+30
0019df e0f0      	LDI  R31,0
0019e0 940e 3e59 	CALL __CWD1
0019e2 940e 3e4e 	CALL __LSLD16
0019e4 940e 3de9 	CALL __ORD12
0019e6 01df      	MOVW R26,R30
0019e7 01cb      	MOVW R24,R22
0019e8 81e8      	LD   R30,Y
0019e9 81f9      	LDD  R31,Y+1
0019ea 8df5      	LDD  R31,Z+29
0019eb e0e0      	LDI  R30,LOW(0)
0019ec 2766      	CLR  R22
0019ed 2777      	CLR  R23
0019ee 940e 3de9 	CALL __ORD12
0019f0 01df      	MOVW R26,R30
0019f1 01cb      	MOVW R24,R22
0019f2 81e8      	LD   R30,Y
0019f3 81f9      	LDD  R31,Y+1
0019f4 8de4      	LDD  R30,Z+28
0019f5 27ff      	CLR  R31
0019f6 2766      	CLR  R22
0019f7 2777      	CLR  R23
0019f8 940e 3de9 	CALL __ORD12
0019fa 85a8      	LDD  R26,Y+8
0019fb 85b9      	LDD  R27,Y+8+1
0019fc 940e 3f3c 	CALL __PUTDP1
                 ;		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
0019fe 81e8      	LD   R30,Y
0019ff 81f9      	LDD  R31,Y+1
001a00 8db1      	LDD  R27,Z+25
001a01 e0a0      	LDI  R26,LOW(0)
001a02 8de0      	LDD  R30,Z+24
001a03 e0f0      	LDI  R31,0
001a04 2bea      	OR   R30,R26
001a05 2bfb      	OR   R31,R27
                +
001a06 85a8     +LDD R26 , Y + 8
001a07 85b9     +LDD R27 , Y + 8 + 1
001a08 9614     +ADIW R26 , 4
001a09 93ed     +ST X + , R30
001a0a 93fc     +ST X , R31
                 	__PUTW1SNS 8,4
                 ;		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
001a0b 81e8      	LD   R30,Y
001a0c 81f9      	LDD  R31,Y+1
001a0d 89b7      	LDD  R27,Z+23
001a0e e0a0      	LDI  R26,LOW(0)
001a0f 89e6      	LDD  R30,Z+22
001a10 e0f0      	LDI  R31,0
001a11 2bea      	OR   R30,R26
001a12 2bfb      	OR   R31,R27
                +
001a13 85a8     +LDD R26 , Y + 8
001a14 85b9     +LDD R27 , Y + 8 + 1
001a15 9616     +ADIW R26 , 6
001a16 93ed     +ST X + , R30
001a17 93fc     +ST X , R31
                 	__PUTW1SNS 8,6
                 ;	}
001a18 9622      	ADIW R28,2
                 ;	*p = 0;		/* Terminate SFN string by a \0 */
                 _0x277:
001a19 01d9      	MOVW R26,R18
001a1a e0e0      	LDI  R30,LOW(0)
001a1b 93ec      	ST   X,R30
                 ;
                 ;#if _USE_LFN
                 ;	if (fno->lfname) {
                 ;		WCHAR w, *lfn;
                 ;
                 ;		i = 0; p = fno->lfname;
                 ;		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
                 ;			lfn = dp->lfn;
                 ;			while ((w = *lfn++) != 0) {		/* Get an LFN character */
                 ;#if !_LFN_UNICODE
                 ;				w = ff_convert(w, 0);		/* Unicode -> OEM */
                 ;				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
                 ;				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
                 ;					p[i++] = (TCHAR)(w >> 8);
                 ;#endif
                 ;				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
                 ;				p[i++] = (TCHAR)w;
                 ;			}
                 ;		}
                 ;		p[i] = 0;	/* Terminate LFN string by a \0 */
                 ;	}
                 ;#endif
                 ;}
                 _0x20C0019:
001a1c 940e 3f90 	CALL __LOADLOCR6
                 _0x20C001A:
001a1e 962a      	ADIW R28,10
001a1f 9508      	RET
                 ; .FEND
                 ;#endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2*/
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get logical drive number from path name                               */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
                 ;	const TCHAR** path	/* Pointer to pointer to the path name */
                 ;)
                 ;{
                 _get_ldnumber_G000:
                 ; .FSTART _get_ldnumber_G000
                 ;	int vol = -1;
                 ;
                 ;
                 ;	if (*path) {
001a20 93ba      	ST   -Y,R27
001a21 93aa      	ST   -Y,R26
001a22 931a      	ST   -Y,R17
001a23 930a      	ST   -Y,R16
                 ;	*path -> Y+2
                 ;	vol -> R16,R17
                +
001a24 ef0f     +LDI R16 , LOW ( - 1 )
001a25 ef1f     +LDI R17 , HIGH ( - 1 )
                 	__GETWRN 16,17,-1
001a26 81aa      	LDD  R26,Y+2
001a27 81bb      	LDD  R27,Y+2+1
001a28 940e 3f2d 	CALL __GETW1P
001a2a 9730      	SBIW R30,0
001a2b f101      	BREQ _0x27E
                 ;		vol = (*path)[0] - '0';
001a2c 940e 3f2d 	CALL __GETW1P
001a2e 81e0      	LD   R30,Z
001a2f e0f0      	LDI  R31,0
001a30 97f0      	SBIW R30,48
001a31 018f      	MOVW R16,R30
                 ;		if ((UINT)vol < 9 && (*path)[1] == ':') {	/* There is a drive number */
                +
001a32 3009     +CPI R16 , LOW ( 9 )
001a33 e0e0     +LDI R30 , HIGH ( 9 )
001a34 071e     +CPC R17 , R30
                 	__CPWRN 16,17,9
001a35 f428      	BRSH _0x280
001a36 940e 3f2d 	CALL __GETW1P
001a38 81a1      	LDD  R26,Z+1
001a39 33aa      	CPI  R26,LOW(0x3A)
001a3a f009      	BREQ _0x281
                 _0x280:
001a3b c00e      	RJMP _0x27F
                 _0x281:
                 ;			*path += 2;		/* Get value and strip it */
001a3c 81aa      	LDD  R26,Y+2
001a3d 81bb      	LDD  R27,Y+2+1
001a3e 91ed      	LD   R30,X+
001a3f 91fd      	LD   R31,X+
001a40 9632      	ADIW R30,2
001a41 93fe      	ST   -X,R31
001a42 93ee      	ST   -X,R30
                 ;			if (vol >= _VOLUMES) vol = -1;	/* Check if the drive number is valid */
                +
001a43 3001     +CPI R16 , LOW ( 1 )
001a44 e0e0     +LDI R30 , HIGH ( 1 )
001a45 071e     +CPC R17 , R30
                 	__CPWRN 16,17,1
001a46 f014      	BRLT _0x282
                +
001a47 ef0f     +LDI R16 , LOW ( - 1 )
001a48 ef1f     +LDI R17 , HIGH ( - 1 )
                 	__GETWRN 16,17,-1
                 ;		} else {			/* No drive number use default drive */
                 _0x282:
001a49 c002      	RJMP _0x283
                 _0x27F:
                 ;#if _FS_RPATH && _VOLUMES >= 2
                 ;			vol = CurrVol;	/* Current drive */
                 ;#else
                 ;			vol = 0;		/* Drive 0 */
                +
001a4a e000     +LDI R16 , LOW ( 0 )
001a4b e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 ;#endif
                 ;		}
                 _0x283:
                 ;	}
                 ;
                 ;	return vol;
                 _0x27E:
001a4c 01f8      	MOVW R30,R16
001a4d c63e      	RJMP _0x20C0013
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Follow a file path                                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
                 ;	DIR* dp,			/* Directory object to return last directory and found object */
                 ;	const TCHAR* path	/* Full-path string to find a file or directory */
                 ;)
                 ;{
                 _follow_path_G000:
                 ; .FSTART _follow_path_G000
                 ;	FRESULT res;
                 ;	BYTE *dir, ns;
                 ;
                 ;
                 ;#if _FS_RPATH
                 ;	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
                 ;		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
                 ;	} else {								/* No heading separator */
                 ;		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
                 ;	}
                 ;#else
                 ;	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
001a4e 93ba      	ST   -Y,R27
001a4f 93aa      	ST   -Y,R26
001a50 940e 3f8b 	CALL __SAVELOCR4
                 ;	*dp -> Y+6
                 ;	*path -> Y+4
                 ;	res -> R17
                 ;	*dir -> R18,R19
                 ;	ns -> R16
001a52 81ac      	LDD  R26,Y+4
001a53 81bd      	LDD  R27,Y+4+1
001a54 91ac      	LD   R26,X
001a55 32af      	CPI  R26,LOW(0x2F)
001a56 f029      	BREQ _0x285
001a57 81ac      	LDD  R26,Y+4
001a58 81bd      	LDD  R27,Y+4+1
001a59 91ac      	LD   R26,X
001a5a 35ac      	CPI  R26,LOW(0x5C)
001a5b f429      	BRNE _0x284
                 _0x285:
                 ;		path++;
001a5c 81ec      	LDD  R30,Y+4
001a5d 81fd      	LDD  R31,Y+4+1
001a5e 9631      	ADIW R30,1
001a5f 83ec      	STD  Y+4,R30
001a60 83fd      	STD  Y+4+1,R31
                 ;	dp->sclust = 0;							/* Always start from the root directory */
                 _0x284:
001a61 81ae      	LDD  R26,Y+6
001a62 81bf      	LDD  R27,Y+6+1
001a63 9616      	ADIW R26,6
                +
001a64 e0e0     +LDI R30 , LOW ( 0x0 )
001a65 e0f0     +LDI R31 , HIGH ( 0x0 )
001a66 e060     +LDI R22 , BYTE3 ( 0x0 )
001a67 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
001a68 940e 3f3c 	CALL __PUTDP1
                 ;#endif
                 ;
                 ;	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
001a6a 81ac      	LDD  R26,Y+4
001a6b 81bd      	LDD  R27,Y+4+1
001a6c 91ac      	LD   R26,X
001a6d 27bb      	CLR  R27
001a6e 9790      	SBIW R26,32
001a6f f480      	BRSH _0x287
                 ;		res = dir_sdi(dp, 0);
001a70 81ee      	LDD  R30,Y+6
001a71 81ff      	LDD  R31,Y+6+1
001a72 93fa      	ST   -Y,R31
001a73 93ea      	ST   -Y,R30
001a74 e0a0      	LDI  R26,LOW(0)
001a75 e0b0      	LDI  R27,0
001a76 da12      	RCALL _dir_sdi_G000
001a77 2f1e      	MOV  R17,R30
                 ;		dp->dir = 0;
001a78 81ae      	LDD  R26,Y+6
001a79 81bf      	LDD  R27,Y+6+1
001a7a 9652      	ADIW R26,18
001a7b e0e0      	LDI  R30,LOW(0)
001a7c e0f0      	LDI  R31,HIGH(0)
001a7d 93ed      	ST   X+,R30
001a7e 93fc      	ST   X,R31
                 ;	} else {								/* Follow path */
001a7f c04f      	RJMP _0x288
                 _0x287:
                 ;		for (;;) {
                 _0x28A:
                 ;			res = create_name(dp, &path);	/* Get a segment name of the path */
001a80 81ee      	LDD  R30,Y+6
001a81 81ff      	LDD  R31,Y+6+1
001a82 93fa      	ST   -Y,R31
001a83 93ea      	ST   -Y,R30
001a84 01de      	MOVW R26,R28
001a85 9616      	ADIW R26,6
001a86 de3d      	RCALL _create_name_G000
001a87 2f1e      	MOV  R17,R30
                 ;			if (res != FR_OK) break;
001a88 3010      	CPI  R17,0
001a89 f009      	BREQ _0x28C
001a8a c044      	RJMP _0x28B
                 ;			res = dir_find(dp);				/* Find an object with the sagment name */
                 _0x28C:
001a8b 81ae      	LDD  R26,Y+6
001a8c 81bf      	LDD  R27,Y+6+1
001a8d dd16      	RCALL _dir_find_G000
001a8e 2f1e      	MOV  R17,R30
                 ;			ns = dp->fn[NS];
001a8f 81ae      	LDD  R26,Y+6
001a90 81bf      	LDD  R27,Y+6+1
001a91 9654      	ADIW R26,20
001a92 940e 3f2d 	CALL __GETW1P
001a94 8503      	LDD  R16,Z+11
                 ;			if (res != FR_OK) {				/* Failed to find the object */
001a95 3010      	CPI  R17,0
001a96 f0e9      	BREQ _0x28D
                 ;				if (res == FR_NO_FILE) {	/* Object is not found */
001a97 3014      	CPI  R17,4
001a98 f4d1      	BRNE _0x28E
                 ;					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
001a99 e0e0      	LDI  R30,LOW(0)
001a9a 30e0      	CPI  R30,0
001a9b f011      	BREQ _0x290
001a9c fd05      	SBRC R16,5
001a9d c001      	RJMP _0x291
                 _0x290:
001a9e c012      	RJMP _0x28F
                 _0x291:
                 ;						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
001a9f 81ae      	LDD  R26,Y+6
001aa0 81bf      	LDD  R27,Y+6+1
001aa1 9616      	ADIW R26,6
                +
001aa2 e0e0     +LDI R30 , LOW ( 0x0 )
001aa3 e0f0     +LDI R31 , HIGH ( 0x0 )
001aa4 e060     +LDI R22 , BYTE3 ( 0x0 )
001aa5 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
001aa6 940e 3f3c 	CALL __PUTDP1
001aa8 81ae      	LDD  R26,Y+6
001aa9 81bf      	LDD  R27,Y+6+1
001aaa 9652      	ADIW R26,18
001aab 93ed      	ST   X+,R30
001aac 93fc      	ST   X,R31
                 ;						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
001aad ff02      	SBRS R16,2
001aae c01f      	RJMP _0x289
                 ;						res = FR_OK;					/* Ended at the root directroy. Function completed. */
001aaf e010      	LDI  R17,LOW(0)
                 ;					} else {							/* Could not find the object */
001ab0 c002      	RJMP _0x293
                 _0x28F:
                 ;						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
001ab1 ff02      	SBRS R16,2
001ab2 e015      	LDI  R17,LOW(5)
                 ;					}
                 _0x293:
                 ;				}
                 ;				break;
                 _0x28E:
001ab3 c01b      	RJMP _0x28B
                 ;			}
                 ;			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
                 _0x28D:
001ab4 fd02      	SBRC R16,2
001ab5 c019      	RJMP _0x28B
                 ;			dir = dp->dir;						/* Follow the sub-directory */
001ab6 81ae      	LDD  R26,Y+6
001ab7 81bf      	LDD  R27,Y+6+1
001ab8 9652      	ADIW R26,18
001ab9 912d      	LD   R18,X+
001aba 913c      	LD   R19,X
                 ;			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
001abb 01f9      	MOVW R30,R18
001abc 85e3      	LDD  R30,Z+11
001abd 71e0      	ANDI R30,LOW(0x10)
001abe f411      	BRNE _0x296
                 ;				res = FR_NO_PATH; break;
001abf e015      	LDI  R17,LOW(5)
001ac0 c00e      	RJMP _0x28B
                 ;			}
                 ;			dp->sclust = ld_clust(dp->fs, dir);
                 _0x296:
001ac1 81ae      	LDD  R26,Y+6
001ac2 81bf      	LDD  R27,Y+6+1
001ac3 940e 3f2d 	CALL __GETW1P
001ac5 93fa      	ST   -Y,R31
001ac6 93ea      	ST   -Y,R30
001ac7 01d9      	MOVW R26,R18
001ac8 dc91      	RCALL _ld_clust_G000
                +
001ac9 81ae     +LDD R26 , Y + 6
001aca 81bf     +LDD R27 , Y + 6 + 1
001acb 9616     +ADIW R26 , 6
001acc 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,6
                 ;		}
                 _0x289:
001ace cfb1      	RJMP _0x28A
                 _0x28B:
                 ;	}
                 _0x288:
                 ;
                 ;	return res;
                 _0x20C0018:
001acf 2fe1      	MOV  R30,R17
001ad0 940e 3f92 	CALL __LOADLOCR4
                 _0x20C0017:
001ad2 9628      	ADIW R28,8
001ad3 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Load a sector and check if it is an FAT boot sector                   */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk error */
                 ;	FATFS* fs,	/* File system object */
                 ;	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
                 ;)
                 ;{
                 _check_fs_G000:
                 ; .FSTART _check_fs_G000
                 ;	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
001ad4 940e 3f5f 	CALL __PUTPARD2
                 ;	*fs -> Y+4
                 ;	sect -> Y+0
001ad6 81ac      	LDD  R26,Y+4
001ad7 81bd      	LDD  R27,Y+4+1
001ad8 9614      	ADIW R26,4
001ad9 e0e0      	LDI  R30,LOW(0)
001ada 93ec      	ST   X,R30
001adb 81ac      	LDD  R26,Y+4
001adc 81bd      	LDD  R27,Y+4+1
001add 969a      	ADIW R26,42
                +
001ade efef     +LDI R30 , LOW ( 0xFFFFFFFF )
001adf efff     +LDI R31 , HIGH ( 0xFFFFFFFF )
001ae0 ef6f     +LDI R22 , BYTE3 ( 0xFFFFFFFF )
001ae1 ef7f     +LDI R23 , BYTE4 ( 0xFFFFFFFF )
                 	__GETD1N 0xFFFFFFFF
001ae2 940e 3f3c 	CALL __PUTDP1
                 ;	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
001ae4 81ec      	LDD  R30,Y+4
001ae5 81fd      	LDD  R31,Y+4+1
001ae6 93fa      	ST   -Y,R31
001ae7 93ea      	ST   -Y,R30
                +
001ae8 81aa     +LDD R26 , Y + 2
001ae9 81bb     +LDD R27 , Y + 2 + 1
001aea 818c     +LDD R24 , Y + 2 + 2
001aeb 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
001aec 940e 0e73 	CALL _move_window_G000
001aee 30e0      	CPI  R30,0
001aef f011      	BREQ _0x297
                 ;		return 3;
001af0 e0e3      	LDI  R30,LOW(3)
001af1 c099      	RJMP _0x20C0016
                 ;
                 ;	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offset 510 even if the secto ...
                 _0x297:
001af2 81ec      	LDD  R30,Y+4
001af3 81fd      	LDD  R31,Y+4+1
001af4 96be      	ADIW R30,46
001af5 010f      	MOVW R0,R30
001af6 50e1      	SUBI R30,LOW(-511)
001af7 4ffe      	SBCI R31,HIGH(-511)
001af8 81f0      	LD   R31,Z
001af9 e0e0      	LDI  R30,LOW(0)
001afa 01df      	MOVW R26,R30
001afb 01f0      	MOVW R30,R0
001afc 50e2      	SUBI R30,LOW(-510)
001afd 4ffe      	SBCI R31,HIGH(-510)
001afe 81e0      	LD   R30,Z
001aff e0f0      	LDI  R31,0
001b00 2bea      	OR   R30,R26
001b01 2bfb      	OR   R31,R27
001b02 35e5      	CPI  R30,LOW(0xAA55)
001b03 eaaa      	LDI  R26,HIGH(0xAA55)
001b04 07fa      	CPC  R31,R26
001b05 f011      	BREQ _0x298
                 ;		return 2;
001b06 e0e2      	LDI  R30,LOW(2)
001b07 c083      	RJMP _0x20C0016
                 ;
                 ;	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
                 _0x298:
001b08 81ec      	LDD  R30,Y+4
001b09 81fd      	LDD  R31,Y+4+1
001b0a 59e9      	SUBI R30,LOW(-103)
001b0b 4fff      	SBCI R31,HIGH(-103)
001b0c 81a0      	LD   R26,Z
001b0d 27bb      	CLR  R27
001b0e 2788      	CLR  R24
001b0f 2799      	CLR  R25
001b10 e1e8      	LDI  R30,LOW(24)
001b11 940e 3e0c 	CALL __LSLD12
001b13 01df      	MOVW R26,R30
001b14 01cb      	MOVW R24,R22
001b15 81ec      	LDD  R30,Y+4
001b16 81fd      	LDD  R31,Y+4+1
001b17 59ea      	SUBI R30,LOW(-102)
001b18 4fff      	SBCI R31,HIGH(-102)
001b19 81e0      	LD   R30,Z
001b1a 27ff      	CLR  R31
001b1b 2766      	CLR  R22
001b1c 2777      	CLR  R23
001b1d 940e 3e4e 	CALL __LSLD16
001b1f 940e 3de9 	CALL __ORD12
001b21 01df      	MOVW R26,R30
001b22 01cb      	MOVW R24,R22
001b23 81ec      	LDD  R30,Y+4
001b24 81fd      	LDD  R31,Y+4+1
001b25 59eb      	SUBI R30,LOW(-101)
001b26 4fff      	SBCI R31,HIGH(-101)
001b27 81f0      	LD   R31,Z
001b28 e0e0      	LDI  R30,LOW(0)
001b29 2766      	CLR  R22
001b2a 2777      	CLR  R23
001b2b 940e 3de9 	CALL __ORD12
001b2d 01df      	MOVW R26,R30
001b2e 01cb      	MOVW R24,R22
001b2f 81ec      	LDD  R30,Y+4
001b30 81fd      	LDD  R31,Y+4+1
001b31 59ec      	SUBI R30,LOW(-100)
001b32 4fff      	SBCI R31,HIGH(-100)
001b33 81e0      	LD   R30,Z
001b34 27ff      	CLR  R31
001b35 2766      	CLR  R22
001b36 2777      	CLR  R23
001b37 940e 3de9 	CALL __ORD12
                +
001b39 7fef     +ANDI R30 , LOW ( 0xFFFFFF )
001b3a 7fff     +ANDI R31 , HIGH ( 0xFFFFFF )
001b3b 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFF )
001b3c 7070     +ANDI R23 , BYTE4 ( 0xFFFFFF )
                 	__ANDD1N 0xFFFFFF
                +
001b3d 34e6     +CPI R30 , LOW ( 0x544146 )
001b3e e4a1     +LDI R26 , HIGH ( 0x544146 )
001b3f 07fa     +CPC R31 , R26
001b40 e5a4     +LDI R26 , BYTE3 ( 0x544146 )
001b41 076a     +CPC R22 , R26
001b42 e0a0     +LDI R26 , BYTE4 ( 0x544146 )
001b43 077a     +CPC R23 , R26
                 	__CPD1N 0x544146
001b44 f411      	BRNE _0x299
                 ;		return 0;
001b45 e0e0      	LDI  R30,LOW(0)
001b46 c044      	RJMP _0x20C0016
                 ;	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
                 _0x299:
001b47 81ec      	LDD  R30,Y+4
001b48 81fd      	LDD  R31,Y+4+1
001b49 96be      	ADIW R30,46
001b4a 5aeb      	SUBI R30,LOW(-85)
001b4b 4fff      	SBCI R31,HIGH(-85)
001b4c 81a0      	LD   R26,Z
001b4d 27bb      	CLR  R27
001b4e 2788      	CLR  R24
001b4f 2799      	CLR  R25
001b50 e1e8      	LDI  R30,LOW(24)
001b51 940e 3e0c 	CALL __LSLD12
001b53 01df      	MOVW R26,R30
001b54 01cb      	MOVW R24,R22
001b55 81ec      	LDD  R30,Y+4
001b56 81fd      	LDD  R31,Y+4+1
001b57 96be      	ADIW R30,46
001b58 5aec      	SUBI R30,LOW(-84)
001b59 4fff      	SBCI R31,HIGH(-84)
001b5a 81e0      	LD   R30,Z
001b5b 27ff      	CLR  R31
001b5c 2766      	CLR  R22
001b5d 2777      	CLR  R23
001b5e 940e 3e4e 	CALL __LSLD16
001b60 940e 3de9 	CALL __ORD12
001b62 01df      	MOVW R26,R30
001b63 01cb      	MOVW R24,R22
001b64 81ec      	LDD  R30,Y+4
001b65 81fd      	LDD  R31,Y+4+1
001b66 96be      	ADIW R30,46
001b67 5aed      	SUBI R30,LOW(-83)
001b68 4fff      	SBCI R31,HIGH(-83)
001b69 81f0      	LD   R31,Z
001b6a e0e0      	LDI  R30,LOW(0)
001b6b 2766      	CLR  R22
001b6c 2777      	CLR  R23
001b6d 940e 3de9 	CALL __ORD12
001b6f 01df      	MOVW R26,R30
001b70 01cb      	MOVW R24,R22
001b71 81ec      	LDD  R30,Y+4
001b72 81fd      	LDD  R31,Y+4+1
001b73 96be      	ADIW R30,46
001b74 5aee      	SUBI R30,LOW(-82)
001b75 4fff      	SBCI R31,HIGH(-82)
001b76 81e0      	LD   R30,Z
001b77 27ff      	CLR  R31
001b78 2766      	CLR  R22
001b79 2777      	CLR  R23
001b7a 940e 3de9 	CALL __ORD12
                +
001b7c 7fef     +ANDI R30 , LOW ( 0xFFFFFF )
001b7d 7fff     +ANDI R31 , HIGH ( 0xFFFFFF )
001b7e 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFF )
001b7f 7070     +ANDI R23 , BYTE4 ( 0xFFFFFF )
                 	__ANDD1N 0xFFFFFF
                +
001b80 34e6     +CPI R30 , LOW ( 0x544146 )
001b81 e4a1     +LDI R26 , HIGH ( 0x544146 )
001b82 07fa     +CPC R31 , R26
001b83 e5a4     +LDI R26 , BYTE3 ( 0x544146 )
001b84 076a     +CPC R22 , R26
001b85 e0a0     +LDI R26 , BYTE4 ( 0x544146 )
001b86 077a     +CPC R23 , R26
                 	__CPD1N 0x544146
001b87 f411      	BRNE _0x29A
                 ;		return 0;
001b88 e0e0      	LDI  R30,LOW(0)
001b89 c001      	RJMP _0x20C0016
                 ;
                 ;	return 1;
                 _0x29A:
001b8a e0e1      	LDI  R30,LOW(1)
                 _0x20C0016:
001b8b 9626      	ADIW R28,6
001b8c 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Find logical drive and check if the volume is mounted                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
                 ;	FATFS** rfs,		/* Pointer to pointer to the found file system object */
                 ;	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
                 ;	BYTE wmode			/* !=0: Check write protection for write access */
                 ;)
                 ;{
                 _find_volume_G000:
                 ; .FSTART _find_volume_G000
                 ;	BYTE fmt;
                 ;	int vol;
                 ;	DSTATUS stat;
                 ;	DWORD bsect, fasize, tsect, sysect, nclst, szbfat;
                 ;	WORD nrsv;
                 ;	FATFS *fs;
                 ;
                 ;
                 ;	/* Get logical drive number from the path name */
                 ;	*rfs = 0;
001b8d 93aa      	ST   -Y,R26
001b8e 976a      	SBIW R28,26
001b8f 940e 3f89 	CALL __SAVELOCR6
                 ;	*rfs -> Y+35
                 ;	*path -> Y+33
                 ;	wmode -> Y+32
                 ;	fmt -> R17
                 ;	vol -> R18,R19
                 ;	stat -> R16
                 ;	bsect -> Y+28
                 ;	fasize -> Y+24
                 ;	tsect -> Y+20
                 ;	sysect -> Y+16
                 ;	nclst -> Y+12
                 ;	szbfat -> Y+8
                 ;	nrsv -> R20,R21
                 ;	*fs -> Y+6
001b91 a1ab      	LDD  R26,Y+35
001b92 a1bc      	LDD  R27,Y+35+1
001b93 e0e0      	LDI  R30,LOW(0)
001b94 e0f0      	LDI  R31,HIGH(0)
001b95 93ed      	ST   X+,R30
001b96 93fc      	ST   X,R31
                 ;	vol = get_ldnumber(path);
001b97 a1a9      	LDD  R26,Y+33
001b98 a1ba      	LDD  R27,Y+33+1
001b99 de86      	RCALL _get_ldnumber_G000
001b9a 019f      	MOVW R18,R30
                 ;	if (vol < 0) return FR_INVALID_DRIVE;
001b9b 2333      	TST  R19
001b9c f412      	BRPL _0x29B
001b9d e0eb      	LDI  R30,LOW(11)
001b9e c4bf      	RJMP _0x20C0014
                 ;
                 ;	/* Check if the file system object is valid or not */
                 ;	fs = FatFs[vol];					/* Get pointer to the file system object */
                 _0x29B:
001b9f 01f9      	MOVW R30,R18
001ba0 eea6      	LDI  R26,LOW(_FatFs_G000)
001ba1 e0b6      	LDI  R27,HIGH(_FatFs_G000)
001ba2 0fee      	LSL  R30
001ba3 1fff      	ROL  R31
001ba4 0fae      	ADD  R26,R30
001ba5 1fbf      	ADC  R27,R31
001ba6 940e 3f2d 	CALL __GETW1P
001ba8 83ee      	STD  Y+6,R30
001ba9 83ff      	STD  Y+6+1,R31
                 ;	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
001baa 9730      	SBIW R30,0
001bab f411      	BRNE _0x29C
001bac e0ec      	LDI  R30,LOW(12)
001bad c4b0      	RJMP _0x20C0014
                 ;
                 ;	ENTER_FF(fs);						/* Lock the volume */
                 ;	*rfs = fs;							/* Return pointer to the file system object */
                 _0x29C:
001bae 81ee      	LDD  R30,Y+6
001baf 81ff      	LDD  R31,Y+6+1
001bb0 a1ab      	LDD  R26,Y+35
001bb1 a1bc      	LDD  R27,Y+35+1
001bb2 93ed      	ST   X+,R30
001bb3 93fc      	ST   X,R31
                 ;
                 ;	if (fs->fs_type) {					/* If the volume has been mounted */
001bb4 81ae      	LDD  R26,Y+6
001bb5 81bf      	LDD  R27,Y+6+1
001bb6 91ec      	LD   R30,X
001bb7 30e0      	CPI  R30,0
001bb8 f0a1      	BREQ _0x29D
                 ;		stat = disk_status(fs->drv);
001bb9 81ee      	LDD  R30,Y+6
001bba 81ff      	LDD  R31,Y+6+1
001bbb 81a1      	LDD  R26,Z+1
001bbc 940e 09ed 	CALL _disk_status
001bbe 2f0e      	MOV  R16,R30
                 ;		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
001bbf fd00      	SBRC R16,0
001bc0 c00c      	RJMP _0x29E
                 ;			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
001bc1 e0e1      	LDI  R30,LOW(1)
001bc2 30e0      	CPI  R30,0
001bc3 f029      	BREQ _0x2A0
001bc4 a1e8      	LDD  R30,Y+32
001bc5 30e0      	CPI  R30,0
001bc6 f011      	BREQ _0x2A0
001bc7 fd02      	SBRC R16,2
001bc8 c001      	RJMP _0x2A1
                 _0x2A0:
001bc9 c002      	RJMP _0x29F
                 _0x2A1:
                 ;				return FR_WRITE_PROTECTED;
001bca e0ea      	LDI  R30,LOW(10)
001bcb c492      	RJMP _0x20C0014
                 ;			return FR_OK;				/* The file system object is valid */
                 _0x29F:
001bcc c490      	RJMP _0x20C0015
                 ;		}
                 ;	}
                 _0x29E:
                 ;
                 ;	/* The file system object is not valid. */
                 ;	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
                 ;
                 ;	fs->fs_type = 0;					/* Clear the file system object */
                 _0x29D:
001bcd 81ae      	LDD  R26,Y+6
001bce 81bf      	LDD  R27,Y+6+1
001bcf e0e0      	LDI  R30,LOW(0)
001bd0 93ec      	ST   X,R30
                 ;	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
001bd1 2fe2      	MOV  R30,R18
                +
001bd2 81ae     +LDD R26 , Y + 6
001bd3 81bf     +LDD R27 , Y + 6 + 1
001bd4 9611     +ADIW R26 , 1
001bd5 93ec     +ST X , R30
                 	__PUTB1SNS 6,1
                 ;	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
001bd6 81ee      	LDD  R30,Y+6
001bd7 81ff      	LDD  R31,Y+6+1
001bd8 81a1      	LDD  R26,Z+1
001bd9 940e 092f 	CALL _disk_initialize
001bdb 2f0e      	MOV  R16,R30
                 ;	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
001bdc ff00      	SBRS R16,0
001bdd c002      	RJMP _0x2A2
                 ;		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
001bde e0e3      	LDI  R30,LOW(3)
001bdf c47e      	RJMP _0x20C0014
                 ;	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
                 _0x2A2:
001be0 e0e1      	LDI  R30,LOW(1)
001be1 30e0      	CPI  R30,0
001be2 f029      	BREQ _0x2A4
001be3 a1e8      	LDD  R30,Y+32
001be4 30e0      	CPI  R30,0
001be5 f011      	BREQ _0x2A4
001be6 fd02      	SBRC R16,2
001be7 c001      	RJMP _0x2A5
                 _0x2A4:
001be8 c002      	RJMP _0x2A3
                 _0x2A5:
                 ;		return FR_WRITE_PROTECTED;
001be9 e0ea      	LDI  R30,LOW(10)
001bea c473      	RJMP _0x20C0014
                 ;#if _MAX_SS != 512						/* Get sector size (variable sector size cfg only) */
                 ;	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &fs->ssize) != RES_OK)
                 ;		return FR_DISK_ERR;
                 ;#endif
                 ;	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
                 ;	bsect = 0;
                 _0x2A3:
001beb e0e0      	LDI  R30,LOW(0)
                +
001bec 8fec     +STD Y + 28 , R30
001bed 8fed     +STD Y + 28 + 1 , R30
001bee 8fee     +STD Y + 28 + 2 , R30
001bef 8fef     +STD Y + 28 + 3 , R30
                 	__CLRD1S 28
                 ;	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
001bf0 81ee      	LDD  R30,Y+6
001bf1 81ff      	LDD  R31,Y+6+1
001bf2 93fa      	ST   -Y,R31
001bf3 93ea      	ST   -Y,R30
                +
001bf4 8dae     +LDD R26 , Y + 30
001bf5 8dbf     +LDD R27 , Y + 30 + 1
001bf6 a188     +LDD R24 , Y + 30 + 2
001bf7 a199     +LDD R25 , Y + 30 + 3
                 	__GETD2S 30
001bf8 dedb      	RCALL _check_fs_G000
001bf9 2f1e      	MOV  R17,R30
                 ;	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
001bfa 3011      	CPI  R17,1
001bfb f031      	BREQ _0x2A7
001bfc 3010      	CPI  R17,0
001bfd f419      	BRNE _0x2A8
001bfe e0e0      	LDI  R30,LOW(0)
001bff 30e0      	CPI  R30,0
001c00 f409      	BRNE _0x2A7
                 _0x2A8:
001c01 c09a      	RJMP _0x2A6
                 _0x2A7:
                 ;		UINT i;
                 ;		DWORD br[4];
                 ;
                 ;		for (i = 0; i < 4; i++) {			/* Get partition offset */
001c02 9762      	SBIW R28,18
                 ;	*rfs -> Y+53
                 ;	*path -> Y+51
                 ;	wmode -> Y+50
                 ;	bsect -> Y+46
                 ;	fasize -> Y+42
                 ;	tsect -> Y+38
                 ;	sysect -> Y+34
                 ;	nclst -> Y+30
                 ;	szbfat -> Y+26
                 ;	*fs -> Y+24
                 ;	i -> Y+16
                 ;	br -> Y+0
001c03 e0e0      	LDI  R30,LOW(0)
001c04 8be8      	STD  Y+16,R30
001c05 8be9      	STD  Y+16+1,R30
                 _0x2AC:
001c06 89a8      	LDD  R26,Y+16
001c07 89b9      	LDD  R27,Y+16+1
001c08 9714      	SBIW R26,4
001c09 f008      	BRLO PC+2
001c0a c05c      	RJMP _0x2AD
                 ;			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
                 ;			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
001c0b 9722      	SBIW R28,2
                 ;	*rfs -> Y+55
                 ;	*path -> Y+53
                 ;	wmode -> Y+52
                 ;	bsect -> Y+48
                 ;	fasize -> Y+44
                 ;	tsect -> Y+40
                 ;	sysect -> Y+36
                 ;	nclst -> Y+32
                 ;	szbfat -> Y+28
                 ;	*fs -> Y+26
                 ;	i -> Y+18
                 ;	br -> Y+2
                 ;	*pt -> Y+0
001c0c 8dea      	LDD  R30,Y+26
001c0d 8dfb      	LDD  R31,Y+26+1
001c0e 96be      	ADIW R30,46
001c0f 54e2      	SUBI R30,LOW(-446)
001c10 4ffe      	SBCI R31,HIGH(-446)
                +
001c11 2f7e     +MOV R23 , R30
001c12 2f8f     +MOV R24 , R31
                 	__PUTW1R 23,24
001c13 89aa      	LDD  R26,Y+18
001c14 89bb      	LDD  R27,Y+18+1
001c15 e1e0      	LDI  R30,LOW(16)
001c16 940e 3e90 	CALL __MULB1W2U
001c18 0fe7      	ADD  R30,R23
001c19 1ff8      	ADC  R31,R24
001c1a 83e8      	ST   Y,R30
001c1b 83f9      	STD  Y+1,R31
001c1c 89ea      	LDD  R30,Y+18
001c1d 89fb      	LDD  R31,Y+18+1
001c1e 01de      	MOVW R26,R28
001c1f 9612      	ADIW R26,2
001c20 940e 3e28 	CALL __LSLW2
001c22 0fea      	ADD  R30,R26
001c23 1ffb      	ADC  R31,R27
001c24 93ff      	PUSH R31
001c25 93ef      	PUSH R30
001c26 81e8      	LD   R30,Y
001c27 81f9      	LDD  R31,Y+1
001c28 81e4      	LDD  R30,Z+4
001c29 e0f0      	LDI  R31,0
001c2a 9730      	SBIW R30,0
001c2b f161      	BREQ _0x2AE
001c2c 81e8      	LD   R30,Y
001c2d 81f9      	LDD  R31,Y+1
001c2e 85e3      	LDD  R30,Z+11
001c2f e0f0      	LDI  R31,0
001c30 940e 3e59 	CALL __CWD1
001c32 01df      	MOVW R26,R30
001c33 01cb      	MOVW R24,R22
001c34 e1e8      	LDI  R30,LOW(24)
001c35 940e 3e0c 	CALL __LSLD12
001c37 01df      	MOVW R26,R30
001c38 01cb      	MOVW R24,R22
001c39 81e8      	LD   R30,Y
001c3a 81f9      	LDD  R31,Y+1
001c3b 85e2      	LDD  R30,Z+10
001c3c e0f0      	LDI  R31,0
001c3d 940e 3e59 	CALL __CWD1
001c3f 940e 3e4e 	CALL __LSLD16
001c41 940e 3de9 	CALL __ORD12
001c43 01df      	MOVW R26,R30
001c44 01cb      	MOVW R24,R22
001c45 81e8      	LD   R30,Y
001c46 81f9      	LDD  R31,Y+1
001c47 85f1      	LDD  R31,Z+9
001c48 e0e0      	LDI  R30,LOW(0)
001c49 2766      	CLR  R22
001c4a 2777      	CLR  R23
001c4b 940e 3de9 	CALL __ORD12
001c4d 01df      	MOVW R26,R30
001c4e 01cb      	MOVW R24,R22
001c4f 81e8      	LD   R30,Y
001c50 81f9      	LDD  R31,Y+1
001c51 85e0      	LDD  R30,Z+8
001c52 27ff      	CLR  R31
001c53 2766      	CLR  R22
001c54 2777      	CLR  R23
001c55 940e 3de9 	CALL __ORD12
001c57 c004      	RJMP _0x2AF
                 _0x2AE:
                +
001c58 e0e0     +LDI R30 , LOW ( 0x0 )
001c59 e0f0     +LDI R31 , HIGH ( 0x0 )
001c5a e060     +LDI R22 , BYTE3 ( 0x0 )
001c5b e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
                 _0x2AF:
001c5c 91af      	POP  R26
001c5d 91bf      	POP  R27
001c5e 940e 3f3c 	CALL __PUTDP1
                 ;		}
001c60 9622      	ADIW R28,2
001c61 89e8      	LDD  R30,Y+16
001c62 89f9      	LDD  R31,Y+16+1
001c63 9631      	ADIW R30,1
001c64 8be8      	STD  Y+16,R30
001c65 8bf9      	STD  Y+16+1,R31
001c66 cf9f      	RJMP _0x2AC
                 _0x2AD:
                 ;		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
001c67 e0e0      	LDI  R30,LOW(0)
001c68 8be8      	STD  Y+16,R30
001c69 8be9      	STD  Y+16+1,R30
                 ;		if (i) i--;
001c6a 89e8      	LDD  R30,Y+16
001c6b 89f9      	LDD  R31,Y+16+1
001c6c 9730      	SBIW R30,0
001c6d f019      	BREQ _0x2B1
001c6e 9731      	SBIW R30,1
001c6f 8be8      	STD  Y+16,R30
001c70 8bf9      	STD  Y+16+1,R31
                 ;		do {								/* Find an FAT volume */
                 _0x2B1:
                 _0x2B3:
                 ;			bsect = br[i];
001c71 89e8      	LDD  R30,Y+16
001c72 89f9      	LDD  R31,Y+16+1
001c73 01de      	MOVW R26,R28
001c74 940e 3e28 	CALL __LSLW2
001c76 0fae      	ADD  R26,R30
001c77 1fbf      	ADC  R27,R31
001c78 940e 3f31 	CALL __GETD1P
                +
001c7a a7ee     +STD Y + 46 , R30
001c7b a7ff     +STD Y + 46 + 1 , R31
001c7c ab68     +STD Y + 46 + 2 , R22
001c7d ab79     +STD Y + 46 + 3 , R23
                 	__PUTD1S 46
                 ;			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
001c7e 940e 3f71 	CALL __CPD10
001c80 f051      	BREQ _0x2B5
001c81 8de8      	LDD  R30,Y+24
001c82 8df9      	LDD  R31,Y+24+1
001c83 93fa      	ST   -Y,R31
001c84 93ea      	ST   -Y,R30
                +
001c85 a9a8     +LDD R26 , Y + 48
001c86 a9b9     +LDD R27 , Y + 48 + 1
001c87 a98a     +LDD R24 , Y + 48 + 2
001c88 a99b     +LDD R25 , Y + 48 + 3
                 	__GETD2S 48
001c89 de4a      	RCALL _check_fs_G000
001c8a c001      	RJMP _0x2B6
                 _0x2B5:
001c8b e0e2      	LDI  R30,LOW(2)
                 _0x2B6:
001c8c 2f1e      	MOV  R17,R30
                 ;		} while (!LD2PT(vol) && fmt && ++i < 4);
001c8d e0e1      	LDI  R30,LOW(1)
001c8e 30e0      	CPI  R30,0
001c8f f049      	BREQ _0x2B8
001c90 3010      	CPI  R17,0
001c91 f039      	BREQ _0x2B8
001c92 89a8      	LDD  R26,Y+16
001c93 89b9      	LDD  R27,Y+16+1
001c94 9611      	ADIW R26,1
001c95 8ba8      	STD  Y+16,R26
001c96 8bb9      	STD  Y+16+1,R27
001c97 9714      	SBIW R26,4
001c98 f008      	BRLO _0x2B9
                 _0x2B8:
001c99 c001      	RJMP _0x2B4
                 _0x2B9:
001c9a cfd6      	RJMP _0x2B3
                 _0x2B4:
                 ;	}
001c9b 9662      	ADIW R28,18
                 ;	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
                 _0x2A6:
001c9c 3013      	CPI  R17,3
001c9d f411      	BRNE _0x2BA
001c9e e0e1      	LDI  R30,LOW(1)
001c9f c3be      	RJMP _0x20C0014
                 ;	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
                 _0x2BA:
001ca0 3010      	CPI  R17,0
001ca1 f011      	BREQ _0x2BB
001ca2 e0ed      	LDI  R30,LOW(13)
001ca3 c3ba      	RJMP _0x20C0014
                 ;
                 ;	/* An FAT volume is found. Following code initializes the file system object */
                 ;
                 ;	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical sector size) */
                 _0x2BB:
001ca4 81ee      	LDD  R30,Y+6
001ca5 81ff      	LDD  R31,Y+6+1
001ca6 adb2      	LDD  R27,Z+58
001ca7 e0a0      	LDI  R26,LOW(0)
001ca8 ade1      	LDD  R30,Z+57
001ca9 e0f0      	LDI  R31,0
001caa 2bea      	OR   R30,R26
001cab 2bfb      	OR   R31,R27
001cac 30e0      	CPI  R30,LOW(0x200)
001cad e0a2      	LDI  R26,HIGH(0x200)
001cae 07fa      	CPC  R31,R26
001caf f011      	BREQ _0x2BC
                 ;		return FR_NO_FILESYSTEM;
001cb0 e0ed      	LDI  R30,LOW(13)
001cb1 c3ac      	RJMP _0x20C0014
                 ;
                 ;	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
                 _0x2BC:
001cb2 81ee      	LDD  R30,Y+6
001cb3 81ff      	LDD  R31,Y+6+1
001cb4 5beb      	SUBI R30,LOW(-69)
001cb5 4fff      	SBCI R31,HIGH(-69)
001cb6 81f0      	LD   R31,Z
001cb7 e0e0      	LDI  R30,LOW(0)
001cb8 01df      	MOVW R26,R30
001cb9 81ee      	LDD  R30,Y+6
001cba 81ff      	LDD  R31,Y+6+1
001cbb 5bec      	SUBI R30,LOW(-68)
001cbc 4fff      	SBCI R31,HIGH(-68)
001cbd 81e0      	LD   R30,Z
001cbe e0f0      	LDI  R31,0
001cbf 2bea      	OR   R30,R26
001cc0 2bfb      	OR   R31,R27
001cc1 2766      	CLR  R22
001cc2 2777      	CLR  R23
                +
001cc3 8fe8     +STD Y + 24 , R30
001cc4 8ff9     +STD Y + 24 + 1 , R31
001cc5 8f6a     +STD Y + 24 + 2 , R22
001cc6 8f7b     +STD Y + 24 + 3 , R23
                 	__PUTD1S 24
                 ;	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
001cc7 940e 3f71 	CALL __CPD10
001cc9 f5b9      	BRNE _0x2BD
001cca 81ee      	LDD  R30,Y+6
001ccb 81ff      	LDD  R31,Y+6+1
001ccc 5aeb      	SUBI R30,LOW(-85)
001ccd 4fff      	SBCI R31,HIGH(-85)
001cce 81e0      	LD   R30,Z
001ccf e0f0      	LDI  R31,0
001cd0 940e 3e59 	CALL __CWD1
001cd2 01df      	MOVW R26,R30
001cd3 01cb      	MOVW R24,R22
001cd4 e1e8      	LDI  R30,LOW(24)
001cd5 940e 3e0c 	CALL __LSLD12
001cd7 01df      	MOVW R26,R30
001cd8 01cb      	MOVW R24,R22
001cd9 81ee      	LDD  R30,Y+6
001cda 81ff      	LDD  R31,Y+6+1
001cdb 5aec      	SUBI R30,LOW(-84)
001cdc 4fff      	SBCI R31,HIGH(-84)
001cdd 81e0      	LD   R30,Z
001cde e0f0      	LDI  R31,0
001cdf 940e 3e59 	CALL __CWD1
001ce1 940e 3e4e 	CALL __LSLD16
001ce3 940e 3de9 	CALL __ORD12
001ce5 01df      	MOVW R26,R30
001ce6 01cb      	MOVW R24,R22
001ce7 81ee      	LDD  R30,Y+6
001ce8 81ff      	LDD  R31,Y+6+1
001ce9 5aed      	SUBI R30,LOW(-83)
001cea 4fff      	SBCI R31,HIGH(-83)
001ceb 81f0      	LD   R31,Z
001cec e0e0      	LDI  R30,LOW(0)
001ced 2766      	CLR  R22
001cee 2777      	CLR  R23
001cef 940e 3de9 	CALL __ORD12
001cf1 01df      	MOVW R26,R30
001cf2 01cb      	MOVW R24,R22
001cf3 81ee      	LDD  R30,Y+6
001cf4 81ff      	LDD  R31,Y+6+1
001cf5 5aee      	SUBI R30,LOW(-82)
001cf6 4fff      	SBCI R31,HIGH(-82)
001cf7 81e0      	LD   R30,Z
001cf8 27ff      	CLR  R31
001cf9 2766      	CLR  R22
001cfa 2777      	CLR  R23
001cfb 940e 3de9 	CALL __ORD12
                +
001cfd 8fe8     +STD Y + 24 , R30
001cfe 8ff9     +STD Y + 24 + 1 , R31
001cff 8f6a     +STD Y + 24 + 2 , R22
001d00 8f7b     +STD Y + 24 + 3 , R23
                 	__PUTD1S 24
                 ;	fs->fsize = fasize;
                 _0x2BD:
                +
001d01 8de8     +LDD R30 , Y + 24
001d02 8df9     +LDD R31 , Y + 24 + 1
001d03 8d6a     +LDD R22 , Y + 24 + 2
001d04 8d7b     +LDD R23 , Y + 24 + 3
                 	__GETD1S 24
                +
001d05 81ae     +LDD R26 , Y + 6
001d06 81bf     +LDD R27 , Y + 6 + 1
001d07 9656     +ADIW R26 , 22
001d08 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,22
                 ;
                 ;	fs->n_fats = fs->win[BPB_NumFATs];					/* Number of FAT copies */
001d0a 81ee      	LDD  R30,Y+6
001d0b 81ff      	LDD  R31,Y+6+1
001d0c ade6      	LDD  R30,Z+62
                +
001d0d 81ae     +LDD R26 , Y + 6
001d0e 81bf     +LDD R27 , Y + 6 + 1
001d0f 9613     +ADIW R26 , 3
001d10 93ec     +ST X , R30
                 	__PUTB1SNS 6,3
                 ;	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
001d11 81ee      	LDD  R30,Y+6
001d12 81ff      	LDD  R31,Y+6+1
001d13 81a3      	LDD  R26,Z+3
001d14 30a1      	CPI  R26,LOW(0x1)
001d15 f019      	BREQ _0x2BF
001d16 81a3      	LDD  R26,Z+3
001d17 30a2      	CPI  R26,LOW(0x2)
001d18 f409      	BRNE _0x2C0
                 _0x2BF:
001d19 c002      	RJMP _0x2BE
                 _0x2C0:
                 ;		return FR_NO_FILESYSTEM;
001d1a e0ed      	LDI  R30,LOW(13)
001d1b c342      	RJMP _0x20C0014
                 ;	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
                 _0x2BE:
001d1c 81ee      	LDD  R30,Y+6
001d1d 81ff      	LDD  R31,Y+6+1
001d1e 81e3      	LDD  R30,Z+3
001d1f e0f0      	LDI  R31,0
                +
001d20 8da8     +LDD R26 , Y + 24
001d21 8db9     +LDD R27 , Y + 24 + 1
001d22 8d8a     +LDD R24 , Y + 24 + 2
001d23 8d9b     +LDD R25 , Y + 24 + 3
                 	__GETD2S 24
001d24 940e 3e59 	CALL __CWD1
001d26 940e 3e70 	CALL __MULD12U
                +
001d28 8fe8     +STD Y + 24 , R30
001d29 8ff9     +STD Y + 24 + 1 , R31
001d2a 8f6a     +STD Y + 24 + 2 , R22
001d2b 8f7b     +STD Y + 24 + 3 , R23
                 	__PUTD1S 24
                 ;
                 ;	fs->csize = fs->win[BPB_SecPerClus];				/* Number of sectors per cluster */
001d2c 81ee      	LDD  R30,Y+6
001d2d 81ff      	LDD  R31,Y+6+1
001d2e ade3      	LDD  R30,Z+59
                +
001d2f 81ae     +LDD R26 , Y + 6
001d30 81bf     +LDD R27 , Y + 6 + 1
001d31 9612     +ADIW R26 , 2
001d32 93ec     +ST X , R30
                 	__PUTB1SNS 6,2
                 ;	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
001d33 81ee      	LDD  R30,Y+6
001d34 81ff      	LDD  R31,Y+6+1
001d35 81e2      	LDD  R30,Z+2
001d36 30e0      	CPI  R30,0
001d37 f059      	BREQ _0x2C2
001d38 81ee      	LDD  R30,Y+6
001d39 81ff      	LDD  R31,Y+6+1
001d3a 81a2      	LDD  R26,Z+2
001d3b 81e2      	LDD  R30,Z+2
001d3c e0f0      	LDI  R31,0
001d3d 9731      	SBIW R30,1
001d3e e0b0      	LDI  R27,0
001d3f 23ea      	AND  R30,R26
001d40 23fb      	AND  R31,R27
001d41 9730      	SBIW R30,0
001d42 f011      	BREQ _0x2C1
                 _0x2C2:
                 ;		return FR_NO_FILESYSTEM;
001d43 e0ed      	LDI  R30,LOW(13)
001d44 c319      	RJMP _0x20C0014
                 ;
                 ;	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
                 _0x2C1:
001d45 81ee      	LDD  R30,Y+6
001d46 81ff      	LDD  R31,Y+6+1
001d47 5ce0      	SUBI R30,LOW(-64)
001d48 4fff      	SBCI R31,HIGH(-64)
001d49 81f0      	LD   R31,Z
001d4a e0e0      	LDI  R30,LOW(0)
001d4b 01df      	MOVW R26,R30
001d4c 81ee      	LDD  R30,Y+6
001d4d 81ff      	LDD  R31,Y+6+1
001d4e ade7      	LDD  R30,Z+63
001d4f e0f0      	LDI  R31,0
001d50 2bea      	OR   R30,R26
001d51 2bfb      	OR   R31,R27
                +
001d52 81ae     +LDD R26 , Y + 6
001d53 81bf     +LDD R27 , Y + 6 + 1
001d54 9618     +ADIW R26 , 8
001d55 93ed     +ST X + , R30
001d56 93fc     +ST X , R31
                 	__PUTW1SNS 6,8
                 ;	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
001d57 81ee      	LDD  R30,Y+6
001d58 81ff      	LDD  R31,Y+6+1
001d59 85a0      	LDD  R26,Z+8
001d5a 85b1      	LDD  R27,Z+9
001d5b 01fd      	MOVW R30,R26
001d5c 70ef      	ANDI R30,LOW(0xF)
001d5d f011      	BREQ _0x2C4
                 ;		return FR_NO_FILESYSTEM;
001d5e e0ed      	LDI  R30,LOW(13)
001d5f c2fe      	RJMP _0x20C0014
                 ;
                 ;	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
                 _0x2C4:
001d60 81ee      	LDD  R30,Y+6
001d61 81ff      	LDD  R31,Y+6+1
001d62 5bee      	SUBI R30,LOW(-66)
001d63 4fff      	SBCI R31,HIGH(-66)
001d64 81f0      	LD   R31,Z
001d65 e0e0      	LDI  R30,LOW(0)
001d66 01df      	MOVW R26,R30
001d67 81ee      	LDD  R30,Y+6
001d68 81ff      	LDD  R31,Y+6+1
001d69 5bef      	SUBI R30,LOW(-65)
001d6a 4fff      	SBCI R31,HIGH(-65)
001d6b 81e0      	LD   R30,Z
001d6c e0f0      	LDI  R31,0
001d6d 2bea      	OR   R30,R26
001d6e 2bfb      	OR   R31,R27
001d6f 2766      	CLR  R22
001d70 2777      	CLR  R23
                +
001d71 8bec     +STD Y + 20 , R30
001d72 8bfd     +STD Y + 20 + 1 , R31
001d73 8b6e     +STD Y + 20 + 2 , R22
001d74 8b7f     +STD Y + 20 + 3 , R23
                 	__PUTD1S 20
                 ;	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
001d75 940e 3f71 	CALL __CPD10
001d77 f5b9      	BRNE _0x2C5
001d78 81ee      	LDD  R30,Y+6
001d79 81ff      	LDD  R31,Y+6+1
001d7a 5aef      	SUBI R30,LOW(-81)
001d7b 4fff      	SBCI R31,HIGH(-81)
001d7c 81e0      	LD   R30,Z
001d7d e0f0      	LDI  R31,0
001d7e 940e 3e59 	CALL __CWD1
001d80 01df      	MOVW R26,R30
001d81 01cb      	MOVW R24,R22
001d82 e1e8      	LDI  R30,LOW(24)
001d83 940e 3e0c 	CALL __LSLD12
001d85 01df      	MOVW R26,R30
001d86 01cb      	MOVW R24,R22
001d87 81ee      	LDD  R30,Y+6
001d88 81ff      	LDD  R31,Y+6+1
001d89 5be0      	SUBI R30,LOW(-80)
001d8a 4fff      	SBCI R31,HIGH(-80)
001d8b 81e0      	LD   R30,Z
001d8c e0f0      	LDI  R31,0
001d8d 940e 3e59 	CALL __CWD1
001d8f 940e 3e4e 	CALL __LSLD16
001d91 940e 3de9 	CALL __ORD12
001d93 01df      	MOVW R26,R30
001d94 01cb      	MOVW R24,R22
001d95 81ee      	LDD  R30,Y+6
001d96 81ff      	LDD  R31,Y+6+1
001d97 5be1      	SUBI R30,LOW(-79)
001d98 4fff      	SBCI R31,HIGH(-79)
001d99 81f0      	LD   R31,Z
001d9a e0e0      	LDI  R30,LOW(0)
001d9b 2766      	CLR  R22
001d9c 2777      	CLR  R23
001d9d 940e 3de9 	CALL __ORD12
001d9f 01df      	MOVW R26,R30
001da0 01cb      	MOVW R24,R22
001da1 81ee      	LDD  R30,Y+6
001da2 81ff      	LDD  R31,Y+6+1
001da3 5be2      	SUBI R30,LOW(-78)
001da4 4fff      	SBCI R31,HIGH(-78)
001da5 81e0      	LD   R30,Z
001da6 27ff      	CLR  R31
001da7 2766      	CLR  R22
001da8 2777      	CLR  R23
001da9 940e 3de9 	CALL __ORD12
                +
001dab 8bec     +STD Y + 20 , R30
001dac 8bfd     +STD Y + 20 + 1 , R31
001dad 8b6e     +STD Y + 20 + 2 , R22
001dae 8b7f     +STD Y + 20 + 3 , R23
                 	__PUTD1S 20
                 ;
                 ;	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
                 _0x2C5:
001daf 81ee      	LDD  R30,Y+6
001db0 81ff      	LDD  R31,Y+6+1
001db1 adb5      	LDD  R27,Z+61
001db2 e0a0      	LDI  R26,LOW(0)
001db3 ade4      	LDD  R30,Z+60
001db4 e0f0      	LDI  R31,0
001db5 2bea      	OR   R30,R26
001db6 2bfb      	OR   R31,R27
001db7 01af      	MOVW R20,R30
                 ;	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
001db8 2e04      	MOV  R0,R20
001db9 2a05      	OR   R0,R21
001dba f411      	BRNE _0x2C6
001dbb e0ed      	LDI  R30,LOW(13)
001dbc c2a1      	RJMP _0x20C0014
                 ;
                 ;	/* Determine the FAT sub type */
                 ;	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
                 _0x2C6:
                +
001dbd 8de8     +LDD R30 , Y + 24
001dbe 8df9     +LDD R31 , Y + 24 + 1
001dbf 8d6a     +LDD R22 , Y + 24 + 2
001dc0 8d7b     +LDD R23 , Y + 24 + 3
                 	__GETD1S 24
001dc1 01da      	MOVW R26,R20
001dc2 2788      	CLR  R24
001dc3 2799      	CLR  R25
001dc4 940e 3dd0 	CALL __ADDD12
001dc6 937f      	PUSH R23
001dc7 936f      	PUSH R22
001dc8 93ff      	PUSH R31
001dc9 93ef      	PUSH R30
001dca 81ee      	LDD  R30,Y+6
001dcb 81ff      	LDD  R31,Y+6+1
001dcc 85a0      	LDD  R26,Z+8
001dcd 85b1      	LDD  R27,Z+9
001dce 01fd      	MOVW R30,R26
001dcf 940e 3e36 	CALL __LSRW4
001dd1 91af      	POP  R26
001dd2 91bf      	POP  R27
001dd3 918f      	POP  R24
001dd4 919f      	POP  R25
001dd5 2766      	CLR  R22
001dd6 2777      	CLR  R23
001dd7 940e 3dd0 	CALL __ADDD12
                +
001dd9 8be8     +STD Y + 16 , R30
001dda 8bf9     +STD Y + 16 + 1 , R31
001ddb 8b6a     +STD Y + 16 + 2 , R22
001ddc 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ;	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
                +
001ddd 89ac     +LDD R26 , Y + 20
001dde 89bd     +LDD R27 , Y + 20 + 1
001ddf 898e     +LDD R24 , Y + 20 + 2
001de0 899f     +LDD R25 , Y + 20 + 3
                 	__GETD2S 20
001de1 940e 3f84 	CALL __CPD21
001de3 f410      	BRSH _0x2C7
001de4 e0ed      	LDI  R30,LOW(13)
001de5 c278      	RJMP _0x20C0014
                 ;	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
                 _0x2C7:
                +
001de6 89a8     +LDD R26 , Y + 16
001de7 89b9     +LDD R27 , Y + 16 + 1
001de8 898a     +LDD R24 , Y + 16 + 2
001de9 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
                +
001dea 89ec     +LDD R30 , Y + 20
001deb 89fd     +LDD R31 , Y + 20 + 1
001dec 896e     +LDD R22 , Y + 20 + 2
001ded 897f     +LDD R23 , Y + 20 + 3
                 	__GETD1S 20
001dee 940e 3dda 	CALL __SUBD12
001df0 01df      	MOVW R26,R30
001df1 01cb      	MOVW R24,R22
001df2 81ee      	LDD  R30,Y+6
001df3 81ff      	LDD  R31,Y+6+1
001df4 81e2      	LDD  R30,Z+2
001df5 e0f0      	LDI  R31,0
001df6 940e 3e59 	CALL __CWD1
001df8 940e 3ec6 	CALL __DIVD21U
                +
001dfa 87ec     +STD Y + 12 , R30
001dfb 87fd     +STD Y + 12 + 1 , R31
001dfc 876e     +STD Y + 12 + 2 , R22
001dfd 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
001dfe 940e 3f71 	CALL __CPD10
001e00 f411      	BRNE _0x2C8
001e01 e0ed      	LDI  R30,LOW(13)
001e02 c25b      	RJMP _0x20C0014
                 ;	fmt = FS_FAT12;
                 _0x2C8:
001e03 e011      	LDI  R17,LOW(1)
                 ;	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
                +
001e04 85ac     +LDD R26 , Y + 12
001e05 85bd     +LDD R27 , Y + 12 + 1
001e06 858e     +LDD R24 , Y + 12 + 2
001e07 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
001e08 3fa6     +CPI R26 , LOW ( 0xFF6 )
001e09 e0ef     +LDI R30 , HIGH ( 0xFF6 )
001e0a 07be     +CPC R27 , R30
001e0b e0e0     +LDI R30 , BYTE3 ( 0xFF6 )
001e0c 078e     +CPC R24 , R30
001e0d e0e0     +LDI R30 , BYTE4 ( 0xFF6 )
001e0e 079e     +CPC R25 , R30
                 	__CPD2N 0xFF6
001e0f f008      	BRLO _0x2C9
001e10 e012      	LDI  R17,LOW(2)
                 ;	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
                 _0x2C9:
                +
001e11 85ac     +LDD R26 , Y + 12
001e12 85bd     +LDD R27 , Y + 12 + 1
001e13 858e     +LDD R24 , Y + 12 + 2
001e14 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
001e15 3fa6     +CPI R26 , LOW ( 0xFFF6 )
001e16 efef     +LDI R30 , HIGH ( 0xFFF6 )
001e17 07be     +CPC R27 , R30
001e18 e0e0     +LDI R30 , BYTE3 ( 0xFFF6 )
001e19 078e     +CPC R24 , R30
001e1a e0e0     +LDI R30 , BYTE4 ( 0xFFF6 )
001e1b 079e     +CPC R25 , R30
                 	__CPD2N 0xFFF6
001e1c f008      	BRLO _0x2CA
001e1d e013      	LDI  R17,LOW(3)
                 ;
                 ;	/* Boundaries and Limits */
                 ;	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
                 _0x2CA:
                +
001e1e 85ec     +LDD R30 , Y + 12
001e1f 85fd     +LDD R31 , Y + 12 + 1
001e20 856e     +LDD R22 , Y + 12 + 2
001e21 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
001e22 5fee     +SUBI R30 , LOW ( - 2 )
001e23 4fff     +SBCI R31 , HIGH ( - 2 )
001e24 4f6f     +SBCI R22 , BYTE3 ( - 2 )
001e25 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
                +
001e26 81ae     +LDD R26 , Y + 6
001e27 81bf     +LDD R27 , Y + 6 + 1
001e28 9652     +ADIW R26 , 18
001e29 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,18
                 ;	fs->volbase = bsect;								/* Volume start sector */
                +
001e2b 8dec     +LDD R30 , Y + 28
001e2c 8dfd     +LDD R31 , Y + 28 + 1
001e2d 8d6e     +LDD R22 , Y + 28 + 2
001e2e 8d7f     +LDD R23 , Y + 28 + 3
                 	__GETD1S 28
                +
001e2f 81ae     +LDD R26 , Y + 6
001e30 81bf     +LDD R27 , Y + 6 + 1
001e31 965a     +ADIW R26 , 26
001e32 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,26
                 ;	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
001e34 01fa      	MOVW R30,R20
                +
001e35 8dac     +LDD R26 , Y + 28
001e36 8dbd     +LDD R27 , Y + 28 + 1
001e37 8d8e     +LDD R24 , Y + 28 + 2
001e38 8d9f     +LDD R25 , Y + 28 + 3
                 	__GETD2S 28
001e39 2766      	CLR  R22
001e3a 2777      	CLR  R23
001e3b 940e 3dd0 	CALL __ADDD12
                +
001e3d 81ae     +LDD R26 , Y + 6
001e3e 81bf     +LDD R27 , Y + 6 + 1
001e3f 965e     +ADIW R26 , 30
001e40 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,30
                 ;	fs->database = bsect + sysect;						/* Data start sector */
                +
001e42 89e8     +LDD R30 , Y + 16
001e43 89f9     +LDD R31 , Y + 16 + 1
001e44 896a     +LDD R22 , Y + 16 + 2
001e45 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
001e46 8dac     +LDD R26 , Y + 28
001e47 8dbd     +LDD R27 , Y + 28 + 1
001e48 8d8e     +LDD R24 , Y + 28 + 2
001e49 8d9f     +LDD R25 , Y + 28 + 3
                 	__GETD2S 28
001e4a 940e 3dd0 	CALL __ADDD12
                +
001e4c 81ae     +LDD R26 , Y + 6
001e4d 81bf     +LDD R27 , Y + 6 + 1
001e4e 9696     +ADIW R26 , 38
001e4f 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,38
                 ;	if (fmt == FS_FAT32) {
001e51 3013      	CPI  R17,3
001e52 f009      	BREQ PC+2
001e53 c04e      	RJMP _0x2CB
                 ;		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
001e54 81ae      	LDD  R26,Y+6
001e55 81bf      	LDD  R27,Y+6+1
001e56 9618      	ADIW R26,8
001e57 940e 3f2d 	CALL __GETW1P
001e59 9730      	SBIW R30,0
001e5a f011      	BREQ _0x2CC
001e5b e0ed      	LDI  R30,LOW(13)
001e5c c201      	RJMP _0x20C0014
                 ;		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
                 _0x2CC:
001e5d 81ee      	LDD  R30,Y+6
001e5e 81ff      	LDD  R31,Y+6+1
001e5f 5ae3      	SUBI R30,LOW(-93)
001e60 4fff      	SBCI R31,HIGH(-93)
001e61 81e0      	LD   R30,Z
001e62 e0f0      	LDI  R31,0
001e63 940e 3e59 	CALL __CWD1
001e65 01df      	MOVW R26,R30
001e66 01cb      	MOVW R24,R22
001e67 e1e8      	LDI  R30,LOW(24)
001e68 940e 3e0c 	CALL __LSLD12
001e6a 01df      	MOVW R26,R30
001e6b 01cb      	MOVW R24,R22
001e6c 81ee      	LDD  R30,Y+6
001e6d 81ff      	LDD  R31,Y+6+1
001e6e 5ae4      	SUBI R30,LOW(-92)
001e6f 4fff      	SBCI R31,HIGH(-92)
001e70 81e0      	LD   R30,Z
001e71 e0f0      	LDI  R31,0
001e72 940e 3e59 	CALL __CWD1
001e74 940e 3e4e 	CALL __LSLD16
001e76 940e 3de9 	CALL __ORD12
001e78 01df      	MOVW R26,R30
001e79 01cb      	MOVW R24,R22
001e7a 81ee      	LDD  R30,Y+6
001e7b 81ff      	LDD  R31,Y+6+1
001e7c 5ae5      	SUBI R30,LOW(-91)
001e7d 4fff      	SBCI R31,HIGH(-91)
001e7e 81f0      	LD   R31,Z
001e7f e0e0      	LDI  R30,LOW(0)
001e80 2766      	CLR  R22
001e81 2777      	CLR  R23
001e82 940e 3de9 	CALL __ORD12
001e84 01df      	MOVW R26,R30
001e85 01cb      	MOVW R24,R22
001e86 81ee      	LDD  R30,Y+6
001e87 81ff      	LDD  R31,Y+6+1
001e88 5ae6      	SUBI R30,LOW(-90)
001e89 4fff      	SBCI R31,HIGH(-90)
001e8a 81e0      	LD   R30,Z
001e8b 27ff      	CLR  R31
001e8c 2766      	CLR  R22
001e8d 2777      	CLR  R23
001e8e 940e 3de9 	CALL __ORD12
                +
001e90 81ae     +LDD R26 , Y + 6
001e91 81bf     +LDD R27 , Y + 6 + 1
001e92 9692     +ADIW R26 , 34
001e93 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,34
                 ;		szbfat = fs->n_fatent * 4;						/* (Required FAT size) */
001e95 81ee      	LDD  R30,Y+6
001e96 81ff      	LDD  R31,Y+6+1
                +
001e97 89a2     +LDD R26 , Z + 18
001e98 89b3     +LDD R27 , Z + 18 + 1
001e99 8984     +LDD R24 , Z + 18 + 2
001e9a 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
                +
001e9b e0e4     +LDI R30 , LOW ( 0x4 )
001e9c e0f0     +LDI R31 , HIGH ( 0x4 )
001e9d e060     +LDI R22 , BYTE3 ( 0x4 )
001e9e e070     +LDI R23 , BYTE4 ( 0x4 )
                 	__GETD1N 0x4
001e9f 940e 3e70 	CALL __MULD12U
001ea1 c04f      	RJMP _0x4E3
                 ;	} else {
                 _0x2CB:
                 ;		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
001ea2 81ae      	LDD  R26,Y+6
001ea3 81bf      	LDD  R27,Y+6+1
001ea4 9618      	ADIW R26,8
001ea5 940e 3f2d 	CALL __GETW1P
001ea7 9730      	SBIW R30,0
001ea8 f411      	BRNE _0x2CE
001ea9 e0ed      	LDI  R30,LOW(13)
001eaa c1b3      	RJMP _0x20C0014
                 ;		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
                 _0x2CE:
001eab 81ee      	LDD  R30,Y+6
001eac 81ff      	LDD  R31,Y+6+1
                +
001ead 8da6     +LDD R26 , Z + 30
001eae 8db7     +LDD R27 , Z + 30 + 1
001eaf a180     +LDD R24 , Z + 30 + 2
001eb0 a191     +LDD R25 , Z + 30 + 3
                 	__GETD2Z 30
                +
001eb1 8de8     +LDD R30 , Y + 24
001eb2 8df9     +LDD R31 , Y + 24 + 1
001eb3 8d6a     +LDD R22 , Y + 24 + 2
001eb4 8d7b     +LDD R23 , Y + 24 + 3
                 	__GETD1S 24
001eb5 940e 3dd0 	CALL __ADDD12
                +
001eb7 81ae     +LDD R26 , Y + 6
001eb8 81bf     +LDD R27 , Y + 6 + 1
001eb9 9692     +ADIW R26 , 34
001eba 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,34
                 ;		szbfat = (fmt == FS_FAT16) ?					/* (Required FAT size) */
                 ;			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
001ebc 2fa1      	MOV  R26,R17
001ebd e0b0      	LDI  R27,0
001ebe 9712      	SBIW R26,2
001ebf f469      	BRNE _0x2CF
001ec0 81ee      	LDD  R30,Y+6
001ec1 81ff      	LDD  R31,Y+6+1
                +
001ec2 89a2     +LDD R26 , Z + 18
001ec3 89b3     +LDD R27 , Z + 18 + 1
001ec4 8984     +LDD R24 , Z + 18 + 2
001ec5 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
                +
001ec6 e0e2     +LDI R30 , LOW ( 0x2 )
001ec7 e0f0     +LDI R31 , HIGH ( 0x2 )
001ec8 e060     +LDI R22 , BYTE3 ( 0x2 )
001ec9 e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
001eca 940e 3e70 	CALL __MULD12U
001ecc c024      	RJMP _0x2D0
                 _0x2CF:
001ecd 81ee      	LDD  R30,Y+6
001ece 81ff      	LDD  R31,Y+6+1
                +
001ecf 89a2     +LDD R26 , Z + 18
001ed0 89b3     +LDD R27 , Z + 18 + 1
001ed1 8984     +LDD R24 , Z + 18 + 2
001ed2 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
                +
001ed3 e0e3     +LDI R30 , LOW ( 0x3 )
001ed4 e0f0     +LDI R31 , HIGH ( 0x3 )
001ed5 e060     +LDI R22 , BYTE3 ( 0x3 )
001ed6 e070     +LDI R23 , BYTE4 ( 0x3 )
                 	__GETD1N 0x3
001ed7 940e 3e70 	CALL __MULD12U
001ed9 940e 3e3f 	CALL __LSRD1
001edb 937f      	PUSH R23
001edc 936f      	PUSH R22
001edd 93ff      	PUSH R31
001ede 93ef      	PUSH R30
001edf 81ee      	LDD  R30,Y+6
001ee0 81ff      	LDD  R31,Y+6+1
                +
001ee1 89a2     +LDD R26 , Z + 18
001ee2 89b3     +LDD R27 , Z + 18 + 1
001ee3 8984     +LDD R24 , Z + 18 + 2
001ee4 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
                +
001ee5 e0e1     +LDI R30 , LOW ( 0x1 )
001ee6 e0f0     +LDI R31 , HIGH ( 0x1 )
001ee7 e060     +LDI R22 , BYTE3 ( 0x1 )
001ee8 e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
001ee9 940e 3de4 	CALL __ANDD12
001eeb 91af      	POP  R26
001eec 91bf      	POP  R27
001eed 918f      	POP  R24
001eee 919f      	POP  R25
001eef 940e 3dd0 	CALL __ADDD12
                 _0x2D0:
                 _0x4E3:
                +
001ef1 87e8     +STD Y + 8 , R30
001ef2 87f9     +STD Y + 8 + 1 , R31
001ef3 876a     +STD Y + 8 + 2 , R22
001ef4 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ;	}
                 ;	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than required) */
001ef5 81ee      	LDD  R30,Y+6
001ef6 81ff      	LDD  R31,Y+6+1
                +
001ef7 89a6     +LDD R26 , Z + 22
001ef8 89b7     +LDD R27 , Z + 22 + 1
001ef9 8d80     +LDD R24 , Z + 22 + 2
001efa 8d91     +LDD R25 , Z + 22 + 3
                 	__GETD2Z 22
001efb 939f      	PUSH R25
001efc 938f      	PUSH R24
001efd 93bf      	PUSH R27
001efe 93af      	PUSH R26
                +
001eff 85a8     +LDD R26 , Y + 8
001f00 85b9     +LDD R27 , Y + 8 + 1
001f01 858a     +LDD R24 , Y + 8 + 2
001f02 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
                +
001f03 50a1     +SUBI R26 , LOW ( - 511 )
001f04 4fbe     +SBCI R27 , HIGH ( - 511 )
001f05 4f8f     +SBCI R24 , BYTE3 ( - 511 )
001f06 4f9f     +SBCI R25 , BYTE4 ( - 511 )
                 	__ADDD2N 511
                +
001f07 e0e0     +LDI R30 , LOW ( 0x200 )
001f08 e0f2     +LDI R31 , HIGH ( 0x200 )
001f09 e060     +LDI R22 , BYTE3 ( 0x200 )
001f0a e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
001f0b 940e 3ec6 	CALL __DIVD21U
001f0d 91af      	POP  R26
001f0e 91bf      	POP  R27
001f0f 918f      	POP  R24
001f10 919f      	POP  R25
001f11 940e 3f84 	CALL __CPD21
001f13 f410      	BRSH _0x2D2
                 ;		return FR_NO_FILESYSTEM;
001f14 e0ed      	LDI  R30,LOW(13)
001f15 c148      	RJMP _0x20C0014
                 ;
                 ;#if !_FS_READONLY
                 ;	/* Initialize cluster allocation information */
                 ;	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
                 _0x2D2:
001f16 81ae      	LDD  R26,Y+6
001f17 81bf      	LDD  R27,Y+6+1
001f18 961e      	ADIW R26,14
                +
001f19 efef     +LDI R30 , LOW ( 0xFFFFFFFF )
001f1a efff     +LDI R31 , HIGH ( 0xFFFFFFFF )
001f1b ef6f     +LDI R22 , BYTE3 ( 0xFFFFFFFF )
001f1c ef7f     +LDI R23 , BYTE4 ( 0xFFFFFFFF )
                 	__GETD1N 0xFFFFFFFF
001f1d 940e 3f3c 	CALL __PUTDP1
                +
001f1f 81ae     +LDD R26 , Y + 6
001f20 81bf     +LDD R27 , Y + 6 + 1
001f21 961a     +ADIW R26 , 10
001f22 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,10
                 ;
                 ;	/* Get fsinfo if available */
                 ;	fs->fsi_flag = 0x80;
001f24 81ae      	LDD  R26,Y+6
001f25 81bf      	LDD  R27,Y+6+1
001f26 9615      	ADIW R26,5
001f27 e8e0      	LDI  R30,LOW(128)
001f28 93ec      	ST   X,R30
                 ;	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
                 ;		&& LD_WORD(fs->win+BPB_FSInfo) == 1
                 ;		&& move_window(fs, bsect + 1) == FR_OK)
001f29 3013      	CPI  R17,3
001f2a f509      	BRNE _0x2D4
001f2b 81ee      	LDD  R30,Y+6
001f2c 81ff      	LDD  R31,Y+6+1
001f2d 5ae1      	SUBI R30,LOW(-95)
001f2e 4fff      	SBCI R31,HIGH(-95)
001f2f 81f0      	LD   R31,Z
001f30 e0e0      	LDI  R30,LOW(0)
001f31 01df      	MOVW R26,R30
001f32 81ee      	LDD  R30,Y+6
001f33 81ff      	LDD  R31,Y+6+1
001f34 5ae2      	SUBI R30,LOW(-94)
001f35 4fff      	SBCI R31,HIGH(-94)
001f36 81e0      	LD   R30,Z
001f37 e0f0      	LDI  R31,0
001f38 2bea      	OR   R30,R26
001f39 2bfb      	OR   R31,R27
001f3a 9731      	SBIW R30,1
001f3b f481      	BRNE _0x2D4
001f3c 81ee      	LDD  R30,Y+6
001f3d 81ff      	LDD  R31,Y+6+1
001f3e 93fa      	ST   -Y,R31
001f3f 93ea      	ST   -Y,R30
                +
001f40 8dae     +LDD R26 , Y + 30
001f41 8dbf     +LDD R27 , Y + 30 + 1
001f42 a188     +LDD R24 , Y + 30 + 2
001f43 a199     +LDD R25 , Y + 30 + 3
                 	__GETD2S 30
                +
001f44 5faf     +SUBI R26 , LOW ( - 1 )
001f45 4fbf     +SBCI R27 , HIGH ( - 1 )
001f46 4f8f     +SBCI R24 , BYTE3 ( - 1 )
001f47 4f9f     +SBCI R25 , BYTE4 ( - 1 )
                 	__ADDD2N 1
001f48 940e 0e73 	CALL _move_window_G000
001f4a 30e0      	CPI  R30,0
001f4b f009      	BREQ _0x2D5
                 _0x2D4:
001f4c c101      	RJMP _0x2D3
                 _0x2D5:
                 ;	{
                 ;		fs->fsi_flag = 0;
001f4d 81ae      	LDD  R26,Y+6
001f4e 81bf      	LDD  R27,Y+6+1
001f4f 9615      	ADIW R26,5
001f50 e0e0      	LDI  R30,LOW(0)
001f51 93ec      	ST   X,R30
                 ;		if (LD_WORD(fs->win+BS_55AA) == 0xAA55	/* Load FSINFO data if available */
                 ;			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
                 ;			&& LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272)
001f52 81ee      	LDD  R30,Y+6
001f53 81ff      	LDD  R31,Y+6+1
001f54 96be      	ADIW R30,46
001f55 010f      	MOVW R0,R30
001f56 50e1      	SUBI R30,LOW(-511)
001f57 4ffe      	SBCI R31,HIGH(-511)
001f58 81f0      	LD   R31,Z
001f59 e0e0      	LDI  R30,LOW(0)
001f5a 01df      	MOVW R26,R30
001f5b 01f0      	MOVW R30,R0
001f5c 50e2      	SUBI R30,LOW(-510)
001f5d 4ffe      	SBCI R31,HIGH(-510)
001f5e 81e0      	LD   R30,Z
001f5f e0f0      	LDI  R31,0
001f60 2bea      	OR   R30,R26
001f61 2bfb      	OR   R31,R27
001f62 35e5      	CPI  R30,LOW(0xAA55)
001f63 eaaa      	LDI  R26,HIGH(0xAA55)
001f64 07fa      	CPC  R31,R26
001f65 f009      	BREQ PC+2
001f66 c06e      	RJMP _0x2D7
001f67 81ee      	LDD  R30,Y+6
001f68 81ff      	LDD  R31,Y+6+1
001f69 a9a1      	LDD  R26,Z+49
001f6a 27bb      	CLR  R27
001f6b 2788      	CLR  R24
001f6c 2799      	CLR  R25
001f6d e1e8      	LDI  R30,LOW(24)
001f6e 940e 3e0c 	CALL __LSLD12
001f70 01df      	MOVW R26,R30
001f71 01cb      	MOVW R24,R22
001f72 81ee      	LDD  R30,Y+6
001f73 81ff      	LDD  R31,Y+6+1
001f74 a9e0      	LDD  R30,Z+48
001f75 e0f0      	LDI  R31,0
001f76 940e 3e59 	CALL __CWD1
001f78 940e 3e4e 	CALL __LSLD16
001f7a 940e 3de9 	CALL __ORD12
001f7c 01df      	MOVW R26,R30
001f7d 01cb      	MOVW R24,R22
001f7e 81ee      	LDD  R30,Y+6
001f7f 81ff      	LDD  R31,Y+6+1
001f80 a5f7      	LDD  R31,Z+47
001f81 e0e0      	LDI  R30,LOW(0)
001f82 2766      	CLR  R22
001f83 2777      	CLR  R23
001f84 940e 3de9 	CALL __ORD12
001f86 01df      	MOVW R26,R30
001f87 01cb      	MOVW R24,R22
001f88 81ee      	LDD  R30,Y+6
001f89 81ff      	LDD  R31,Y+6+1
001f8a a5e6      	LDD  R30,Z+46
001f8b 27ff      	CLR  R31
001f8c 2766      	CLR  R22
001f8d 2777      	CLR  R23
001f8e 940e 3de9 	CALL __ORD12
                +
001f90 35e2     +CPI R30 , LOW ( 0x41615252 )
001f91 e5a2     +LDI R26 , HIGH ( 0x41615252 )
001f92 07fa     +CPC R31 , R26
001f93 e6a1     +LDI R26 , BYTE3 ( 0x41615252 )
001f94 076a     +CPC R22 , R26
001f95 e4a1     +LDI R26 , BYTE4 ( 0x41615252 )
001f96 077a     +CPC R23 , R26
                 	__CPD1N 0x41615252
001f97 f5e9      	BRNE _0x2D7
001f98 81ee      	LDD  R30,Y+6
001f99 81ff      	LDD  R31,Y+6+1
001f9a 96be      	ADIW R30,46
001f9b 51e9      	SUBI R30,LOW(-487)
001f9c 4ffe      	SBCI R31,HIGH(-487)
001f9d 81a0      	LD   R26,Z
001f9e 27bb      	CLR  R27
001f9f 2788      	CLR  R24
001fa0 2799      	CLR  R25
001fa1 e1e8      	LDI  R30,LOW(24)
001fa2 940e 3e0c 	CALL __LSLD12
001fa4 01df      	MOVW R26,R30
001fa5 01cb      	MOVW R24,R22
001fa6 81ee      	LDD  R30,Y+6
001fa7 81ff      	LDD  R31,Y+6+1
001fa8 96be      	ADIW R30,46
001fa9 51ea      	SUBI R30,LOW(-486)
001faa 4ffe      	SBCI R31,HIGH(-486)
001fab 81e0      	LD   R30,Z
001fac e0f0      	LDI  R31,0
001fad 940e 3e59 	CALL __CWD1
001faf 940e 3e4e 	CALL __LSLD16
001fb1 940e 3de9 	CALL __ORD12
001fb3 01df      	MOVW R26,R30
001fb4 01cb      	MOVW R24,R22
001fb5 81ee      	LDD  R30,Y+6
001fb6 81ff      	LDD  R31,Y+6+1
001fb7 96be      	ADIW R30,46
001fb8 51eb      	SUBI R30,LOW(-485)
001fb9 4ffe      	SBCI R31,HIGH(-485)
001fba 81f0      	LD   R31,Z
001fbb e0e0      	LDI  R30,LOW(0)
001fbc 2766      	CLR  R22
001fbd 2777      	CLR  R23
001fbe 940e 3de9 	CALL __ORD12
001fc0 01df      	MOVW R26,R30
001fc1 01cb      	MOVW R24,R22
001fc2 81ee      	LDD  R30,Y+6
001fc3 81ff      	LDD  R31,Y+6+1
001fc4 96be      	ADIW R30,46
001fc5 51ec      	SUBI R30,LOW(-484)
001fc6 4ffe      	SBCI R31,HIGH(-484)
001fc7 81e0      	LD   R30,Z
001fc8 27ff      	CLR  R31
001fc9 2766      	CLR  R22
001fca 2777      	CLR  R23
001fcb 940e 3de9 	CALL __ORD12
                +
001fcd 37e2     +CPI R30 , LOW ( 0x61417272 )
001fce e7a2     +LDI R26 , HIGH ( 0x61417272 )
001fcf 07fa     +CPC R31 , R26
001fd0 e4a1     +LDI R26 , BYTE3 ( 0x61417272 )
001fd1 076a     +CPC R22 , R26
001fd2 e6a1     +LDI R26 , BYTE4 ( 0x61417272 )
001fd3 077a     +CPC R23 , R26
                 	__CPD1N 0x61417272
001fd4 f009      	BREQ _0x2D8
                 _0x2D7:
001fd5 c078      	RJMP _0x2D6
                 _0x2D8:
                 ;		{
                 ;#if !_FS_NOFSINFO
                 ;			fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
001fd6 81ee      	LDD  R30,Y+6
001fd7 81ff      	LDD  R31,Y+6+1
001fd8 96be      	ADIW R30,46
001fd9 51e5      	SUBI R30,LOW(-491)
001fda 4ffe      	SBCI R31,HIGH(-491)
001fdb 81e0      	LD   R30,Z
001fdc e0f0      	LDI  R31,0
001fdd 940e 3e59 	CALL __CWD1
001fdf 01df      	MOVW R26,R30
001fe0 01cb      	MOVW R24,R22
001fe1 e1e8      	LDI  R30,LOW(24)
001fe2 940e 3e0c 	CALL __LSLD12
001fe4 01df      	MOVW R26,R30
001fe5 01cb      	MOVW R24,R22
001fe6 81ee      	LDD  R30,Y+6
001fe7 81ff      	LDD  R31,Y+6+1
001fe8 96be      	ADIW R30,46
001fe9 51e6      	SUBI R30,LOW(-490)
001fea 4ffe      	SBCI R31,HIGH(-490)
001feb 81e0      	LD   R30,Z
001fec e0f0      	LDI  R31,0
001fed 940e 3e59 	CALL __CWD1
001fef 940e 3e4e 	CALL __LSLD16
001ff1 940e 3de9 	CALL __ORD12
001ff3 01df      	MOVW R26,R30
001ff4 01cb      	MOVW R24,R22
001ff5 81ee      	LDD  R30,Y+6
001ff6 81ff      	LDD  R31,Y+6+1
001ff7 96be      	ADIW R30,46
001ff8 51e7      	SUBI R30,LOW(-489)
001ff9 4ffe      	SBCI R31,HIGH(-489)
001ffa 81f0      	LD   R31,Z
001ffb e0e0      	LDI  R30,LOW(0)
001ffc 2766      	CLR  R22
001ffd 2777      	CLR  R23
001ffe 940e 3de9 	CALL __ORD12
002000 01df      	MOVW R26,R30
002001 01cb      	MOVW R24,R22
002002 81ee      	LDD  R30,Y+6
002003 81ff      	LDD  R31,Y+6+1
002004 96be      	ADIW R30,46
002005 51e8      	SUBI R30,LOW(-488)
002006 4ffe      	SBCI R31,HIGH(-488)
002007 81e0      	LD   R30,Z
002008 27ff      	CLR  R31
002009 2766      	CLR  R22
00200a 2777      	CLR  R23
00200b 940e 3de9 	CALL __ORD12
                +
00200d 81ae     +LDD R26 , Y + 6
00200e 81bf     +LDD R27 , Y + 6 + 1
00200f 961e     +ADIW R26 , 14
002010 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,14
                 ;#endif
                 ;			fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
002012 81ee      	LDD  R30,Y+6
002013 81ff      	LDD  R31,Y+6+1
002014 96be      	ADIW R30,46
002015 51e1      	SUBI R30,LOW(-495)
002016 4ffe      	SBCI R31,HIGH(-495)
002017 81e0      	LD   R30,Z
002018 e0f0      	LDI  R31,0
002019 940e 3e59 	CALL __CWD1
00201b 01df      	MOVW R26,R30
00201c 01cb      	MOVW R24,R22
00201d e1e8      	LDI  R30,LOW(24)
00201e 940e 3e0c 	CALL __LSLD12
002020 01df      	MOVW R26,R30
002021 01cb      	MOVW R24,R22
002022 81ee      	LDD  R30,Y+6
002023 81ff      	LDD  R31,Y+6+1
002024 96be      	ADIW R30,46
002025 51e2      	SUBI R30,LOW(-494)
002026 4ffe      	SBCI R31,HIGH(-494)
002027 81e0      	LD   R30,Z
002028 e0f0      	LDI  R31,0
002029 940e 3e59 	CALL __CWD1
00202b 940e 3e4e 	CALL __LSLD16
00202d 940e 3de9 	CALL __ORD12
00202f 01df      	MOVW R26,R30
002030 01cb      	MOVW R24,R22
002031 81ee      	LDD  R30,Y+6
002032 81ff      	LDD  R31,Y+6+1
002033 96be      	ADIW R30,46
002034 51e3      	SUBI R30,LOW(-493)
002035 4ffe      	SBCI R31,HIGH(-493)
002036 81f0      	LD   R31,Z
002037 e0e0      	LDI  R30,LOW(0)
002038 2766      	CLR  R22
002039 2777      	CLR  R23
00203a 940e 3de9 	CALL __ORD12
00203c 01df      	MOVW R26,R30
00203d 01cb      	MOVW R24,R22
00203e 81ee      	LDD  R30,Y+6
00203f 81ff      	LDD  R31,Y+6+1
002040 96be      	ADIW R30,46
002041 51e4      	SUBI R30,LOW(-492)
002042 4ffe      	SBCI R31,HIGH(-492)
002043 81e0      	LD   R30,Z
002044 27ff      	CLR  R31
002045 2766      	CLR  R22
002046 2777      	CLR  R23
002047 940e 3de9 	CALL __ORD12
                +
002049 81ae     +LDD R26 , Y + 6
00204a 81bf     +LDD R27 , Y + 6 + 1
00204b 961a     +ADIW R26 , 10
00204c 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 6,10
                 ;		}
                 ;	}
                 _0x2D6:
                 ;#endif
                 ;	fs->fs_type = fmt;	/* FAT sub-type */
                 _0x2D3:
00204e 81ae      	LDD  R26,Y+6
00204f 81bf      	LDD  R27,Y+6+1
002050 931c      	ST   X,R17
                 ;	fs->id = ++Fsid;	/* File system mount ID */
002051 eea8      	LDI  R26,LOW(_Fsid_G000)
002052 e0b6      	LDI  R27,HIGH(_Fsid_G000)
002053 91ed      	LD   R30,X+
002054 91fd      	LD   R31,X+
002055 9631      	ADIW R30,1
002056 93fe      	ST   -X,R31
002057 93ee      	ST   -X,R30
                +
002058 81ae     +LDD R26 , Y + 6
002059 81bf     +LDD R27 , Y + 6 + 1
00205a 9616     +ADIW R26 , 6
00205b 93ed     +ST X + , R30
00205c 93fc     +ST X , R31
                 	__PUTW1SNS 6,6
                 ;#if _FS_RPATH
                 ;	fs->cdir = 0;		/* Current directory (root dir) */
                 ;#endif
                 ;#if _FS_LOCK			/* Clear file lock semaphores */
                 ;	clear_lock(fs);
                 ;#endif
                 ;
                 ;	return FR_OK;
                 _0x20C0015:
00205d e0e0      	LDI  R30,LOW(0)
                 _0x20C0014:
00205e 940e 3f90 	CALL __LOADLOCR6
002060 96a5      	ADIW R28,37
002061 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Check if the file/directory object is valid or not                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
                 ;	void* obj		/* Pointer to the object FIL/DIR to check validity */
                 ;)
                 ;{
                 _validate_G000:
                 ; .FSTART _validate_G000
                 ;	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
                 ;
                 ;
                 ;	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id)
002062 93ba      	ST   -Y,R27
002063 93aa      	ST   -Y,R26
002064 931a      	ST   -Y,R17
002065 930a      	ST   -Y,R16
                 ;	*obj -> Y+2
                 ;	*fil -> R16,R17
                +
002066 810a     +LDD R16 , Y + 2
002067 811b     +LDD R17 , Y + 2 + 1
                 	__GETWRS 16,17,2
002068 2e00      	MOV  R0,R16
002069 2a01      	OR   R0,R17
00206a f0a1      	BREQ _0x2DA
00206b 01d8      	MOVW R26,R16
00206c 940e 3f2d 	CALL __GETW1P
00206e 9730      	SBIW R30,0
00206f f079      	BREQ _0x2DA
002070 940e 3f2d 	CALL __GETW1P
002072 81e0      	LD   R30,Z
002073 30e0      	CPI  R30,0
002074 f051      	BREQ _0x2DA
002075 940e 3f2d 	CALL __GETW1P
                +
002077 8006     +LDD R0 , Z + 6
002078 8017     +LDD R1 , Z + 6 + 1
                 	__GETWRZ 0,1,6
002079 9612      	ADIW R26,2
00207a 940e 3f2d 	CALL __GETW1P
00207c 15e0      	CP   R30,R0
00207d 05f1      	CPC  R31,R1
00207e f011      	BREQ _0x2D9
                 _0x2DA:
                 ;		return FR_INVALID_OBJECT;
00207f e0e9      	LDI  R30,LOW(9)
002080 c00b      	RJMP _0x20C0013
                 ;
                 ;	ENTER_FF(fil->fs);		/* Lock file system */
                 ;
                 ;	if (disk_status(fil->fs->drv) & STA_NOINIT)
                 _0x2D9:
002081 01d8      	MOVW R26,R16
002082 940e 3f2d 	CALL __GETW1P
002084 81a1      	LDD  R26,Z+1
002085 940e 09ed 	CALL _disk_status
002087 70e1      	ANDI R30,LOW(0x1)
002088 f011      	BREQ _0x2DC
                 ;		return FR_NOT_READY;
002089 e0e3      	LDI  R30,LOW(3)
00208a c001      	RJMP _0x20C0013
                 ;
                 ;	return FR_OK;
                 _0x2DC:
00208b e0e0      	LDI  R30,LOW(0)
                 _0x20C0013:
00208c 8119      	LDD  R17,Y+1
00208d 8108      	LDD  R16,Y+0
00208e 9624      	ADIW R28,4
00208f 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Public Functions
                 ;
                 ;--------------------------------------------------------------------------*/
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Mount/Unmount a Logical Drive                                         */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_mount (
                 ;	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
                 ;	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
                 ;	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
                 ;)
                 ;{
                 _f_mount:
                 ; .FSTART _f_mount
                 ;	FATFS *cfs;
                 ;	int vol;
                 ;	FRESULT res;
                 ;   //init_spi(1);
                 ;
                 ;	vol = get_ldnumber(&path);
002090 93aa      	ST   -Y,R26
002091 940e 3f89 	CALL __SAVELOCR6
                 ;	*fs -> Y+9
                 ;	*path -> Y+7
                 ;	opt -> Y+6
                 ;	*cfs -> R16,R17
                 ;	vol -> R18,R19
                 ;	res -> R21
002093 01de      	MOVW R26,R28
002094 9617      	ADIW R26,7
002095 d98a      	RCALL _get_ldnumber_G000
002096 019f      	MOVW R18,R30
                 ;	if (vol < 0) return FR_INVALID_DRIVE;
002097 2333      	TST  R19
002098 f412      	BRPL _0x2DD
002099 e0eb      	LDI  R30,LOW(11)
00209a c036      	RJMP _0x20C0012
                 ;	cfs = FatFs[vol];					/* Pointer to fs object */
                 _0x2DD:
00209b 01f9      	MOVW R30,R18
00209c eea6      	LDI  R26,LOW(_FatFs_G000)
00209d e0b6      	LDI  R27,HIGH(_FatFs_G000)
00209e 0fee      	LSL  R30
00209f 1fff      	ROL  R31
0020a0 0fae      	ADD  R26,R30
0020a1 1fbf      	ADC  R27,R31
0020a2 910d      	LD   R16,X+
0020a3 911c      	LD   R17,X
                 ;
                 ;	if (cfs) {
0020a4 2e00      	MOV  R0,R16
0020a5 2a01      	OR   R0,R17
0020a6 f019      	BREQ _0x2DE
                 ;#if _FS_LOCK
                 ;		clear_lock(cfs);
                 ;#endif
                 ;#if _FS_REENTRANT						/* Discard sync object of the current volume */
                 ;		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
                 ;#endif
                 ;		cfs->fs_type = 0;				/* Clear old fs object */
0020a7 01d8      	MOVW R26,R16
0020a8 e0e0      	LDI  R30,LOW(0)
0020a9 93ec      	ST   X,R30
                 ;	}
                 ;
                 ;	if (fs) {
                 _0x2DE:
0020aa 85e9      	LDD  R30,Y+9
0020ab 85fa      	LDD  R31,Y+9+1
0020ac 9730      	SBIW R30,0
0020ad f021      	BREQ _0x2DF
                 ;		fs->fs_type = 0;				/* Clear new fs object */
0020ae 85a9      	LDD  R26,Y+9
0020af 85ba      	LDD  R27,Y+9+1
0020b0 e0e0      	LDI  R30,LOW(0)
0020b1 93ec      	ST   X,R30
                 ;#if _FS_REENTRANT						/* Create sync object for the new volume */
                 ;		if (!ff_cre_syncobj(vol, &fs->sobj)) return FR_INT_ERR;
                 ;#endif
                 ;	}
                 ;	FatFs[vol] = fs;					/* Register new fs object */
                 _0x2DF:
0020b2 01f9      	MOVW R30,R18
0020b3 eea6      	LDI  R26,LOW(_FatFs_G000)
0020b4 e0b6      	LDI  R27,HIGH(_FatFs_G000)
0020b5 0fee      	LSL  R30
0020b6 1fff      	ROL  R31
0020b7 0fea      	ADD  R30,R26
0020b8 1ffb      	ADC  R31,R27
0020b9 85a9      	LDD  R26,Y+9
0020ba 85ba      	LDD  R27,Y+9+1
0020bb 83a0      	STD  Z+0,R26
0020bc 83b1      	STD  Z+1,R27
                 ;
                 ;	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
0020bd 85e9      	LDD  R30,Y+9
0020be 85fa      	LDD  R31,Y+9+1
0020bf 9730      	SBIW R30,0
0020c0 f019      	BREQ _0x2E1
0020c1 81ae      	LDD  R26,Y+6
0020c2 30a1      	CPI  R26,LOW(0x1)
0020c3 f011      	BREQ _0x2E0
                 _0x2E1:
0020c4 e0e0      	LDI  R30,LOW(0)
0020c5 c00b      	RJMP _0x20C0012
                 ;
                 ;	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
                 _0x2E0:
0020c6 01fe      	MOVW R30,R28
0020c7 9639      	ADIW R30,9
0020c8 93fa      	ST   -Y,R31
0020c9 93ea      	ST   -Y,R30
0020ca 01fe      	MOVW R30,R28
0020cb 9639      	ADIW R30,9
0020cc 93fa      	ST   -Y,R31
0020cd 93ea      	ST   -Y,R30
0020ce e0a0      	LDI  R26,LOW(0)
0020cf dabd      	RCALL _find_volume_G000
0020d0 2f5e      	MOV  R21,R30
                 ;   // release_spi();
                 ;	LEAVE_FF(fs, res);
                 _0x20C0012:
0020d1 940e 3f90 	CALL __LOADLOCR6
0020d3 962b      	ADIW R28,11
0020d4 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Open or Create a File                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_open (
                 ;	FIL* fp,			/* Pointer to the blank file object */
                 ;	const TCHAR* path,	/* Pointer to the file name */
                 ;	BYTE mode			/* Access mode and file open mode flags */
                 ;)
                 ;{
                 _f_open:
                 ; .FSTART _f_open
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	BYTE *dir;
                 ;	DEF_NAMEBUF;
                 ;    //init_spi(1);
                 ;
                 ;	if (!fp) return FR_INVALID_OBJECT;
0020d5 93aa      	ST   -Y,R26
0020d6 97a2      	SBIW R28,34
0020d7 940e 3f8b 	CALL __SAVELOCR4
                 ;	*fp -> Y+41
                 ;	*path -> Y+39
                 ;	mode -> Y+38
                 ;	res -> R17
                 ;	dj -> Y+16
                 ;	*dir -> R18,R19
                 ;	sfn -> Y+4
0020d9 a5e9      	LDD  R30,Y+41
0020da a5fa      	LDD  R31,Y+41+1
0020db 9730      	SBIW R30,0
0020dc f411      	BRNE _0x2E3
0020dd e0e9      	LDI  R30,LOW(9)
0020de c15b      	RJMP _0x20C0011
                 ;	fp->fs = 0;			/* Clear file object */
                 _0x2E3:
0020df a5a9      	LDD  R26,Y+41
0020e0 a5ba      	LDD  R27,Y+41+1
0020e1 e0e0      	LDI  R30,LOW(0)
0020e2 e0f0      	LDI  R31,HIGH(0)
0020e3 93ed      	ST   X+,R30
0020e4 93fc      	ST   X,R31
                 ;
                 ;	/* Get logical drive number */
                 ;#if !_FS_READONLY
                 ;	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
0020e5 a1ee      	LDD  R30,Y+38
0020e6 71ef      	ANDI R30,LOW(0x1F)
0020e7 a3ee      	STD  Y+38,R30
                 ;	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
0020e8 01fe      	MOVW R30,R28
0020e9 9670      	ADIW R30,16
0020ea 93fa      	ST   -Y,R31
0020eb 93ea      	ST   -Y,R30
0020ec 01fe      	MOVW R30,R28
0020ed 96b9      	ADIW R30,41
0020ee 93fa      	ST   -Y,R31
0020ef 93ea      	ST   -Y,R30
0020f0 a5ea      	LDD  R30,Y+42
0020f1 7fee      	ANDI R30,0xFE
0020f2 2fae      	MOV  R26,R30
0020f3 da99      	RCALL _find_volume_G000
0020f4 2f1e      	MOV  R17,R30
                 ;#else
                 ;	mode &= FA_READ;
                 ;	res = find_volume(&dj.fs, &path, 0);
                 ;#endif
                 ;	if (res == FR_OK) {
0020f5 3010      	CPI  R17,0
0020f6 f009      	BREQ PC+2
0020f7 c141      	RJMP _0x2E4
                 ;		INIT_BUF(dj);
0020f8 01fe      	MOVW R30,R28
0020f9 9634      	ADIW R30,4
0020fa a3ec      	STD  Y+36,R30
0020fb a3fd      	STD  Y+36+1,R31
                 ;		res = follow_path(&dj, path);	/* Follow the file path */
0020fc 01fe      	MOVW R30,R28
0020fd 9670      	ADIW R30,16
0020fe 93fa      	ST   -Y,R31
0020ff 93ea      	ST   -Y,R30
002100 a5a9      	LDD  R26,Y+41
002101 a5ba      	LDD  R27,Y+41+1
002102 d94b      	RCALL _follow_path_G000
002103 2f1e      	MOV  R17,R30
                 ;		dir = dj.dir;
                +
002104 a12a     +LDD R18 , Y + 34
002105 a13b     +LDD R19 , Y + 34 + 1
                 	__GETWRS 18,19,34
                 ;#if !_FS_READONLY	/* R/W configuration */
                 ;		if (res == FR_OK) {
002106 3010      	CPI  R17,0
002107 f421      	BRNE _0x2E5
                 ;			if (!dir)	/* Default directory itself */
002108 2e02      	MOV  R0,R18
002109 2a03      	OR   R0,R19
00210a f409      	BRNE _0x2E6
                 ;				res = FR_INVALID_NAME;
00210b e016      	LDI  R17,LOW(6)
                 ;#if _FS_LOCK
                 ;			else
                 ;				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
                 ;#endif
                 ;		}
                 _0x2E6:
                 ;		/* Create or Open a file */
                 ;		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
                 _0x2E5:
00210c a1ee      	LDD  R30,Y+38
00210d 71ec      	ANDI R30,LOW(0x1C)
00210e f409      	BRNE PC+2
00210f c09a      	RJMP _0x2E7
                 ;			DWORD dw, cl;
                 ;
                 ;			if (res != FR_OK) {					/* No file, create new */
002110 9728      	SBIW R28,8
                 ;	*fp -> Y+49
                 ;	*path -> Y+47
                 ;	mode -> Y+46
                 ;	dj -> Y+24
                 ;	sfn -> Y+12
                 ;	dw -> Y+4
                 ;	cl -> Y+0
002111 3010      	CPI  R17,0
002112 f069      	BREQ _0x2E8
                 ;				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
002113 3014      	CPI  R17,4
002114 f429      	BRNE _0x2E9
                 ;#if _FS_LOCK
                 ;					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
                 ;#else
                 ;					res = dir_register(&dj);
002115 01de      	MOVW R26,R28
002116 9658      	ADIW R26,24
002117 940e 184f 	CALL _dir_register_G000
002119 2f1e      	MOV  R17,R30
                 ;#endif
                 ;				mode |= FA_CREATE_ALWAYS;		/* File is created */
                 _0x2E9:
00211a a5ee      	LDD  R30,Y+46
00211b 60e8      	ORI  R30,8
00211c a7ee      	STD  Y+46,R30
                 ;				dir = dj.dir;					/* New entry */
                +
00211d a52a     +LDD R18 , Y + 42
00211e a53b     +LDD R19 , Y + 42 + 1
                 	__GETWRS 18,19,42
                 ;			}
                 ;			else {								/* Any object is already existing */
00211f c00a      	RJMP _0x2EA
                 _0x2E8:
                 ;				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
002120 01f9      	MOVW R30,R18
002121 85e3      	LDD  R30,Z+11
002122 71e1      	ANDI R30,LOW(0x11)
002123 f011      	BREQ _0x2EB
                 ;					res = FR_DENIED;
002124 e017      	LDI  R17,LOW(7)
                 ;				} else {
002125 c004      	RJMP _0x2EC
                 _0x2EB:
                 ;					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
002126 a5ee      	LDD  R30,Y+46
002127 70e4      	ANDI R30,LOW(0x4)
002128 f009      	BREQ _0x2ED
                 ;						res = FR_EXIST;
002129 e018      	LDI  R17,LOW(8)
                 ;				}
                 _0x2ED:
                 _0x2EC:
                 ;			}
                 _0x2EA:
                 ;			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
00212a 3010      	CPI  R17,0
00212b f419      	BRNE _0x2EF
00212c a5ee      	LDD  R30,Y+46
00212d 70e8      	ANDI R30,LOW(0x8)
00212e f409      	BRNE _0x2F0
                 _0x2EF:
00212f c078      	RJMP _0x2EE
                 _0x2F0:
                 ;				dw = get_fattime();				/* Created time */
002130 940e 2d49 	CALL _get_fattime
                +
002132 83ec     +STD Y + 4 , R30
002133 83fd     +STD Y + 4 + 1 , R31
002134 836e     +STD Y + 4 + 2 , R22
002135 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;				ST_DWORD(dir+DIR_CrtTime, dw);
002136 81ec      	LDD  R30,Y+4
                +
002137 01d9     +MOVW R26 , R18
002138 961e     +ADIW R26 , 14
002139 93ec     +ST X , R30
                 	__PUTB1RNS 18,14
00213a 81ed      	LDD  R30,Y+5
                +
00213b 01d9     +MOVW R26 , R18
00213c 961f     +ADIW R26 , 15
00213d 93ec     +ST X , R30
                 	__PUTB1RNS 18,15
                +
00213e 81ec     +LDD R30 , Y + 4
00213f 81fd     +LDD R31 , Y + 4 + 1
002140 816e     +LDD R22 , Y + 4 + 2
002141 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
002142 940e 3e49 	CALL __LSRD16
                +
002144 01d9     +MOVW R26 , R18
002145 9650     +ADIW R26 , 16
002146 93ec     +ST X , R30
                 	__PUTB1RNS 18,16
                +
002147 81ac     +LDD R26 , Y + 4
002148 81bd     +LDD R27 , Y + 4 + 1
002149 818e     +LDD R24 , Y + 4 + 2
00214a 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
00214b e1e8      	LDI  R30,LOW(24)
00214c 940e 3e18 	CALL __LSRD12
                +
00214e 01d9     +MOVW R26 , R18
00214f 9651     +ADIW R26 , 17
002150 93ec     +ST X , R30
                 	__PUTB1RNS 18,17
                 ;				dir[DIR_Attr] = 0;				/* Reset attribute */
002151 01f9      	MOVW R30,R18
002152 963b      	ADIW R30,11
002153 e0a0      	LDI  R26,LOW(0)
002154 83a0      	STD  Z+0,R26
                 ;				ST_DWORD(dir+DIR_FileSize, 0);	/* size = 0 */
002155 01f9      	MOVW R30,R18
002156 967c      	ADIW R30,28
002157 83a0      	STD  Z+0,R26
002158 01f9      	MOVW R30,R18
002159 967d      	ADIW R30,29
00215a 83a0      	STD  Z+0,R26
00215b 01f9      	MOVW R30,R18
00215c 967e      	ADIW R30,30
00215d 83a0      	STD  Z+0,R26
00215e 01f9      	MOVW R30,R18
00215f 967f      	ADIW R30,31
002160 83a0      	STD  Z+0,R26
                 ;				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
002161 8de8      	LDD  R30,Y+24
002162 8df9      	LDD  R31,Y+24+1
002163 93fa      	ST   -Y,R31
002164 93ea      	ST   -Y,R30
002165 01d9      	MOVW R26,R18
002166 940e 175a 	CALL _ld_clust_G000
002168 940e 3f50 	CALL __PUTD1S0
                 ;				st_clust(dir, 0);				/* cluster = 0 */
00216a 933a      	ST   -Y,R19
00216b 932a      	ST   -Y,R18
                +
00216c e0a0     +LDI R26 , LOW ( 0x0 )
00216d e0b0     +LDI R27 , HIGH ( 0x0 )
00216e e080     +LDI R24 , BYTE3 ( 0x0 )
00216f e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
002170 940e 1783 	CALL _st_clust_G000
                 ;				dj.fs->wflag = 1;
002172 8da8      	LDD  R26,Y+24
002173 8db9      	LDD  R27,Y+24+1
002174 9614      	ADIW R26,4
002175 e0e1      	LDI  R30,LOW(1)
002176 93ec      	ST   X,R30
                 ;				if (cl) {						/* Remove the cluster chain if exist */
002177 940e 3f46 	CALL __GETD1S0
002179 940e 3f71 	CALL __CPD10
00217b f161      	BREQ _0x2F1
                 ;					dw = dj.fs->winsect;
00217c 8da8      	LDD  R26,Y+24
00217d 8db9      	LDD  R27,Y+24+1
00217e 969a      	ADIW R26,42
00217f 940e 3f31 	CALL __GETD1P
                +
002181 83ec     +STD Y + 4 , R30
002182 83fd     +STD Y + 4 + 1 , R31
002183 836e     +STD Y + 4 + 2 , R22
002184 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;					res = remove_chain(dj.fs, cl);
002185 8de8      	LDD  R30,Y+24
002186 8df9      	LDD  R31,Y+24+1
002187 93fa      	ST   -Y,R31
002188 93ea      	ST   -Y,R30
                +
002189 81aa     +LDD R26 , Y + 2
00218a 81bb     +LDD R27 , Y + 2 + 1
00218b 818c     +LDD R24 , Y + 2 + 2
00218c 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
00218d 940e 12b1 	CALL _remove_chain_G000
00218f 2f1e      	MOV  R17,R30
                 ;					if (res == FR_OK) {
002190 3010      	CPI  R17,0
002191 f4b1      	BRNE _0x2F2
                 ;						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
002192 940e 3f46 	CALL __GETD1S0
                +
002194 50e1     +SUBI R30 , LOW ( 1 )
002195 40f0     +SBCI R31 , HIGH ( 1 )
002196 4060     +SBCI R22 , BYTE3 ( 1 )
002197 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
                +
002198 8da8     +LDD R26 , Y + 24
002199 8db9     +LDD R27 , Y + 24 + 1
00219a 961a     +ADIW R26 , 10
00219b 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 24,10
                 ;						res = move_window(dj.fs, dw);
00219d 8de8      	LDD  R30,Y+24
00219e 8df9      	LDD  R31,Y+24+1
00219f 93fa      	ST   -Y,R31
0021a0 93ea      	ST   -Y,R30
                +
0021a1 81ae     +LDD R26 , Y + 6
0021a2 81bf     +LDD R27 , Y + 6 + 1
0021a3 8588     +LDD R24 , Y + 6 + 2
0021a4 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
0021a5 940e 0e73 	CALL _move_window_G000
0021a7 2f1e      	MOV  R17,R30
                 ;					}
                 ;				}
                 _0x2F2:
                 ;			}
                 _0x2F1:
                 ;		}
                 _0x2EE:
0021a8 9628      	ADIW R28,8
                 ;		else {	/* Open an existing file */
0021a9 c011      	RJMP _0x2F3
                 _0x2E7:
                 ;			if (res == FR_OK) {					/* Follow succeeded */
0021aa 3010      	CPI  R17,0
0021ab f479      	BRNE _0x2F4
                 ;				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
0021ac 01f9      	MOVW R30,R18
0021ad 85e3      	LDD  R30,Z+11
0021ae 71e0      	ANDI R30,LOW(0x10)
0021af f011      	BREQ _0x2F5
                 ;					res = FR_NO_FILE;
0021b0 e014      	LDI  R17,LOW(4)
                 ;				} else {
0021b1 c009      	RJMP _0x2F6
                 _0x2F5:
                 ;					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
0021b2 a1ee      	LDD  R30,Y+38
0021b3 70e2      	ANDI R30,LOW(0x2)
0021b4 f021      	BREQ _0x2F8
0021b5 01f9      	MOVW R30,R18
0021b6 85e3      	LDD  R30,Z+11
0021b7 70e1      	ANDI R30,LOW(0x1)
0021b8 f409      	BRNE _0x2F9
                 _0x2F8:
0021b9 c001      	RJMP _0x2F7
                 _0x2F9:
                 ;						res = FR_DENIED;
0021ba e017      	LDI  R17,LOW(7)
                 ;				}
                 _0x2F7:
                 _0x2F6:
                 ;			}
                 ;		}
                 _0x2F4:
                 _0x2F3:
                 ;		if (res == FR_OK) {
0021bb 3010      	CPI  R17,0
0021bc f4b1      	BRNE _0x2FA
                 ;			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
0021bd a1ee      	LDD  R30,Y+38
0021be 70e8      	ANDI R30,LOW(0x8)
0021bf f019      	BREQ _0x2FB
                 ;				mode |= FA__WRITTEN;
0021c0 a1ee      	LDD  R30,Y+38
0021c1 62e0      	ORI  R30,0x20
0021c2 a3ee      	STD  Y+38,R30
                 ;			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
                 _0x2FB:
0021c3 89a8      	LDD  R26,Y+16
0021c4 89b9      	LDD  R27,Y+16+1
0021c5 969a      	ADIW R26,42
0021c6 940e 3f31 	CALL __GETD1P
                +
0021c8 a5a9     +LDD R26 , Y + 41
0021c9 a5ba     +LDD R27 , Y + 41 + 1
0021ca 965a     +ADIW R26 , 26
0021cb 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 41,26
                 ;			fp->dir_ptr = dir;
0021cd 01f9      	MOVW R30,R18
                +
0021ce a5a9     +LDD R26 , Y + 41
0021cf a5ba     +LDD R27 , Y + 41 + 1
0021d0 965e     +ADIW R26 , 30
0021d1 93ed     +ST X + , R30
0021d2 93fc     +ST X , R31
                 	__PUTW1SNS 41,30
                 ;#if _FS_LOCK
                 ;			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
                 ;			if (!fp->lockid) res = FR_INT_ERR;
                 ;#endif
                 ;		}
                 ;
                 ;#else				/* R/O configuration */
                 ;		if (res == FR_OK) {					/* Follow succeeded */
                 ;			dir = dj.dir;
                 ;			if (!dir) {						/* Current directory itself */
                 ;				res = FR_INVALID_NAME;
                 ;			} else {
                 ;				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
                 ;					res = FR_NO_FILE;
                 ;			}
                 ;		}
                 ;#endif
                 ;		FREE_BUF();
                 _0x2FA:
                 ;
                 ;		if (res == FR_OK) {
0021d3 3010      	CPI  R17,0
0021d4 f009      	BREQ PC+2
0021d5 c063      	RJMP _0x2FC
                 ;			fp->flag = mode;					/* File access mode */
0021d6 a1ee      	LDD  R30,Y+38
                +
0021d7 a5a9     +LDD R26 , Y + 41
0021d8 a5ba     +LDD R27 , Y + 41 + 1
0021d9 9614     +ADIW R26 , 4
0021da 93ec     +ST X , R30
                 	__PUTB1SNS 41,4
                 ;			fp->err = 0;						/* Clear error flag */
0021db a5a9      	LDD  R26,Y+41
0021dc a5ba      	LDD  R27,Y+41+1
0021dd 9615      	ADIW R26,5
0021de e0e0      	LDI  R30,LOW(0)
0021df 93ec      	ST   X,R30
                 ;			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
0021e0 89e8      	LDD  R30,Y+16
0021e1 89f9      	LDD  R31,Y+16+1
0021e2 93fa      	ST   -Y,R31
0021e3 93ea      	ST   -Y,R30
0021e4 01d9      	MOVW R26,R18
0021e5 940e 175a 	CALL _ld_clust_G000
                +
0021e7 a5a9     +LDD R26 , Y + 41
0021e8 a5ba     +LDD R27 , Y + 41 + 1
0021e9 961e     +ADIW R26 , 14
0021ea 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 41,14
                 ;			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
0021ec 01f9      	MOVW R30,R18
0021ed 8de7      	LDD  R30,Z+31
0021ee e0f0      	LDI  R31,0
0021ef 940e 3e59 	CALL __CWD1
0021f1 01df      	MOVW R26,R30
0021f2 01cb      	MOVW R24,R22
0021f3 e1e8      	LDI  R30,LOW(24)
0021f4 940e 3e0c 	CALL __LSLD12
0021f6 01df      	MOVW R26,R30
0021f7 01cb      	MOVW R24,R22
0021f8 01f9      	MOVW R30,R18
0021f9 8de6      	LDD  R30,Z+30
0021fa e0f0      	LDI  R31,0
0021fb 940e 3e59 	CALL __CWD1
0021fd 940e 3e4e 	CALL __LSLD16
0021ff 940e 3de9 	CALL __ORD12
002201 01df      	MOVW R26,R30
002202 01cb      	MOVW R24,R22
002203 01f9      	MOVW R30,R18
002204 8df5      	LDD  R31,Z+29
002205 e0e0      	LDI  R30,LOW(0)
002206 2766      	CLR  R22
002207 2777      	CLR  R23
002208 940e 3de9 	CALL __ORD12
00220a 01df      	MOVW R26,R30
00220b 01cb      	MOVW R24,R22
00220c 01f9      	MOVW R30,R18
00220d 8de4      	LDD  R30,Z+28
00220e 27ff      	CLR  R31
00220f 2766      	CLR  R22
002210 2777      	CLR  R23
002211 940e 3de9 	CALL __ORD12
                +
002213 a5a9     +LDD R26 , Y + 41
002214 a5ba     +LDD R27 , Y + 41 + 1
002215 961a     +ADIW R26 , 10
002216 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 41,10
                 ;			fp->fptr = 0;						/* File pointer */
002218 a5a9      	LDD  R26,Y+41
002219 a5ba      	LDD  R27,Y+41+1
00221a 9616      	ADIW R26,6
                +
00221b e0e0     +LDI R30 , LOW ( 0x0 )
00221c e0f0     +LDI R31 , HIGH ( 0x0 )
00221d e060     +LDI R22 , BYTE3 ( 0x0 )
00221e e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
00221f 940e 3f3c 	CALL __PUTDP1
                 ;			fp->dsect = 0;
002221 a5a9      	LDD  R26,Y+41
002222 a5ba      	LDD  R27,Y+41+1
002223 9656      	ADIW R26,22
002224 940e 3f3c 	CALL __PUTDP1
                 ;#if _USE_FASTSEEK
                 ;			fp->cltbl = 0;						/* Normal seek mode */
                 ;#endif
                 ;			fp->fs = dj.fs;	 					/* Validate file object */
002226 89e8      	LDD  R30,Y+16
002227 89f9      	LDD  R31,Y+16+1
002228 a5a9      	LDD  R26,Y+41
002229 a5ba      	LDD  R27,Y+41+1
00222a 93ed      	ST   X+,R30
00222b 93fc      	ST   X,R31
                 ;			fp->id = fp->fs->id;
00222c a5a9      	LDD  R26,Y+41
00222d a5ba      	LDD  R27,Y+41+1
00222e 940e 3f2d 	CALL __GETW1P
002230 9636      	ADIW R30,6
002231 01df      	MOVW R26,R30
002232 940e 3f2d 	CALL __GETW1P
                +
002234 a5a9     +LDD R26 , Y + 41
002235 a5ba     +LDD R27 , Y + 41 + 1
002236 9612     +ADIW R26 , 2
002237 93ed     +ST X + , R30
002238 93fc     +ST X , R31
                 	__PUTW1SNS 41,2
                 ;		}
                 ;	}
                 _0x2FC:
                 ;   //release_spi();
                 ;	LEAVE_FF(dj.fs, res);
                 _0x2E4:
002239 2fe1      	MOV  R30,R17
                 _0x20C0011:
00223a 940e 3f92 	CALL __LOADLOCR4
00223c 96ab      	ADIW R28,43
00223d 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read File                                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_read (
                 ;	FIL* fp, 		/* Pointer to the file object */
                 ;	void* buff,		/* Pointer to data buffer */
                 ;	UINT btr,		/* Number of bytes to read */
                 ;	UINT* br		/* Pointer to number of bytes read */
                 ;)
                 ;{
                 _f_read:
                 ; .FSTART _f_read
                 ;	FRESULT res;
                 ;	DWORD clst, sect, remain;
                 ;	UINT rcnt, cc;
                 ;	BYTE csect, *rbuff = (BYTE*)buff;
                 ;
                 ;
                 ;	*br = 0;	/* Clear read byte counter */
00223e 93ba      	ST   -Y,R27
00223f 93aa      	ST   -Y,R26
002240 972e      	SBIW R28,14
002241 940e 3f89 	CALL __SAVELOCR6
                 ;	*fp -> Y+26
                 ;	*buff -> Y+24
                 ;	btr -> Y+22
                 ;	*br -> Y+20
                 ;	res -> R17
                 ;	clst -> Y+16
                 ;	sect -> Y+12
                 ;	remain -> Y+8
                 ;	rcnt -> R18,R19
                 ;	cc -> R20,R21
                 ;	csect -> R16
                 ;	*rbuff -> Y+6
002243 8de8      	LDD  R30,Y+24
002244 8df9      	LDD  R31,Y+24+1
002245 83ee      	STD  Y+6,R30
002246 83ff      	STD  Y+6+1,R31
002247 89ac      	LDD  R26,Y+20
002248 89bd      	LDD  R27,Y+20+1
002249 e0e0      	LDI  R30,LOW(0)
00224a e0f0      	LDI  R31,HIGH(0)
00224b 93ed      	ST   X+,R30
00224c 93fc      	ST   X,R31
                 ;
                 ;	res = validate(fp);							/* Check validity */
00224d 8daa      	LDD  R26,Y+26
00224e 8dbb      	LDD  R27,Y+26+1
00224f de12      	RCALL _validate_G000
002250 2f1e      	MOV  R17,R30
                 ;	if (res != FR_OK) LEAVE_FF(fp->fs, res);
002251 3010      	CPI  R17,0
002252 f009      	BREQ _0x2FD
002253 c1cc      	RJMP _0x20C0010
                 ;	if (fp->err)								/* Check error */
                 _0x2FD:
002254 8dea      	LDD  R30,Y+26
002255 8dfb      	LDD  R31,Y+26+1
002256 81e5      	LDD  R30,Z+5
002257 30e0      	CPI  R30,0
002258 f021      	BREQ _0x2FE
                 ;		LEAVE_FF(fp->fs, (FRESULT)fp->err);
002259 8dea      	LDD  R30,Y+26
00225a 8dfb      	LDD  R31,Y+26+1
00225b 81e5      	LDD  R30,Z+5
00225c c1c3      	RJMP _0x20C0010
                 ;	if (!(fp->flag & FA_READ)) 					/* Check access mode */
                 _0x2FE:
00225d 8dea      	LDD  R30,Y+26
00225e 8dfb      	LDD  R31,Y+26+1
00225f 81a4      	LDD  R26,Z+4
002260 70a1      	ANDI R26,LOW(0x1)
002261 f411      	BRNE _0x2FF
                 ;		LEAVE_FF(fp->fs, FR_DENIED);
002262 e0e7      	LDI  R30,LOW(7)
002263 c1bc      	RJMP _0x20C0010
                 ;	remain = fp->fsize - fp->fptr;
                 _0x2FF:
002264 8dea      	LDD  R30,Y+26
002265 8dfb      	LDD  R31,Y+26+1
                +
002266 85a2     +LDD R26 , Z + 10
002267 85b3     +LDD R27 , Z + 10 + 1
002268 8584     +LDD R24 , Z + 10 + 2
002269 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
00226a 939f      	PUSH R25
00226b 938f      	PUSH R24
00226c 93bf      	PUSH R27
00226d 93af      	PUSH R26
                +
00226e 81a6     +LDD R26 , Z + 6
00226f 81b7     +LDD R27 , Z + 6 + 1
002270 8580     +LDD R24 , Z + 6 + 2
002271 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002272 91ef      	POP  R30
002273 91ff      	POP  R31
002274 916f      	POP  R22
002275 917f      	POP  R23
002276 940e 3dda 	CALL __SUBD12
                +
002278 87e8     +STD Y + 8 , R30
002279 87f9     +STD Y + 8 + 1 , R31
00227a 876a     +STD Y + 8 + 2 , R22
00227b 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ;	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
00227c 89ae      	LDD  R26,Y+22
00227d 89bf      	LDD  R27,Y+22+1
00227e 2788      	CLR  R24
00227f 2799      	CLR  R25
002280 940e 3f7f 	CALL __CPD12
002282 f420      	BRSH _0x300
002283 85e8      	LDD  R30,Y+8
002284 85f9      	LDD  R31,Y+8+1
002285 8bee      	STD  Y+22,R30
002286 8bff      	STD  Y+22+1,R31
                 ;
                 ;	for ( ;  btr;								/* Repeat until all data read */
                 _0x300:
                 _0x302:
002287 89ee      	LDD  R30,Y+22
002288 89ff      	LDD  R31,Y+22+1
002289 9730      	SBIW R30,0
00228a f409      	BRNE PC+2
00228b c193      	RJMP _0x303
                 ;		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
                 ;		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
00228c 8dea      	LDD  R30,Y+26
00228d 8dfb      	LDD  R31,Y+26+1
                +
00228e 81a6     +LDD R26 , Z + 6
00228f 81b7     +LDD R27 , Z + 6 + 1
002290 8580     +LDD R24 , Z + 6 + 2
002291 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002292 01fd      	MOVW R30,R26
002293 01bc      	MOVW R22,R24
002294 70f1      	ANDI R31,HIGH(0x1FF)
002295 9730      	SBIW R30,0
002296 f009      	BREQ PC+2
002297 c123      	RJMP _0x304
                 ;			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
002298 8dea      	LDD  R30,Y+26
002299 8dfb      	LDD  R31,Y+26+1
                +
00229a 81a6     +LDD R26 , Z + 6
00229b 81b7     +LDD R27 , Z + 6 + 1
00229c 8580     +LDD R24 , Z + 6 + 2
00229d 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
                +
00229e e0e0     +LDI R30 , LOW ( 0x200 )
00229f e0f2     +LDI R31 , HIGH ( 0x200 )
0022a0 e060     +LDI R22 , BYTE3 ( 0x200 )
0022a1 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
0022a2 940e 3ec6 	CALL __DIVD21U
0022a4 2e0e      	MOV  R0,R30
0022a5 8daa      	LDD  R26,Y+26
0022a6 8dbb      	LDD  R27,Y+26+1
0022a7 940e 3f2d 	CALL __GETW1P
0022a9 81e2      	LDD  R30,Z+2
0022aa e0f0      	LDI  R31,0
0022ab 9731      	SBIW R30,1
0022ac 21e0      	AND  R30,R0
0022ad 2f0e      	MOV  R16,R30
                 ;			if (!csect) {						/* On the cluster boundary? */
0022ae 3000      	CPI  R16,0
0022af f009      	BREQ PC+2
0022b0 c04b      	RJMP _0x305
                 ;				if (fp->fptr == 0) {			/* On the top of the file? */
0022b1 9616      	ADIW R26,6
0022b2 940e 3f31 	CALL __GETD1P
0022b4 940e 3f71 	CALL __CPD10
0022b6 f431      	BRNE _0x306
                 ;					clst = fp->sclust;			/* Follow from the origin */
0022b7 8daa      	LDD  R26,Y+26
0022b8 8dbb      	LDD  R27,Y+26+1
0022b9 961e      	ADIW R26,14
0022ba 940e 3f31 	CALL __GETD1P
0022bc c00e      	RJMP _0x4E4
                 ;				} else {						/* Middle or end of the file */
                 _0x306:
                 ;#if _USE_FASTSEEK
                 ;					if (fp->cltbl)
                 ;						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
                 ;					else
                 ;#endif
                 ;						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
0022bd 8daa      	LDD  R26,Y+26
0022be 8dbb      	LDD  R27,Y+26+1
0022bf 940e 3f2d 	CALL __GETW1P
0022c1 93fa      	ST   -Y,R31
0022c2 93ea      	ST   -Y,R30
0022c3 8dec      	LDD  R30,Y+28
0022c4 8dfd      	LDD  R31,Y+28+1
                +
0022c5 89a2     +LDD R26 , Z + 18
0022c6 89b3     +LDD R27 , Z + 18 + 1
0022c7 8984     +LDD R24 , Z + 18 + 2
0022c8 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
0022c9 940e 0ff2 	CALL _get_fat
                 _0x4E4:
                +
0022cb 8be8     +STD Y + 16 , R30
0022cc 8bf9     +STD Y + 16 + 1 , R31
0022cd 8b6a     +STD Y + 16 + 2 , R22
0022ce 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ;				}
                 ;				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
                +
0022cf 89a8     +LDD R26 , Y + 16
0022d0 89b9     +LDD R27 , Y + 16 + 1
0022d1 898a     +LDD R24 , Y + 16 + 2
0022d2 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
                +
0022d3 30a2     +CPI R26 , LOW ( 0x2 )
0022d4 e0e0     +LDI R30 , HIGH ( 0x2 )
0022d5 07be     +CPC R27 , R30
0022d6 e0e0     +LDI R30 , BYTE3 ( 0x2 )
0022d7 078e     +CPC R24 , R30
0022d8 e0e0     +LDI R30 , BYTE4 ( 0x2 )
0022d9 079e     +CPC R25 , R30
                 	__CPD2N 0x2
0022da f430      	BRSH _0x308
0022db 8daa      	LDD  R26,Y+26
0022dc 8dbb      	LDD  R27,Y+26+1
0022dd 9615      	ADIW R26,5
0022de e0e2      	LDI  R30,LOW(2)
0022df 93ec      	ST   X,R30
0022e0 c13f      	RJMP _0x20C0010
                 _0x308:
                 ;				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                +
0022e1 89a8     +LDD R26 , Y + 16
0022e2 89b9     +LDD R27 , Y + 16 + 1
0022e3 898a     +LDD R24 , Y + 16 + 2
0022e4 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
                +
0022e5 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
0022e6 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
0022e7 07be     +CPC R27 , R30
0022e8 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
0022e9 078e     +CPC R24 , R30
0022ea efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
0022eb 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
0022ec f431      	BRNE _0x309
0022ed 8daa      	LDD  R26,Y+26
0022ee 8dbb      	LDD  R27,Y+26+1
0022ef 9615      	ADIW R26,5
0022f0 e0e1      	LDI  R30,LOW(1)
0022f1 93ec      	ST   X,R30
0022f2 c12d      	RJMP _0x20C0010
                 _0x309:
                 ;				fp->clust = clst;				/* Update current cluster */
                +
0022f3 89e8     +LDD R30 , Y + 16
0022f4 89f9     +LDD R31 , Y + 16 + 1
0022f5 896a     +LDD R22 , Y + 16 + 2
0022f6 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
0022f7 8daa     +LDD R26 , Y + 26
0022f8 8dbb     +LDD R27 , Y + 26 + 1
0022f9 9652     +ADIW R26 , 18
0022fa 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 26,18
                 ;			}
                 ;			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
                 _0x305:
0022fc 8daa      	LDD  R26,Y+26
0022fd 8dbb      	LDD  R27,Y+26+1
0022fe 940e 3f2d 	CALL __GETW1P
002300 93fa      	ST   -Y,R31
002301 93ea      	ST   -Y,R30
002302 8dec      	LDD  R30,Y+28
002303 8dfd      	LDD  R31,Y+28+1
                +
002304 89a2     +LDD R26 , Z + 18
002305 89b3     +LDD R27 , Z + 18 + 1
002306 8984     +LDD R24 , Z + 18 + 2
002307 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
002308 940e 0fb5 	CALL _clust2sect
                +
00230a 87ec     +STD Y + 12 , R30
00230b 87fd     +STD Y + 12 + 1 , R31
00230c 876e     +STD Y + 12 + 2 , R22
00230d 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;			if (!sect) ABORT(fp->fs, FR_INT_ERR);
00230e 940e 3f71 	CALL __CPD10
002310 f431      	BRNE _0x30A
002311 8daa      	LDD  R26,Y+26
002312 8dbb      	LDD  R27,Y+26+1
002313 9615      	ADIW R26,5
002314 e0e2      	LDI  R30,LOW(2)
002315 93ec      	ST   X,R30
002316 c109      	RJMP _0x20C0010
                 _0x30A:
                 ;			sect += csect;
002317 2fe0      	MOV  R30,R16
002318 e0f0      	LDI  R31,0
                +
002319 85ac     +LDD R26 , Y + 12
00231a 85bd     +LDD R27 , Y + 12 + 1
00231b 858e     +LDD R24 , Y + 12 + 2
00231c 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
00231d 940e 3e59 	CALL __CWD1
00231f 940e 3dd0 	CALL __ADDD12
                +
002321 87ec     +STD Y + 12 , R30
002322 87fd     +STD Y + 12 + 1 , R31
002323 876e     +STD Y + 12 + 2 , R22
002324 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
002325 89ae      	LDD  R26,Y+22
002326 89bf      	LDD  R27,Y+22+1
002327 e0e0      	LDI  R30,LOW(512)
002328 e0f2      	LDI  R31,HIGH(512)
002329 940e 3eae 	CALL __DIVW21U
00232b 01af      	MOVW R20,R30
                 ;			if (cc) {							/* Read maximum contiguous sectors directly */
00232c 2e04      	MOV  R0,R20
00232d 2a05      	OR   R0,R21
00232e f409      	BRNE PC+2
00232f c082      	RJMP _0x30B
                 ;				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
002330 2fe0      	MOV  R30,R16
002331 e0f0      	LDI  R31,0
002332 0fe4      	ADD  R30,R20
002333 1ff5      	ADC  R31,R21
002334 010f      	MOVW R0,R30
002335 8daa      	LDD  R26,Y+26
002336 8dbb      	LDD  R27,Y+26+1
002337 940e 3f2d 	CALL __GETW1P
002339 81e2      	LDD  R30,Z+2
00233a 01d0      	MOVW R26,R0
00233b e0f0      	LDI  R31,0
00233c 17ea      	CP   R30,R26
00233d 07fb      	CPC  R31,R27
00233e f460      	BRSH _0x30C
                 ;					cc = fp->fs->csize - csect;
00233f 8daa      	LDD  R26,Y+26
002340 8dbb      	LDD  R27,Y+26+1
002341 940e 3f2d 	CALL __GETW1P
002343 81e2      	LDD  R30,Z+2
002344 e0f0      	LDI  R31,0
002345 01df      	MOVW R26,R30
002346 2fe0      	MOV  R30,R16
002347 e0f0      	LDI  R31,0
002348 1bae      	SUB  R26,R30
002349 0bbf      	SBC  R27,R31
00234a 01ad      	MOVW R20,R26
                 ;				if (disk_read(fp->fs->drv, rbuff, sect, cc))
                 _0x30C:
00234b 8daa      	LDD  R26,Y+26
00234c 8dbb      	LDD  R27,Y+26+1
00234d 940e 3f2d 	CALL __GETW1P
00234f 81e1      	LDD  R30,Z+1
002350 93ea      	ST   -Y,R30
002351 81ef      	LDD  R30,Y+7
002352 85f8      	LDD  R31,Y+7+1
002353 93fa      	ST   -Y,R31
002354 93ea      	ST   -Y,R30
                +
002355 85ef     +LDD R30 , Y + 15
002356 89f8     +LDD R31 , Y + 15 + 1
002357 8969     +LDD R22 , Y + 15 + 2
002358 897a     +LDD R23 , Y + 15 + 3
                 	__GETD1S 15
002359 940e 3f5a 	CALL __PUTPARD1
00235b 01da      	MOVW R26,R20
00235c 940e 09f7 	CALL _disk_read
00235e 30e0      	CPI  R30,0
00235f f031      	BREQ _0x30D
                 ;					ABORT(fp->fs, FR_DISK_ERR);
002360 8daa      	LDD  R26,Y+26
002361 8dbb      	LDD  R27,Y+26+1
002362 9615      	ADIW R26,5
002363 e0e1      	LDI  R30,LOW(1)
002364 93ec      	ST   X,R30
002365 c0ba      	RJMP _0x20C0010
                 _0x30D:
                 ;#if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it contains a dirty sect ...
                 ;#if _FS_TINY
                 ;				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
002366 8daa      	LDD  R26,Y+26
002367 8dbb      	LDD  R27,Y+26+1
002368 940e 3f2d 	CALL __GETW1P
00236a 01df      	MOVW R26,R30
00236b 81e4      	LDD  R30,Z+4
00236c 30e0      	CPI  R30,0
00236d f099      	BREQ _0x30F
00236e 01fd      	MOVW R30,R26
00236f 96ba      	ADIW R30,42
002370 01df      	MOVW R26,R30
002371 940e 3f31 	CALL __GETD1P
                +
002373 85ac     +LDD R26 , Y + 12
002374 85bd     +LDD R27 , Y + 12 + 1
002375 858e     +LDD R24 , Y + 12 + 2
002376 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
002377 940e 3dda 	CALL __SUBD12
002379 01df      	MOVW R26,R30
00237a 01cb      	MOVW R24,R22
00237b 01fa      	MOVW R30,R20
00237c 2766      	CLR  R22
00237d 2777      	CLR  R23
00237e 940e 3f84 	CALL __CPD21
002380 f008      	BRLO _0x310
                 _0x30F:
002381 c029      	RJMP _0x30E
                 _0x310:
                 ;					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win, SS(fp->fs));
002382 8daa      	LDD  R26,Y+26
002383 8dbb      	LDD  R27,Y+26+1
002384 940e 3f2d 	CALL __GETW1P
002386 96ba      	ADIW R30,42
002387 01df      	MOVW R26,R30
002388 940e 3f31 	CALL __GETD1P
00238a 01df      	MOVW R26,R30
00238b 01cb      	MOVW R24,R22
                +
00238c 85ec     +LDD R30 , Y + 12
00238d 85fd     +LDD R31 , Y + 12 + 1
00238e 856e     +LDD R22 , Y + 12 + 2
00238f 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
002390 940e 3ddf 	CALL __SUBD21
                +
002392 e0e0     +LDI R30 , LOW ( 0x200 )
002393 e0f2     +LDI R31 , HIGH ( 0x200 )
002394 e060     +LDI R22 , BYTE3 ( 0x200 )
002395 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
002396 940e 3e70 	CALL __MULD12U
002398 81ae      	LDD  R26,Y+6
002399 81bf      	LDD  R27,Y+6+1
00239a 2788      	CLR  R24
00239b 2799      	CLR  R25
00239c 0fea      	ADD  R30,R26
00239d 1ffb      	ADC  R31,R27
00239e 93fa      	ST   -Y,R31
00239f 93ea      	ST   -Y,R30
0023a0 8dac      	LDD  R26,Y+28
0023a1 8dbd      	LDD  R27,Y+28+1
0023a2 940e 3f2d 	CALL __GETW1P
0023a4 96be      	ADIW R30,46
0023a5 93fa      	ST   -Y,R31
0023a6 93ea      	ST   -Y,R30
0023a7 e0a0      	LDI  R26,LOW(512)
0023a8 e0b2      	LDI  R27,HIGH(512)
0023a9 940e 0d80 	CALL _mem_cpy_G000
                 ;#else
                 ;				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
                 ;					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
                 ;#endif
                 ;#endif
                 ;				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
                 _0x30E:
0023ab 01fa      	MOVW R30,R20
0023ac 0fee      	LSL  R30
0023ad 1fff      	ROL  R31
0023ae 2ffe      	MOV  R31,R30
0023af e0e0      	LDI  R30,0
0023b0 019f      	MOVW R18,R30
                 ;				continue;
0023b1 c046      	RJMP _0x301
                 ;			}
                 ;#if !_FS_TINY
                 ;			if (fp->dsect != sect) {			/* Load data sector if not in cache */
                 ;#if !_FS_READONLY
                 ;				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
                 ;					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;						ABORT(fp->fs, FR_DISK_ERR);
                 ;					fp->flag &= ~FA__DIRTY;
                 ;				}
                 ;#endif
                 ;				if (disk_read(fp->fs->drv, fp->buf, sect, 1))	/* Fill sector cache */
                 ;					ABORT(fp->fs, FR_DISK_ERR);
                 ;			}
                 ;#endif
                 ;			fp->dsect = sect;
                 _0x30B:
                +
0023b2 85ec     +LDD R30 , Y + 12
0023b3 85fd     +LDD R31 , Y + 12 + 1
0023b4 856e     +LDD R22 , Y + 12 + 2
0023b5 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
0023b6 8daa     +LDD R26 , Y + 26
0023b7 8dbb     +LDD R27 , Y + 26 + 1
0023b8 9656     +ADIW R26 , 22
0023b9 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 26,22
                 ;		}
                 ;		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer */
                 _0x304:
0023bb 8dea      	LDD  R30,Y+26
0023bc 8dfb      	LDD  R31,Y+26+1
0023bd 81a6      	LDD  R26,Z+6
0023be 81b7      	LDD  R27,Z+7
0023bf 01fd      	MOVW R30,R26
0023c0 70f1      	ANDI R31,HIGH(0x1FF)
0023c1 e0a0      	LDI  R26,LOW(512)
0023c2 e0b2      	LDI  R27,HIGH(512)
0023c3 1bae      	SUB  R26,R30
0023c4 0bbf      	SBC  R27,R31
0023c5 019d      	MOVW R18,R26
                 ;		if (rcnt > btr) rcnt = btr;
0023c6 89ee      	LDD  R30,Y+22
0023c7 89ff      	LDD  R31,Y+22+1
0023c8 17e2      	CP   R30,R18
0023c9 07f3      	CPC  R31,R19
0023ca f410      	BRSH _0x311
                +
0023cb 892e     +LDD R18 , Y + 22
0023cc 893f     +LDD R19 , Y + 22 + 1
                 	__GETWRS 18,19,22
                 ;#if _FS_TINY
                 ;		if (move_window(fp->fs, fp->dsect))		/* Move sector window */
                 _0x311:
0023cd 8daa      	LDD  R26,Y+26
0023ce 8dbb      	LDD  R27,Y+26+1
0023cf 940e 3f2d 	CALL __GETW1P
0023d1 93fa      	ST   -Y,R31
0023d2 93ea      	ST   -Y,R30
0023d3 8dec      	LDD  R30,Y+28
0023d4 8dfd      	LDD  R31,Y+28+1
                +
0023d5 89a6     +LDD R26 , Z + 22
0023d6 89b7     +LDD R27 , Z + 22 + 1
0023d7 8d80     +LDD R24 , Z + 22 + 2
0023d8 8d91     +LDD R25 , Z + 22 + 3
                 	__GETD2Z 22
0023d9 940e 0e73 	CALL _move_window_G000
0023db 30e0      	CPI  R30,0
0023dc f031      	BREQ _0x312
                 ;			ABORT(fp->fs, FR_DISK_ERR);
0023dd 8daa      	LDD  R26,Y+26
0023de 8dbb      	LDD  R27,Y+26+1
0023df 9615      	ADIW R26,5
0023e0 e0e1      	LDI  R30,LOW(1)
0023e1 93ec      	ST   X,R30
0023e2 c03d      	RJMP _0x20C0010
                 _0x312:
                 ;		mem_cpy(rbuff, &fp->fs->win[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
0023e3 81ee      	LDD  R30,Y+6
0023e4 81ff      	LDD  R31,Y+6+1
0023e5 93fa      	ST   -Y,R31
0023e6 93ea      	ST   -Y,R30
0023e7 8dac      	LDD  R26,Y+28
0023e8 8dbd      	LDD  R27,Y+28+1
0023e9 940e 3f2d 	CALL __GETW1P
0023eb 96be      	ADIW R30,46
0023ec 010f      	MOVW R0,R30
0023ed 9616      	ADIW R26,6
0023ee 940e 3f2d 	CALL __GETW1P
0023f0 70f1      	ANDI R31,HIGH(0x1FF)
0023f1 0de0      	ADD  R30,R0
0023f2 1df1      	ADC  R31,R1
0023f3 93fa      	ST   -Y,R31
0023f4 93ea      	ST   -Y,R30
0023f5 01d9      	MOVW R26,R18
0023f6 940e 0d80 	CALL _mem_cpy_G000
                 ;#else
                 ;		mem_cpy(rbuff, &fp->buf[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
                 ;#endif
                 ;	}
                 _0x301:
0023f8 01f9      	MOVW R30,R18
0023f9 81ae      	LDD  R26,Y+6
0023fa 81bf      	LDD  R27,Y+6+1
0023fb 0fea      	ADD  R30,R26
0023fc 1ffb      	ADC  R31,R27
0023fd 83ee      	STD  Y+6,R30
0023fe 83ff      	STD  Y+6+1,R31
0023ff 8dea      	LDD  R30,Y+26
002400 8dfb      	LDD  R31,Y+26+1
002401 9636      	ADIW R30,6
002402 010f      	MOVW R0,R30
002403 01df      	MOVW R26,R30
002404 940e 3f31 	CALL __GETD1P
002406 01df      	MOVW R26,R30
002407 01cb      	MOVW R24,R22
002408 01f9      	MOVW R30,R18
002409 2766      	CLR  R22
00240a 2777      	CLR  R23
00240b 940e 3dd0 	CALL __ADDD12
00240d 01d0      	MOVW R26,R0
00240e 940e 3f3c 	CALL __PUTDP1
002410 89ac      	LDD  R26,Y+20
002411 89bd      	LDD  R27,Y+20+1
002412 91ed      	LD   R30,X+
002413 91fd      	LD   R31,X+
002414 0fe2      	ADD  R30,R18
002415 1ff3      	ADC  R31,R19
002416 93fe      	ST   -X,R31
002417 93ee      	ST   -X,R30
002418 89ee      	LDD  R30,Y+22
002419 89ff      	LDD  R31,Y+22+1
00241a 1be2      	SUB  R30,R18
00241b 0bf3      	SBC  R31,R19
00241c 8bee      	STD  Y+22,R30
00241d 8bff      	STD  Y+22+1,R31
00241e ce68      	RJMP _0x302
                 _0x303:
                 ;
                 ;	LEAVE_FF(fp->fs, FR_OK);
00241f e0e0      	LDI  R30,LOW(0)
                 _0x20C0010:
002420 940e 3f90 	CALL __LOADLOCR6
002422 966c      	ADIW R28,28
002423 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Write File                                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_write (
                 ;	FIL* fp,			/* Pointer to the file object */
                 ;	const void *buff,	/* Pointer to the data to be written */
                 ;	UINT btw,			/* Number of bytes to write */
                 ;	UINT* bw			/* Pointer to number of bytes written */
                 ;)
                 ;{
                 _f_write:
                 ; .FSTART _f_write
                 ;	FRESULT res;
                 ;	DWORD clst, sect;
                 ;	UINT wcnt, cc;
                 ;	const BYTE *wbuff = (const BYTE*)buff;
                 ;	BYTE csect;
                 ;    //init_spi(1);
                 ;
                 ;	*bw = 0;	/* Clear write byte counter */
002424 93ba      	ST   -Y,R27
002425 93aa      	ST   -Y,R26
002426 972a      	SBIW R28,10
002427 940e 3f89 	CALL __SAVELOCR6
                 ;	*fp -> Y+22
                 ;	*buff -> Y+20
                 ;	btw -> Y+18
                 ;	*bw -> Y+16
                 ;	res -> R17
                 ;	clst -> Y+12
                 ;	sect -> Y+8
                 ;	wcnt -> R18,R19
                 ;	cc -> R20,R21
                 ;	*wbuff -> Y+6
                 ;	csect -> R16
002429 89ec      	LDD  R30,Y+20
00242a 89fd      	LDD  R31,Y+20+1
00242b 83ee      	STD  Y+6,R30
00242c 83ff      	STD  Y+6+1,R31
00242d 89a8      	LDD  R26,Y+16
00242e 89b9      	LDD  R27,Y+16+1
00242f e0e0      	LDI  R30,LOW(0)
002430 e0f0      	LDI  R31,HIGH(0)
002431 93ed      	ST   X+,R30
002432 93fc      	ST   X,R31
                 ;
                 ;	res = validate(fp);						/* Check validity */
002433 89ae      	LDD  R26,Y+22
002434 89bf      	LDD  R27,Y+22+1
002435 dc2c      	RCALL _validate_G000
002436 2f1e      	MOV  R17,R30
                 ;	if (res != FR_OK) LEAVE_FF(fp->fs, res);
002437 3010      	CPI  R17,0
002438 f009      	BREQ _0x313
002439 c266      	RJMP _0x20C000F
                 ;	if (fp->err)							/* Check error */
                 _0x313:
00243a 89ee      	LDD  R30,Y+22
00243b 89ff      	LDD  R31,Y+22+1
00243c 81e5      	LDD  R30,Z+5
00243d 30e0      	CPI  R30,0
00243e f021      	BREQ _0x314
                 ;		LEAVE_FF(fp->fs, (FRESULT)fp->err);
00243f 89ee      	LDD  R30,Y+22
002440 89ff      	LDD  R31,Y+22+1
002441 81e5      	LDD  R30,Z+5
002442 c25d      	RJMP _0x20C000F
                 ;	if (!(fp->flag & FA_WRITE))				/* Check access mode */
                 _0x314:
002443 89ee      	LDD  R30,Y+22
002444 89ff      	LDD  R31,Y+22+1
002445 81a4      	LDD  R26,Z+4
002446 70a2      	ANDI R26,LOW(0x2)
002447 f411      	BRNE _0x315
                 ;		LEAVE_FF(fp->fs, FR_DENIED);
002448 e0e7      	LDI  R30,LOW(7)
002449 c256      	RJMP _0x20C000F
                 ;	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
                 _0x315:
00244a 89ee      	LDD  R30,Y+22
00244b 89ff      	LDD  R31,Y+22+1
                +
00244c 81a6     +LDD R26 , Z + 6
00244d 81b7     +LDD R27 , Z + 6 + 1
00244e 8580     +LDD R24 , Z + 6 + 2
00244f 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002450 89ea      	LDD  R30,Y+18
002451 89fb      	LDD  R31,Y+18+1
002452 2766      	CLR  R22
002453 2777      	CLR  R23
002454 940e 3dd0 	CALL __ADDD12
002456 937f      	PUSH R23
002457 936f      	PUSH R22
002458 93ff      	PUSH R31
002459 93ef      	PUSH R30
00245a 89ae      	LDD  R26,Y+22
00245b 89bf      	LDD  R27,Y+22+1
00245c 9616      	ADIW R26,6
00245d 940e 3f31 	CALL __GETD1P
00245f 91af      	POP  R26
002460 91bf      	POP  R27
002461 918f      	POP  R24
002462 919f      	POP  R25
002463 940e 3f84 	CALL __CPD21
002465 f418      	BRSH _0x316
002466 e0e0      	LDI  R30,LOW(0)
002467 8bea      	STD  Y+18,R30
002468 8beb      	STD  Y+18+1,R30
                 ;
                 ;	for ( ;  btw;							/* Repeat until all data written */
                 _0x316:
                 _0x318:
002469 89ea      	LDD  R30,Y+18
00246a 89fb      	LDD  R31,Y+18+1
00246b 9730      	SBIW R30,0
00246c f409      	BRNE PC+2
00246d c211      	RJMP _0x319
                 ;		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
                 ;		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
00246e 89ee      	LDD  R30,Y+22
00246f 89ff      	LDD  R31,Y+22+1
                +
002470 81a6     +LDD R26 , Z + 6
002471 81b7     +LDD R27 , Z + 6 + 1
002472 8580     +LDD R24 , Z + 6 + 2
002473 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002474 01fd      	MOVW R30,R26
002475 01bc      	MOVW R22,R24
002476 70f1      	ANDI R31,HIGH(0x1FF)
002477 9730      	SBIW R30,0
002478 f009      	BREQ PC+2
002479 c19a      	RJMP _0x31A
                 ;			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
00247a 89ee      	LDD  R30,Y+22
00247b 89ff      	LDD  R31,Y+22+1
                +
00247c 81a6     +LDD R26 , Z + 6
00247d 81b7     +LDD R27 , Z + 6 + 1
00247e 8580     +LDD R24 , Z + 6 + 2
00247f 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
                +
002480 e0e0     +LDI R30 , LOW ( 0x200 )
002481 e0f2     +LDI R31 , HIGH ( 0x200 )
002482 e060     +LDI R22 , BYTE3 ( 0x200 )
002483 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
002484 940e 3ec6 	CALL __DIVD21U
002486 2e0e      	MOV  R0,R30
002487 89ae      	LDD  R26,Y+22
002488 89bf      	LDD  R27,Y+22+1
002489 940e 3f2d 	CALL __GETW1P
00248b 81e2      	LDD  R30,Z+2
00248c e0f0      	LDI  R31,0
00248d 9731      	SBIW R30,1
00248e 21e0      	AND  R30,R0
00248f 2f0e      	MOV  R16,R30
                 ;			if (!csect) {					/* On the cluster boundary? */
002490 3000      	CPI  R16,0
002491 f009      	BREQ PC+2
002492 c06f      	RJMP _0x31B
                 ;				if (fp->fptr == 0) {		/* On the top of the file? */
002493 9616      	ADIW R26,6
002494 940e 3f31 	CALL __GETD1P
002496 940e 3f71 	CALL __CPD10
002498 f511      	BRNE _0x31C
                 ;					clst = fp->sclust;		/* Follow from the origin */
002499 89ae      	LDD  R26,Y+22
00249a 89bf      	LDD  R27,Y+22+1
00249b 961e      	ADIW R26,14
00249c 940e 3f31 	CALL __GETD1P
                +
00249e 87ec     +STD Y + 12 , R30
00249f 87fd     +STD Y + 12 + 1 , R31
0024a0 876e     +STD Y + 12 + 2 , R22
0024a1 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;					if (clst == 0)			/* When no cluster is allocated, */
0024a2 940e 3f71 	CALL __CPD10
0024a4 f4a9      	BRNE _0x31D
                 ;						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
0024a5 89ae      	LDD  R26,Y+22
0024a6 89bf      	LDD  R27,Y+22+1
0024a7 940e 3f2d 	CALL __GETW1P
0024a9 93fa      	ST   -Y,R31
0024aa 93ea      	ST   -Y,R30
                +
0024ab e0a0     +LDI R26 , LOW ( 0x0 )
0024ac e0b0     +LDI R27 , HIGH ( 0x0 )
0024ad e080     +LDI R24 , BYTE3 ( 0x0 )
0024ae e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0024af 940e 1348 	CALL _create_chain_G000
                +
0024b1 87ec     +STD Y + 12 , R30
0024b2 87fd     +STD Y + 12 + 1 , R31
0024b3 876e     +STD Y + 12 + 2 , R22
0024b4 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                +
0024b5 89ae     +LDD R26 , Y + 22
0024b6 89bf     +LDD R27 , Y + 22 + 1
0024b7 961e     +ADIW R26 , 14
0024b8 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 22,14
                 ;				} else {					/* Middle or end of the file */
                 _0x31D:
0024ba c012      	RJMP _0x31E
                 _0x31C:
                 ;#if _USE_FASTSEEK
                 ;					if (fp->cltbl)
                 ;						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
                 ;					else
                 ;#endif
                 ;						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
0024bb 89ae      	LDD  R26,Y+22
0024bc 89bf      	LDD  R27,Y+22+1
0024bd 940e 3f2d 	CALL __GETW1P
0024bf 93fa      	ST   -Y,R31
0024c0 93ea      	ST   -Y,R30
0024c1 8de8      	LDD  R30,Y+24
0024c2 8df9      	LDD  R31,Y+24+1
                +
0024c3 89a2     +LDD R26 , Z + 18
0024c4 89b3     +LDD R27 , Z + 18 + 1
0024c5 8984     +LDD R24 , Z + 18 + 2
0024c6 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
0024c7 940e 1348 	CALL _create_chain_G000
                +
0024c9 87ec     +STD Y + 12 , R30
0024ca 87fd     +STD Y + 12 + 1 , R31
0024cb 876e     +STD Y + 12 + 2 , R22
0024cc 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;				}
                 _0x31E:
                 ;				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
                +
0024cd 85ec     +LDD R30 , Y + 12
0024ce 85fd     +LDD R31 , Y + 12 + 1
0024cf 856e     +LDD R22 , Y + 12 + 2
0024d0 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
0024d1 940e 3f71 	CALL __CPD10
0024d3 f409      	BRNE _0x31F
0024d4 c1aa      	RJMP _0x319
                 ;				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
                 _0x31F:
                +
0024d5 85ac     +LDD R26 , Y + 12
0024d6 85bd     +LDD R27 , Y + 12 + 1
0024d7 858e     +LDD R24 , Y + 12 + 2
0024d8 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
0024d9 30a1     +CPI R26 , LOW ( 0x1 )
0024da e0e0     +LDI R30 , HIGH ( 0x1 )
0024db 07be     +CPC R27 , R30
0024dc e0e0     +LDI R30 , BYTE3 ( 0x1 )
0024dd 078e     +CPC R24 , R30
0024de e0e0     +LDI R30 , BYTE4 ( 0x1 )
0024df 079e     +CPC R25 , R30
                 	__CPD2N 0x1
0024e0 f431      	BRNE _0x320
0024e1 89ae      	LDD  R26,Y+22
0024e2 89bf      	LDD  R27,Y+22+1
0024e3 9615      	ADIW R26,5
0024e4 e0e2      	LDI  R30,LOW(2)
0024e5 93ec      	ST   X,R30
0024e6 c1b9      	RJMP _0x20C000F
                 _0x320:
                 ;				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                +
0024e7 85ac     +LDD R26 , Y + 12
0024e8 85bd     +LDD R27 , Y + 12 + 1
0024e9 858e     +LDD R24 , Y + 12 + 2
0024ea 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
0024eb 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
0024ec efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
0024ed 07be     +CPC R27 , R30
0024ee efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
0024ef 078e     +CPC R24 , R30
0024f0 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
0024f1 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
0024f2 f431      	BRNE _0x321
0024f3 89ae      	LDD  R26,Y+22
0024f4 89bf      	LDD  R27,Y+22+1
0024f5 9615      	ADIW R26,5
0024f6 e0e1      	LDI  R30,LOW(1)
0024f7 93ec      	ST   X,R30
0024f8 c1a7      	RJMP _0x20C000F
                 _0x321:
                 ;				fp->clust = clst;			/* Update current cluster */
                +
0024f9 85ec     +LDD R30 , Y + 12
0024fa 85fd     +LDD R31 , Y + 12 + 1
0024fb 856e     +LDD R22 , Y + 12 + 2
0024fc 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
0024fd 89ae     +LDD R26 , Y + 22
0024fe 89bf     +LDD R27 , Y + 22 + 1
0024ff 9652     +ADIW R26 , 18
002500 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 22,18
                 ;			}
                 ;#if _FS_TINY
                 ;			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
                 _0x31B:
002502 89ae      	LDD  R26,Y+22
002503 89bf      	LDD  R27,Y+22+1
002504 940e 3f2d 	CALL __GETW1P
002506 96ba      	ADIW R30,42
002507 01df      	MOVW R26,R30
002508 940e 3f31 	CALL __GETD1P
00250a 937f      	PUSH R23
00250b 936f      	PUSH R22
00250c 93ff      	PUSH R31
00250d 93ef      	PUSH R30
00250e 89ae      	LDD  R26,Y+22
00250f 89bf      	LDD  R27,Y+22+1
002510 9656      	ADIW R26,22
002511 940e 3f31 	CALL __GETD1P
002513 91af      	POP  R26
002514 91bf      	POP  R27
002515 918f      	POP  R24
002516 919f      	POP  R25
002517 940e 3f7f 	CALL __CPD12
002519 f449      	BRNE _0x323
00251a 89ae      	LDD  R26,Y+22
00251b 89bf      	LDD  R27,Y+22+1
00251c 940e 3f2d 	CALL __GETW1P
00251e 01df      	MOVW R26,R30
00251f 940e 0df6 	CALL _sync_window_G000
002521 30e0      	CPI  R30,0
002522 f409      	BRNE _0x324
                 _0x323:
002523 c006      	RJMP _0x322
                 _0x324:
                 ;				ABORT(fp->fs, FR_DISK_ERR);
002524 89ae      	LDD  R26,Y+22
002525 89bf      	LDD  R27,Y+22+1
002526 9615      	ADIW R26,5
002527 e0e1      	LDI  R30,LOW(1)
002528 93ec      	ST   X,R30
002529 c176      	RJMP _0x20C000F
                 _0x322:
                 ;#else
                 ;			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
                 ;				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;					ABORT(fp->fs, FR_DISK_ERR);
                 ;				fp->flag &= ~FA__DIRTY;
                 ;			}
                 ;#endif
                 ;			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
00252a 89ae      	LDD  R26,Y+22
00252b 89bf      	LDD  R27,Y+22+1
00252c 940e 3f2d 	CALL __GETW1P
00252e 93fa      	ST   -Y,R31
00252f 93ea      	ST   -Y,R30
002530 8de8      	LDD  R30,Y+24
002531 8df9      	LDD  R31,Y+24+1
                +
002532 89a2     +LDD R26 , Z + 18
002533 89b3     +LDD R27 , Z + 18 + 1
002534 8984     +LDD R24 , Z + 18 + 2
002535 8995     +LDD R25 , Z + 18 + 3
                 	__GETD2Z 18
002536 940e 0fb5 	CALL _clust2sect
                +
002538 87e8     +STD Y + 8 , R30
002539 87f9     +STD Y + 8 + 1 , R31
00253a 876a     +STD Y + 8 + 2 , R22
00253b 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ;			if (!sect) ABORT(fp->fs, FR_INT_ERR);
00253c 940e 3f71 	CALL __CPD10
00253e f431      	BRNE _0x325
00253f 89ae      	LDD  R26,Y+22
002540 89bf      	LDD  R27,Y+22+1
002541 9615      	ADIW R26,5
002542 e0e2      	LDI  R30,LOW(2)
002543 93ec      	ST   X,R30
002544 c15b      	RJMP _0x20C000F
                 _0x325:
                 ;			sect += csect;
002545 2fe0      	MOV  R30,R16
002546 e0f0      	LDI  R31,0
                +
002547 85a8     +LDD R26 , Y + 8
002548 85b9     +LDD R27 , Y + 8 + 1
002549 858a     +LDD R24 , Y + 8 + 2
00254a 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
00254b 940e 3e59 	CALL __CWD1
00254d 940e 3dd0 	CALL __ADDD12
                +
00254f 87e8     +STD Y + 8 , R30
002550 87f9     +STD Y + 8 + 1 , R31
002551 876a     +STD Y + 8 + 2 , R22
002552 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ;			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
002553 89aa      	LDD  R26,Y+18
002554 89bb      	LDD  R27,Y+18+1
002555 e0e0      	LDI  R30,LOW(512)
002556 e0f2      	LDI  R31,HIGH(512)
002557 940e 3eae 	CALL __DIVW21U
002559 01af      	MOVW R20,R30
                 ;			if (cc) {						/* Write maximum contiguous sectors directly */
00255a 2e04      	MOV  R0,R20
00255b 2a05      	OR   R0,R21
00255c f409      	BRNE PC+2
00255d c083      	RJMP _0x326
                 ;				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
00255e 2fe0      	MOV  R30,R16
00255f e0f0      	LDI  R31,0
002560 0fe4      	ADD  R30,R20
002561 1ff5      	ADC  R31,R21
002562 010f      	MOVW R0,R30
002563 89ae      	LDD  R26,Y+22
002564 89bf      	LDD  R27,Y+22+1
002565 940e 3f2d 	CALL __GETW1P
002567 81e2      	LDD  R30,Z+2
002568 01d0      	MOVW R26,R0
002569 e0f0      	LDI  R31,0
00256a 17ea      	CP   R30,R26
00256b 07fb      	CPC  R31,R27
00256c f460      	BRSH _0x327
                 ;					cc = fp->fs->csize - csect;
00256d 89ae      	LDD  R26,Y+22
00256e 89bf      	LDD  R27,Y+22+1
00256f 940e 3f2d 	CALL __GETW1P
002571 81e2      	LDD  R30,Z+2
002572 e0f0      	LDI  R31,0
002573 01df      	MOVW R26,R30
002574 2fe0      	MOV  R30,R16
002575 e0f0      	LDI  R31,0
002576 1bae      	SUB  R26,R30
002577 0bbf      	SBC  R27,R31
002578 01ad      	MOVW R20,R26
                 ;				if (disk_write(fp->fs->drv, wbuff, sect, cc))
                 _0x327:
002579 89ae      	LDD  R26,Y+22
00257a 89bf      	LDD  R27,Y+22+1
00257b 940e 3f2d 	CALL __GETW1P
00257d 81e1      	LDD  R30,Z+1
00257e 93ea      	ST   -Y,R30
00257f 81ef      	LDD  R30,Y+7
002580 85f8      	LDD  R31,Y+7+1
002581 93fa      	ST   -Y,R31
002582 93ea      	ST   -Y,R30
                +
002583 85eb     +LDD R30 , Y + 11
002584 85fc     +LDD R31 , Y + 11 + 1
002585 856d     +LDD R22 , Y + 11 + 2
002586 857e     +LDD R23 , Y + 11 + 3
                 	__GETD1S 11
002587 940e 3f5a 	CALL __PUTPARD1
002589 01da      	MOVW R26,R20
00258a 940e 0a58 	CALL _disk_write
00258c 30e0      	CPI  R30,0
00258d f031      	BREQ _0x328
                 ;					ABORT(fp->fs, FR_DISK_ERR);
00258e 89ae      	LDD  R26,Y+22
00258f 89bf      	LDD  R27,Y+22+1
002590 9615      	ADIW R26,5
002591 e0e1      	LDI  R30,LOW(1)
002592 93ec      	ST   X,R30
002593 c10c      	RJMP _0x20C000F
                 _0x328:
                 ;#if _FS_MINIMIZE <= 2
                 ;#if _FS_TINY
                 ;				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct write */
002594 89ae      	LDD  R26,Y+22
002595 89bf      	LDD  R27,Y+22+1
002596 940e 3f2d 	CALL __GETW1P
002598 96ba      	ADIW R30,42
002599 01df      	MOVW R26,R30
00259a 940e 3f31 	CALL __GETD1P
                +
00259c 85a8     +LDD R26 , Y + 8
00259d 85b9     +LDD R27 , Y + 8 + 1
00259e 858a     +LDD R24 , Y + 8 + 2
00259f 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
0025a0 940e 3dda 	CALL __SUBD12
0025a2 01df      	MOVW R26,R30
0025a3 01cb      	MOVW R24,R22
0025a4 01fa      	MOVW R30,R20
0025a5 2766      	CLR  R22
0025a6 2777      	CLR  R23
0025a7 940e 3f84 	CALL __CPD21
0025a9 f580      	BRSH _0x329
                 ;					mem_cpy(fp->fs->win, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
0025aa 89ae      	LDD  R26,Y+22
0025ab 89bf      	LDD  R27,Y+22+1
0025ac 940e 3f2d 	CALL __GETW1P
0025ae 96be      	ADIW R30,46
0025af 93fa      	ST   -Y,R31
0025b0 93ea      	ST   -Y,R30
0025b1 8da8      	LDD  R26,Y+24
0025b2 8db9      	LDD  R27,Y+24+1
0025b3 940e 3f2d 	CALL __GETW1P
0025b5 96ba      	ADIW R30,42
0025b6 01df      	MOVW R26,R30
0025b7 940e 3f31 	CALL __GETD1P
0025b9 01df      	MOVW R26,R30
0025ba 01cb      	MOVW R24,R22
                +
0025bb 85ea     +LDD R30 , Y + 10
0025bc 85fb     +LDD R31 , Y + 10 + 1
0025bd 856c     +LDD R22 , Y + 10 + 2
0025be 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
0025bf 940e 3ddf 	CALL __SUBD21
                +
0025c1 e0e0     +LDI R30 , LOW ( 0x200 )
0025c2 e0f2     +LDI R31 , HIGH ( 0x200 )
0025c3 e060     +LDI R22 , BYTE3 ( 0x200 )
0025c4 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
0025c5 940e 3e70 	CALL __MULD12U
0025c7 85a8      	LDD  R26,Y+8
0025c8 85b9      	LDD  R27,Y+8+1
0025c9 2788      	CLR  R24
0025ca 2799      	CLR  R25
0025cb 0fea      	ADD  R30,R26
0025cc 1ffb      	ADC  R31,R27
0025cd 93fa      	ST   -Y,R31
0025ce 93ea      	ST   -Y,R30
0025cf e0a0      	LDI  R26,LOW(512)
0025d0 e0b2      	LDI  R27,HIGH(512)
0025d1 940e 0d80 	CALL _mem_cpy_G000
                 ;					fp->fs->wflag = 0;
0025d3 89ae      	LDD  R26,Y+22
0025d4 89bf      	LDD  R27,Y+22+1
0025d5 940e 3f2d 	CALL __GETW1P
0025d7 9634      	ADIW R30,4
0025d8 e0a0      	LDI  R26,LOW(0)
0025d9 83a0      	STD  Z+0,R26
                 ;				}
                 ;#else
                 ;				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write */
                 ;					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
                 ;					fp->flag &= ~FA__DIRTY;
                 ;				}
                 ;#endif
                 ;#endif
                 ;				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
                 _0x329:
0025da 01fa      	MOVW R30,R20
0025db 0fee      	LSL  R30
0025dc 1fff      	ROL  R31
0025dd 2ffe      	MOV  R31,R30
0025de e0e0      	LDI  R30,0
0025df 019f      	MOVW R18,R30
                 ;				continue;
0025e0 c077      	RJMP _0x317
                 ;			}
                 ;#if _FS_TINY
                 ;			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
                 _0x326:
0025e1 89ee      	LDD  R30,Y+22
0025e2 89ff      	LDD  R31,Y+22+1
                +
0025e3 81a6     +LDD R26 , Z + 6
0025e4 81b7     +LDD R27 , Z + 6 + 1
0025e5 8580     +LDD R24 , Z + 6 + 2
0025e6 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
0025e7 010d      	MOVW R0,R26
0025e8 89ae      	LDD  R26,Y+22
0025e9 89bf      	LDD  R27,Y+22+1
0025ea 961a      	ADIW R26,10
0025eb 940e 3f31 	CALL __GETD1P
0025ed 01d0      	MOVW R26,R0
0025ee 940e 3f84 	CALL __CPD21
0025f0 f0d0      	BRLO _0x32A
                 ;				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
0025f1 89ae      	LDD  R26,Y+22
0025f2 89bf      	LDD  R27,Y+22+1
0025f3 940e 3f2d 	CALL __GETW1P
0025f5 01df      	MOVW R26,R30
0025f6 940e 0df6 	CALL _sync_window_G000
0025f8 30e0      	CPI  R30,0
0025f9 f031      	BREQ _0x32B
0025fa 89ae      	LDD  R26,Y+22
0025fb 89bf      	LDD  R27,Y+22+1
0025fc 9615      	ADIW R26,5
0025fd e0e1      	LDI  R30,LOW(1)
0025fe 93ec      	ST   X,R30
0025ff c0a0      	RJMP _0x20C000F
                 _0x32B:
                 ;				fp->fs->winsect = sect;
002600 89ae      	LDD  R26,Y+22
002601 89bf      	LDD  R27,Y+22+1
002602 940e 3f2d 	CALL __GETW1P
002604 96ba      	ADIW R30,42
                +
002605 85a8     +LDD R26 , Y + 8
002606 85b9     +LDD R27 , Y + 8 + 1
002607 858a     +LDD R24 , Y + 8 + 2
002608 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
002609 940e 3f55 	CALL __PUTDZ20
                 ;			}
                 ;#else
                 ;			if (fp->dsect != sect) {		/* Fill sector cache with file data */
                 ;				if (fp->fptr < fp->fsize &&
                 ;					disk_read(fp->fs->drv, fp->buf, sect, 1))
                 ;						ABORT(fp->fs, FR_DISK_ERR);
                 ;			}
                 ;#endif
                 ;			fp->dsect = sect;
                 _0x32A:
                +
00260b 85e8     +LDD R30 , Y + 8
00260c 85f9     +LDD R31 , Y + 8 + 1
00260d 856a     +LDD R22 , Y + 8 + 2
00260e 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
                +
00260f 89ae     +LDD R26 , Y + 22
002610 89bf     +LDD R27 , Y + 22 + 1
002611 9656     +ADIW R26 , 22
002612 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 22,22
                 ;		}
                 ;		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
                 _0x31A:
002614 89ee      	LDD  R30,Y+22
002615 89ff      	LDD  R31,Y+22+1
002616 81a6      	LDD  R26,Z+6
002617 81b7      	LDD  R27,Z+7
002618 01fd      	MOVW R30,R26
002619 70f1      	ANDI R31,HIGH(0x1FF)
00261a e0a0      	LDI  R26,LOW(512)
00261b e0b2      	LDI  R27,HIGH(512)
00261c 1bae      	SUB  R26,R30
00261d 0bbf      	SBC  R27,R31
00261e 019d      	MOVW R18,R26
                 ;		if (wcnt > btw) wcnt = btw;
00261f 89ea      	LDD  R30,Y+18
002620 89fb      	LDD  R31,Y+18+1
002621 17e2      	CP   R30,R18
002622 07f3      	CPC  R31,R19
002623 f410      	BRSH _0x32C
                +
002624 892a     +LDD R18 , Y + 18
002625 893b     +LDD R19 , Y + 18 + 1
                 	__GETWRS 18,19,18
                 ;#if _FS_TINY
                 ;		if (move_window(fp->fs, fp->dsect))	/* Move sector window */
                 _0x32C:
002626 89ae      	LDD  R26,Y+22
002627 89bf      	LDD  R27,Y+22+1
002628 940e 3f2d 	CALL __GETW1P
00262a 93fa      	ST   -Y,R31
00262b 93ea      	ST   -Y,R30
00262c 8de8      	LDD  R30,Y+24
00262d 8df9      	LDD  R31,Y+24+1
                +
00262e 89a6     +LDD R26 , Z + 22
00262f 89b7     +LDD R27 , Z + 22 + 1
002630 8d80     +LDD R24 , Z + 22 + 2
002631 8d91     +LDD R25 , Z + 22 + 3
                 	__GETD2Z 22
002632 940e 0e73 	CALL _move_window_G000
002634 30e0      	CPI  R30,0
002635 f031      	BREQ _0x32D
                 ;			ABORT(fp->fs, FR_DISK_ERR);
002636 89ae      	LDD  R26,Y+22
002637 89bf      	LDD  R27,Y+22+1
002638 9615      	ADIW R26,5
002639 e0e1      	LDI  R30,LOW(1)
00263a 93ec      	ST   X,R30
00263b c064      	RJMP _0x20C000F
                 _0x32D:
                 ;		mem_cpy(&fp->fs->win[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
00263c 89ae      	LDD  R26,Y+22
00263d 89bf      	LDD  R27,Y+22+1
00263e 940e 3f2d 	CALL __GETW1P
002640 96be      	ADIW R30,46
002641 010f      	MOVW R0,R30
002642 9616      	ADIW R26,6
002643 940e 3f2d 	CALL __GETW1P
002645 70f1      	ANDI R31,HIGH(0x1FF)
002646 0de0      	ADD  R30,R0
002647 1df1      	ADC  R31,R1
002648 93fa      	ST   -Y,R31
002649 93ea      	ST   -Y,R30
00264a 85e8      	LDD  R30,Y+8
00264b 85f9      	LDD  R31,Y+8+1
00264c 93fa      	ST   -Y,R31
00264d 93ea      	ST   -Y,R30
00264e 01d9      	MOVW R26,R18
00264f 940e 0d80 	CALL _mem_cpy_G000
                 ;		fp->fs->wflag = 1;
002651 89ae      	LDD  R26,Y+22
002652 89bf      	LDD  R27,Y+22+1
002653 940e 3f2d 	CALL __GETW1P
002655 9634      	ADIW R30,4
002656 e0a1      	LDI  R26,LOW(1)
002657 83a0      	STD  Z+0,R26
                 ;#else
                 ;		mem_cpy(&fp->buf[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
                 ;		fp->flag |= FA__DIRTY;
                 ;#endif
                 ;	}
                 _0x317:
002658 01f9      	MOVW R30,R18
002659 81ae      	LDD  R26,Y+6
00265a 81bf      	LDD  R27,Y+6+1
00265b 0fea      	ADD  R30,R26
00265c 1ffb      	ADC  R31,R27
00265d 83ee      	STD  Y+6,R30
00265e 83ff      	STD  Y+6+1,R31
00265f 89ee      	LDD  R30,Y+22
002660 89ff      	LDD  R31,Y+22+1
002661 9636      	ADIW R30,6
002662 010f      	MOVW R0,R30
002663 01df      	MOVW R26,R30
002664 940e 3f31 	CALL __GETD1P
002666 01df      	MOVW R26,R30
002667 01cb      	MOVW R24,R22
002668 01f9      	MOVW R30,R18
002669 2766      	CLR  R22
00266a 2777      	CLR  R23
00266b 940e 3dd0 	CALL __ADDD12
00266d 01d0      	MOVW R26,R0
00266e 940e 3f3c 	CALL __PUTDP1
002670 89a8      	LDD  R26,Y+16
002671 89b9      	LDD  R27,Y+16+1
002672 91ed      	LD   R30,X+
002673 91fd      	LD   R31,X+
002674 0fe2      	ADD  R30,R18
002675 1ff3      	ADC  R31,R19
002676 93fe      	ST   -X,R31
002677 93ee      	ST   -X,R30
002678 89ea      	LDD  R30,Y+18
002679 89fb      	LDD  R31,Y+18+1
00267a 1be2      	SUB  R30,R18
00267b 0bf3      	SBC  R31,R19
00267c 8bea      	STD  Y+18,R30
00267d 8bfb      	STD  Y+18+1,R31
00267e cdea      	RJMP _0x318
                 _0x319:
                 ;
                 ;	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
00267f 89ee      	LDD  R30,Y+22
002680 89ff      	LDD  R31,Y+22+1
                +
002681 81a6     +LDD R26 , Z + 6
002682 81b7     +LDD R27 , Z + 6 + 1
002683 8580     +LDD R24 , Z + 6 + 2
002684 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002685 010d      	MOVW R0,R26
002686 89ae      	LDD  R26,Y+22
002687 89bf      	LDD  R27,Y+22+1
002688 961a      	ADIW R26,10
002689 940e 3f31 	CALL __GETD1P
00268b 01d0      	MOVW R26,R0
00268c 940e 3f7f 	CALL __CPD12
00268e f450      	BRSH _0x32E
00268f 89ae      	LDD  R26,Y+22
002690 89bf      	LDD  R27,Y+22+1
002691 9616      	ADIW R26,6
002692 940e 3f31 	CALL __GETD1P
                +
002694 89ae     +LDD R26 , Y + 22
002695 89bf     +LDD R27 , Y + 22 + 1
002696 961a     +ADIW R26 , 10
002697 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 22,10
                 ;	fp->flag |= FA__WRITTEN;						/* Set file change flag */
                 _0x32E:
002699 89ae      	LDD  R26,Y+22
00269a 89bf      	LDD  R27,Y+22+1
00269b 9614      	ADIW R26,4
00269c 91ec      	LD   R30,X
00269d 62e0      	ORI  R30,0x20
00269e 93ec      	ST   X,R30
                 ;    //release_spi();
                 ;	LEAVE_FF(fp->fs, FR_OK);
00269f e0e0      	LDI  R30,LOW(0)
                 _0x20C000F:
0026a0 940e 3f90 	CALL __LOADLOCR6
0026a2 9668      	ADIW R28,24
0026a3 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Synchronize the File                                                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_sync (
                 ;	FIL* fp		/* Pointer to the file object */
                 ;)
                 ;{
                 _f_sync:
                 ; .FSTART _f_sync
                 ;	FRESULT res;
                 ;	DWORD tm;
                 ;	BYTE *dir;
                 ;
                 ;
                 ;	res = validate(fp);					/* Check validity of the object */
0026a4 93ba      	ST   -Y,R27
0026a5 93aa      	ST   -Y,R26
0026a6 9724      	SBIW R28,4
0026a7 940e 3f8b 	CALL __SAVELOCR4
                 ;	*fp -> Y+8
                 ;	res -> R17
                 ;	tm -> Y+4
                 ;	*dir -> R18,R19
0026a9 85a8      	LDD  R26,Y+8
0026aa 85b9      	LDD  R27,Y+8+1
0026ab d9b6      	RCALL _validate_G000
0026ac 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
0026ad 3010      	CPI  R17,0
0026ae f009      	BREQ PC+2
0026af c091      	RJMP _0x32F
                 ;		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
0026b0 85e8      	LDD  R30,Y+8
0026b1 85f9      	LDD  R31,Y+8+1
0026b2 81a4      	LDD  R26,Z+4
0026b3 72a0      	ANDI R26,LOW(0x20)
0026b4 f409      	BRNE PC+2
0026b5 c08b      	RJMP _0x330
                 ;			/* Write-back dirty buffer */
                 ;
                 ;#if !_FS_TINY
                 ;			if (fp->flag & FA__DIRTY) {
                 ;				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;					LEAVE_FF(fp->fs, FR_DISK_ERR);
                 ;				fp->flag &= ~FA__DIRTY;
                 ;			}
                 ;#endif
                 ;			res = move_window(fp->fs, fp->dir_sect);
0026b6 85a8      	LDD  R26,Y+8
0026b7 85b9      	LDD  R27,Y+8+1
0026b8 940e 3f2d 	CALL __GETW1P
0026ba 93fa      	ST   -Y,R31
0026bb 93ea      	ST   -Y,R30
0026bc 85ea      	LDD  R30,Y+10
0026bd 85fb      	LDD  R31,Y+10+1
                +
0026be 8da2     +LDD R26 , Z + 26
0026bf 8db3     +LDD R27 , Z + 26 + 1
0026c0 8d84     +LDD R24 , Z + 26 + 2
0026c1 8d95     +LDD R25 , Z + 26 + 3
                 	__GETD2Z 26
0026c2 940e 0e73 	CALL _move_window_G000
0026c4 2f1e      	MOV  R17,R30
                 ;			if (res == FR_OK) {
0026c5 3010      	CPI  R17,0
0026c6 f009      	BREQ PC+2
0026c7 c079      	RJMP _0x331
                 ;				dir = fp->dir_ptr;
0026c8 85a8      	LDD  R26,Y+8
0026c9 85b9      	LDD  R27,Y+8+1
0026ca 965e      	ADIW R26,30
0026cb 912d      	LD   R18,X+
0026cc 913c      	LD   R19,X
                 ;				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
0026cd 01d9      	MOVW R26,R18
0026ce 961b      	ADIW R26,11
0026cf 91ec      	LD   R30,X
0026d0 62e0      	ORI  R30,0x20
0026d1 93ec      	ST   X,R30
                 ;				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
0026d2 85e8      	LDD  R30,Y+8
0026d3 85f9      	LDD  R31,Y+8+1
0026d4 85e2      	LDD  R30,Z+10
                +
0026d5 01d9     +MOVW R26 , R18
0026d6 965c     +ADIW R26 , 28
0026d7 93ec     +ST X , R30
                 	__PUTB1RNS 18,28
0026d8 85e8      	LDD  R30,Y+8
0026d9 85f9      	LDD  R31,Y+8+1
0026da 85a2      	LDD  R26,Z+10
0026db 85b3      	LDD  R27,Z+11
0026dc 01fd      	MOVW R30,R26
0026dd 2fef      	MOV  R30,R31
0026de e0f0      	LDI  R31,0
                +
0026df 01d9     +MOVW R26 , R18
0026e0 965d     +ADIW R26 , 29
0026e1 93ec     +ST X , R30
                 	__PUTB1RNS 18,29
0026e2 85e8      	LDD  R30,Y+8
0026e3 85f9      	LDD  R31,Y+8+1
                +
0026e4 85a2     +LDD R26 , Z + 10
0026e5 85b3     +LDD R27 , Z + 10 + 1
0026e6 8584     +LDD R24 , Z + 10 + 2
0026e7 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
0026e8 01fd      	MOVW R30,R26
0026e9 01bc      	MOVW R22,R24
0026ea 940e 3e49 	CALL __LSRD16
                +
0026ec 01d9     +MOVW R26 , R18
0026ed 965e     +ADIW R26 , 30
0026ee 93ec     +ST X , R30
                 	__PUTB1RNS 18,30
0026ef 85e8      	LDD  R30,Y+8
0026f0 85f9      	LDD  R31,Y+8+1
                +
0026f1 85a2     +LDD R26 , Z + 10
0026f2 85b3     +LDD R27 , Z + 10 + 1
0026f3 8584     +LDD R24 , Z + 10 + 2
0026f4 8595     +LDD R25 , Z + 10 + 3
                 	__GETD2Z 10
0026f5 e1e8      	LDI  R30,LOW(24)
0026f6 940e 3e18 	CALL __LSRD12
                +
0026f8 01d9     +MOVW R26 , R18
0026f9 965f     +ADIW R26 , 31
0026fa 93ec     +ST X , R30
                 	__PUTB1RNS 18,31
                 ;				st_clust(dir, fp->sclust);					/* Update start cluster */
0026fb 933a      	ST   -Y,R19
0026fc 932a      	ST   -Y,R18
0026fd 85ea      	LDD  R30,Y+10
0026fe 85fb      	LDD  R31,Y+10+1
                +
0026ff 85a6     +LDD R26 , Z + 14
002700 85b7     +LDD R27 , Z + 14 + 1
002701 8980     +LDD R24 , Z + 14 + 2
002702 8991     +LDD R25 , Z + 14 + 3
                 	__GETD2Z 14
002703 940e 1783 	CALL _st_clust_G000
                 ;				tm = get_fattime();							/* Update updated time */
002705 d643      	RCALL _get_fattime
                +
002706 83ec     +STD Y + 4 , R30
002707 83fd     +STD Y + 4 + 1 , R31
002708 836e     +STD Y + 4 + 2 , R22
002709 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;				ST_DWORD(dir+DIR_WrtTime, tm);
00270a 81ec      	LDD  R30,Y+4
                +
00270b 01d9     +MOVW R26 , R18
00270c 9656     +ADIW R26 , 22
00270d 93ec     +ST X , R30
                 	__PUTB1RNS 18,22
00270e 81ed      	LDD  R30,Y+5
                +
00270f 01d9     +MOVW R26 , R18
002710 9657     +ADIW R26 , 23
002711 93ec     +ST X , R30
                 	__PUTB1RNS 18,23
                +
002712 81ec     +LDD R30 , Y + 4
002713 81fd     +LDD R31 , Y + 4 + 1
002714 816e     +LDD R22 , Y + 4 + 2
002715 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
002716 940e 3e49 	CALL __LSRD16
                +
002718 01d9     +MOVW R26 , R18
002719 9658     +ADIW R26 , 24
00271a 93ec     +ST X , R30
                 	__PUTB1RNS 18,24
                +
00271b 81ac     +LDD R26 , Y + 4
00271c 81bd     +LDD R27 , Y + 4 + 1
00271d 818e     +LDD R24 , Y + 4 + 2
00271e 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
00271f e1e8      	LDI  R30,LOW(24)
002720 940e 3e18 	CALL __LSRD12
                +
002722 01d9     +MOVW R26 , R18
002723 9659     +ADIW R26 , 25
002724 93ec     +ST X , R30
                 	__PUTB1RNS 18,25
                 ;				ST_WORD(dir+DIR_LstAccDate, 0);
002725 01f9      	MOVW R30,R18
002726 9672      	ADIW R30,18
002727 e0a0      	LDI  R26,LOW(0)
002728 83a0      	STD  Z+0,R26
002729 01f9      	MOVW R30,R18
00272a 9673      	ADIW R30,19
00272b 83a0      	STD  Z+0,R26
                 ;				fp->flag &= ~FA__WRITTEN;
00272c 85a8      	LDD  R26,Y+8
00272d 85b9      	LDD  R27,Y+8+1
00272e 9614      	ADIW R26,4
00272f 91ec      	LD   R30,X
002730 7def      	ANDI R30,0xDF
002731 93ec      	ST   X,R30
                 ;				fp->fs->wflag = 1;
002732 85a8      	LDD  R26,Y+8
002733 85b9      	LDD  R27,Y+8+1
002734 940e 3f2d 	CALL __GETW1P
002736 9634      	ADIW R30,4
002737 e0a1      	LDI  R26,LOW(1)
002738 83a0      	STD  Z+0,R26
                 ;				res = sync_fs(fp->fs);
002739 85a8      	LDD  R26,Y+8
00273a 85b9      	LDD  R27,Y+8+1
00273b 940e 3f2d 	CALL __GETW1P
00273d 01df      	MOVW R26,R30
00273e 940e 0ea5 	CALL _sync_fs_G000
002740 2f1e      	MOV  R17,R30
                 ;			}
                 ;		}
                 _0x331:
                 ;	}
                 _0x330:
                 ;
                 ;	LEAVE_FF(fp->fs, res);
                 _0x32F:
002741 2fe1      	MOV  R30,R17
002742 940e 3f92 	CALL __LOADLOCR4
002744 962a      	ADIW R28,10
002745 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;#endif /* !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Close File                                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_close (
                 ;	FIL *fp		/* Pointer to the file object to be closed */
                 ;)
                 ;{
                 _f_close:
                 ; .FSTART _f_close
                 ;	FRESULT res;
                 ;
                 ;    // init_spi(1);
                 ;#if _FS_READONLY
                 ;	res = validate(fp);
                 ;	{
                 ;#if _FS_REENTRANT
                 ;		FATFS *fs = 0;
                 ;		if (res == FR_OK) fs = fp->fs;	/* Get corresponding file system object */
                 ;#endif
                 ;		if (res == FR_OK) fp->fs = 0;	/* Invalidate file object */
                 ;		LEAVE_FF(fs, res);
                 ;	}
                 ;#else
                 ;	res = f_sync(fp);					/* Flush cached data */
002746 93ba      	ST   -Y,R27
002747 93aa      	ST   -Y,R26
002748 931a      	ST   -Y,R17
                 ;	*fp -> Y+1
                 ;	res -> R17
002749 81a9      	LDD  R26,Y+1
00274a 81ba      	LDD  R27,Y+1+1
00274b df58      	RCALL _f_sync
00274c 2f1e      	MOV  R17,R30
                 ;   // release_spi();
                 ;#if _FS_LOCK
                 ;	if (res == FR_OK) {					/* Decrement open counter */
                 ;#if _FS_REENTRANT
                 ;		res = validate(fp);
                 ;		if (res == FR_OK) {
                 ;			res = dec_lock(fp->lockid);
                 ;			unlock_fs(fp->fs, FR_OK);
                 ;		}
                 ;#else
                 ;		res = dec_lock(fp->lockid);
                 ;#endif
                 ;	}
                 ;#endif
                 ;   // release_spi();
                 ;	if (res == FR_OK) fp->fs = 0;		/* Invalidate file object */
00274d 3010      	CPI  R17,0
00274e f431      	BRNE _0x332
00274f 81a9      	LDD  R26,Y+1
002750 81ba      	LDD  R27,Y+1+1
002751 e0e0      	LDI  R30,LOW(0)
002752 e0f0      	LDI  R31,HIGH(0)
002753 93ed      	ST   X+,R30
002754 93fc      	ST   X,R31
                 ;	return res;
                 _0x332:
002755 2fe1      	MOV  R30,R17
002756 8118      	LDD  R17,Y+0
002757 9623      	ADIW R28,3
002758 9508      	RET
                 ;#endif
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Change Current Directory or Current Drive, Get Current Directory      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#if _FS_RPATH >= 1
                 ;#if _VOLUMES >= 2
                 ;FRESULT f_chdrive (
                 ;	const TCHAR* path		/* Drive number */
                 ;)
                 ;{
                 ;	int vol;
                 ;
                 ;
                 ;	vol = get_ldnumber(&path);
                 ;	if (vol < 0) return FR_INVALID_DRIVE;
                 ;
                 ;	CurrVol = (BYTE)vol;
                 ;
                 ;	return FR_OK;
                 ;}
                 ;#endif
                 ;
                 ;
                 ;FRESULT f_chdir (
                 ;	const TCHAR* path	/* Pointer to the directory path */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 0);
                 ;	if (res == FR_OK) {
                 ;		INIT_BUF(dj);
                 ;		res = follow_path(&dj, path);		/* Follow the path */
                 ;		FREE_BUF();
                 ;		if (res == FR_OK) {					/* Follow completed */
                 ;			if (!dj.dir) {
                 ;				dj.fs->cdir = dj.sclust;	/* Start directory itself */
                 ;			} else {
                 ;				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
                 ;					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
                 ;				else
                 ;					res = FR_NO_PATH;		/* Reached but a file */
                 ;			}
                 ;		}
                 ;		if (res == FR_NO_FILE) res = FR_NO_PATH;
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;
                 ;#if _FS_RPATH >= 2
                 ;FRESULT f_getcwd (
                 ;	TCHAR* buff,	/* Pointer to the directory path */
                 ;	UINT len		/* Size of path */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	UINT i, n;
                 ;	DWORD ccl;
                 ;	TCHAR *tp;
                 ;	FILINFO fno;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	*buff = 0;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
                 ;	if (res == FR_OK) {
                 ;		INIT_BUF(dj);
                 ;		i = len;			/* Bottom of buffer (directory stack base) */
                 ;		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
                 ;		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
                 ;			res = dir_sdi(&dj, 1);			/* Get parent directory */
                 ;			if (res != FR_OK) break;
                 ;			res = dir_read(&dj, 0);
                 ;			if (res != FR_OK) break;
                 ;			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
                 ;			res = dir_sdi(&dj, 0);
                 ;			if (res != FR_OK) break;
                 ;			do {							/* Find the entry links to the child directory */
                 ;				res = dir_read(&dj, 0);
                 ;				if (res != FR_OK) break;
                 ;				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
                 ;				res = dir_next(&dj, 0);
                 ;			} while (res == FR_OK);
                 ;			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
                 ;			if (res != FR_OK) break;
                 ;#if _USE_LFN
                 ;			fno.lfname = buff;
                 ;			fno.lfsize = i;
                 ;#endif
                 ;			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
                 ;			tp = fno.fname;
                 ;#if _USE_LFN
                 ;			if (*buff) tp = buff;
                 ;#endif
                 ;			for (n = 0; tp[n]; n++) ;
                 ;			if (i < n + 3) {
                 ;				res = FR_NOT_ENOUGH_CORE; break;
                 ;			}
                 ;			while (n) buff[--i] = tp[--n];
                 ;			buff[--i] = '/';
                 ;		}
                 ;		tp = buff;
                 ;		if (res == FR_OK) {
                 ;#if _VOLUMES >= 2
                 ;			*tp++ = '0' + CurrVol;			/* Put drive number */
                 ;			*tp++ = ':';
                 ;#endif
                 ;			if (i == len) {					/* Root-directory */
                 ;				*tp++ = '/';
                 ;			} else {						/* Sub-directroy */
                 ;				do		/* Add stacked path str */
                 ;					*tp++ = buff[i++];
                 ;				while (i < len);
                 ;			}
                 ;		}
                 ;		*tp = 0;
                 ;		FREE_BUF();
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;#endif /* _FS_RPATH >= 2 */
                 ;#endif /* _FS_RPATH >= 1 */
                 ;
                 ;
                 ;
                 ;#if _FS_MINIMIZE <= 2
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Seek File R/W Pointer                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_lseek (
                 ;	FIL* fp,		/* Pointer to the file object */
                 ;	DWORD ofs		/* File pointer from top of file */
                 ;)
                 ;{
                 _f_lseek:
                 ; .FSTART _f_lseek
                 ;	FRESULT res;
                 ;    //init_spi(1);
                 ;
                 ;	res = validate(fp);					/* Check validity of the object */
002759 940e 3f5f 	CALL __PUTPARD2
00275b 931a      	ST   -Y,R17
                 ;	*fp -> Y+5
                 ;	ofs -> Y+1
                 ;	res -> R17
00275c 81ad      	LDD  R26,Y+5
00275d 81be      	LDD  R27,Y+5+1
00275e d903      	RCALL _validate_G000
00275f 2f1e      	MOV  R17,R30
                 ;	if (res != FR_OK) LEAVE_FF(fp->fs, res);
002760 3010      	CPI  R17,0
002761 f011      	BREQ _0x333
002762 8118      	LDD  R17,Y+0
002763 c58c      	RJMP _0x20C000D
                 ;	if (fp->err)						/* Check error */
                 _0x333:
002764 81ed      	LDD  R30,Y+5
002765 81fe      	LDD  R31,Y+5+1
002766 81e5      	LDD  R30,Z+5
002767 30e0      	CPI  R30,0
002768 f029      	BREQ _0x334
                 ;		LEAVE_FF(fp->fs, (FRESULT)fp->err);
002769 81ed      	LDD  R30,Y+5
00276a 81fe      	LDD  R31,Y+5+1
00276b 81e5      	LDD  R30,Z+5
00276c 8118      	LDD  R17,Y+0
00276d c582      	RJMP _0x20C000D
                 ;
                 ;#if _USE_FASTSEEK
                 ;	if (fp->cltbl) {	/* Fast seek */
                 ;		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
                 ;
                 ;		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
                 ;			tbl = fp->cltbl;
                 ;			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
                 ;			cl = fp->sclust;			/* Top of the chain */
                 ;			if (cl) {
                 ;				do {
                 ;					/* Get a fragment */
                 ;					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
                 ;					do {
                 ;						pcl = cl; ncl++;
                 ;						cl = get_fat(fp->fs, cl);
                 ;						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
                 ;						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                 ;					} while (cl == pcl + 1);
                 ;					if (ulen <= tlen) {		/* Store the length and top of the fragment */
                 ;						*tbl++ = ncl; *tbl++ = tcl;
                 ;					}
                 ;				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
                 ;			}
                 ;			*fp->cltbl = ulen;	/* Number of items used */
                 ;			if (ulen <= tlen)
                 ;				*tbl = 0;		/* Terminate table */
                 ;			else
                 ;				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
                 ;
                 ;		} else {						/* Fast seek */
                 ;			if (ofs > fp->fsize)		/* Clip offset at the file size */
                 ;				ofs = fp->fsize;
                 ;			fp->fptr = ofs;				/* Set file pointer */
                 ;			if (ofs) {
                 ;				fp->clust = clmt_clust(fp, ofs - 1);
                 ;				dsc = clust2sect(fp->fs, fp->clust);
                 ;				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
                 ;				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
                 ;				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
                 ;#if !_FS_TINY
                 ;#if !_FS_READONLY
                 ;					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
                 ;						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;							ABORT(fp->fs, FR_DISK_ERR);
                 ;						fp->flag &= ~FA__DIRTY;
                 ;					}
                 ;#endif
                 ;					if (disk_read(fp->fs->drv, fp->buf, dsc, 1))	/* Load current sector */
                 ;						ABORT(fp->fs, FR_DISK_ERR);
                 ;#endif
                 ;					fp->dsect = dsc;
                 ;				}
                 ;			}
                 ;		}
                 ;	} else
                 ;#endif
                 ;
                 ;	/* Normal Seek */
                 ;	{
                 _0x334:
                 ;		DWORD clst, bcs, nsect, ifptr;
                 ;
                 ;		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
00276e 9760      	SBIW R28,16
                 ;	*fp -> Y+21
                 ;	ofs -> Y+17
                 ;	clst -> Y+12
                 ;	bcs -> Y+8
                 ;	nsect -> Y+4
                 ;	ifptr -> Y+0
                 ;#if !_FS_READONLY
                 ;			 && !(fp->flag & FA_WRITE)
                 ;#endif
                 ;			) ofs = fp->fsize;
00276f 89ad      	LDD  R26,Y+21
002770 89be      	LDD  R27,Y+21+1
002771 961a      	ADIW R26,10
002772 940e 3f31 	CALL __GETD1P
                +
002774 89a9     +LDD R26 , Y + 17
002775 89ba     +LDD R27 , Y + 17 + 1
002776 898b     +LDD R24 , Y + 17 + 2
002777 899c     +LDD R25 , Y + 17 + 3
                 	__GETD2S 17
002778 940e 3f7f 	CALL __CPD12
00277a f428      	BRSH _0x336
00277b 89ed      	LDD  R30,Y+21
00277c 89fe      	LDD  R31,Y+21+1
00277d 81a4      	LDD  R26,Z+4
00277e 70a2      	ANDI R26,LOW(0x2)
00277f f009      	BREQ _0x337
                 _0x336:
002780 c009      	RJMP _0x335
                 _0x337:
002781 89ad      	LDD  R26,Y+21
002782 89be      	LDD  R27,Y+21+1
002783 961a      	ADIW R26,10
002784 940e 3f31 	CALL __GETD1P
                +
002786 8be9     +STD Y + 17 , R30
002787 8bfa     +STD Y + 17 + 1 , R31
002788 8b6b     +STD Y + 17 + 2 , R22
002789 8b7c     +STD Y + 17 + 3 , R23
                 	__PUTD1S 17
                 ;
                 ;		ifptr = fp->fptr;
                 _0x335:
00278a 89ad      	LDD  R26,Y+21
00278b 89be      	LDD  R27,Y+21+1
00278c 9616      	ADIW R26,6
00278d 940e 3f31 	CALL __GETD1P
00278f 940e 3f50 	CALL __PUTD1S0
                 ;		fp->fptr = nsect = 0;
                +
002791 e0e0     +LDI R30 , LOW ( 0x0 )
002792 e0f0     +LDI R31 , HIGH ( 0x0 )
002793 e060     +LDI R22 , BYTE3 ( 0x0 )
002794 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
                +
002795 83ec     +STD Y + 4 , R30
002796 83fd     +STD Y + 4 + 1 , R31
002797 836e     +STD Y + 4 + 2 , R22
002798 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                +
002799 89ad     +LDD R26 , Y + 21
00279a 89be     +LDD R27 , Y + 21 + 1
00279b 9616     +ADIW R26 , 6
00279c 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,6
                 ;		if (ofs) {
                +
00279e 89e9     +LDD R30 , Y + 17
00279f 89fa     +LDD R31 , Y + 17 + 1
0027a0 896b     +LDD R22 , Y + 17 + 2
0027a1 897c     +LDD R23 , Y + 17 + 3
                 	__GETD1S 17
0027a2 940e 3f71 	CALL __CPD10
0027a4 f409      	BRNE PC+2
0027a5 c1b5      	RJMP _0x338
                 ;			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
0027a6 89ad      	LDD  R26,Y+21
0027a7 89be      	LDD  R27,Y+21+1
0027a8 940e 3f2d 	CALL __GETW1P
0027aa 81e2      	LDD  R30,Z+2
0027ab e0f0      	LDI  R31,0
0027ac 940e 3e59 	CALL __CWD1
                +
0027ae e0a0     +LDI R26 , LOW ( 0x200 )
0027af e0b2     +LDI R27 , HIGH ( 0x200 )
0027b0 e080     +LDI R24 , BYTE3 ( 0x200 )
0027b1 e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
0027b2 940e 3e70 	CALL __MULD12U
                +
0027b4 87e8     +STD Y + 8 , R30
0027b5 87f9     +STD Y + 8 + 1 , R31
0027b6 876a     +STD Y + 8 + 2 , R22
0027b7 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
                 ;			if (ifptr > 0 &&
                 ;				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
0027b8 940e 3f4b 	CALL __GETD2S0
0027ba 940e 3f79 	CALL __CPD02
0027bc f548      	BRSH _0x33A
                +
0027bd 89e9     +LDD R30 , Y + 17
0027be 89fa     +LDD R31 , Y + 17 + 1
0027bf 896b     +LDD R22 , Y + 17 + 2
0027c0 897c     +LDD R23 , Y + 17 + 3
                 	__GETD1S 17
                +
0027c1 50e1     +SUBI R30 , LOW ( 1 )
0027c2 40f0     +SBCI R31 , HIGH ( 1 )
0027c3 4060     +SBCI R22 , BYTE3 ( 1 )
0027c4 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
0027c5 01df      	MOVW R26,R30
0027c6 01cb      	MOVW R24,R22
                +
0027c7 85e8     +LDD R30 , Y + 8
0027c8 85f9     +LDD R31 , Y + 8 + 1
0027c9 856a     +LDD R22 , Y + 8 + 2
0027ca 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
0027cb 940e 3ec6 	CALL __DIVD21U
0027cd 937f      	PUSH R23
0027ce 936f      	PUSH R22
0027cf 93ff      	PUSH R31
0027d0 93ef      	PUSH R30
0027d1 940e 3f46 	CALL __GETD1S0
                +
0027d3 50e1     +SUBI R30 , LOW ( 1 )
0027d4 40f0     +SBCI R31 , HIGH ( 1 )
0027d5 4060     +SBCI R22 , BYTE3 ( 1 )
0027d6 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
0027d7 01df      	MOVW R26,R30
0027d8 01cb      	MOVW R24,R22
                +
0027d9 85e8     +LDD R30 , Y + 8
0027da 85f9     +LDD R31 , Y + 8 + 1
0027db 856a     +LDD R22 , Y + 8 + 2
0027dc 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
0027dd 940e 3ec6 	CALL __DIVD21U
0027df 91af      	POP  R26
0027e0 91bf      	POP  R27
0027e1 918f      	POP  R24
0027e2 919f      	POP  R25
0027e3 940e 3f84 	CALL __CPD21
0027e5 f408      	BRSH _0x33B
                 _0x33A:
0027e6 c032      	RJMP _0x339
                 _0x33B:
                 ;				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
0027e7 940e 3f46 	CALL __GETD1S0
                +
0027e9 50e1     +SUBI R30 , LOW ( 1 )
0027ea 40f0     +SBCI R31 , HIGH ( 1 )
0027eb 4060     +SBCI R22 , BYTE3 ( 1 )
0027ec 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
0027ed 01df      	MOVW R26,R30
0027ee 01cb      	MOVW R24,R22
                +
0027ef 85e8     +LDD R30 , Y + 8
0027f0 85f9     +LDD R31 , Y + 8 + 1
0027f1 856a     +LDD R22 , Y + 8 + 2
0027f2 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
                +
0027f3 50e1     +SUBI R30 , LOW ( 1 )
0027f4 40f0     +SBCI R31 , HIGH ( 1 )
0027f5 4060     +SBCI R22 , BYTE3 ( 1 )
0027f6 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
0027f7 940e 3e5e 	CALL __COMD1
0027f9 940e 3de4 	CALL __ANDD12
                +
0027fb 89ad     +LDD R26 , Y + 21
0027fc 89be     +LDD R27 , Y + 21 + 1
0027fd 9616     +ADIW R26 , 6
0027fe 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,6
                 ;				ofs -= fp->fptr;
002800 89ad      	LDD  R26,Y+21
002801 89be      	LDD  R27,Y+21+1
002802 9616      	ADIW R26,6
002803 940e 3f31 	CALL __GETD1P
                +
002805 89a9     +LDD R26 , Y + 17
002806 89ba     +LDD R27 , Y + 17 + 1
002807 898b     +LDD R24 , Y + 17 + 2
002808 899c     +LDD R25 , Y + 17 + 3
                 	__GETD2S 17
002809 940e 3ddf 	CALL __SUBD21
                +
00280b 8ba9     +STD Y + 17 , R26
00280c 8bba     +STD Y + 17 + 1 , R27
00280d 8b8b     +STD Y + 17 + 2 , R24
00280e 8b9c     +STD Y + 17 + 3 , R25
                 	__PUTD2S 17
                 ;				clst = fp->clust;
00280f 89ad      	LDD  R26,Y+21
002810 89be      	LDD  R27,Y+21+1
002811 9652      	ADIW R26,18
002812 940e 3f31 	CALL __GETD1P
                +
002814 87ec     +STD Y + 12 , R30
002815 87fd     +STD Y + 12 + 1 , R31
002816 876e     +STD Y + 12 + 2 , R22
002817 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;			} else {									/* When seek to back cluster, */
002818 c057      	RJMP _0x33C
                 _0x339:
                 ;				clst = fp->sclust;						/* start from the first cluster */
002819 89ad      	LDD  R26,Y+21
00281a 89be      	LDD  R27,Y+21+1
00281b 961e      	ADIW R26,14
00281c 940e 3f31 	CALL __GETD1P
                +
00281e 87ec     +STD Y + 12 , R30
00281f 87fd     +STD Y + 12 + 1 , R31
002820 876e     +STD Y + 12 + 2 , R22
002821 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;#if !_FS_READONLY
                 ;				if (clst == 0) {						/* If no cluster chain, create a new chain */
002822 940e 3f71 	CALL __CPD10
002824 f009      	BREQ PC+2
002825 c041      	RJMP _0x33D
                 ;					clst = create_chain(fp->fs, 0);
002826 89ad      	LDD  R26,Y+21
002827 89be      	LDD  R27,Y+21+1
002828 940e 3f2d 	CALL __GETW1P
00282a 93fa      	ST   -Y,R31
00282b 93ea      	ST   -Y,R30
                +
00282c e0a0     +LDI R26 , LOW ( 0x0 )
00282d e0b0     +LDI R27 , HIGH ( 0x0 )
00282e e080     +LDI R24 , BYTE3 ( 0x0 )
00282f e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
002830 940e 1348 	CALL _create_chain_G000
                +
002832 87ec     +STD Y + 12 , R30
002833 87fd     +STD Y + 12 + 1 , R31
002834 876e     +STD Y + 12 + 2 , R22
002835 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
                +
002836 85ac     +LDD R26 , Y + 12
002837 85bd     +LDD R27 , Y + 12 + 1
002838 858e     +LDD R24 , Y + 12 + 2
002839 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
00283a 30a1     +CPI R26 , LOW ( 0x1 )
00283b e0e0     +LDI R30 , HIGH ( 0x1 )
00283c 07be     +CPC R27 , R30
00283d e0e0     +LDI R30 , BYTE3 ( 0x1 )
00283e 078e     +CPC R24 , R30
00283f e0e0     +LDI R30 , BYTE4 ( 0x1 )
002840 079e     +CPC R25 , R30
                 	__CPD2N 0x1
002841 f441      	BRNE _0x33E
002842 89ad      	LDD  R26,Y+21
002843 89be      	LDD  R27,Y+21+1
002844 9615      	ADIW R26,5
002845 e0e2      	LDI  R30,LOW(2)
002846 93ec      	ST   X,R30
002847 9660      	ADIW R28,16
002848 8118      	LDD  R17,Y+0
002849 c4a6      	RJMP _0x20C000D
                 _0x33E:
                 ;					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                +
00284a 85ac     +LDD R26 , Y + 12
00284b 85bd     +LDD R27 , Y + 12 + 1
00284c 858e     +LDD R24 , Y + 12 + 2
00284d 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
00284e 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
00284f efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
002850 07be     +CPC R27 , R30
002851 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
002852 078e     +CPC R24 , R30
002853 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
002854 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
002855 f441      	BRNE _0x33F
002856 89ad      	LDD  R26,Y+21
002857 89be      	LDD  R27,Y+21+1
002858 9615      	ADIW R26,5
002859 e0e1      	LDI  R30,LOW(1)
00285a 93ec      	ST   X,R30
00285b 9660      	ADIW R28,16
00285c 8118      	LDD  R17,Y+0
00285d c492      	RJMP _0x20C000D
                 _0x33F:
                 ;					fp->sclust = clst;
                +
00285e 85ec     +LDD R30 , Y + 12
00285f 85fd     +LDD R31 , Y + 12 + 1
002860 856e     +LDD R22 , Y + 12 + 2
002861 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
002862 89ad     +LDD R26 , Y + 21
002863 89be     +LDD R27 , Y + 21 + 1
002864 961e     +ADIW R26 , 14
002865 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,14
                 ;				}
                 ;#endif
                 ;				fp->clust = clst;
                 _0x33D:
                +
002867 85ec     +LDD R30 , Y + 12
002868 85fd     +LDD R31 , Y + 12 + 1
002869 856e     +LDD R22 , Y + 12 + 2
00286a 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
00286b 89ad     +LDD R26 , Y + 21
00286c 89be     +LDD R27 , Y + 21 + 1
00286d 9652     +ADIW R26 , 18
00286e 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,18
                 ;			}
                 _0x33C:
                 ;			if (clst != 0) {
                +
002870 85ec     +LDD R30 , Y + 12
002871 85fd     +LDD R31 , Y + 12 + 1
002872 856e     +LDD R22 , Y + 12 + 2
002873 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
002874 940e 3f71 	CALL __CPD10
002876 f409      	BRNE PC+2
002877 c0e3      	RJMP _0x340
                 ;				while (ofs > bcs) {						/* Cluster following loop */
                 _0x341:
                +
002878 85e8     +LDD R30 , Y + 8
002879 85f9     +LDD R31 , Y + 8 + 1
00287a 856a     +LDD R22 , Y + 8 + 2
00287b 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
                +
00287c 89a9     +LDD R26 , Y + 17
00287d 89ba     +LDD R27 , Y + 17 + 1
00287e 898b     +LDD R24 , Y + 17 + 2
00287f 899c     +LDD R25 , Y + 17 + 3
                 	__GETD2S 17
002880 940e 3f7f 	CALL __CPD12
002882 f008      	BRLO PC+2
002883 c091      	RJMP _0x343
                 ;#if !_FS_READONLY
                 ;					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
002884 89ed      	LDD  R30,Y+21
002885 89fe      	LDD  R31,Y+21+1
002886 81a4      	LDD  R26,Z+4
002887 70a2      	ANDI R26,LOW(0x2)
002888 f0e9      	BREQ _0x344
                 ;						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
002889 89ad      	LDD  R26,Y+21
00288a 89be      	LDD  R27,Y+21+1
00288b 940e 3f2d 	CALL __GETW1P
00288d 93fa      	ST   -Y,R31
00288e 93ea      	ST   -Y,R30
                +
00288f 85ae     +LDD R26 , Y + 14
002890 85bf     +LDD R27 , Y + 14 + 1
002891 8988     +LDD R24 , Y + 14 + 2
002892 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
002893 940e 1348 	CALL _create_chain_G000
                +
002895 87ec     +STD Y + 12 , R30
002896 87fd     +STD Y + 12 + 1 , R31
002897 876e     +STD Y + 12 + 2 , R22
002898 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;						if (clst == 0) {				/* When disk gets full, clip file size */
002899 940e 3f71 	CALL __CPD10
00289b f449      	BRNE _0x345
                 ;							ofs = bcs; break;
                +
00289c 85e8     +LDD R30 , Y + 8
00289d 85f9     +LDD R31 , Y + 8 + 1
00289e 856a     +LDD R22 , Y + 8 + 2
00289f 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
                +
0028a0 8be9     +STD Y + 17 , R30
0028a1 8bfa     +STD Y + 17 + 1 , R31
0028a2 8b6b     +STD Y + 17 + 2 , R22
0028a3 8b7c     +STD Y + 17 + 3 , R23
                 	__PUTD1S 17
0028a4 c070      	RJMP _0x343
                 ;						}
                 ;					} else
                 _0x345:
0028a5 c010      	RJMP _0x346
                 _0x344:
                 ;#endif
                 ;						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
0028a6 89ad      	LDD  R26,Y+21
0028a7 89be      	LDD  R27,Y+21+1
0028a8 940e 3f2d 	CALL __GETW1P
0028aa 93fa      	ST   -Y,R31
0028ab 93ea      	ST   -Y,R30
                +
0028ac 85ae     +LDD R26 , Y + 14
0028ad 85bf     +LDD R27 , Y + 14 + 1
0028ae 8988     +LDD R24 , Y + 14 + 2
0028af 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
0028b0 940e 0ff2 	CALL _get_fat
                +
0028b2 87ec     +STD Y + 12 , R30
0028b3 87fd     +STD Y + 12 + 1 , R31
0028b4 876e     +STD Y + 12 + 2 , R22
0028b5 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ;					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                 _0x346:
                +
0028b6 85ac     +LDD R26 , Y + 12
0028b7 85bd     +LDD R27 , Y + 12 + 1
0028b8 858e     +LDD R24 , Y + 12 + 2
0028b9 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
0028ba 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
0028bb efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
0028bc 07be     +CPC R27 , R30
0028bd efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
0028be 078e     +CPC R24 , R30
0028bf efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
0028c0 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
0028c1 f441      	BRNE _0x347
0028c2 89ad      	LDD  R26,Y+21
0028c3 89be      	LDD  R27,Y+21+1
0028c4 9615      	ADIW R26,5
0028c5 e0e1      	LDI  R30,LOW(1)
0028c6 93ec      	ST   X,R30
0028c7 9660      	ADIW R28,16
0028c8 8118      	LDD  R17,Y+0
0028c9 c426      	RJMP _0x20C000D
                 _0x347:
                 ;					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
                +
0028ca 85ac     +LDD R26 , Y + 12
0028cb 85bd     +LDD R27 , Y + 12 + 1
0028cc 858e     +LDD R24 , Y + 12 + 2
0028cd 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
                +
0028ce 30a2     +CPI R26 , LOW ( 0x2 )
0028cf e0e0     +LDI R30 , HIGH ( 0x2 )
0028d0 07be     +CPC R27 , R30
0028d1 e0e0     +LDI R30 , BYTE3 ( 0x2 )
0028d2 078e     +CPC R24 , R30
0028d3 e0e0     +LDI R30 , BYTE4 ( 0x2 )
0028d4 079e     +CPC R25 , R30
                 	__CPD2N 0x2
0028d5 f078      	BRLO _0x349
0028d6 89ad      	LDD  R26,Y+21
0028d7 89be      	LDD  R27,Y+21+1
0028d8 940e 3f2d 	CALL __GETW1P
0028da 9672      	ADIW R30,18
0028db 01df      	MOVW R26,R30
0028dc 940e 3f31 	CALL __GETD1P
                +
0028de 85ac     +LDD R26 , Y + 12
0028df 85bd     +LDD R27 , Y + 12 + 1
0028e0 858e     +LDD R24 , Y + 12 + 2
0028e1 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
0028e2 940e 3f84 	CALL __CPD21
0028e4 f040      	BRLO _0x348
                 _0x349:
0028e5 89ad      	LDD  R26,Y+21
0028e6 89be      	LDD  R27,Y+21+1
0028e7 9615      	ADIW R26,5
0028e8 e0e2      	LDI  R30,LOW(2)
0028e9 93ec      	ST   X,R30
0028ea 9660      	ADIW R28,16
0028eb 8118      	LDD  R17,Y+0
0028ec c403      	RJMP _0x20C000D
                 _0x348:
                 ;					fp->clust = clst;
                +
0028ed 85ec     +LDD R30 , Y + 12
0028ee 85fd     +LDD R31 , Y + 12 + 1
0028ef 856e     +LDD R22 , Y + 12 + 2
0028f0 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
0028f1 89ad     +LDD R26 , Y + 21
0028f2 89be     +LDD R27 , Y + 21 + 1
0028f3 9652     +ADIW R26 , 18
0028f4 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,18
                 ;					fp->fptr += bcs;
0028f6 89ed      	LDD  R30,Y+21
0028f7 89fe      	LDD  R31,Y+21+1
0028f8 9636      	ADIW R30,6
0028f9 010f      	MOVW R0,R30
0028fa 01df      	MOVW R26,R30
0028fb 940e 3f31 	CALL __GETD1P
                +
0028fd 85a8     +LDD R26 , Y + 8
0028fe 85b9     +LDD R27 , Y + 8 + 1
0028ff 858a     +LDD R24 , Y + 8 + 2
002900 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
002901 940e 3dd0 	CALL __ADDD12
002903 01d0      	MOVW R26,R0
002904 940e 3f3c 	CALL __PUTDP1
                 ;					ofs -= bcs;
                +
002906 85a8     +LDD R26 , Y + 8
002907 85b9     +LDD R27 , Y + 8 + 1
002908 858a     +LDD R24 , Y + 8 + 2
002909 859b     +LDD R25 , Y + 8 + 3
                 	__GETD2S 8
                +
00290a 89e9     +LDD R30 , Y + 17
00290b 89fa     +LDD R31 , Y + 17 + 1
00290c 896b     +LDD R22 , Y + 17 + 2
00290d 897c     +LDD R23 , Y + 17 + 3
                 	__GETD1S 17
00290e 940e 3dda 	CALL __SUBD12
                +
002910 8be9     +STD Y + 17 , R30
002911 8bfa     +STD Y + 17 + 1 , R31
002912 8b6b     +STD Y + 17 + 2 , R22
002913 8b7c     +STD Y + 17 + 3 , R23
                 	__PUTD1S 17
                 ;				}
002914 cf63      	RJMP _0x341
                 _0x343:
                 ;				fp->fptr += ofs;
002915 89ed      	LDD  R30,Y+21
002916 89fe      	LDD  R31,Y+21+1
002917 9636      	ADIW R30,6
002918 010f      	MOVW R0,R30
002919 01df      	MOVW R26,R30
00291a 940e 3f31 	CALL __GETD1P
                +
00291c 89a9     +LDD R26 , Y + 17
00291d 89ba     +LDD R27 , Y + 17 + 1
00291e 898b     +LDD R24 , Y + 17 + 2
00291f 899c     +LDD R25 , Y + 17 + 3
                 	__GETD2S 17
002920 940e 3dd0 	CALL __ADDD12
002922 01d0      	MOVW R26,R0
002923 940e 3f3c 	CALL __PUTDP1
                 ;				if (ofs % SS(fp->fs)) {
                +
002925 89e9     +LDD R30 , Y + 17
002926 89fa     +LDD R31 , Y + 17 + 1
002927 896b     +LDD R22 , Y + 17 + 2
002928 897c     +LDD R23 , Y + 17 + 3
                 	__GETD1S 17
002929 70f1      	ANDI R31,HIGH(0x1FF)
00292a 9730      	SBIW R30,0
00292b f179      	BREQ _0x34B
                 ;					nsect = clust2sect(fp->fs, clst);	/* Current sector */
00292c 89ad      	LDD  R26,Y+21
00292d 89be      	LDD  R27,Y+21+1
00292e 940e 3f2d 	CALL __GETW1P
002930 93fa      	ST   -Y,R31
002931 93ea      	ST   -Y,R30
                +
002932 85ae     +LDD R26 , Y + 14
002933 85bf     +LDD R27 , Y + 14 + 1
002934 8988     +LDD R24 , Y + 14 + 2
002935 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
002936 940e 0fb5 	CALL _clust2sect
                +
002938 83ec     +STD Y + 4 , R30
002939 83fd     +STD Y + 4 + 1 , R31
00293a 836e     +STD Y + 4 + 2 , R22
00293b 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
00293c 940e 3f71 	CALL __CPD10
00293e f441      	BRNE _0x34C
00293f 89ad      	LDD  R26,Y+21
002940 89be      	LDD  R27,Y+21+1
002941 9615      	ADIW R26,5
002942 e0e2      	LDI  R30,LOW(2)
002943 93ec      	ST   X,R30
002944 9660      	ADIW R28,16
002945 8118      	LDD  R17,Y+0
002946 c3a9      	RJMP _0x20C000D
                 _0x34C:
                 ;					nsect += ofs / SS(fp->fs);
                +
002947 89a9     +LDD R26 , Y + 17
002948 89ba     +LDD R27 , Y + 17 + 1
002949 898b     +LDD R24 , Y + 17 + 2
00294a 899c     +LDD R25 , Y + 17 + 3
                 	__GETD2S 17
                +
00294b e0e0     +LDI R30 , LOW ( 0x200 )
00294c e0f2     +LDI R31 , HIGH ( 0x200 )
00294d e060     +LDI R22 , BYTE3 ( 0x200 )
00294e e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
00294f 940e 3ec6 	CALL __DIVD21U
                +
002951 81ac     +LDD R26 , Y + 4
002952 81bd     +LDD R27 , Y + 4 + 1
002953 818e     +LDD R24 , Y + 4 + 2
002954 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
002955 940e 3dd0 	CALL __ADDD12
                +
002957 83ec     +STD Y + 4 , R30
002958 83fd     +STD Y + 4 + 1 , R31
002959 836e     +STD Y + 4 + 2 , R22
00295a 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 ;				}
                 ;			}
                 _0x34B:
                 ;		}
                 _0x340:
                 ;		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
                 _0x338:
00295b 89ed      	LDD  R30,Y+21
00295c 89fe      	LDD  R31,Y+21+1
                +
00295d 81a6     +LDD R26 , Z + 6
00295e 81b7     +LDD R27 , Z + 6 + 1
00295f 8580     +LDD R24 , Z + 6 + 2
002960 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002961 01fd      	MOVW R30,R26
002962 01bc      	MOVW R22,R24
002963 70f1      	ANDI R31,HIGH(0x1FF)
002964 9730      	SBIW R30,0
002965 f061      	BREQ _0x34E
002966 89ad      	LDD  R26,Y+21
002967 89be      	LDD  R27,Y+21+1
002968 9656      	ADIW R26,22
002969 940e 3f31 	CALL __GETD1P
                +
00296b 81ac     +LDD R26 , Y + 4
00296c 81bd     +LDD R27 , Y + 4 + 1
00296d 818e     +LDD R24 , Y + 4 + 2
00296e 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
00296f 940e 3f7f 	CALL __CPD12
002971 f409      	BRNE _0x34F
                 _0x34E:
002972 c009      	RJMP _0x34D
                 _0x34F:
                 ;#if !_FS_TINY
                 ;#if !_FS_READONLY
                 ;			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
                 ;				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;					ABORT(fp->fs, FR_DISK_ERR);
                 ;				fp->flag &= ~FA__DIRTY;
                 ;			}
                 ;#endif
                 ;			if (disk_read(fp->fs->drv, fp->buf, nsect, 1))	/* Fill sector cache */
                 ;				ABORT(fp->fs, FR_DISK_ERR);
                 ;#endif
                 ;			fp->dsect = nsect;
                +
002973 81ec     +LDD R30 , Y + 4
002974 81fd     +LDD R31 , Y + 4 + 1
002975 816e     +LDD R22 , Y + 4 + 2
002976 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
                +
002977 89ad     +LDD R26 , Y + 21
002978 89be     +LDD R27 , Y + 21 + 1
002979 9656     +ADIW R26 , 22
00297a 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,22
                 ;		}
                 ;#if !_FS_READONLY
                 ;		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
                 _0x34D:
00297c 89ed      	LDD  R30,Y+21
00297d 89fe      	LDD  R31,Y+21+1
                +
00297e 81a6     +LDD R26 , Z + 6
00297f 81b7     +LDD R27 , Z + 6 + 1
002980 8580     +LDD R24 , Z + 6 + 2
002981 8591     +LDD R25 , Z + 6 + 3
                 	__GETD2Z 6
002982 010d      	MOVW R0,R26
002983 89ad      	LDD  R26,Y+21
002984 89be      	LDD  R27,Y+21+1
002985 961a      	ADIW R26,10
002986 940e 3f31 	CALL __GETD1P
002988 01d0      	MOVW R26,R0
002989 940e 3f7f 	CALL __CPD12
00298b f480      	BRSH _0x350
                 ;			fp->fsize = fp->fptr;
00298c 89ad      	LDD  R26,Y+21
00298d 89be      	LDD  R27,Y+21+1
00298e 9616      	ADIW R26,6
00298f 940e 3f31 	CALL __GETD1P
                +
002991 89ad     +LDD R26 , Y + 21
002992 89be     +LDD R27 , Y + 21 + 1
002993 961a     +ADIW R26 , 10
002994 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 21,10
                 ;			fp->flag |= FA__WRITTEN;
002996 89ad      	LDD  R26,Y+21
002997 89be      	LDD  R27,Y+21+1
002998 9614      	ADIW R26,4
002999 91ec      	LD   R30,X
00299a 62e0      	ORI  R30,0x20
00299b 93ec      	ST   X,R30
                 ;		}
                 ;#endif
                 ;	}
                 _0x350:
00299c 9660      	ADIW R28,16
                 ;   // release_spi();
                 ;	LEAVE_FF(fp->fs, res);
00299d 2fe1      	MOV  R30,R17
00299e 8118      	LDD  R17,Y+0
00299f c350      	RJMP _0x20C000D
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;#if _FS_MINIMIZE <= 1
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create a Directory Object                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_opendir (
                 ;	DIR* dp,			/* Pointer to directory object to create */
                 ;	const TCHAR* path	/* Pointer to the directory path */
                 ;)
                 ;{
                 _f_opendir:
                 ; .FSTART _f_opendir
                 ;	FRESULT res;
                 ;	FATFS* fs;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	if (!dp) return FR_INVALID_OBJECT;
0029a0 93ba      	ST   -Y,R27
0029a1 93aa      	ST   -Y,R26
0029a2 972c      	SBIW R28,12
0029a3 940e 3f8b 	CALL __SAVELOCR4
                 ;	*dp -> Y+18
                 ;	*path -> Y+16
                 ;	res -> R17
                 ;	*fs -> R18,R19
                 ;	sfn -> Y+4
0029a5 89ea      	LDD  R30,Y+18
0029a6 89fb      	LDD  R31,Y+18+1
0029a7 9730      	SBIW R30,0
0029a8 f411      	BRNE _0x351
0029a9 e0e9      	LDI  R30,LOW(9)
0029aa c068      	RJMP _0x20C000E
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&fs, &path, 0);
                 _0x351:
0029ab b7ed      	IN   R30,SPL
0029ac b7fe      	IN   R31,SPH
0029ad 9731      	SBIW R30,1
0029ae 93fa      	ST   -Y,R31
0029af 93ea      	ST   -Y,R30
0029b0 933f      	PUSH R19
0029b1 932f      	PUSH R18
0029b2 01fe      	MOVW R30,R28
0029b3 9672      	ADIW R30,18
0029b4 93fa      	ST   -Y,R31
0029b5 93ea      	ST   -Y,R30
0029b6 e0a0      	LDI  R26,LOW(0)
0029b7 940e 1b8d 	CALL _find_volume_G000
0029b9 912f      	POP  R18
0029ba 913f      	POP  R19
0029bb 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
0029bc 3010      	CPI  R17,0
0029bd f009      	BREQ PC+2
0029be c04b      	RJMP _0x352
                 ;		dp->fs = fs;
0029bf 89aa      	LDD  R26,Y+18
0029c0 89bb      	LDD  R27,Y+18+1
0029c1 932d      	ST   X+,R18
0029c2 933c      	ST   X,R19
                 ;		INIT_BUF(*dp);
0029c3 01fe      	MOVW R30,R28
0029c4 9634      	ADIW R30,4
                +
0029c5 89aa     +LDD R26 , Y + 18
0029c6 89bb     +LDD R27 , Y + 18 + 1
0029c7 9654     +ADIW R26 , 20
0029c8 93ed     +ST X + , R30
0029c9 93fc     +ST X , R31
                 	__PUTW1SNS 18,20
                 ;		res = follow_path(dp, path);			/* Follow the path to the directory */
0029ca 89ea      	LDD  R30,Y+18
0029cb 89fb      	LDD  R31,Y+18+1
0029cc 93fa      	ST   -Y,R31
0029cd 93ea      	ST   -Y,R30
0029ce 89aa      	LDD  R26,Y+18
0029cf 89bb      	LDD  R27,Y+18+1
0029d0 940e 1a4e 	CALL _follow_path_G000
0029d2 2f1e      	MOV  R17,R30
                 ;		FREE_BUF();
                 ;		if (res == FR_OK) {						/* Follow completed */
0029d3 3010      	CPI  R17,0
0029d4 f591      	BRNE _0x353
                 ;			if (dp->dir) {						/* It is not the origin directory itself */
0029d5 89aa      	LDD  R26,Y+18
0029d6 89bb      	LDD  R27,Y+18+1
0029d7 9652      	ADIW R26,18
0029d8 940e 3f2d 	CALL __GETW1P
0029da 9730      	SBIW R30,0
0029db f0b9      	BREQ _0x354
                 ;				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
0029dc 89aa      	LDD  R26,Y+18
0029dd 89bb      	LDD  R27,Y+18+1
0029de 9652      	ADIW R26,18
0029df 940e 3f2d 	CALL __GETW1P
0029e1 85e3      	LDD  R30,Z+11
0029e2 71e0      	ANDI R30,LOW(0x10)
0029e3 f071      	BREQ _0x355
                 ;					dp->sclust = ld_clust(fs, dp->dir);
0029e4 933a      	ST   -Y,R19
0029e5 932a      	ST   -Y,R18
0029e6 89ec      	LDD  R30,Y+20
0029e7 89fd      	LDD  R31,Y+20+1
0029e8 89a2      	LDD  R26,Z+18
0029e9 89b3      	LDD  R27,Z+19
0029ea 940e 175a 	CALL _ld_clust_G000
                +
0029ec 89aa     +LDD R26 , Y + 18
0029ed 89bb     +LDD R27 , Y + 18 + 1
0029ee 9616     +ADIW R26 , 6
0029ef 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 18,6
                 ;				else							/* The object is a file */
0029f1 c001      	RJMP _0x356
                 _0x355:
                 ;					res = FR_NO_PATH;
0029f2 e015      	LDI  R17,LOW(5)
                 ;			}
                 _0x356:
                 ;			if (res == FR_OK) {
                 _0x354:
0029f3 3010      	CPI  R17,0
0029f4 f491      	BRNE _0x357
                 ;				dp->id = fs->id;
0029f5 01d9      	MOVW R26,R18
0029f6 9616      	ADIW R26,6
0029f7 940e 3f2d 	CALL __GETW1P
                +
0029f9 89aa     +LDD R26 , Y + 18
0029fa 89bb     +LDD R27 , Y + 18 + 1
0029fb 9612     +ADIW R26 , 2
0029fc 93ed     +ST X + , R30
0029fd 93fc     +ST X , R31
                 	__PUTW1SNS 18,2
                 ;				res = dir_sdi(dp, 0);			/* Rewind directory */
0029fe 89ea      	LDD  R30,Y+18
0029ff 89fb      	LDD  R31,Y+18+1
002a00 93fa      	ST   -Y,R31
002a01 93ea      	ST   -Y,R30
002a02 e0a0      	LDI  R26,LOW(0)
002a03 e0b0      	LDI  R27,0
002a04 940e 1489 	CALL _dir_sdi_G000
002a06 2f1e      	MOV  R17,R30
                 ;#if _FS_LOCK
                 ;				if (res == FR_OK) {
                 ;					if (dp->sclust) {
                 ;						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
                 ;						if (!dp->lockid)
                 ;							res = FR_TOO_MANY_OPEN_FILES;
                 ;					} else {
                 ;						dp->lockid = 0;	/* Root directory need not to be locked */
                 ;					}
                 ;				}
                 ;#endif
                 ;			}
                 ;		}
                 _0x357:
                 ;		if (res == FR_NO_FILE) res = FR_NO_PATH;
                 _0x353:
002a07 3014      	CPI  R17,4
002a08 f409      	BRNE _0x358
002a09 e015      	LDI  R17,LOW(5)
                 ;	}
                 _0x358:
                 ;	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
                 _0x352:
002a0a 3010      	CPI  R17,0
002a0b f031      	BREQ _0x359
002a0c 89aa      	LDD  R26,Y+18
002a0d 89bb      	LDD  R27,Y+18+1
002a0e e0e0      	LDI  R30,LOW(0)
002a0f e0f0      	LDI  R31,HIGH(0)
002a10 93ed      	ST   X+,R30
002a11 93fc      	ST   X,R31
                 ;
                 ;	LEAVE_FF(fs, res);
                 _0x359:
002a12 2fe1      	MOV  R30,R17
                 _0x20C000E:
002a13 940e 3f92 	CALL __LOADLOCR4
002a15 9664      	ADIW R28,20
002a16 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Close Directory                                                       */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_closedir (
                 ;	DIR *dp		/* Pointer to the directory object to be closed */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;
                 ;
                 ;	res = validate(dp);
                 ;	*dp -> Y+1
                 ;	res -> R17
                 ;#if _FS_LOCK
                 ;	if (res == FR_OK) {				/* Decrement open counter */
                 ;		if (dp->lockid)
                 ;			res = dec_lock(dp->lockid);
                 ;#if _FS_REENTRANT
                 ;		unlock_fs(dp->fs, FR_OK);
                 ;#endif
                 ;	}
                 ;#endif
                 ;	if (res == FR_OK) dp->fs = 0;	/* Invalidate directory object */
                 ;	return res;
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read Directory Entries in Sequence                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_readdir (
                 ;	DIR* dp,			/* Pointer to the open directory object */
                 ;	FILINFO* fno		/* Pointer to file information to return */
                 ;)
                 ;{
                 _f_readdir:
                 ; .FSTART _f_readdir
                 ;	FRESULT res;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	res = validate(dp);						/* Check validity of the object */
002a17 93ba      	ST   -Y,R27
002a18 93aa      	ST   -Y,R26
002a19 972c      	SBIW R28,12
002a1a 931a      	ST   -Y,R17
                 ;	*dp -> Y+15
                 ;	*fno -> Y+13
                 ;	res -> R17
                 ;	sfn -> Y+1
002a1b 85af      	LDD  R26,Y+15
002a1c 89b8      	LDD  R27,Y+15+1
002a1d 940e 2062 	CALL _validate_G000
002a1f 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
002a20 3010      	CPI  R17,0
002a21 f009      	BREQ PC+2
002a22 c049      	RJMP _0x35B
                 ;		if (!fno) {
002a23 85ed      	LDD  R30,Y+13
002a24 85fe      	LDD  R31,Y+13+1
002a25 9730      	SBIW R30,0
002a26 f451      	BRNE _0x35C
                 ;			res = dir_sdi(dp, 0);			/* Rewind the directory object */
002a27 85ef      	LDD  R30,Y+15
002a28 89f8      	LDD  R31,Y+15+1
002a29 93fa      	ST   -Y,R31
002a2a 93ea      	ST   -Y,R30
002a2b e0a0      	LDI  R26,LOW(0)
002a2c e0b0      	LDI  R27,0
002a2d 940e 1489 	CALL _dir_sdi_G000
002a2f 2f1e      	MOV  R17,R30
                 ;		} else {
002a30 c03b      	RJMP _0x35D
                 _0x35C:
                 ;			INIT_BUF(*dp);
002a31 01fe      	MOVW R30,R28
002a32 9631      	ADIW R30,1
                +
002a33 85af     +LDD R26 , Y + 15
002a34 89b8     +LDD R27 , Y + 15 + 1
002a35 9654     +ADIW R26 , 20
002a36 93ed     +ST X + , R30
002a37 93fc     +ST X , R31
                 	__PUTW1SNS 15,20
                 ;			res = dir_read(dp, 0);			/* Read an item */
002a38 85ef      	LDD  R30,Y+15
002a39 89f8      	LDD  R31,Y+15+1
002a3a 93fa      	ST   -Y,R31
002a3b 93ea      	ST   -Y,R30
002a3c e0a0      	LDI  R26,LOW(0)
002a3d e0b0      	LDI  R27,0
002a3e 940e 17f3 	CALL _dir_read_G000
002a40 2f1e      	MOV  R17,R30
                 ;			if (res == FR_NO_FILE) {		/* Reached end of directory */
002a41 3014      	CPI  R17,4
002a42 f451      	BRNE _0x35E
                 ;				dp->sect = 0;
002a43 85af      	LDD  R26,Y+15
002a44 89b8      	LDD  R27,Y+15+1
002a45 961e      	ADIW R26,14
                +
002a46 e0e0     +LDI R30 , LOW ( 0x0 )
002a47 e0f0     +LDI R31 , HIGH ( 0x0 )
002a48 e060     +LDI R22 , BYTE3 ( 0x0 )
002a49 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
002a4a 940e 3f3c 	CALL __PUTDP1
                 ;				res = FR_OK;
002a4c e010      	LDI  R17,LOW(0)
                 ;			}
                 ;			if (res == FR_OK) {				/* A valid entry is found */
                 _0x35E:
002a4d 3010      	CPI  R17,0
002a4e f4e9      	BRNE _0x35F
                 ;				get_fileinfo(dp, fno);		/* Get the object information */
002a4f 85ef      	LDD  R30,Y+15
002a50 89f8      	LDD  R31,Y+15+1
002a51 93fa      	ST   -Y,R31
002a52 93ea      	ST   -Y,R30
002a53 85af      	LDD  R26,Y+15
002a54 89b8      	LDD  R27,Y+15+1
002a55 940e 1989 	CALL _get_fileinfo_G000
                 ;				res = dir_next(dp, 0);		/* Increment index for next */
002a57 85ef      	LDD  R30,Y+15
002a58 89f8      	LDD  R31,Y+15+1
002a59 93fa      	ST   -Y,R31
002a5a 93ea      	ST   -Y,R30
002a5b e0a0      	LDI  R26,LOW(0)
002a5c e0b0      	LDI  R27,0
002a5d 940e 158c 	CALL _dir_next_G000
002a5f 2f1e      	MOV  R17,R30
                 ;				if (res == FR_NO_FILE) {
002a60 3014      	CPI  R17,4
002a61 f451      	BRNE _0x360
                 ;					dp->sect = 0;
002a62 85af      	LDD  R26,Y+15
002a63 89b8      	LDD  R27,Y+15+1
002a64 961e      	ADIW R26,14
                +
002a65 e0e0     +LDI R30 , LOW ( 0x0 )
002a66 e0f0     +LDI R31 , HIGH ( 0x0 )
002a67 e060     +LDI R22 , BYTE3 ( 0x0 )
002a68 e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
002a69 940e 3f3c 	CALL __PUTDP1
                 ;					res = FR_OK;
002a6b e010      	LDI  R17,LOW(0)
                 ;				}
                 ;			}
                 _0x360:
                 ;			FREE_BUF();
                 _0x35F:
                 ;		}
                 _0x35D:
                 ;	}
                 ;
                 ;	LEAVE_FF(dp->fs, res);
                 _0x35B:
002a6c 2fe1      	MOV  R30,R17
002a6d 8118      	LDD  R17,Y+0
002a6e 9661      	ADIW R28,17
002a6f 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;#if _FS_MINIMIZE == 0
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get File Status                                                       */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_stat (
                 ;	const TCHAR* path,	/* Pointer to the file path */
                 ;	FILINFO* fno		/* Pointer to file information to return */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 0);
                 ;	*path -> Y+37
                 ;	*fno -> Y+35
                 ;	res -> R17
                 ;	dj -> Y+13
                 ;	sfn -> Y+1
                 ;	if (res == FR_OK) {
                 ;		INIT_BUF(dj);
                 ;		res = follow_path(&dj, path);	/* Follow the file path */
                 ;		if (res == FR_OK) {				/* Follow completed */
                 ;			if (dj.dir) {		/* Found an object */
                 ;				if (fno) get_fileinfo(&dj, fno);
                 ;			} else {			/* It is root directory */
                 ;				res = FR_INVALID_NAME;
                 ;			}
                 ;		}
                 ;		FREE_BUF();
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get Number of Free Clusters                                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_getfree (
                 ;	const TCHAR* path,	/* Path name of the logical drive number */
                 ;	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
                 ;	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	FATFS *fs;
                 ;	DWORD n, clst, sect, stat;
                 ;	UINT i;
                 ;	BYTE fat, *p;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(fatfs, &path, 0);
                 ;	*path -> Y+28
                 ;	*nclst -> Y+26
                 ;	*fatfs -> Y+24
                 ;	res -> R17
                 ;	*fs -> R18,R19
                 ;	n -> Y+20
                 ;	clst -> Y+16
                 ;	sect -> Y+12
                 ;	stat -> Y+8
                 ;	i -> R20,R21
                 ;	fat -> R16
                 ;	*p -> Y+6
                 ;	fs = *fatfs;
                 ;	if (res == FR_OK) {
                 ;		/* If free_clust is valid, return it without full cluster scan */
                 ;		if (fs->free_clust <= fs->n_fatent - 2) {
                 ;			*nclst = fs->free_clust;
                 ;		} else {
                 ;			/* Get number of free clusters */
                 ;			fat = fs->fs_type;
                 ;			n = 0;
                 ;			if (fat == FS_FAT12) {
                 ;				clst = 2;
                 ;				do {
                 ;					stat = get_fat(fs, clst);
                 ;					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
                 ;					if (stat == 1) { res = FR_INT_ERR; break; }
                 ;					if (stat == 0) n++;
                 ;				} while (++clst < fs->n_fatent);
                 ;			} else {
                 ;				clst = fs->n_fatent;
                 ;				sect = fs->fatbase;
                 ;				i = 0; p = 0;
                 ;				do {
                 ;					if (!i) {
                 ;						res = move_window(fs, sect++);
                 ;						if (res != FR_OK) break;
                 ;						p = fs->win;
                 ;						i = SS(fs);
                 ;					}
                 ;					if (fat == FS_FAT16) {
                 ;						if (LD_WORD(p) == 0) n++;
                 ;						p += 2; i -= 2;
                 ;					} else {
                 ;						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
                 ;						p += 4; i -= 4;
                 ;					}
                 ;				} while (--clst);
                 ;			}
                 ;			fs->free_clust = n;
                 ;			fs->fsi_flag |= 1;
                 ;			*nclst = n;
                 ;		}
                 ;	}
                 ;	LEAVE_FF(fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Truncate File                                                         */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_truncate (
                 ;	FIL* fp		/* Pointer to the file object */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DWORD ncl;
                 ;
                 ;
                 ;	res = validate(fp);						/* Check validity of the object */
                 ;	*fp -> Y+5
                 ;	res -> R17
                 ;	ncl -> Y+1
                 ;	if (res == FR_OK) {
                 ;		if (fp->err) {						/* Check error */
                 ;			res = (FRESULT)fp->err;
                 ;		} else {
                 ;			if (!(fp->flag & FA_WRITE))		/* Check access mode */
                 ;				res = FR_DENIED;
                 ;		}
                 ;	}
                 ;	if (res == FR_OK) {
                 ;		if (fp->fsize > fp->fptr) {
                 ;			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
                 ;			fp->flag |= FA__WRITTEN;
                 ;			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
                 ;				res = remove_chain(fp->fs, fp->sclust);
                 ;				fp->sclust = 0;
                 ;			} else {				/* When truncate a part of the file, remove remaining clusters */
                 ;				ncl = get_fat(fp->fs, fp->clust);
                 ;				res = FR_OK;
                 ;				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
                 ;				if (ncl == 1) res = FR_INT_ERR;
                 ;				if (res == FR_OK && ncl < fp->fs->n_fatent) {
                 ;					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
                 ;					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
                 ;				}
                 ;			}
                 ;#if !_FS_TINY
                 ;			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
                 ;				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
                 ;					res = FR_DISK_ERR;
                 ;				else
                 ;					fp->flag &= ~FA__DIRTY;
                 ;			}
                 ;#endif
                 ;		}
                 ;		if (res != FR_OK) fp->err = (FRESULT)res;
                 ;	}
                 ;
                 ;	LEAVE_FF(fp->fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Delete a File or Directory                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_unlink (
                 ;	const TCHAR* path		/* Pointer to the file or directory path */
                 ;)
                 ;{
                 _f_unlink:
                 ; .FSTART _f_unlink
                 ;	FRESULT res;
                 ;	DIR dj, sdj;
                 ;	BYTE *dir;
                 ;	DWORD dclst;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 1);
002a70 93ba      	ST   -Y,R27
002a71 93aa      	ST   -Y,R26
002a72 97ec      	SBIW R28,60
002a73 940e 3f8b 	CALL __SAVELOCR4
                 ;	*path -> Y+64
                 ;	res -> R17
                 ;	dj -> Y+42
                 ;	sdj -> Y+20
                 ;	*dir -> R18,R19
                 ;	dclst -> Y+16
                 ;	sfn -> Y+4
002a75 01fe      	MOVW R30,R28
002a76 96ba      	ADIW R30,42
002a77 93fa      	ST   -Y,R31
002a78 93ea      	ST   -Y,R30
002a79 01fe      	MOVW R30,R28
002a7a 5bee      	SUBI R30,LOW(-(66))
002a7b 4fff      	SBCI R31,HIGH(-(66))
002a7c 93fa      	ST   -Y,R31
002a7d 93ea      	ST   -Y,R30
002a7e e0a1      	LDI  R26,LOW(1)
002a7f 940e 1b8d 	CALL _find_volume_G000
002a81 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
002a82 3010      	CPI  R17,0
002a83 f009      	BREQ PC+2
002a84 c09c      	RJMP _0x389
                 ;		INIT_BUF(dj);
002a85 01fe      	MOVW R30,R28
002a86 9634      	ADIW R30,4
002a87 afee      	STD  Y+62,R30
002a88 afff      	STD  Y+62+1,R31
                 ;		res = follow_path(&dj, path);		/* Follow the file path */
002a89 01fe      	MOVW R30,R28
002a8a 96ba      	ADIW R30,42
002a8b 93fa      	ST   -Y,R31
002a8c 93ea      	ST   -Y,R30
                +
002a8d 01de     +MOVW R26 , R28
002a8e 5bae     +SUBI R26 , LOW ( - 66 )
002a8f 4fbf     +SBCI R27 , HIGH ( - 66 )
002a90 900d     +LD R0 , X +
002a91 91bc     +LD R27 , X
002a92 2da0     +MOV R26 , R0
                 	__GETW2SX 66
002a93 940e 1a4e 	CALL _follow_path_G000
002a95 2f1e      	MOV  R17,R30
                 ;		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
002a96 e0e0      	LDI  R30,LOW(0)
002a97 30e0      	CPI  R30,0
002a98 f039      	BREQ _0x38B
002a99 3010      	CPI  R17,0
002a9a f429      	BRNE _0x38B
002a9b adee      	LDD  R30,Y+62
002a9c adff      	LDD  R31,Y+62+1
002a9d 85e3      	LDD  R30,Z+11
002a9e 72e0      	ANDI R30,LOW(0x20)
002a9f f409      	BRNE _0x38C
                 _0x38B:
002aa0 c001      	RJMP _0x38A
                 _0x38C:
                 ;			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
002aa1 e016      	LDI  R17,LOW(6)
                 ;#if _FS_LOCK
                 ;		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open file */
                 ;#endif
                 ;		if (res == FR_OK) {					/* The object is accessible */
                 _0x38A:
002aa2 3010      	CPI  R17,0
002aa3 f009      	BREQ PC+2
002aa4 c07c      	RJMP _0x38D
                 ;			dir = dj.dir;
                +
002aa5 ad2c     +LDD R18 , Y + 60
002aa6 ad3d     +LDD R19 , Y + 60 + 1
                 	__GETWRS 18,19,60
                 ;			if (!dir) {
002aa7 2e02      	MOV  R0,R18
002aa8 2a03      	OR   R0,R19
002aa9 f411      	BRNE _0x38E
                 ;				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
002aaa e016      	LDI  R17,LOW(6)
                 ;			} else {
002aab c005      	RJMP _0x38F
                 _0x38E:
                 ;				if (dir[DIR_Attr] & AM_RDO)
002aac 01f9      	MOVW R30,R18
002aad 85e3      	LDD  R30,Z+11
002aae 70e1      	ANDI R30,LOW(0x1)
002aaf f009      	BREQ _0x390
                 ;					res = FR_DENIED;		/* Cannot remove R/O object */
002ab0 e017      	LDI  R17,LOW(7)
                 ;			}
                 _0x390:
                 _0x38F:
                 ;			dclst = ld_clust(dj.fs, dir);
002ab1 a5ea      	LDD  R30,Y+42
002ab2 a5fb      	LDD  R31,Y+42+1
002ab3 93fa      	ST   -Y,R31
002ab4 93ea      	ST   -Y,R30
002ab5 01d9      	MOVW R26,R18
002ab6 940e 175a 	CALL _ld_clust_G000
                +
002ab8 8be8     +STD Y + 16 , R30
002ab9 8bf9     +STD Y + 16 + 1 , R31
002aba 8b6a     +STD Y + 16 + 2 , R22
002abb 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ;			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
002abc 3010      	CPI  R17,0
002abd f421      	BRNE _0x392
002abe 01f9      	MOVW R30,R18
002abf 85e3      	LDD  R30,Z+11
002ac0 71e0      	ANDI R30,LOW(0x10)
002ac1 f409      	BRNE _0x393
                 _0x392:
002ac2 c03c      	RJMP _0x391
                 _0x393:
                 ;				if (dclst < 2) {
                +
002ac3 89a8     +LDD R26 , Y + 16
002ac4 89b9     +LDD R27 , Y + 16 + 1
002ac5 898a     +LDD R24 , Y + 16 + 2
002ac6 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
                +
002ac7 30a2     +CPI R26 , LOW ( 0x2 )
002ac8 e0e0     +LDI R30 , HIGH ( 0x2 )
002ac9 07be     +CPC R27 , R30
002aca e0e0     +LDI R30 , BYTE3 ( 0x2 )
002acb 078e     +CPC R24 , R30
002acc e0e0     +LDI R30 , BYTE4 ( 0x2 )
002acd 079e     +CPC R25 , R30
                 	__CPD2N 0x2
002ace f410      	BRSH _0x394
                 ;					res = FR_INT_ERR;
002acf e012      	LDI  R17,LOW(2)
                 ;				} else {
002ad0 c02e      	RJMP _0x395
                 _0x394:
                 ;					mem_cpy(&sdj, &dj, sizeof (DIR));	/* Check if the sub-directory is empty or not */
002ad1 01fe      	MOVW R30,R28
002ad2 9674      	ADIW R30,20
002ad3 93fa      	ST   -Y,R31
002ad4 93ea      	ST   -Y,R30
002ad5 01fe      	MOVW R30,R28
002ad6 96bc      	ADIW R30,44
002ad7 93fa      	ST   -Y,R31
002ad8 93ea      	ST   -Y,R30
002ad9 e1a6      	LDI  R26,LOW(22)
002ada e0b0      	LDI  R27,0
002adb 940e 0d80 	CALL _mem_cpy_G000
                 ;					sdj.sclust = dclst;
                +
002add 89e8     +LDD R30 , Y + 16
002ade 89f9     +LDD R31 , Y + 16 + 1
002adf 896a     +LDD R22 , Y + 16 + 2
002ae0 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
002ae1 8fea     +STD Y + 26 , R30
002ae2 8ffb     +STD Y + 26 + 1 , R31
002ae3 8f6c     +STD Y + 26 + 2 , R22
002ae4 8f7d     +STD Y + 26 + 3 , R23
                 	__PUTD1S 26
                 ;					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
002ae5 01fe      	MOVW R30,R28
002ae6 9674      	ADIW R30,20
002ae7 93fa      	ST   -Y,R31
002ae8 93ea      	ST   -Y,R30
002ae9 e0a2      	LDI  R26,LOW(2)
002aea e0b0      	LDI  R27,0
002aeb 940e 1489 	CALL _dir_sdi_G000
002aed 2f1e      	MOV  R17,R30
                 ;					if (res == FR_OK) {
002aee 3010      	CPI  R17,0
002aef f479      	BRNE _0x396
                 ;						res = dir_read(&sdj, 0);	/* Read an item */
002af0 01fe      	MOVW R30,R28
002af1 9674      	ADIW R30,20
002af2 93fa      	ST   -Y,R31
002af3 93ea      	ST   -Y,R30
002af4 e0a0      	LDI  R26,LOW(0)
002af5 e0b0      	LDI  R27,0
002af6 940e 17f3 	CALL _dir_read_G000
002af8 2f1e      	MOV  R17,R30
                 ;						if (res == FR_OK		/* Not empty directory */
                 ;#if _FS_RPATH
                 ;						|| dclst == dj.fs->cdir	/* Current directory */
                 ;#endif
                 ;						) res = FR_DENIED;
002af9 3010      	CPI  R17,0
002afa f409      	BRNE _0x397
002afb e017      	LDI  R17,LOW(7)
                 ;						if (res == FR_NO_FILE) res = FR_OK;	/* Empty */
                 _0x397:
002afc 3014      	CPI  R17,4
002afd f409      	BRNE _0x398
002afe e010      	LDI  R17,LOW(0)
                 ;					}
                 _0x398:
                 ;				}
                 _0x396:
                 _0x395:
                 ;			}
                 ;			if (res == FR_OK) {
                 _0x391:
002aff 3010      	CPI  R17,0
002b00 f501      	BRNE _0x399
                 ;				res = dir_remove(&dj);		/* Remove the directory entry */
002b01 01de      	MOVW R26,R28
002b02 969a      	ADIW R26,42
002b03 940e 1893 	CALL _dir_remove_G000
002b05 2f1e      	MOV  R17,R30
                 ;				if (res == FR_OK) {
002b06 3010      	CPI  R17,0
002b07 f4c9      	BRNE _0x39A
                 ;					if (dclst)				/* Remove the cluster chain if exist */
                +
002b08 89e8     +LDD R30 , Y + 16
002b09 89f9     +LDD R31 , Y + 16 + 1
002b0a 896a     +LDD R22 , Y + 16 + 2
002b0b 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
002b0c 940e 3f71 	CALL __CPD10
002b0e f059      	BREQ _0x39B
                 ;						res = remove_chain(dj.fs, dclst);
002b0f a5ea      	LDD  R30,Y+42
002b10 a5fb      	LDD  R31,Y+42+1
002b11 93fa      	ST   -Y,R31
002b12 93ea      	ST   -Y,R30
                +
002b13 89aa     +LDD R26 , Y + 18
002b14 89bb     +LDD R27 , Y + 18 + 1
002b15 898c     +LDD R24 , Y + 18 + 2
002b16 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
002b17 940e 12b1 	CALL _remove_chain_G000
002b19 2f1e      	MOV  R17,R30
                 ;					if (res == FR_OK) res = sync_fs(dj.fs);
                 _0x39B:
002b1a 3010      	CPI  R17,0
002b1b f429      	BRNE _0x39C
002b1c a5aa      	LDD  R26,Y+42
002b1d a5bb      	LDD  R27,Y+42+1
002b1e 940e 0ea5 	CALL _sync_fs_G000
002b20 2f1e      	MOV  R17,R30
                 ;				}
                 _0x39C:
                 ;			}
                 _0x39A:
                 ;		}
                 _0x399:
                 ;		FREE_BUF();
                 _0x38D:
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 _0x389:
002b21 2fe1      	MOV  R30,R17
002b22 940e 3f92 	CALL __LOADLOCR4
002b24 96ef      	ADIW R28,63
002b25 9623      	ADIW R28,3
002b26 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create a Directory                                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_mkdir (
                 ;	const TCHAR* path		/* Pointer to the directory path */
                 ;)
                 ;{
                 _f_mkdir:
                 ; .FSTART _f_mkdir
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	BYTE *dir, n;
                 ;	DWORD dsc, dcl, pcl, tm = get_fattime();
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 1);
002b27 93ba      	ST   -Y,R27
002b28 93aa      	ST   -Y,R26
002b29 97e2      	SBIW R28,50
002b2a 940e 3f8b 	CALL __SAVELOCR4
                 ;	*path -> Y+54
                 ;	res -> R17
                 ;	dj -> Y+32
                 ;	*dir -> R18,R19
                 ;	n -> R16
                 ;	dsc -> Y+28
                 ;	dcl -> Y+24
                 ;	pcl -> Y+20
                 ;	tm -> Y+16
                 ;	sfn -> Y+4
002b2c d21c      	RCALL _get_fattime
                +
002b2d 8be8     +STD Y + 16 , R30
002b2e 8bf9     +STD Y + 16 + 1 , R31
002b2f 8b6a     +STD Y + 16 + 2 , R22
002b30 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
002b31 01fe      	MOVW R30,R28
002b32 96b0      	ADIW R30,32
002b33 93fa      	ST   -Y,R31
002b34 93ea      	ST   -Y,R30
002b35 01fe      	MOVW R30,R28
002b36 96f8      	ADIW R30,56
002b37 93fa      	ST   -Y,R31
002b38 93ea      	ST   -Y,R30
002b39 e0a1      	LDI  R26,LOW(1)
002b3a 940e 1b8d 	CALL _find_volume_G000
002b3c 2f1e      	MOV  R17,R30
                 ;	if (res == FR_OK) {
002b3d 3010      	CPI  R17,0
002b3e f009      	BREQ PC+2
002b3f c157      	RJMP _0x39D
                 ;		INIT_BUF(dj);
002b40 01fe      	MOVW R30,R28
002b41 9634      	ADIW R30,4
002b42 abec      	STD  Y+52,R30
002b43 abfd      	STD  Y+52+1,R31
                 ;		res = follow_path(&dj, path);			/* Follow the file path */
002b44 01fe      	MOVW R30,R28
002b45 96b0      	ADIW R30,32
002b46 93fa      	ST   -Y,R31
002b47 93ea      	ST   -Y,R30
002b48 ada8      	LDD  R26,Y+56
002b49 adb9      	LDD  R27,Y+56+1
002b4a 940e 1a4e 	CALL _follow_path_G000
002b4c 2f1e      	MOV  R17,R30
                 ;		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
002b4d 3010      	CPI  R17,0
002b4e f409      	BRNE _0x39E
002b4f e018      	LDI  R17,LOW(8)
                 ;		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
                 _0x39E:
002b50 e0e0      	LDI  R30,LOW(0)
002b51 30e0      	CPI  R30,0
002b52 f039      	BREQ _0x3A0
002b53 3014      	CPI  R17,4
002b54 f429      	BRNE _0x3A0
002b55 a9ec      	LDD  R30,Y+52
002b56 a9fd      	LDD  R31,Y+52+1
002b57 85e3      	LDD  R30,Z+11
002b58 72e0      	ANDI R30,LOW(0x20)
002b59 f409      	BRNE _0x3A1
                 _0x3A0:
002b5a c001      	RJMP _0x39F
                 _0x3A1:
                 ;			res = FR_INVALID_NAME;
002b5b e016      	LDI  R17,LOW(6)
                 ;		if (res == FR_NO_FILE) {				/* Can create a new directory */
                 _0x39F:
002b5c 3014      	CPI  R17,4
002b5d f009      	BREQ PC+2
002b5e c138      	RJMP _0x3A2
                 ;			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
002b5f a1e8      	LDD  R30,Y+32
002b60 a1f9      	LDD  R31,Y+32+1
002b61 93fa      	ST   -Y,R31
002b62 93ea      	ST   -Y,R30
                +
002b63 e0a0     +LDI R26 , LOW ( 0x0 )
002b64 e0b0     +LDI R27 , HIGH ( 0x0 )
002b65 e080     +LDI R24 , BYTE3 ( 0x0 )
002b66 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
002b67 940e 1348 	CALL _create_chain_G000
                +
002b69 8fe8     +STD Y + 24 , R30
002b6a 8ff9     +STD Y + 24 + 1 , R31
002b6b 8f6a     +STD Y + 24 + 2 , R22
002b6c 8f7b     +STD Y + 24 + 3 , R23
                 	__PUTD1S 24
                 ;			res = FR_OK;
002b6d e010      	LDI  R17,LOW(0)
                 ;			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
002b6e 940e 3f71 	CALL __CPD10
002b70 f409      	BRNE _0x3A3
002b71 e017      	LDI  R17,LOW(7)
                 ;			if (dcl == 1) res = FR_INT_ERR;
                 _0x3A3:
                +
002b72 8da8     +LDD R26 , Y + 24
002b73 8db9     +LDD R27 , Y + 24 + 1
002b74 8d8a     +LDD R24 , Y + 24 + 2
002b75 8d9b     +LDD R25 , Y + 24 + 3
                 	__GETD2S 24
                +
002b76 30a1     +CPI R26 , LOW ( 0x1 )
002b77 e0e0     +LDI R30 , HIGH ( 0x1 )
002b78 07be     +CPC R27 , R30
002b79 e0e0     +LDI R30 , BYTE3 ( 0x1 )
002b7a 078e     +CPC R24 , R30
002b7b e0e0     +LDI R30 , BYTE4 ( 0x1 )
002b7c 079e     +CPC R25 , R30
                 	__CPD2N 0x1
002b7d f409      	BRNE _0x3A4
002b7e e012      	LDI  R17,LOW(2)
                 ;			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
                 _0x3A4:
                +
002b7f 8da8     +LDD R26 , Y + 24
002b80 8db9     +LDD R27 , Y + 24 + 1
002b81 8d8a     +LDD R24 , Y + 24 + 2
002b82 8d9b     +LDD R25 , Y + 24 + 3
                 	__GETD2S 24
                +
002b83 3faf     +CPI R26 , LOW ( 0xFFFFFFFF )
002b84 efef     +LDI R30 , HIGH ( 0xFFFFFFFF )
002b85 07be     +CPC R27 , R30
002b86 efef     +LDI R30 , BYTE3 ( 0xFFFFFFFF )
002b87 078e     +CPC R24 , R30
002b88 efef     +LDI R30 , BYTE4 ( 0xFFFFFFFF )
002b89 079e     +CPC R25 , R30
                 	__CPD2N 0xFFFFFFFF
002b8a f409      	BRNE _0x3A5
002b8b e011      	LDI  R17,LOW(1)
                 ;			if (res == FR_OK)					/* Flush FAT */
                 _0x3A5:
002b8c 3010      	CPI  R17,0
002b8d f429      	BRNE _0x3A6
                 ;				res = sync_window(dj.fs);
002b8e a1a8      	LDD  R26,Y+32
002b8f a1b9      	LDD  R27,Y+32+1
002b90 940e 0df6 	CALL _sync_window_G000
002b92 2f1e      	MOV  R17,R30
                 ;			if (res == FR_OK) {					/* Initialize the new directory table */
                 _0x3A6:
002b93 3010      	CPI  R17,0
002b94 f009      	BREQ PC+2
002b95 c0ba      	RJMP _0x3A7
                 ;				dsc = clust2sect(dj.fs, dcl);
002b96 a1e8      	LDD  R30,Y+32
002b97 a1f9      	LDD  R31,Y+32+1
002b98 93fa      	ST   -Y,R31
002b99 93ea      	ST   -Y,R30
                +
002b9a 8daa     +LDD R26 , Y + 26
002b9b 8dbb     +LDD R27 , Y + 26 + 1
002b9c 8d8c     +LDD R24 , Y + 26 + 2
002b9d 8d9d     +LDD R25 , Y + 26 + 3
                 	__GETD2S 26
002b9e 940e 0fb5 	CALL _clust2sect
                +
002ba0 8fec     +STD Y + 28 , R30
002ba1 8ffd     +STD Y + 28 + 1 , R31
002ba2 8f6e     +STD Y + 28 + 2 , R22
002ba3 8f7f     +STD Y + 28 + 3 , R23
                 	__PUTD1S 28
                 ;				dir = dj.fs->win;
002ba4 a1e8      	LDD  R30,Y+32
002ba5 a1f9      	LDD  R31,Y+32+1
002ba6 96be      	ADIW R30,46
002ba7 019f      	MOVW R18,R30
                 ;				mem_set(dir, 0, SS(dj.fs));
002ba8 933a      	ST   -Y,R19
002ba9 932a      	ST   -Y,R18
002baa e0e0      	LDI  R30,LOW(0)
002bab e0f0      	LDI  R31,HIGH(0)
002bac 93fa      	ST   -Y,R31
002bad 93ea      	ST   -Y,R30
002bae e0a0      	LDI  R26,LOW(512)
002baf e0b2      	LDI  R27,HIGH(512)
002bb0 940e 0d9f 	CALL _mem_set_G000
                 ;				mem_set(dir+DIR_Name, ' ', 11);	/* Create "." entry */
002bb2 01f9      	MOVW R30,R18
002bb3 9630      	ADIW R30,0
002bb4 93fa      	ST   -Y,R31
002bb5 93ea      	ST   -Y,R30
002bb6 e2e0      	LDI  R30,LOW(32)
002bb7 e0f0      	LDI  R31,HIGH(32)
002bb8 93fa      	ST   -Y,R31
002bb9 93ea      	ST   -Y,R30
002bba e0ab      	LDI  R26,LOW(11)
002bbb e0b0      	LDI  R27,0
002bbc 940e 0d9f 	CALL _mem_set_G000
                 ;				dir[DIR_Name] = '.';
002bbe 01d9      	MOVW R26,R18
002bbf e2ee      	LDI  R30,LOW(46)
002bc0 93ec      	ST   X,R30
                 ;				dir[DIR_Attr] = AM_DIR;
002bc1 01f9      	MOVW R30,R18
002bc2 963b      	ADIW R30,11
002bc3 e1a0      	LDI  R26,LOW(16)
002bc4 83a0      	STD  Z+0,R26
                 ;				ST_DWORD(dir+DIR_WrtTime, tm);
002bc5 89e8      	LDD  R30,Y+16
                +
002bc6 01d9     +MOVW R26 , R18
002bc7 9656     +ADIW R26 , 22
002bc8 93ec     +ST X , R30
                 	__PUTB1RNS 18,22
002bc9 89e9      	LDD  R30,Y+17
                +
002bca 01d9     +MOVW R26 , R18
002bcb 9657     +ADIW R26 , 23
002bcc 93ec     +ST X , R30
                 	__PUTB1RNS 18,23
                +
002bcd 89e8     +LDD R30 , Y + 16
002bce 89f9     +LDD R31 , Y + 16 + 1
002bcf 896a     +LDD R22 , Y + 16 + 2
002bd0 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
002bd1 940e 3e49 	CALL __LSRD16
                +
002bd3 01d9     +MOVW R26 , R18
002bd4 9658     +ADIW R26 , 24
002bd5 93ec     +ST X , R30
                 	__PUTB1RNS 18,24
                +
002bd6 89a8     +LDD R26 , Y + 16
002bd7 89b9     +LDD R27 , Y + 16 + 1
002bd8 898a     +LDD R24 , Y + 16 + 2
002bd9 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
002bda e1e8      	LDI  R30,LOW(24)
002bdb 940e 3e18 	CALL __LSRD12
                +
002bdd 01d9     +MOVW R26 , R18
002bde 9659     +ADIW R26 , 25
002bdf 93ec     +ST X , R30
                 	__PUTB1RNS 18,25
                 ;				st_clust(dir, dcl);
002be0 933a      	ST   -Y,R19
002be1 932a      	ST   -Y,R18
                +
002be2 8daa     +LDD R26 , Y + 26
002be3 8dbb     +LDD R27 , Y + 26 + 1
002be4 8d8c     +LDD R24 , Y + 26 + 2
002be5 8d9d     +LDD R25 , Y + 26 + 3
                 	__GETD2S 26
002be6 940e 1783 	CALL _st_clust_G000
                 ;				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
002be8 01f9      	MOVW R30,R18
002be9 96b0      	ADIW R30,32
002bea 93fa      	ST   -Y,R31
002beb 93ea      	ST   -Y,R30
002bec 933a      	ST   -Y,R19
002bed 932a      	ST   -Y,R18
002bee e2a0      	LDI  R26,LOW(32)
002bef e0b0      	LDI  R27,0
002bf0 940e 0d80 	CALL _mem_cpy_G000
                 ;				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
002bf2 01f9      	MOVW R30,R18
002bf3 96b1      	ADIW R30,33
002bf4 e2ae      	LDI  R26,LOW(46)
002bf5 83a0      	STD  Z+0,R26
                +
002bf6 a1ee     +LDD R30 , Y + 38
002bf7 a1ff     +LDD R31 , Y + 38 + 1
002bf8 a568     +LDD R22 , Y + 38 + 2
002bf9 a579     +LDD R23 , Y + 38 + 3
                 	__GETD1S 38
                +
002bfa 8bec     +STD Y + 20 , R30
002bfb 8bfd     +STD Y + 20 + 1 , R31
002bfc 8b6e     +STD Y + 20 + 2 , R22
002bfd 8b7f     +STD Y + 20 + 3 , R23
                 	__PUTD1S 20
                 ;				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
002bfe a1a8      	LDD  R26,Y+32
002bff a1b9      	LDD  R27,Y+32+1
002c00 91ac      	LD   R26,X
002c01 30a3      	CPI  R26,LOW(0x3)
002c02 f461      	BRNE _0x3A9
002c03 a1a8      	LDD  R26,Y+32
002c04 a1b9      	LDD  R27,Y+32+1
002c05 9692      	ADIW R26,34
002c06 940e 3f31 	CALL __GETD1P
                +
002c08 89ac     +LDD R26 , Y + 20
002c09 89bd     +LDD R27 , Y + 20 + 1
002c0a 898e     +LDD R24 , Y + 20 + 2
002c0b 899f     +LDD R25 , Y + 20 + 3
                 	__GETD2S 20
002c0c 940e 3f7f 	CALL __CPD12
002c0e f009      	BREQ _0x3AA
                 _0x3A9:
002c0f c005      	RJMP _0x3A8
                 _0x3AA:
                 ;					pcl = 0;
002c10 e0e0      	LDI  R30,LOW(0)
                +
002c11 8bec     +STD Y + 20 , R30
002c12 8bed     +STD Y + 20 + 1 , R30
002c13 8bee     +STD Y + 20 + 2 , R30
002c14 8bef     +STD Y + 20 + 3 , R30
                 	__CLRD1S 20
                 ;				st_clust(dir+SZ_DIR, pcl);
                 _0x3A8:
002c15 01f9      	MOVW R30,R18
002c16 96b0      	ADIW R30,32
002c17 93fa      	ST   -Y,R31
002c18 93ea      	ST   -Y,R30
                +
002c19 89ae     +LDD R26 , Y + 22
002c1a 89bf     +LDD R27 , Y + 22 + 1
002c1b 8d88     +LDD R24 , Y + 22 + 2
002c1c 8d99     +LDD R25 , Y + 22 + 3
                 	__GETD2S 22
002c1d 940e 1783 	CALL _st_clust_G000
                 ;				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
002c1f a1e8      	LDD  R30,Y+32
002c20 a1f9      	LDD  R31,Y+32+1
002c21 8102      	LDD  R16,Z+2
                 _0x3AC:
002c22 3000      	CPI  R16,0
002c23 f161      	BREQ _0x3AD
                 ;					dj.fs->winsect = dsc++;
                +
002c24 8dec     +LDD R30 , Y + 28
002c25 8dfd     +LDD R31 , Y + 28 + 1
002c26 8d6e     +LDD R22 , Y + 28 + 2
002c27 8d7f     +LDD R23 , Y + 28 + 3
                 	__GETD1S 28
                +
002c28 5fef     +SUBI R30 , LOW ( - 1 )
002c29 4fff     +SBCI R31 , HIGH ( - 1 )
002c2a 4f6f     +SBCI R22 , BYTE3 ( - 1 )
002c2b 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
                +
002c2c 8fec     +STD Y + 28 , R30
002c2d 8ffd     +STD Y + 28 + 1 , R31
002c2e 8f6e     +STD Y + 28 + 2 , R22
002c2f 8f7f     +STD Y + 28 + 3 , R23
                 	__PUTD1S 28
002c30 9731      	SBIW R30,1
002c31 4060      	SBCI R22,0
002c32 4070      	SBCI R23,0
                +
002c33 a1a8     +LDD R26 , Y + 32
002c34 a1b9     +LDD R27 , Y + 32 + 1
002c35 969a     +ADIW R26 , 42
002c36 940e 3f3c+CALL __PUTDP1
                 	__PUTD1SNS 32,42
                 ;					dj.fs->wflag = 1;
002c38 a1a8      	LDD  R26,Y+32
002c39 a1b9      	LDD  R27,Y+32+1
002c3a 9614      	ADIW R26,4
002c3b e0e1      	LDI  R30,LOW(1)
002c3c 93ec      	ST   X,R30
                 ;					res = sync_window(dj.fs);
002c3d a1a8      	LDD  R26,Y+32
002c3e a1b9      	LDD  R27,Y+32+1
002c3f 940e 0df6 	CALL _sync_window_G000
002c41 2f1e      	MOV  R17,R30
                 ;					if (res != FR_OK) break;
002c42 3010      	CPI  R17,0
002c43 f461      	BRNE _0x3AD
                 ;					mem_set(dir, 0, SS(dj.fs));
002c44 933a      	ST   -Y,R19
002c45 932a      	ST   -Y,R18
002c46 e0e0      	LDI  R30,LOW(0)
002c47 e0f0      	LDI  R31,HIGH(0)
002c48 93fa      	ST   -Y,R31
002c49 93ea      	ST   -Y,R30
002c4a e0a0      	LDI  R26,LOW(512)
002c4b e0b2      	LDI  R27,HIGH(512)
002c4c 940e 0d9f 	CALL _mem_set_G000
                 ;				}
002c4e 5001      	SUBI R16,1
002c4f cfd2      	RJMP _0x3AC
                 _0x3AD:
                 ;			}
                 ;			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
                 _0x3A7:
002c50 3010      	CPI  R17,0
002c51 f429      	BRNE _0x3AF
002c52 01de      	MOVW R26,R28
002c53 9690      	ADIW R26,32
002c54 940e 184f 	CALL _dir_register_G000
002c56 2f1e      	MOV  R17,R30
                 ;			if (res != FR_OK) {
                 _0x3AF:
002c57 3010      	CPI  R17,0
002c58 f059      	BREQ _0x3B0
                 ;				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
002c59 a1e8      	LDD  R30,Y+32
002c5a a1f9      	LDD  R31,Y+32+1
002c5b 93fa      	ST   -Y,R31
002c5c 93ea      	ST   -Y,R30
                +
002c5d 8daa     +LDD R26 , Y + 26
002c5e 8dbb     +LDD R27 , Y + 26 + 1
002c5f 8d8c     +LDD R24 , Y + 26 + 2
002c60 8d9d     +LDD R25 , Y + 26 + 3
                 	__GETD2S 26
002c61 940e 12b1 	CALL _remove_chain_G000
                 ;			} else {
002c63 c033      	RJMP _0x3B1
                 _0x3B0:
                 ;				dir = dj.dir;
                +
002c64 a92a     +LDD R18 , Y + 50
002c65 a93b     +LDD R19 , Y + 50 + 1
                 	__GETWRS 18,19,50
                 ;				dir[DIR_Attr] = AM_DIR;				/* Attribute */
002c66 01f9      	MOVW R30,R18
002c67 963b      	ADIW R30,11
002c68 e1a0      	LDI  R26,LOW(16)
002c69 83a0      	STD  Z+0,R26
                 ;				ST_DWORD(dir+DIR_WrtTime, tm);		/* Created time */
002c6a 89e8      	LDD  R30,Y+16
                +
002c6b 01d9     +MOVW R26 , R18
002c6c 9656     +ADIW R26 , 22
002c6d 93ec     +ST X , R30
                 	__PUTB1RNS 18,22
002c6e 89e9      	LDD  R30,Y+17
                +
002c6f 01d9     +MOVW R26 , R18
002c70 9657     +ADIW R26 , 23
002c71 93ec     +ST X , R30
                 	__PUTB1RNS 18,23
                +
002c72 89e8     +LDD R30 , Y + 16
002c73 89f9     +LDD R31 , Y + 16 + 1
002c74 896a     +LDD R22 , Y + 16 + 2
002c75 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
002c76 940e 3e49 	CALL __LSRD16
                +
002c78 01d9     +MOVW R26 , R18
002c79 9658     +ADIW R26 , 24
002c7a 93ec     +ST X , R30
                 	__PUTB1RNS 18,24
                +
002c7b 89a8     +LDD R26 , Y + 16
002c7c 89b9     +LDD R27 , Y + 16 + 1
002c7d 898a     +LDD R24 , Y + 16 + 2
002c7e 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
002c7f e1e8      	LDI  R30,LOW(24)
002c80 940e 3e18 	CALL __LSRD12
                +
002c82 01d9     +MOVW R26 , R18
002c83 9659     +ADIW R26 , 25
002c84 93ec     +ST X , R30
                 	__PUTB1RNS 18,25
                 ;				st_clust(dir, dcl);					/* Table start cluster */
002c85 933a      	ST   -Y,R19
002c86 932a      	ST   -Y,R18
                +
002c87 8daa     +LDD R26 , Y + 26
002c88 8dbb     +LDD R27 , Y + 26 + 1
002c89 8d8c     +LDD R24 , Y + 26 + 2
002c8a 8d9d     +LDD R25 , Y + 26 + 3
                 	__GETD2S 26
002c8b 940e 1783 	CALL _st_clust_G000
                 ;				dj.fs->wflag = 1;
002c8d a1a8      	LDD  R26,Y+32
002c8e a1b9      	LDD  R27,Y+32+1
002c8f 9614      	ADIW R26,4
002c90 e0e1      	LDI  R30,LOW(1)
002c91 93ec      	ST   X,R30
                 ;				res = sync_fs(dj.fs);
002c92 a1a8      	LDD  R26,Y+32
002c93 a1b9      	LDD  R27,Y+32+1
002c94 940e 0ea5 	CALL _sync_fs_G000
002c96 2f1e      	MOV  R17,R30
                 ;			}
                 _0x3B1:
                 ;		}
                 ;		FREE_BUF();
                 _0x3A2:
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 _0x39D:
002c97 2fe1      	MOV  R30,R17
002c98 940e 3f92 	CALL __LOADLOCR4
002c9a 96e8      	ADIW R28,56
002c9b 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Change Attribute                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_chmod (
                 ;	const TCHAR* path,	/* Pointer to the file path */
                 ;	BYTE value,			/* Attribute bits */
                 ;	BYTE mask			/* Attribute mask to change */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	BYTE *dir;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 1);
                 ;	*path -> Y+40
                 ;	value -> Y+39
                 ;	mask -> Y+38
                 ;	res -> R17
                 ;	dj -> Y+16
                 ;	*dir -> R18,R19
                 ;	sfn -> Y+4
                 ;	if (res == FR_OK) {
                 ;		INIT_BUF(dj);
                 ;		res = follow_path(&dj, path);		/* Follow the file path */
                 ;		FREE_BUF();
                 ;		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
                 ;			res = FR_INVALID_NAME;
                 ;		if (res == FR_OK) {
                 ;			dir = dj.dir;
                 ;			if (!dir) {						/* Is it a root directory? */
                 ;				res = FR_INVALID_NAME;
                 ;			} else {						/* File or sub directory */
                 ;				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
                 ;				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
                 ;				dj.fs->wflag = 1;
                 ;				res = sync_fs(dj.fs);
                 ;			}
                 ;		}
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Change Timestamp                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_utime (
                 ;	const TCHAR* path,	/* Pointer to the file/directory name */
                 ;	const FILINFO* fno	/* Pointer to the time stamp to be set */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	BYTE *dir;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 1);
                 ;	*path -> Y+40
                 ;	*fno -> Y+38
                 ;	res -> R17
                 ;	dj -> Y+16
                 ;	*dir -> R18,R19
                 ;	sfn -> Y+4
                 ;	if (res == FR_OK) {
                 ;		INIT_BUF(dj);
                 ;		res = follow_path(&dj, path);	/* Follow the file path */
                 ;		FREE_BUF();
                 ;		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
                 ;			res = FR_INVALID_NAME;
                 ;		if (res == FR_OK) {
                 ;			dir = dj.dir;
                 ;			if (!dir) {					/* Root directory */
                 ;				res = FR_INVALID_NAME;
                 ;			} else {					/* File or sub-directory */
                 ;				ST_WORD(dir+DIR_WrtTime, fno->ftime);
                 ;				ST_WORD(dir+DIR_WrtDate, fno->fdate);
                 ;				dj.fs->wflag = 1;
                 ;				res = sync_fs(dj.fs);
                 ;			}
                 ;		}
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Rename File/Directory                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_rename (
                 ;	const TCHAR* path_old,	/* Pointer to the old name */
                 ;	const TCHAR* path_new	/* Pointer to the new name */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR djo, djn;
                 ;	BYTE buf[21], *dir;
                 ;	DWORD dw;
                 ;	DEF_NAMEBUF;
                 ;
                 ;
                 ;	/* Get logical drive number of the source object */
                 ;	res = find_volume(&djo.fs, &path_old, 1);
                 ;	*path_old -> Y+87
                 ;	*path_new -> Y+85
                 ;	res -> R17
                 ;	djo -> Y+63
                 ;	djn -> Y+41
                 ;	buf -> Y+20
                 ;	*dir -> R18,R19
                 ;	dw -> Y+16
                 ;	sfn -> Y+4
                 ;	if (res == FR_OK) {
                 ;		djn.fs = djo.fs;
                 ;		INIT_BUF(djo);
                 ;		res = follow_path(&djo, path_old);		/* Check old object */
                 ;		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
                 ;			res = FR_INVALID_NAME;
                 ;#if _FS_LOCK
                 ;		if (res == FR_OK) res = chk_lock(&djo, 2);
                 ;#endif
                 ;		if (res == FR_OK) {						/* Old object is found */
                 ;			if (!djo.dir) {						/* Is root dir? */
                 ;				res = FR_NO_FILE;
                 ;			} else {
                 ;				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except for name */
                 ;				mem_cpy(&djn, &djo, sizeof (DIR));		/* Check new object */
                 ;				res = follow_path(&djn, path_new);
                 ;				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
                 ;				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
                 ;/* Start critical section that any interruption can cause a cross-link */
                 ;					res = dir_register(&djn);			/* Register the new entry */
                 ;					if (res == FR_OK) {
                 ;						dir = djn.dir;					/* Copy object information except for name */
                 ;						mem_cpy(dir+13, buf+2, 19);
                 ;						dir[DIR_Attr] = buf[0] | AM_ARC;
                 ;						djo.fs->wflag = 1;
                 ;						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the directory if needed */
                 ;							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
                 ;							if (!dw) {
                 ;								res = FR_INT_ERR;
                 ;							} else {
                 ;								res = move_window(djo.fs, dw);
                 ;								dir = djo.fs->win+SZ_DIR;	/* .. entry */
                 ;								if (res == FR_OK && dir[1] == '.') {
                 ;									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
                 ;									st_clust(dir, dw);
                 ;									djo.fs->wflag = 1;
                 ;								}
                 ;							}
                 ;						}
                 ;						if (res == FR_OK) {
                 ;							res = dir_remove(&djo);		/* Remove old entry */
                 ;							if (res == FR_OK)
                 ;								res = sync_fs(djo.fs);
                 ;						}
                 ;					}
                 ;/* End critical section */
                 ;				}
                 ;			}
                 ;		}
                 ;		FREE_BUF();
                 ;	}
                 ;
                 ;	LEAVE_FF(djo.fs, res);
                 ;}
                 ;
                 ;#endif /* !_FS_READONLY */
                 ;#endif /* _FS_MINIMIZE == 0 */
                 ;#endif /* _FS_MINIMIZE <= 1 */
                 ;#endif /* _FS_MINIMIZE <= 2 */
                 ;
                 ;
                 ;
                 ;#if _USE_LABEL
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get volume label                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_getlabel (
                 ;	const TCHAR* path,	/* Path name of the logical drive number */
                 ;	TCHAR* label,		/* Pointer to a buffer to return the volume label */
                 ;	DWORD* sn			/* Pointer to a variable to return the volume serial number */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	UINT i, j;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &path, 0);
                 ;
                 ;	/* Get volume label */
                 ;	if (res == FR_OK && label) {
                 ;		dj.sclust = 0;					/* Open root directory */
                 ;		res = dir_sdi(&dj, 0);
                 ;		if (res == FR_OK) {
                 ;			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
                 ;			if (res == FR_OK) {			/* A volume label is exist */
                 ;#if _LFN_UNICODE
                 ;				WCHAR w;
                 ;				i = j = 0;
                 ;				do {
                 ;					w = (i < 11) ? dj.dir[i++] : ' ';
                 ;					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
                 ;						w = w << 8 | dj.dir[i++];
                 ;					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
                 ;				} while (j < 11);
                 ;#else
                 ;				mem_cpy(label, dj.dir, 11);
                 ;#endif
                 ;				j = 11;
                 ;				do {
                 ;					label[j] = 0;
                 ;					if (!j) break;
                 ;				} while (label[--j] == ' ');
                 ;			}
                 ;			if (res == FR_NO_FILE) {	/* No label, return nul string */
                 ;				label[0] = 0;
                 ;				res = FR_OK;
                 ;			}
                 ;		}
                 ;	}
                 ;
                 ;	/* Get volume serial number */
                 ;	if (res == FR_OK && sn) {
                 ;		res = move_window(dj.fs, dj.fs->volbase);
                 ;		if (res == FR_OK) {
                 ;			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
                 ;			*sn = LD_DWORD(&dj.fs->win[i]);
                 ;		}
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Set volume label                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_setlabel (
                 ;	const TCHAR* label	/* Pointer to the volume label to set */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DIR dj;
                 ;	BYTE vn[11];
                 ;	UINT i, j, sl;
                 ;	WCHAR w;
                 ;	DWORD tm;
                 ;
                 ;
                 ;	/* Get logical drive number */
                 ;	res = find_volume(&dj.fs, &label, 1);
                 ;	if (res) LEAVE_FF(dj.fs, res);
                 ;
                 ;	/* Create a volume label in directory form */
                 ;	vn[0] = 0;
                 ;	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
                 ;	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
                 ;	if (sl) {	/* Create volume label in directory form */
                 ;		i = j = 0;
                 ;		do {
                 ;#if _LFN_UNICODE
                 ;			w = ff_convert(ff_wtoupper(label[i++]), 0);
                 ;#else
                 ;			w = (BYTE)label[i++];
                 ;			if (IsDBCS1(w))
                 ;				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
                 ;#if _USE_LFN
                 ;			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
                 ;#else
                 ;			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
                 ;#ifdef _EXCVT
                 ;			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
                 ;#else
                 ;			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
                 ;#endif
                 ;#endif
                 ;#endif
                 ;			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject invalid characters for ...
                 ;				LEAVE_FF(dj.fs, FR_INVALID_NAME);
                 ;			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
                 ;			vn[j++] = (BYTE)w;
                 ;		} while (i < sl);
                 ;		while (j < 11) vn[j++] = ' ';
                 ;	}
                 ;
                 ;	/* Set volume label */
                 ;	dj.sclust = 0;					/* Open root directory */
                 ;	res = dir_sdi(&dj, 0);
                 ;	if (res == FR_OK) {
                 ;		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
                 ;		if (res == FR_OK) {			/* A volume label is found */
                 ;			if (vn[0]) {
                 ;				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
                 ;				tm = get_fattime();
                 ;				ST_DWORD(dj.dir+DIR_WrtTime, tm);
                 ;			} else {
                 ;				dj.dir[0] = DDE;			/* Remove the volume label */
                 ;			}
                 ;			dj.fs->wflag = 1;
                 ;			res = sync_fs(dj.fs);
                 ;		} else {					/* No volume label is found or error */
                 ;			if (res == FR_NO_FILE) {
                 ;				res = FR_OK;
                 ;				if (vn[0]) {				/* Create volume label as new */
                 ;					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
                 ;					if (res == FR_OK) {
                 ;						mem_set(dj.dir, 0, SZ_DIR);	/* Set volume label */
                 ;						mem_cpy(dj.dir, vn, 11);
                 ;						dj.dir[DIR_Attr] = AM_VOL;
                 ;						tm = get_fattime();
                 ;						ST_DWORD(dj.dir+DIR_WrtTime, tm);
                 ;						dj.fs->wflag = 1;
                 ;						res = sync_fs(dj.fs);
                 ;					}
                 ;				}
                 ;			}
                 ;		}
                 ;	}
                 ;
                 ;	LEAVE_FF(dj.fs, res);
                 ;}
                 ;
                 ;#endif /* !_FS_READONLY */
                 ;#endif /* _USE_LABEL */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Forward data to the stream directly (available on only tiny cfg)      */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_FORWARD && _FS_TINY
                 ;
                 ;FRESULT f_forward (
                 ;	FIL* fp, 						/* Pointer to the file object */
                 ;	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
                 ;	UINT btf,						/* Number of bytes to forward */
                 ;	UINT* bf						/* Pointer to number of bytes forwarded */
                 ;)
                 ;{
                 ;	FRESULT res;
                 ;	DWORD remain, clst, sect;
                 ;	UINT rcnt;
                 ;	BYTE csect;
                 ;
                 ;
                 ;	*bf = 0;	/* Clear transfer byte counter */
                 ;
                 ;	res = validate(fp);								/* Check validity of the object */
                 ;	if (res != FR_OK) LEAVE_FF(fp->fs, res);
                 ;	if (fp->err)									/* Check error */
                 ;		LEAVE_FF(fp->fs, (FRESULT)fp->err);
                 ;	if (!(fp->flag & FA_READ))						/* Check access mode */
                 ;		LEAVE_FF(fp->fs, FR_DENIED);
                 ;
                 ;	remain = fp->fsize - fp->fptr;
                 ;	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
                 ;
                 ;	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
                 ;		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
                 ;		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
                 ;		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
                 ;			if (!csect) {							/* On the cluster boundary? */
                 ;				clst = (fp->fptr == 0) ?			/* On the top of the file? */
                 ;					fp->sclust : get_fat(fp->fs, fp->clust);
                 ;				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
                 ;				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
                 ;				fp->clust = clst;					/* Update current cluster */
                 ;			}
                 ;		}
                 ;		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
                 ;		if (!sect) ABORT(fp->fs, FR_INT_ERR);
                 ;		sect += csect;
                 ;		if (move_window(fp->fs, sect))				/* Move sector window */
                 ;			ABORT(fp->fs, FR_DISK_ERR);
                 ;		fp->dsect = sect;
                 ;		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
                 ;		if (rcnt > btf) rcnt = btf;
                 ;		rcnt = (*func)(&fp->fs->win[(WORD)fp->fptr % SS(fp->fs)], rcnt);
                 ;		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
                 ;	}
                 ;
                 ;	LEAVE_FF(fp->fs, FR_OK);
                 ;}
                 ;#endif /* _USE_FORWARD */
                 ;
                 ;
                 ;
                 ;#if _USE_MKFS && !_FS_READONLY
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create File System on the Drive                                       */
                 ;/*-----------------------------------------------------------------------*/
                 ;#define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
                 ;#define N_FATS		1		/* Number of FAT copies (1 or 2) */
                 ;
                 ;
                 ;FRESULT f_mkfs (
                 ;	const TCHAR* path,	/* Logical drive number */
                 ;	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
                 ;	UINT au				/* Allocation unit [bytes] */
                 ;)
                 ;{
                 ;	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
                 ;	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
                 ;	int vol;
                 ;	BYTE fmt, md, sys, *tbl, pdrv, part;
                 ;	DWORD n_clst, vs, n, wsect;
                 ;	UINT i;
                 ;	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
                 ;	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
                 ;	FATFS *fs;
                 ;	DSTATUS stat;
                 ;
                 ;
                 ;	/* Check mounted drive and clear work area */
                 ;	vol = get_ldnumber(&path);
                 ;	if (vol < 0) return FR_INVALID_DRIVE;
                 ;	if (sfd > 1) return FR_INVALID_PARAMETER;
                 ;	if (au & (au - 1)) return FR_INVALID_PARAMETER;
                 ;	fs = FatFs[vol];
                 ;	if (!fs) return FR_NOT_ENABLED;
                 ;	fs->fs_type = 0;
                 ;	pdrv = LD2PD(vol);	/* Physical drive */
                 ;	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
                 ;
                 ;	/* Get disk statics */
                 ;	stat = disk_initialize(pdrv);
                 ;	if (stat & STA_NOINIT) return FR_NOT_READY;
                 ;	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
                 ;#if _MAX_SS != 512					/* Get disk sector size */
                 ;	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS)
                 ;		return FR_DISK_ERR;
                 ;#endif
                 ;	if (_MULTI_PARTITION && part) {
                 ;		/* Get partition information from partition table in the MBR */
                 ;		if (disk_read(pdrv, fs->win, 0, 1)) return FR_DISK_ERR;
                 ;		if (LD_WORD(fs->win+BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
                 ;		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
                 ;		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
                 ;		b_vol = LD_DWORD(tbl+8);	/* Volume start sector */
                 ;		n_vol = LD_DWORD(tbl+12);	/* Volume size */
                 ;	} else {
                 ;		/* Create a partition in this function */
                 ;		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
                 ;			return FR_DISK_ERR;
                 ;		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
                 ;		n_vol -= b_vol;				/* Volume size */
                 ;	}
                 ;
                 ;	if (!au) {				/* AU auto selection */
                 ;		vs = n_vol / (2000 / (SS(fs) / 512));
                 ;		for (i = 0; vs < vst[i]; i++) ;
                 ;		au = cst[i];
                 ;	}
                 ;	au /= SS(fs);		/* Number of sectors per cluster */
                 ;	if (au == 0) au = 1;
                 ;	if (au > 128) au = 128;
                 ;
                 ;	/* Pre-compute number of clusters and FAT sub-type */
                 ;	n_clst = n_vol / au;
                 ;	fmt = FS_FAT12;
                 ;	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
                 ;	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
                 ;
                 ;	/* Determine offset and size of FAT structure */
                 ;	if (fmt == FS_FAT32) {
                 ;		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
                 ;		n_rsv = 32;
                 ;		n_dir = 0;
                 ;	} else {
                 ;		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
                 ;		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
                 ;		n_rsv = 1;
                 ;		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
                 ;	}
                 ;	b_fat = b_vol + n_rsv;				/* FAT area start sector */
                 ;	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
                 ;	b_data = b_dir + n_dir;				/* Data area start sector */
                 ;	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
                 ;
                 ;	/* Align data start sector to erase block boundary (for flash memory media) */
                 ;	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
                 ;	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
                 ;	n = (n - b_data) / N_FATS;
                 ;	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
                 ;		n_rsv += n;
                 ;		b_fat += n;
                 ;	} else {					/* FAT12/16: Expand FAT size */
                 ;		n_fat += n;
                 ;	}
                 ;
                 ;	/* Determine number of clusters and final check of validity of the FAT sub-type */
                 ;	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
                 ;	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
                 ;		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
                 ;		return FR_MKFS_ABORTED;
                 ;
                 ;	/* Determine system ID in the partition table */
                 ;	if (fmt == FS_FAT32) {
                 ;		sys = 0x0C;		/* FAT32X */
                 ;	} else {
                 ;		if (fmt == FS_FAT12 && n_vol < 0x10000) {
                 ;			sys = 0x01;	/* FAT12(<65536) */
                 ;		} else {
                 ;			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
                 ;		}
                 ;	}
                 ;
                 ;	if (_MULTI_PARTITION && part) {
                 ;		/* Update system ID in the partition table */
                 ;		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
                 ;		tbl[4] = sys;
                 ;		if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to teh MBR */
                 ;			return FR_DISK_ERR;
                 ;		md = 0xF8;
                 ;	} else {
                 ;		if (sfd) {	/* No partition table (SFD) */
                 ;			md = 0xF0;
                 ;		} else {	/* Create partition table (FDISK) */
                 ;			mem_set(fs->win, 0, SS(fs));
                 ;			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
                 ;			tbl[1] = 1;						/* Partition start head */
                 ;			tbl[2] = 1;						/* Partition start sector */
                 ;			tbl[3] = 0;						/* Partition start cylinder */
                 ;			tbl[4] = sys;					/* System type */
                 ;			tbl[5] = 254;					/* Partition end head */
                 ;			n = (b_vol + n_vol) / 63 / 255;
                 ;			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
                 ;			tbl[7] = (BYTE)n;				/* End cylinder */
                 ;			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
                 ;			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
                 ;			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
                 ;			if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to the MBR */
                 ;				return FR_DISK_ERR;
                 ;			md = 0xF8;
                 ;		}
                 ;	}
                 ;
                 ;	/* Create BPB in the VBR */
                 ;	tbl = fs->win;							/* Clear sector */
                 ;	mem_set(tbl, 0, SS(fs));
                 ;	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
                 ;	i = SS(fs);								/* Sector size */
                 ;	ST_WORD(tbl+BPB_BytsPerSec, i);
                 ;	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
                 ;	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
                 ;	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
                 ;	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
                 ;	ST_WORD(tbl+BPB_RootEntCnt, i);
                 ;	if (n_vol < 0x10000) {					/* Number of total sectors */
                 ;		ST_WORD(tbl+BPB_TotSec16, n_vol);
                 ;	} else {
                 ;		ST_DWORD(tbl+BPB_TotSec32, n_vol);
                 ;	}
                 ;	tbl[BPB_Media] = md;					/* Media descriptor */
                 ;	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
                 ;	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
                 ;	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
                 ;	n = get_fattime();						/* Use current time as VSN */
                 ;	if (fmt == FS_FAT32) {
                 ;		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
                 ;		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
                 ;		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
                 ;		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
                 ;		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
                 ;		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
                 ;		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
                 ;		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
                 ;	} else {
                 ;		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
                 ;		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
                 ;		tbl[BS_DrvNum] = 0x80;				/* Drive number */
                 ;		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
                 ;		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
                 ;	}
                 ;	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
                 ;	if (disk_write(pdrv, tbl, b_vol, 1))	/* Write it to the VBR sector */
                 ;		return FR_DISK_ERR;
                 ;	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR+6) */
                 ;		disk_write(pdrv, tbl, b_vol + 6, 1);
                 ;
                 ;	/* Initialize FAT area */
                 ;	wsect = b_fat;
                 ;	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
                 ;		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
                 ;		n = md;								/* Media descriptor byte */
                 ;		if (fmt != FS_FAT32) {
                 ;			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
                 ;			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
                 ;		} else {
                 ;			n |= 0xFFFFFF00;
                 ;			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
                 ;			ST_DWORD(tbl+4, 0xFFFFFFFF);
                 ;			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
                 ;		}
                 ;		if (disk_write(pdrv, tbl, wsect++, 1))
                 ;			return FR_DISK_ERR;
                 ;		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
                 ;		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single sector writes */
                 ;			if (disk_write(pdrv, tbl, wsect++, 1))
                 ;				return FR_DISK_ERR;
                 ;		}
                 ;	}
                 ;
                 ;	/* Initialize root directory */
                 ;	i = (fmt == FS_FAT32) ? au : n_dir;
                 ;	do {
                 ;		if (disk_write(pdrv, tbl, wsect++, 1))
                 ;			return FR_DISK_ERR;
                 ;	} while (--i);
                 ;
                 ;#if _USE_ERASE	/* Erase data area if needed */
                 ;	{
                 ;		DWORD eb[2];
                 ;
                 ;		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
                 ;		disk_ioctl(pdrv, CTRL_ERASE_SECTOR, eb);
                 ;	}
                 ;#endif
                 ;
                 ;	/* Create FSINFO if needed */
                 ;	if (fmt == FS_FAT32) {
                 ;		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
                 ;		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
                 ;		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
                 ;		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
                 ;		ST_WORD(tbl+BS_55AA, 0xAA55);
                 ;		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
                 ;		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
                 ;	}
                 ;
                 ;	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
                 ;}
                 ;
                 ;
                 ;
                 ;#if _MULTI_PARTITION
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Divide Physical Drive                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT f_fdisk (
                 ;	BYTE pdrv,			/* Physical drive number */
                 ;	const DWORD szt[],	/* Pointer to the size table for each partitions */
                 ;	void* work			/* Pointer to the working buffer */
                 ;)
                 ;{
                 ;	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
                 ;	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
                 ;	DSTATUS stat;
                 ;	DWORD sz_disk, sz_part, s_part;
                 ;
                 ;
                 ;	stat = disk_initialize(pdrv);
                 ;	if (stat & STA_NOINIT) return FR_NOT_READY;
                 ;	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
                 ;	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
                 ;
                 ;	/* Determine CHS in the table regardless of the drive geometry */
                 ;	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
                 ;	if (n == 256) n--;
                 ;	e_hd = n - 1;
                 ;	sz_cyl = 63 * n;
                 ;	tot_cyl = sz_disk / sz_cyl;
                 ;
                 ;	/* Create partition table */
                 ;	mem_set(buf, 0, _MAX_SS);
                 ;	p = buf + MBR_Table; b_cyl = 0;
                 ;	for (i = 0; i < 4; i++, p += SZ_PTE) {
                 ;		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
                 ;		if (!p_cyl) continue;
                 ;		s_part = (DWORD)sz_cyl * b_cyl;
                 ;		sz_part = (DWORD)sz_cyl * p_cyl;
                 ;		if (i == 0) {	/* Exclude first track of cylinder 0 */
                 ;			s_hd = 1;
                 ;			s_part += 63; sz_part -= 63;
                 ;		} else {
                 ;			s_hd = 0;
                 ;		}
                 ;		e_cyl = b_cyl + p_cyl - 1;
                 ;		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
                 ;
                 ;		/* Set partition table */
                 ;		p[1] = s_hd;						/* Start head */
                 ;		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
                 ;		p[3] = (BYTE)b_cyl;					/* Start cylinder */
                 ;		p[4] = 0x06;						/* System type (temporary setting) */
                 ;		p[5] = e_hd;						/* End head */
                 ;		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
                 ;		p[7] = (BYTE)e_cyl;					/* End cylinder */
                 ;		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
                 ;		ST_DWORD(p + 12, sz_part);			/* Partition size */
                 ;
                 ;		/* Next partition */
                 ;		b_cyl += p_cyl;
                 ;	}
                 ;	ST_WORD(p, 0xAA55);
                 ;
                 ;	/* Write it to the MBR */
                 ;	return (disk_write(pdrv, buf, 0, 1) || disk_ioctl(pdrv, CTRL_SYNC, 0)) ? FR_DISK_ERR : FR_OK;
                 ;}
                 ;
                 ;
                 ;#endif /* _MULTI_PARTITION */
                 ;#endif /* _USE_MKFS && !_FS_READONLY */
                 ;
                 ;
                 ;
                 ;
                 ;#if _USE_STRFUNC
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get a string from the file                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;TCHAR* f_gets (
                 ;	TCHAR* buff,	/* Pointer to the string buffer to read */
                 ;	int len,		/* Size of string buffer (characters) */
                 ;	FIL* fp			/* Pointer to the file object */
                 ;)
                 ;{
                 ;	int n = 0;
                 ;	TCHAR c, *p = buff;
                 ;	BYTE s[2];
                 ;	UINT rc;
                 ;
                 ;
                 ;	while (n < len - 1) {	/* Read characters until buffer gets filled */
                 ;	*buff -> Y+14
                 ;	len -> Y+12
                 ;	*fp -> Y+10
                 ;	n -> R16,R17
                 ;	c -> R19
                 ;	*p -> R20,R21
                 ;	s -> Y+8
                 ;	rc -> Y+6
                 ;#if _LFN_UNICODE
                 ;#if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
                 ;		f_read(fp, s, 1, &rc);
                 ;		if (rc != 1) break;
                 ;		c = s[0];
                 ;		if (c >= 0x80) {
                 ;			if (c < 0xC0) continue;	/* Skip stray trailer */
                 ;			if (c < 0xE0) {			/* Two-byte sequence */
                 ;				f_read(fp, s, 1, &rc);
                 ;				if (rc != 1) break;
                 ;				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
                 ;				if (c < 0x80) c = '?';
                 ;			} else {
                 ;				if (c < 0xF0) {		/* Three-byte sequence */
                 ;					f_read(fp, s, 2, &rc);
                 ;					if (rc != 2) break;
                 ;					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
                 ;					if (c < 0x800) c = '?';
                 ;				} else {			/* Reject four-byte sequence */
                 ;					c = '?';
                 ;				}
                 ;			}
                 ;		}
                 ;#elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
                 ;		f_read(fp, s, 2, &rc);
                 ;		if (rc != 2) break;
                 ;		c = s[1] + (s[0] << 8);
                 ;#elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
                 ;		f_read(fp, s, 2, &rc);
                 ;		if (rc != 2) break;
                 ;		c = s[0] + (s[1] << 8);
                 ;#else						/* Read a character in ANSI/OEM */
                 ;		f_read(fp, s, 1, &rc);
                 ;		if (rc != 1) break;
                 ;		c = s[0];
                 ;		if (IsDBCS1(c)) {
                 ;			f_read(fp, s, 1, &rc);
                 ;			if (rc != 1) break;
                 ;			c = (c << 8) + s[0];
                 ;		}
                 ;		c = ff_convert(c, 1);	/* OEM -> Unicode */
                 ;		if (!c) c = '?';
                 ;#endif
                 ;#else						/* Read a character without conversion */
                 ;		f_read(fp, s, 1, &rc);
                 ;		if (rc != 1) break;
                 ;		c = s[0];
                 ;#endif
                 ;		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
                 ;		*p++ = c;
                 ;		n++;
                 ;		if (c == '\n') break;		/* Break on EOL */
                 ;	}
                 ;	*p = 0;
                 ;	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
                 ;}
                 ;
                 ;
                 ;
                 ;#if !_FS_READONLY
                 ;#include <stdarg.h>
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Put a character to the file                                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;typedef struct {
                 ;	FIL* fp;
                 ;	int idx, nchr;
                 ;	BYTE buf[64];
                 ;} putbuff;
                 ;
                 ;
                 ;static
                 ;void putc_bfd (
                 ;	putbuff* pb,
                 ;	TCHAR c
                 ;)
                 ;{
                 _putc_bfd_G000:
                 ; .FSTART _putc_bfd_G000
                 ;	UINT bw;
                 ;	int i;
                 ;
                 ;
                 ;	if (_USE_STRFUNC == 2 && c == '\n')	 /* LF -> CRLF conversion */
002c9c 93aa      	ST   -Y,R26
002c9d 940e 3f8b 	CALL __SAVELOCR4
                 ;	*pb -> Y+5
                 ;	c -> Y+4
                 ;	bw -> R16,R17
                 ;	i -> R18,R19
002c9f e0e1      	LDI  R30,LOW(1)
002ca0 30e0      	CPI  R30,0
002ca1 f019      	BREQ _0x3E5
002ca2 81ac      	LDD  R26,Y+4
002ca3 30aa      	CPI  R26,LOW(0xA)
002ca4 f009      	BREQ _0x3E6
                 _0x3E5:
002ca5 c006      	RJMP _0x3E4
                 _0x3E6:
                 ;		putc_bfd(pb, '\r');
002ca6 81ed      	LDD  R30,Y+5
002ca7 81fe      	LDD  R31,Y+5+1
002ca8 93fa      	ST   -Y,R31
002ca9 93ea      	ST   -Y,R30
002caa e0ad      	LDI  R26,LOW(13)
002cab dff0      	RCALL _putc_bfd_G000
                 ;
                 ;	i = pb->idx;	/* Buffer write index (-1:error) */
                 _0x3E4:
002cac 81ad      	LDD  R26,Y+5
002cad 81be      	LDD  R27,Y+5+1
002cae 9612      	ADIW R26,2
002caf 912d      	LD   R18,X+
002cb0 913c      	LD   R19,X
                 ;	if (i < 0) return;
002cb1 2333      	TST  R19
002cb2 f1da      	BRMI _0x20C000C
                 ;
                 ;#if _LFN_UNICODE
                 ;#if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
                 ;	if (c < 0x80) {				/* 7-bit */
                 ;		pb->buf[i++] = (BYTE)c;
                 ;	} else {
                 ;		if (c < 0x800) {		/* 11-bit */
                 ;			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
                 ;		} else {				/* 16-bit */
                 ;			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
                 ;			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
                 ;		}
                 ;		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
                 ;	}
                 ;#elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
                 ;	pb->buf[i++] = (BYTE)(c >> 8);
                 ;	pb->buf[i++] = (BYTE)c;
                 ;#elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
                 ;	pb->buf[i++] = (BYTE)c;
                 ;	pb->buf[i++] = (BYTE)(c >> 8);
                 ;#else							/* Write a character in ANSI/OEM */
                 ;	c = ff_convert(c, 0);	/* Unicode -> OEM */
                 ;	if (!c) c = '?';
                 ;	if (c >= 0x100)
                 ;		pb->buf[i++] = (BYTE)(c >> 8);
                 ;	pb->buf[i++] = (BYTE)c;
                 ;#endif
                 ;#else							/* Write a character without conversion */
                 ;	pb->buf[i++] = (BYTE)c;
002cb3 81ad      	LDD  R26,Y+5
002cb4 81be      	LDD  R27,Y+5+1
002cb5 9616      	ADIW R26,6
002cb6 01f9      	MOVW R30,R18
                +
002cb7 5f2f     +SUBI R18 , LOW ( - 1 )
002cb8 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
002cb9 0fea      	ADD  R30,R26
002cba 1ffb      	ADC  R31,R27
002cbb 81ac      	LDD  R26,Y+4
002cbc 83a0      	STD  Z+0,R26
                 ;#endif
                 ;
                 ;	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
                +
002cbd 332d     +CPI R18 , LOW ( 61 )
002cbe e0e0     +LDI R30 , HIGH ( 61 )
002cbf 073e     +CPC R19 , R30
                 	__CPWRN 18,19,61
002cc0 f0fc      	BRLT _0x3E8
                 ;		f_write(pb->fp, pb->buf, (UINT)i, &bw);
002cc1 81ad      	LDD  R26,Y+5
002cc2 81be      	LDD  R27,Y+5+1
002cc3 940e 3f2d 	CALL __GETW1P
002cc5 93fa      	ST   -Y,R31
002cc6 93ea      	ST   -Y,R30
002cc7 81ef      	LDD  R30,Y+7
002cc8 85f8      	LDD  R31,Y+7+1
002cc9 9636      	ADIW R30,6
002cca 93fa      	ST   -Y,R31
002ccb 93ea      	ST   -Y,R30
002ccc 933a      	ST   -Y,R19
002ccd 932a      	ST   -Y,R18
002cce b7ad      	IN   R26,SPL
002ccf b7be      	IN   R27,SPH
002cd0 9711      	SBIW R26,1
002cd1 931f      	PUSH R17
002cd2 930f      	PUSH R16
002cd3 940e 2424 	CALL _f_write
002cd5 910f      	POP  R16
002cd6 911f      	POP  R17
                 ;		i = (bw == (UINT)i) ? 0 : -1;
                +
002cd7 1720     +CP R18 , R16
002cd8 0731     +CPC R19 , R17
                 	__CPWRR 18,19,16,17
002cd9 f419      	BRNE _0x3E9
002cda e0e0      	LDI  R30,LOW(0)
002cdb e0f0      	LDI  R31,HIGH(0)
002cdc c002      	RJMP _0x3EA
                 _0x3E9:
002cdd efef      	LDI  R30,LOW(65535)
002cde efff      	LDI  R31,HIGH(65535)
                 _0x3EA:
002cdf 019f      	MOVW R18,R30
                 ;	}
                 ;	pb->idx = i;
                 _0x3E8:
002ce0 01f9      	MOVW R30,R18
                +
002ce1 81ad     +LDD R26 , Y + 5
002ce2 81be     +LDD R27 , Y + 5 + 1
002ce3 9612     +ADIW R26 , 2
002ce4 93ed     +ST X + , R30
002ce5 93fc     +ST X , R31
                 	__PUTW1SNS 5,2
                 ;	pb->nchr++;
002ce6 81ad      	LDD  R26,Y+5
002ce7 81be      	LDD  R27,Y+5+1
002ce8 9614      	ADIW R26,4
002ce9 91ed      	LD   R30,X+
002cea 91fd      	LD   R31,X+
002ceb 9631      	ADIW R30,1
002cec 93fe      	ST   -X,R31
002ced 93ee      	ST   -X,R30
                 ;}
                 _0x20C000C:
002cee 940e 3f92 	CALL __LOADLOCR4
                 _0x20C000D:
002cf0 9627      	ADIW R28,7
002cf1 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;
                 ;int f_putc (
                 ;	TCHAR c,	/* A character to be output */
                 ;	FIL* fp		/* Pointer to the file object */
                 ;)
                 ;{
                 ;	putbuff pb;
                 ;	UINT nw;
                 ;
                 ;
                 ;	pb.fp = fp;			/* Initialize output buffer */
                 ;	c -> Y+74
                 ;	*fp -> Y+72
                 ;	pb -> Y+2
                 ;	nw -> R16,R17
                 ;	pb.nchr = pb.idx = 0;
                 ;
                 ;	putc_bfd(&pb, c);	/* Put a character */
                 ;
                 ;	if (   pb.idx >= 0	/* Flush buffered characters to the file */
                 ;		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                 ;		&& (UINT)pb.idx == nw) return pb.nchr;
                 ;	return EOF;
                 ;}
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Put a string to the file                                              */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;int f_puts (
                 ;	const TCHAR* str,	/* Pointer to the string to be output */
                 ;	FIL* fp				/* Pointer to the file object */
                 ;)
                 ;{
                 _f_puts:
                 ; .FSTART _f_puts
                 ;	putbuff pb;
                 ;	UINT nw;
                 ;
                 ;
                 ;	pb.fp = fp;				/* Initialize output buffer */
002cf2 93ba      	ST   -Y,R27
002cf3 93aa      	ST   -Y,R26
002cf4 97ef      	SBIW R28,63
002cf5 9727      	SBIW R28,7
002cf6 931a      	ST   -Y,R17
002cf7 930a      	ST   -Y,R16
                 ;	*str -> Y+74
                 ;	*fp -> Y+72
                 ;	pb -> Y+2
                 ;	nw -> R16,R17
                +
002cf8 01fe     +MOVW R30 , R28
002cf9 5be8     +SUBI R30 , LOW ( - 72 )
002cfa 4fff     +SBCI R31 , HIGH ( - 72 )
002cfb 9001     +LD R0 , Z +
002cfc 81f0     +LD R31 , Z
002cfd 2de0     +MOV R30 , R0
                 	__GETW1SX 72
002cfe 83ea      	STD  Y+2,R30
002cff 83fb      	STD  Y+2+1,R31
                 ;	pb.nchr = pb.idx = 0;
002d00 e0e0      	LDI  R30,LOW(0)
002d01 e0f0      	LDI  R31,HIGH(0)
002d02 83ec      	STD  Y+4,R30
002d03 83fd      	STD  Y+4+1,R31
002d04 83ee      	STD  Y+6,R30
002d05 83ff      	STD  Y+6+1,R31
                 ;
                 ;	while (*str)			/* Put the string */
                 _0x3EF:
                +
002d06 01de     +MOVW R26 , R28
002d07 5ba6     +SUBI R26 , LOW ( - 74 )
002d08 4fbf     +SBCI R27 , HIGH ( - 74 )
002d09 900d     +LD R0 , X +
002d0a 91bc     +LD R27 , X
002d0b 2da0     +MOV R26 , R0
                 	__GETW2SX 74
002d0c 91ec      	LD   R30,X
002d0d 30e0      	CPI  R30,0
002d0e f081      	BREQ _0x3F1
                 ;		putc_bfd(&pb, *str++);
002d0f 01fe      	MOVW R30,R28
002d10 9632      	ADIW R30,2
002d11 93fa      	ST   -Y,R31
002d12 93ea      	ST   -Y,R30
002d13 01de      	MOVW R26,R28
002d14 5ba4      	SUBI R26,LOW(-(76))
002d15 4fbf      	SBCI R27,HIGH(-(76))
002d16 91ed      	LD   R30,X+
002d17 91fd      	LD   R31,X+
002d18 9631      	ADIW R30,1
002d19 93fe      	ST   -X,R31
002d1a 93ee      	ST   -X,R30
002d1b 9731      	SBIW R30,1
002d1c 81a0      	LD   R26,Z
002d1d df7e      	RCALL _putc_bfd_G000
002d1e cfe7      	RJMP _0x3EF
                 _0x3F1:
                 ;		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                 ;		&& (UINT)pb.idx == nw) return pb.nchr;
002d1f 81ad      	LDD  R26,Y+5
002d20 23aa      	TST  R26
002d21 f0e2      	BRMI _0x3F3
002d22 81ea      	LDD  R30,Y+2
002d23 81fb      	LDD  R31,Y+2+1
002d24 93fa      	ST   -Y,R31
002d25 93ea      	ST   -Y,R30
002d26 01fe      	MOVW R30,R28
002d27 963a      	ADIW R30,10
002d28 93fa      	ST   -Y,R31
002d29 93ea      	ST   -Y,R30
002d2a 85e8      	LDD  R30,Y+8
002d2b 85f9      	LDD  R31,Y+8+1
002d2c 93fa      	ST   -Y,R31
002d2d 93ea      	ST   -Y,R30
002d2e b7ad      	IN   R26,SPL
002d2f b7be      	IN   R27,SPH
002d30 9711      	SBIW R26,1
002d31 931f      	PUSH R17
002d32 930f      	PUSH R16
002d33 940e 2424 	CALL _f_write
002d35 910f      	POP  R16
002d36 911f      	POP  R17
002d37 30e0      	CPI  R30,0
002d38 f429      	BRNE _0x3F3
002d39 81ac      	LDD  R26,Y+4
002d3a 81bd      	LDD  R27,Y+4+1
002d3b 170a      	CP   R16,R26
002d3c 071b      	CPC  R17,R27
002d3d f009      	BREQ _0x3F4
                 _0x3F3:
002d3e c003      	RJMP _0x3F2
                 _0x3F4:
002d3f 81ee      	LDD  R30,Y+6
002d40 81ff      	LDD  R31,Y+6+1
002d41 c002      	RJMP _0x20C000B
                 ;	return EOF;
                 _0x3F2:
002d42 efef      	LDI  R30,LOW(65535)
002d43 efff      	LDI  R31,HIGH(65535)
                 _0x20C000B:
002d44 8119      	LDD  R17,Y+1
002d45 8108      	LDD  R16,Y+0
002d46 96ef      	ADIW R28,63
002d47 962d      	ADIW R28,13
002d48 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Put a formatted string to the file                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;int f_printf (
                 ;	FIL* fp,			/* Pointer to the file object */
                 ;	const TCHAR* fmt,	/* Pointer to the format string */
                 ;	...					/* Optional arguments... */
                 ;)
                 ;{
                 ;	va_list arp;
                 ;	BYTE f, r;
                 ;	UINT nw, i, j, w;
                 ;	DWORD v;
                 ;	TCHAR c, d, s[16], *p;
                 ;	putbuff pb;
                 ;
                 ;
                 ;	pb.fp = fp;				/* Initialize output buffer */
                 ;	*fp -> Y+108
                 ;	*fmt -> Y+106
                 ;	*arp -> R16,R17
                 ;	f -> R19
                 ;	r -> R18
                 ;	nw -> R20,R21
                 ;	i -> Y+104
                 ;	j -> Y+102
                 ;	w -> Y+100
                 ;	v -> Y+96
                 ;	c -> Y+95
                 ;	d -> Y+94
                 ;	s -> Y+78
                 ;	*p -> Y+76
                 ;	pb -> Y+6
                 ;	pb.nchr = pb.idx = 0;
                 ;
                 ;	va_start(arp, fmt);
                 ;
                 ;	for (;;) {
                 ;		c = *fmt++;
                 ;		if (c == 0) break;			/* End of string */
                 ;		if (c != '%') {				/* Non escape character */
                 ;			putc_bfd(&pb, c);
                 ;			continue;
                 ;		}
                 ;		w = f = 0;
                 ;		c = *fmt++;
                 ;		if (c == '0') {				/* Flag: '0' padding */
                 ;			f = 1; c = *fmt++;
                 ;		} else {
                 ;			if (c == '-') {			/* Flag: left justified */
                 ;				f = 2; c = *fmt++;
                 ;			}
                 ;		}
                 ;		while (IsDigit(c)) {		/* Precision */
                 ;			w = w * 10 + c - '0';
                 ;			c = *fmt++;
                 ;		}
                 ;		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
                 ;			f |= 4; c = *fmt++;
                 ;		}
                 ;		if (!c) break;
                 ;		d = c;
                 ;		if (IsLower(d)) d -= 0x20;
                 ;		switch (d) {				/* Type is... */
                 ;		case 'S' :					/* String */
                 ;			p = va_arg(arp, TCHAR*);
                 ;			for (j = 0; p[j]; j++) ;
                 ;			if (!(f & 2)) {
                 ;				while (j++ < w) putc_bfd(&pb, ' ');
                 ;			while (*p) putc_bfd(&pb, *p++);
                 ;		case 'C' :					/* Character */
                 ;			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
                 ;		case 'B' :					/* Binary */
                 ;			r = 2; break;
                 ;		case 'O' :					/* Octal */
                 ;			r = 8; break;
                 ;		case 'D' :					/* Signed decimal */
                 ;		case 'U' :					/* Unsigned decimal */
                 ;			r = 10; break;
                 ;		case 'X' :					/* Hexdecimal */
                 ;			r = 16; break;
                 ;		default:					/* Unknown type (pass-through) */
                 ;			putc_bfd(&pb, c); continue;
                 ;		}
                 ;
                 ;		/* Get an argument and put it in numeral */
                 ;		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_arg(arp, unsigned int ...
                 ;		if (d == 'D' && (v & 0x80000000)) {
                 ;			v = 0 - v;
                 ;			f |= 8;
                 ;		}
                 ;		i = 0;
                 ;		do {
                 ;			d = (TCHAR)(v % r); v /= r;
                 ;			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
                 ;			s[i++] = d + '0';
                 ;		} while (v && i < sizeof s / sizeof s[0]);
                 ;		if (f & 8) s[i++] = '-';
                 ;		j = i; d = (f & 1) ? '0' : ' ';
                 ;		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
                 ;		while (j++ < w) putc_bfd(&pb, d);
                 ;
                 ;	va_end(arp);
                 ;
                 ;	if (   pb.idx >= 0		/* Flush buffered characters to the file */
                 ;		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
                 ;		&& (UINT)pb.idx == nw) return pb.nchr;
                 ;	return EOF;
                 ;}
                 ;
                 ;#endif /* !_FS_READONLY */
                 ;#endif /* _USE_STRFUNC */
                 ;#include "menu.h"
                 ;//#include "dataflash/df.c"
                 ;
                 ;#define DS1307_ADR    104
                 ;
                 ;#define MAX_FN_STR    320
                 ;
                 ;#define CS_KEYS_SET  PORTC.0 = 1;
                 ;#define CS_KEYS_RESET  PORTC.0 = 0;
                 ;#define CLK_KEYS_SET  PORTC.2 = 1;
                 ;#define CLK_KEYS_RESET  PORTC.2 = 0;
                 ;#define KEYS_INIT   DDRC.0 = 1; DDRC.2 = 1; DDRD.7 = 0;
                 ;
                 ;///KEYBOARD KEYS
                 ;#define FORWARD  247
                 ;#define BACKWARD 251
                 ;#define PAUSE    253
                 ;#define PLAY     254
                 ;
                 ;#define PWM_PORT PORTB
                 ;#define PWM_DIR DDRB
                 ;#define PWM_PIN 3
                 ;
                 ;#define BUF_SIZE 256
                 ;#define HALF_BUF ((BUF_SIZE)/2)
                 ;
                 ;struct CFileInfo
                 ;{
                 ;unsigned char * szFileName;
                 ;int nFileDate;
                 ;int nFileSize;
                 ;}g_FileInfo[32];
                 ;
                 ; DWORD get_fattime ()
                 ;{
                 _get_fattime:
                 ; .FSTART _get_fattime
                 ;    /* Pack date and time into a DWORD variable */
                 ;   return    ((DWORD)(/*rtc.year*/2010 - 1980) << 25)
                 ;         | ((DWORD)/*rtc.month*/10 << 21)
                 ;         | ((DWORD)/*rtc.mday*/7 << 16)
                 ;          | ((DWORD)/*rtc.hour*/1 << 11)
                 ;          | ((DWORD)/*rtc.min*/26 << 5)
                 ;          | ((DWORD)/*rtc.sec*/6 >> 1);
                +
002d49 e4e3     +LDI R30 , LOW ( 0x3D470B43 )
002d4a e0fb     +LDI R31 , HIGH ( 0x3D470B43 )
002d4b e467     +LDI R22 , BYTE3 ( 0x3D470B43 )
002d4c e37d     +LDI R23 , BYTE4 ( 0x3D470B43 )
                 	__GETD1N 0x3D470B43
002d4d 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;//******************************************************************************
                 ;//   
                 ;//******************************************************************************
                 ;FIL file;
                 ;FIL simple_file;
                 ;    BYTE bIsfOpened = 0;
                 ;    unsigned char fn16_str[13];    //    8.3 !!!
                 ;    unsigned char rootpath[32];
                 ;    unsigned char tempstr[32];
                 ;    unsigned char audiobuf[64];
                 ;    int select_file_index = 0;
                 ;    int select_file_option_index = 0;
                 ;    unsigned int nNofDirFiles = 0;
                 ;    int nKey;
                 ;    int nAudioBufferIndex = 0;
                 ;    BYTE bSelect = 0;
                 ;    BYTE bFileInfoWindow = 0;
                 ;    BYTE bFormatAlert = 0;
                 ;    BYTE bTextReader = 0;
                 ;    BYTE bMusicPlayer = 0;
                 ;    BYTE bImageViever = 0;
                 ;    int scroll_index = 0;
                 ;    UINT state = 0;
                 ;    BYTE bMusicFOpened = 0;
                 ;
                 ;enum FILE_OPTION_MENU {OPEN=0,DELETE,INFO}fOption;
                 ;
                 ;BYTE GetKeysStatus()      //     74HC165
                 ;{
                 _GetKeysStatus:
                 ; .FSTART _GetKeysStatus
                 ;  unsigned int i=0;
                 ;  BYTE keydata;
                 ;
                 ;     CS_KEYS_RESET;         //  
002d4e 940e 3f8b 	CALL __SAVELOCR4
                 ;	i -> R16,R17
                 ;	keydata -> R19
                +
002d50 e000     +LDI R16 , LOW ( 0 )
002d51 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
002d52 9840      	CBI  0x8,0
                 ;     //delay_us(1);
                 ;     CS_KEYS_SET;
002d53 9a40      	SBI  0x8,0
                 ;      CLK_KEYS_SET;
002d54 9a42      	SBI  0x8,2
                 ;
                 ;   for( i=0; i<7; i++ )
                +
002d55 e000     +LDI R16 , LOW ( 0 )
002d56 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x44F:
                +
002d57 3007     +CPI R16 , LOW ( 7 )
002d58 e0e0     +LDI R30 , HIGH ( 7 )
002d59 071e     +CPC R17 , R30
                 	__CPWRN 16,17,7
002d5a f450      	BRSH _0x450
                 ;   {
                 ;     keydata |= PIND.7;
002d5b e0e0      	LDI  R30,0
002d5c 994f      	SBIC 0x9,7
002d5d e0e1      	LDI  R30,1
002d5e 2b3e      	OR   R19,R30
                 ;     keydata <<= 1;
002d5f 0f33      	LSL  R19
                 ;      CLK_KEYS_RESET;            // 
002d60 9842      	CBI  0x8,2
                 ;      //delay_us(1);
                 ;      CLK_KEYS_SET;
002d61 9a42      	SBI  0x8,2
                 ;   }
                +
002d62 5f0f     +SUBI R16 , LOW ( - 1 )
002d63 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
002d64 cff2      	RJMP _0x44F
                 _0x450:
                 ;  keydata |= PIND.7;
002d65 e0e0      	LDI  R30,0
002d66 994f      	SBIC 0x9,7
002d67 e0e1      	LDI  R30,1
002d68 2b3e      	OR   R19,R30
                 ;   return keydata;
002d69 2fe3      	MOV  R30,R19
002d6a 940e 3f92 	CALL __LOADLOCR4
002d6c 9624      	ADIW R28,4
002d6d 9508      	RET
                 ;}
                 ; .FEND
                 ;
                 ;ISR(TIM0_OVF)
                 ;{
                 _TIM0_OVF_func:
                 ; .FSTART _TIM0_OVF_func
002d6e 93aa      	ST   -Y,R26
002d6f 93ba      	ST   -Y,R27
002d70 93ea      	ST   -Y,R30
002d71 93fa      	ST   -Y,R31
002d72 b7ef      	IN   R30,SREG
002d73 93ea      	ST   -Y,R30
                 ;  OCR0A = audiobuf[nAudioBufferIndex];
002d74 efa7      	LDI  R26,LOW(_audiobuf)
002d75 e0b7      	LDI  R27,HIGH(_audiobuf)
002d76 0dad      	ADD  R26,R13
002d77 1dbe      	ADC  R27,R14
002d78 91ec      	LD   R30,X
002d79 bde7      	OUT  0x27,R30
                 ;  nAudioBufferIndex++;
002d7a e0e1      	LDI  R30,LOW(1)
002d7b e0f0      	LDI  R31,HIGH(1)
                +
002d7c 0ede     +ADD R13 , R30
002d7d 1eef     +ADC R14 , R31
                 	__ADDWRR 13,14,30,31
                 ;}
002d7e 91e9      	LD   R30,Y+
002d7f bfef      	OUT  SREG,R30
002d80 91f9      	LD   R31,Y+
002d81 91e9      	LD   R30,Y+
002d82 91b9      	LD   R27,Y+
002d83 91a9      	LD   R26,Y+
002d84 9518      	RETI
                 ; .FEND
                 ;
                 ;ISR(EXT_INT0)
                 ;{
                 _EXT_INT0_func:
                 ; .FSTART _EXT_INT0_func
002d85 920a      	ST   -Y,R0
002d86 921a      	ST   -Y,R1
002d87 92fa      	ST   -Y,R15
002d88 936a      	ST   -Y,R22
002d89 937a      	ST   -Y,R23
002d8a 938a      	ST   -Y,R24
002d8b 939a      	ST   -Y,R25
002d8c 93aa      	ST   -Y,R26
002d8d 93ba      	ST   -Y,R27
002d8e 93ea      	ST   -Y,R30
002d8f 93fa      	ST   -Y,R31
002d90 b7ef      	IN   R30,SREG
002d91 93ea      	ST   -Y,R30
                 ;delay_ms(100);
002d92 e6a4      	LDI  R26,LOW(100)
002d93 e0b0      	LDI  R27,0
002d94 940e 3c19 	CALL _delay_ms
                 ;nKey = GetKeysStatus();
002d96 dfb7      	RCALL _GetKeysStatus
002d97 2ebe      	MOV  R11,R30
002d98 24cc      	CLR  R12
                 ;}
002d99 91e9      	LD   R30,Y+
002d9a bfef      	OUT  SREG,R30
002d9b 91f9      	LD   R31,Y+
002d9c 91e9      	LD   R30,Y+
002d9d 91b9      	LD   R27,Y+
002d9e 91a9      	LD   R26,Y+
002d9f 9199      	LD   R25,Y+
002da0 9189      	LD   R24,Y+
002da1 9179      	LD   R23,Y+
002da2 9169      	LD   R22,Y+
002da3 90f9      	LD   R15,Y+
002da4 9019      	LD   R1,Y+
002da5 9009      	LD   R0,Y+
002da6 9518      	RETI
                 ; .FEND
                 ;
                 ;
                 ;FRESULT browser_scan_files (char* path) // Scan Files in the root directory
                 ;{
                 _browser_scan_files:
                 ; .FSTART _browser_scan_files
                 ;    FRESULT res;
                 ;    FILINFO fno;
                 ;    DIR dir;
                 ;    unsigned char * szFileMenuList[3] = {"Open","Delete","Info"};
                 ;    int pos_index = 0;
                 ;    int i = 0,nf_index = 0;
                 ;    int j = 0;
                 ;    int tempselindex = 0;
                 ;    nlcd_Clear(WHITE);
002da7 93ba      	ST   -Y,R27
002da8 93aa      	ST   -Y,R26
002da9 97e8      	SBIW R28,56
002daa e08c      	LDI  R24,12
002dab e0a0      	LDI  R26,LOW(0)
002dac e0b0      	LDI  R27,HIGH(0)
002dad e0e8      	LDI  R30,LOW(_0x456*2)
002dae e0f4      	LDI  R31,HIGH(_0x456*2)
002daf 940e 3f97 	CALL __INITLOCB
002db1 940e 3f89 	CALL __SAVELOCR6
                 ;	*path -> Y+62
                 ;	res -> R17
                 ;	fno -> Y+40
                 ;	dir -> Y+18
                 ;	szFileMenuList -> Y+12
                 ;	pos_index -> R18,R19
                 ;	i -> R20,R21
                 ;	nf_index -> Y+10
                 ;	j -> Y+8
                 ;	tempselindex -> Y+6
                +
002db3 e020     +LDI R18 , LOW ( 0 )
002db4 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                +
002db5 e040     +LDI R20 , LOW ( 0 )
002db6 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
002db7 efaf      	LDI  R26,LOW(4095)
002db8 e0bf      	LDI  R27,HIGH(4095)
002db9 940e 0501 	CALL _nlcd_Clear
                 ;    if(!bIsfOpened)
002dbb 2044      	TST  R4
002dbc f461      	BRNE _0x457
                 ;    {
                 ;    res = f_opendir(&dir, path);
002dbd 01fe      	MOVW R30,R28
002dbe 9672      	ADIW R30,18
002dbf 93fa      	ST   -Y,R31
002dc0 93ea      	ST   -Y,R30
                +
002dc1 01de     +MOVW R26 , R28
002dc2 5ca0     +SUBI R26 , LOW ( - 64 )
002dc3 4fbf     +SBCI R27 , HIGH ( - 64 )
002dc4 900d     +LD R0 , X +
002dc5 91bc     +LD R27 , X
002dc6 2da0     +MOV R26 , R0
                 	__GETW2SX 64
002dc7 dbd8      	RCALL _f_opendir
002dc8 2f1e      	MOV  R17,R30
                 ;    }
                 ;    if (res == FR_OK)
                 _0x457:
002dc9 3010      	CPI  R17,0
002dca f009      	BREQ PC+2
002dcb c180      	RJMP _0x458
                 ;    {
                 ;    if(!bIsfOpened)
002dcc 2044      	TST  R4
002dcd f4e9      	BRNE _0x459
                 ;    {
                 ;    f_open(&file, "0:LOG/SPISOKF.txt", FA_OPEN_ALWAYS  | FA_WRITE);
002dce eaea      	LDI  R30,LOW(_file)
002dcf e0f7      	LDI  R31,HIGH(_file)
002dd0 93fa      	ST   -Y,R31
002dd1 93ea      	ST   -Y,R30
                +
002dd2 ede0     +LDI R30 , LOW ( _0x455 + ( 17 ) )
002dd3 e0f5     +LDI R31 , HIGH ( _0x455 + ( 17 ) )
                 	__POINTW1MN _0x455,17
002dd4 93fa      	ST   -Y,R31
002dd5 93ea      	ST   -Y,R30
002dd6 e1a2      	LDI  R26,LOW(18)
002dd7 940e 20d5 	CALL _f_open
                 ;    f_lseek(&file,0);
002dd9 eaea      	LDI  R30,LOW(_file)
002dda e0f7      	LDI  R31,HIGH(_file)
002ddb 93fa      	ST   -Y,R31
002ddc 93ea      	ST   -Y,R30
                +
002ddd e0a0     +LDI R26 , LOW ( 0x0 )
002dde e0b0     +LDI R27 , HIGH ( 0x0 )
002ddf e080     +LDI R24 , BYTE3 ( 0x0 )
002de0 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
002de1 d977      	RCALL _f_lseek
                 ;    f_puts("   ,  ,     \n\n",&file);
                +
002de2 eee2     +LDI R30 , LOW ( _0x455 + ( 35 ) )
002de3 e0f5     +LDI R31 , HIGH ( _0x455 + ( 35 ) )
                 	__POINTW1MN _0x455,35
002de4 93fa      	ST   -Y,R31
002de5 93ea      	ST   -Y,R30
002de6 eaaa      	LDI  R26,LOW(_file)
002de7 e0b7      	LDI  R27,HIGH(_file)
002de8 df09      	RCALL _f_puts
                 ;    select_file_index = 0;
002de9 2455      	CLR  R5
002dea 2466      	CLR  R6
                 ;    }
                 ;       for (nf_index = 0;;nf_index++) {
                 _0x459:
002deb e0e0      	LDI  R30,LOW(0)
002dec 87ea      	STD  Y+10,R30
002ded 87eb      	STD  Y+10+1,R30
                 _0x45B:
                 ;            if(!bIsfOpened)
002dee 2044      	TST  R4
002def f009      	BREQ PC+2
002df0 c06f      	RJMP _0x45D
                 ;            {
                 ;            res = f_readdir(&dir, &fno);
002df1 01fe      	MOVW R30,R28
002df2 9672      	ADIW R30,18
002df3 93fa      	ST   -Y,R31
002df4 93ea      	ST   -Y,R30
002df5 01de      	MOVW R26,R28
002df6 969a      	ADIW R26,42
002df7 dc1f      	RCALL _f_readdir
002df8 2f1e      	MOV  R17,R30
                 ;            if (res != FR_OK || fno.fname[0] == 0) break;
002df9 3010      	CPI  R17,0
002dfa f419      	BRNE _0x45F
002dfb a9a9      	LDD  R26,Y+49
002dfc 30a0      	CPI  R26,LOW(0x0)
002dfd f409      	BRNE _0x45E
                 _0x45F:
002dfe c0de      	RJMP _0x45C
                 ;            g_FileInfo[nf_index].szFileName = (unsigned char*)malloc(strlen(fno.fname)+1);
                 _0x45E:
002dff 85aa      	LDD  R26,Y+10
002e00 85bb      	LDD  R27,Y+10+1
002e01 e0e6      	LDI  R30,LOW(6)
002e02 940e 3e90 	CALL __MULB1W2U
002e04 51e6      	SUBI R30,LOW(-_g_FileInfo)
002e05 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002e06 93ff      	PUSH R31
002e07 93ef      	PUSH R30
002e08 01de      	MOVW R26,R28
002e09 96d1      	ADIW R26,49
002e0a 940e 34ee 	CALL _strlen
002e0c 9631      	ADIW R30,1
002e0d 01df      	MOVW R26,R30
002e0e 940e 3ba9 	CALL _malloc
002e10 91af      	POP  R26
002e11 91bf      	POP  R27
002e12 93ed      	ST   X+,R30
002e13 93fc      	ST   X,R31
                 ;            sprintf(g_FileInfo[nf_index].szFileName,"%s", fno.fname);
002e14 85aa      	LDD  R26,Y+10
002e15 85bb      	LDD  R27,Y+10+1
002e16 e0e6      	LDI  R30,LOW(6)
002e17 940e 3e90 	CALL __MULB1W2U
002e19 51e6      	SUBI R30,LOW(-_g_FileInfo)
002e1a 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002e1b 01df      	MOVW R26,R30
002e1c 940e 3f2d 	CALL __GETW1P
002e1e 93fa      	ST   -Y,R31
002e1f 93ea      	ST   -Y,R30
                +
002e20 e9e5     +LDI R30 , LOW ( 2 * _0x0 + ( 129 ) )
002e21 e0f4     +LDI R31 , HIGH ( 2 * _0x0 + ( 129 ) )
                 	__POINTW1FN _0x0,129
002e22 93fa      	ST   -Y,R31
002e23 93ea      	ST   -Y,R30
002e24 01fe      	MOVW R30,R28
002e25 96f5      	ADIW R30,53
002e26 2766      	CLR  R22
002e27 2777      	CLR  R23
002e28 940e 3f5a 	CALL __PUTPARD1
002e2a e084      	LDI  R24,4
002e2b 940e 3997 	CALL _sprintf
002e2d 9628      	ADIW R28,8
                 ;            g_FileInfo[nf_index].nFileSize = fno.fsize;
002e2e 85aa      	LDD  R26,Y+10
002e2f 85bb      	LDD  R27,Y+10+1
002e30 e0e6      	LDI  R30,LOW(6)
002e31 940e 3e90 	CALL __MULB1W2U
                +
002e33 51e2     +SUBI R30 , LOW ( - _g_FileInfo - ( 4 ) )
002e34 4ff9     +SBCI R31 , HIGH ( - _g_FileInfo - ( 4 ) )
                 	__ADDW1MN _g_FileInfo,4
002e35 a5a8      	LDD  R26,Y+40
002e36 a5b9      	LDD  R27,Y+40+1
002e37 83a0      	STD  Z+0,R26
002e38 83b1      	STD  Z+1,R27
                 ;            g_FileInfo[nf_index].nFileDate = fno.fdate;
002e39 85aa      	LDD  R26,Y+10
002e3a 85bb      	LDD  R27,Y+10+1
002e3b e0e6      	LDI  R30,LOW(6)
002e3c 940e 3e90 	CALL __MULB1W2U
                +
002e3e 51e4     +SUBI R30 , LOW ( - _g_FileInfo - ( 2 ) )
002e3f 4ff9     +SBCI R31 , HIGH ( - _g_FileInfo - ( 2 ) )
                 	__ADDW1MN _g_FileInfo,2
002e40 a5ac      	LDD  R26,Y+44
002e41 a5bd      	LDD  R27,Y+44+1
002e42 83a0      	STD  Z+0,R26
002e43 83b1      	STD  Z+1,R27
                 ;            strcpy(fn16_str,fno.fname);
002e44 ecea      	LDI  R30,LOW(_fn16_str)
002e45 e0f7      	LDI  R31,HIGH(_fn16_str)
002e46 93fa      	ST   -Y,R31
002e47 93ea      	ST   -Y,R30
002e48 01de      	MOVW R26,R28
002e49 96d3      	ADIW R26,51
002e4a 940e 34d4 	CALL _strcpy
                 ;            strcat(fn16_str,"\n");
002e4c ecea      	LDI  R30,LOW(_fn16_str)
002e4d e0f7      	LDI  R31,HIGH(_fn16_str)
002e4e 93fa      	ST   -Y,R31
002e4f 93ea      	ST   -Y,R30
                +
002e50 e2a7     +LDI R26 , LOW ( _0x455 + ( 104 ) )
002e51 e0b6     +LDI R27 , HIGH ( _0x455 + ( 104 ) )
                 	__POINTW2MN _0x455,104
002e52 940e 34af 	CALL _strcat
                 ;            f_puts(fn16_str,&file);
002e54 ecea      	LDI  R30,LOW(_fn16_str)
002e55 e0f7      	LDI  R31,HIGH(_fn16_str)
002e56 93fa      	ST   -Y,R31
002e57 93ea      	ST   -Y,R30
002e58 eaaa      	LDI  R26,LOW(_file)
002e59 e0b7      	LDI  R27,HIGH(_file)
002e5a de97      	RCALL _f_puts
                 ;            nNofDirFiles = nf_index+1;
002e5b 85ea      	LDD  R30,Y+10
002e5c 85fb      	LDD  R31,Y+10+1
002e5d 9631      	ADIW R30,1
                +
002e5e 2e9e     +MOV R9 , R30
002e5f 2eaf     +MOV R10 , R31
                 	__PUTW1R 9,10
                 ;            }
                 ;            if(g_FileInfo[nf_index].szFileName[0] == 0)break;
                 _0x45D:
002e60 85aa      	LDD  R26,Y+10
002e61 85bb      	LDD  R27,Y+10+1
002e62 e0e6      	LDI  R30,LOW(6)
002e63 940e 3e90 	CALL __MULB1W2U
002e65 51e6      	SUBI R30,LOW(-_g_FileInfo)
002e66 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002e67 01df      	MOVW R26,R30
002e68 940e 3f2d 	CALL __GETW1P
002e6a 81e0      	LD   R30,Z
002e6b 30e0      	CPI  R30,0
002e6c f409      	BRNE _0x461
002e6d c06f      	RJMP _0x45C
                 ;            if((select_file_index+1 > nNofDirFiles) && (select_file_index+1 > 0))select_file_index = 0;
                 _0x461:
                +
002e6e 2da5     +MOV R26 , R5
002e6f 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
002e70 9611      	ADIW R26,1
002e71 169a      	CP   R9,R26
002e72 06ab      	CPC  R10,R27
002e73 f430      	BRSH _0x463
                +
002e74 2da5     +MOV R26 , R5
002e75 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
002e76 9611      	ADIW R26,1
002e77 940e 3f75 	CALL __CPW02
002e79 f00c      	BRLT _0x464
                 _0x463:
002e7a c002      	RJMP _0x462
                 _0x464:
002e7b 2455      	CLR  R5
002e7c 2466      	CLR  R6
                 ;            if(select_file_index+1 <= 0)select_file_index = nNofDirFiles-1;
                 _0x462:
                +
002e7d 2da5     +MOV R26 , R5
002e7e 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
002e7f 9611      	ADIW R26,1
002e80 940e 3f75 	CALL __CPW02
002e82 f02c      	BRLT _0x465
                +
002e83 2de9     +MOV R30 , R9
002e84 2dfa     +MOV R31 , R10
                 	__GETW1R 9,10
002e85 9731      	SBIW R30,1
                +
002e86 2e5e     +MOV R5 , R30
002e87 2e6f     +MOV R6 , R31
                 	__PUTW1R 5,6
                 ;                if(nf_index == select_file_index)
                 _0x465:
002e88 85aa      	LDD  R26,Y+10
002e89 85bb      	LDD  R27,Y+10+1
002e8a 165a      	CP   R5,R26
002e8b 066b      	CPC  R6,R27
002e8c f579      	BRNE _0x466
                 ;                {
                 ;                nlcd_Box(0,29+i,132,34+i,1,GREEN,0);
002e8d e0e0      	LDI  R30,LOW(0)
002e8e 93ea      	ST   -Y,R30
002e8f 2fe4      	MOV  R30,R20
002e90 5ee3      	SUBI R30,-LOW(29)
002e91 93ea      	ST   -Y,R30
002e92 e8e4      	LDI  R30,LOW(132)
002e93 93ea      	ST   -Y,R30
002e94 2fe4      	MOV  R30,R20
002e95 5dee      	SUBI R30,-LOW(34)
002e96 93ea      	ST   -Y,R30
002e97 e0e1      	LDI  R30,LOW(1)
002e98 93ea      	ST   -Y,R30
002e99 efe0      	LDI  R30,LOW(240)
002e9a e0f0      	LDI  R31,HIGH(240)
002e9b 93fa      	ST   -Y,R31
002e9c 93ea      	ST   -Y,R30
002e9d e0a0      	LDI  R26,LOW(0)
002e9e e0b0      	LDI  R27,0
002e9f 940e 0557 	CALL _nlcd_Box
                 ;                nlcd_String(g_FileInfo[nf_index].szFileName,30+i,10,WHITE,GREEN);
002ea1 85aa      	LDD  R26,Y+10
002ea2 85bb      	LDD  R27,Y+10+1
002ea3 e0e6      	LDI  R30,LOW(6)
002ea4 940e 3e90 	CALL __MULB1W2U
002ea6 51e6      	SUBI R30,LOW(-_g_FileInfo)
002ea7 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002ea8 01df      	MOVW R26,R30
002ea9 940e 3f2d 	CALL __GETW1P
002eab 93fa      	ST   -Y,R31
002eac 93ea      	ST   -Y,R30
002ead 2fe4      	MOV  R30,R20
002eae 5ee2      	SUBI R30,-LOW(30)
002eaf 93ea      	ST   -Y,R30
002eb0 e0ea      	LDI  R30,LOW(10)
002eb1 93ea      	ST   -Y,R30
002eb2 efef      	LDI  R30,LOW(4095)
002eb3 e0ff      	LDI  R31,HIGH(4095)
002eb4 93fa      	ST   -Y,R31
002eb5 93ea      	ST   -Y,R30
002eb6 efa0      	LDI  R26,LOW(240)
002eb7 e0b0      	LDI  R27,0
002eb8 940e 07c0 	CALL _nlcd_String
                 ;                pos_index = i;
002eba 019a      	MOVW R18,R20
                 ;                }
                 ;                else
002ebb c019      	RJMP _0x467
                 _0x466:
                 ;                {
                 ;                nlcd_String(g_FileInfo[nf_index].szFileName,30+i,10,BLACK,WHITE);
002ebc 85aa      	LDD  R26,Y+10
002ebd 85bb      	LDD  R27,Y+10+1
002ebe e0e6      	LDI  R30,LOW(6)
002ebf 940e 3e90 	CALL __MULB1W2U
002ec1 51e6      	SUBI R30,LOW(-_g_FileInfo)
002ec2 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002ec3 01df      	MOVW R26,R30
002ec4 940e 3f2d 	CALL __GETW1P
002ec6 93fa      	ST   -Y,R31
002ec7 93ea      	ST   -Y,R30
002ec8 2fe4      	MOV  R30,R20
002ec9 5ee2      	SUBI R30,-LOW(30)
002eca 93ea      	ST   -Y,R30
002ecb e0ea      	LDI  R30,LOW(10)
002ecc 93ea      	ST   -Y,R30
002ecd e0e0      	LDI  R30,LOW(0)
002ece e0f0      	LDI  R31,HIGH(0)
002ecf 93fa      	ST   -Y,R31
002ed0 93ea      	ST   -Y,R30
002ed1 efaf      	LDI  R26,LOW(4095)
002ed2 e0bf      	LDI  R27,HIGH(4095)
002ed3 940e 07c0 	CALL _nlcd_String
                 ;                }
                 _0x467:
                 ;            i+=10;
                +
002ed5 5f46     +SUBI R20 , LOW ( - 10 )
002ed6 4f5f     +SBCI R21 , HIGH ( - 10 )
                 	__ADDWRN 20,21,10
                 ;        }
002ed7 85ea      	LDD  R30,Y+10
002ed8 85fb      	LDD  R31,Y+10+1
002ed9 9631      	ADIW R30,1
002eda 87ea      	STD  Y+10,R30
002edb 87fb      	STD  Y+10+1,R31
002edc cf11      	RJMP _0x45B
                 _0x45C:
                 ;        if(bSelect)
002edd 2033      	TST  R3
002ede f409      	BRNE PC+2
002edf c066      	RJMP _0x468
                 ;        {
                 ;        nlcd_Box(10,32+pos_index,58,90+pos_index,2,WHITE,GREEN);
002ee0 e0ea      	LDI  R30,LOW(10)
002ee1 93ea      	ST   -Y,R30
002ee2 2fe2      	MOV  R30,R18
002ee3 5ee0      	SUBI R30,-LOW(32)
002ee4 93ea      	ST   -Y,R30
002ee5 e3ea      	LDI  R30,LOW(58)
002ee6 93ea      	ST   -Y,R30
002ee7 2fe2      	MOV  R30,R18
002ee8 5ae6      	SUBI R30,-LOW(90)
002ee9 93ea      	ST   -Y,R30
002eea e0e2      	LDI  R30,LOW(2)
002eeb 93ea      	ST   -Y,R30
002eec efef      	LDI  R30,LOW(4095)
002eed e0ff      	LDI  R31,HIGH(4095)
002eee 93fa      	ST   -Y,R31
002eef 93ea      	ST   -Y,R30
002ef0 efa0      	LDI  R26,LOW(240)
002ef1 e0b0      	LDI  R27,0
002ef2 940e 0557 	CALL _nlcd_Box
                 ;        for(i = 0;i<3;i++)
                +
002ef4 e040     +LDI R20 , LOW ( 0 )
002ef5 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x46A:
                +
002ef6 3043     +CPI R20 , LOW ( 3 )
002ef7 e0e0     +LDI R30 , HIGH ( 3 )
002ef8 075e     +CPC R21 , R30
                 	__CPWRN 20,21,3
002ef9 f00c      	BRLT PC+2
002efa c04b      	RJMP _0x46B
                 ;        {
                 ;        if(select_file_option_index > 2) select_file_option_index = 0;
002efb e0e2      	LDI  R30,LOW(2)
002efc e0f0      	LDI  R31,HIGH(2)
002efd 15e7      	CP   R30,R7
002efe 05f8      	CPC  R31,R8
002eff f414      	BRGE _0x46C
002f00 2477      	CLR  R7
002f01 2488      	CLR  R8
                 ;        if(select_file_option_index < 0) select_file_option_index = 2;
                 _0x46C:
002f02 2400      	CLR  R0
002f03 1470      	CP   R7,R0
002f04 0480      	CPC  R8,R0
002f05 f424      	BRGE _0x46D
002f06 e0e2      	LDI  R30,LOW(2)
002f07 e0f0      	LDI  R31,HIGH(2)
                +
002f08 2e7e     +MOV R7 , R30
002f09 2e8f     +MOV R8 , R31
                 	__PUTW1R 7,8
                 ;        if(i == select_file_option_index)
                 _0x46D:
                +
002f0a 1674     +CP R7 , R20
002f0b 0685     +CPC R8 , R21
                 	__CPWRR 7,8,20,21
002f0c f4c1      	BRNE _0x46E
                 ;        {
                 ;        nlcd_String(szFileMenuList[i],36+j+pos_index,25,WHITE,GREEN);
002f0d 01fa      	MOVW R30,R20
002f0e 01de      	MOVW R26,R28
002f0f 961c      	ADIW R26,12
002f10 0fee      	LSL  R30
002f11 1fff      	ROL  R31
002f12 0fae      	ADD  R26,R30
002f13 1fbf      	ADC  R27,R31
002f14 940e 3f2d 	CALL __GETW1P
002f16 93fa      	ST   -Y,R31
002f17 93ea      	ST   -Y,R30
002f18 85ea      	LDD  R30,Y+10
002f19 5dec      	SUBI R30,-LOW(36)
002f1a 0fe2      	ADD  R30,R18
002f1b 93ea      	ST   -Y,R30
002f1c e1e9      	LDI  R30,LOW(25)
002f1d 93ea      	ST   -Y,R30
002f1e efef      	LDI  R30,LOW(4095)
002f1f e0ff      	LDI  R31,HIGH(4095)
002f20 93fa      	ST   -Y,R31
002f21 93ea      	ST   -Y,R30
002f22 efa0      	LDI  R26,LOW(240)
002f23 e0b0      	LDI  R27,0
002f24 c017      	RJMP _0x4E7
                 ;        }
                 ;        else
                 _0x46E:
                 ;        {
                 ;        nlcd_String(szFileMenuList[i],36+j+pos_index,25,BLACK,WHITE);
002f25 01fa      	MOVW R30,R20
002f26 01de      	MOVW R26,R28
002f27 961c      	ADIW R26,12
002f28 0fee      	LSL  R30
002f29 1fff      	ROL  R31
002f2a 0fae      	ADD  R26,R30
002f2b 1fbf      	ADC  R27,R31
002f2c 940e 3f2d 	CALL __GETW1P
002f2e 93fa      	ST   -Y,R31
002f2f 93ea      	ST   -Y,R30
002f30 85ea      	LDD  R30,Y+10
002f31 5dec      	SUBI R30,-LOW(36)
002f32 0fe2      	ADD  R30,R18
002f33 93ea      	ST   -Y,R30
002f34 e1e9      	LDI  R30,LOW(25)
002f35 93ea      	ST   -Y,R30
002f36 e0e0      	LDI  R30,LOW(0)
002f37 e0f0      	LDI  R31,HIGH(0)
002f38 93fa      	ST   -Y,R31
002f39 93ea      	ST   -Y,R30
002f3a efaf      	LDI  R26,LOW(4095)
002f3b e0bf      	LDI  R27,HIGH(4095)
                 _0x4E7:
002f3c 940e 07c0 	CALL _nlcd_String
                 ;        }
                 ;        j+=10;
002f3e 85e8      	LDD  R30,Y+8
002f3f 85f9      	LDD  R31,Y+8+1
002f40 963a      	ADIW R30,10
002f41 87e8      	STD  Y+8,R30
002f42 87f9      	STD  Y+8+1,R31
                 ;        }
                +
002f43 5f4f     +SUBI R20 , LOW ( - 1 )
002f44 4f5f     +SBCI R21 , HIGH ( - 1 )
                 	__ADDWRN 20,21,1
002f45 cfb0      	RJMP _0x46A
                 _0x46B:
                 ;        }
                 ;        if(!bIsfOpened)
                 _0x468:
002f46 2044      	TST  R4
002f47 f421      	BRNE _0x470
                 ;        f_close(&file);
002f48 eaaa      	LDI  R26,LOW(_file)
002f49 e0b7      	LDI  R27,HIGH(_file)
002f4a 940e 2746 	CALL _f_close
                 ;    }
                 _0x470:
                 ;    if((path[0] == '') || (path[0] == ' '))
                 _0x458:
002f4c adae      	LDD  R26,Y+62
002f4d adbf      	LDD  R27,Y+62+1
002f4e 91ac      	LD   R26,X
002f4f 30a0      	CPI  R26,LOW(0x0)
002f50 f029      	BREQ _0x472
002f51 adae      	LDD  R26,Y+62
002f52 adbf      	LDD  R27,Y+62+1
002f53 91ac      	LD   R26,X
002f54 32a0      	CPI  R26,LOW(0x20)
002f55 f419      	BRNE _0x471
                 _0x472:
                 ;    {
                 ;    nlcd_String("Root",18,5,BLACK,WHITE);
                +
002f56 e2e9     +LDI R30 , LOW ( _0x455 + ( 106 ) )
002f57 e0f6     +LDI R31 , HIGH ( _0x455 + ( 106 ) )
                 	__POINTW1MN _0x455,106
002f58 c018      	RJMP _0x4E8
                 ;    }
                 ;    else
                 _0x471:
                 ;    {
                 ;    sprintf(&rootpath[0],"Root/%s", &path[0]);
002f59 ede7      	LDI  R30,LOW(_rootpath)
002f5a e0f7      	LDI  R31,HIGH(_rootpath)
002f5b 93fa      	ST   -Y,R31
002f5c 93ea      	ST   -Y,R30
                +
002f5d e9ed     +LDI R30 , LOW ( 2 * _0x0 + ( 137 ) )
002f5e e0f4     +LDI R31 , HIGH ( 2 * _0x0 + ( 137 ) )
                 	__POINTW1FN _0x0,137
002f5f 93fa      	ST   -Y,R31
002f60 93ea      	ST   -Y,R30
                +
002f61 01fe     +MOVW R30 , R28
002f62 5bee     +SUBI R30 , LOW ( - 66 )
002f63 4fff     +SBCI R31 , HIGH ( - 66 )
002f64 9001     +LD R0 , Z +
002f65 81f0     +LD R31 , Z
002f66 2de0     +MOV R30 , R0
                 	__GETW1SX 66
002f67 2766      	CLR  R22
002f68 2777      	CLR  R23
002f69 940e 3f5a 	CALL __PUTPARD1
002f6b e084      	LDI  R24,4
002f6c 940e 3997 	CALL _sprintf
002f6e 9628      	ADIW R28,8
                 ;    nlcd_String(&rootpath[0],18,5,BLACK,WHITE);
002f6f ede7      	LDI  R30,LOW(_rootpath)
002f70 e0f7      	LDI  R31,HIGH(_rootpath)
                 _0x4E8:
002f71 93fa      	ST   -Y,R31
002f72 93ea      	ST   -Y,R30
002f73 e1e2      	LDI  R30,LOW(18)
002f74 93ea      	ST   -Y,R30
002f75 e0e5      	LDI  R30,LOW(5)
002f76 93ea      	ST   -Y,R30
002f77 e0e0      	LDI  R30,LOW(0)
002f78 e0f0      	LDI  R31,HIGH(0)
002f79 93fa      	ST   -Y,R31
002f7a 93ea      	ST   -Y,R30
002f7b efaf      	LDI  R26,LOW(4095)
002f7c e0bf      	LDI  R27,HIGH(4095)
002f7d 940e 07c0 	CALL _nlcd_String
                 ;    }
                 ;    return res;
002f7f 2fe1      	MOV  R30,R17
002f80 940e 3f90 	CALL __LOADLOCR6
002f82 96ef      	ADIW R28,63
002f83 9621      	ADIW R28,1
002f84 9508      	RET
                 ;}
                 ; .FEND
                 
                 	.DSEG
                 _0x455:
0005bf           	.BYTE 0x6F
                 ;
                 ;
                 ;void fileinfo_window(int nFileInfoIndex)
                 ;{
                 
                 	.CSEG
                 _fileinfo_window:
                 ; .FSTART _fileinfo_window
                 ;unsigned char szfinfo[10];
                 ;nlcd_Clear(WHITE);
002f85 93ba      	ST   -Y,R27
002f86 93aa      	ST   -Y,R26
002f87 972a      	SBIW R28,10
                 ;	nFileInfoIndex -> Y+10
                 ;	szfinfo -> Y+0
002f88 efaf      	LDI  R26,LOW(4095)
002f89 e0bf      	LDI  R27,HIGH(4095)
002f8a 940e 0501 	CALL _nlcd_Clear
                 ;nlcd_String("***File Info***",5,5,RED,WHITE);
                +
002f8c e2ee     +LDI R30 , LOW ( _0x475 + ( 0 ) )
002f8d e0f6     +LDI R31 , HIGH ( _0x475 + ( 0 ) )
                 	__POINTW1MN _0x475,0
002f8e 93fa      	ST   -Y,R31
002f8f 93ea      	ST   -Y,R30
002f90 e0e5      	LDI  R30,LOW(5)
002f91 93ea      	ST   -Y,R30
002f92 93ea      	ST   -Y,R30
002f93 e0e0      	LDI  R30,LOW(3840)
002f94 e0ff      	LDI  R31,HIGH(3840)
002f95 93fa      	ST   -Y,R31
002f96 93ea      	ST   -Y,R30
002f97 efaf      	LDI  R26,LOW(4095)
002f98 e0bf      	LDI  R27,HIGH(4095)
002f99 940e 07c0 	CALL _nlcd_String
                 ;nlcd_String(g_FileInfo[nFileInfoIndex].szFileName,15,10,BLUE,WHITE);
002f9b 85aa      	LDD  R26,Y+10
002f9c 85bb      	LDD  R27,Y+10+1
002f9d e0e6      	LDI  R30,LOW(6)
002f9e 940e 3e90 	CALL __MULB1W2U
002fa0 51e6      	SUBI R30,LOW(-_g_FileInfo)
002fa1 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
002fa2 01df      	MOVW R26,R30
002fa3 940e 3f2d 	CALL __GETW1P
002fa5 93fa      	ST   -Y,R31
002fa6 93ea      	ST   -Y,R30
002fa7 e0ef      	LDI  R30,LOW(15)
002fa8 93ea      	ST   -Y,R30
002fa9 e0ea      	LDI  R30,LOW(10)
002faa 93ea      	ST   -Y,R30
002fab e0ef      	LDI  R30,LOW(15)
002fac e0f0      	LDI  R31,HIGH(15)
002fad 93fa      	ST   -Y,R31
002fae 93ea      	ST   -Y,R30
002faf efaf      	LDI  R26,LOW(4095)
002fb0 e0bf      	LDI  R27,HIGH(4095)
002fb1 940e 07c0 	CALL _nlcd_String
                 ;nlcd_String("File Size",25,20,GREEN,WHITE);
                +
002fb3 e3ee     +LDI R30 , LOW ( _0x475 + ( 16 ) )
002fb4 e0f6     +LDI R31 , HIGH ( _0x475 + ( 16 ) )
                 	__POINTW1MN _0x475,16
002fb5 93fa      	ST   -Y,R31
002fb6 93ea      	ST   -Y,R30
002fb7 e1e9      	LDI  R30,LOW(25)
002fb8 93ea      	ST   -Y,R30
002fb9 e1e4      	LDI  R30,LOW(20)
002fba 93ea      	ST   -Y,R30
002fbb efe0      	LDI  R30,LOW(240)
002fbc e0f0      	LDI  R31,HIGH(240)
002fbd 93fa      	ST   -Y,R31
002fbe 93ea      	ST   -Y,R30
002fbf efaf      	LDI  R26,LOW(4095)
002fc0 e0bf      	LDI  R27,HIGH(4095)
002fc1 940e 07c0 	CALL _nlcd_String
                 ;sprintf(&szfinfo[0],"%i B", g_FileInfo[nFileInfoIndex].nFileSize);
002fc3 01fe      	MOVW R30,R28
002fc4 93fa      	ST   -Y,R31
002fc5 93ea      	ST   -Y,R30
                +
002fc6 ebef     +LDI R30 , LOW ( 2 * _0x0 + ( 171 ) )
002fc7 e0f4     +LDI R31 , HIGH ( 2 * _0x0 + ( 171 ) )
                 	__POINTW1FN _0x0,171
002fc8 93fa      	ST   -Y,R31
002fc9 93ea      	ST   -Y,R30
002fca 85ae      	LDD  R26,Y+14
002fcb 85bf      	LDD  R27,Y+14+1
002fcc e0e6      	LDI  R30,LOW(6)
002fcd 940e 3e90 	CALL __MULB1W2U
                +
002fcf 51e2     +SUBI R30 , LOW ( - _g_FileInfo - ( 4 ) )
002fd0 4ff9     +SBCI R31 , HIGH ( - _g_FileInfo - ( 4 ) )
                 	__ADDW1MN _g_FileInfo,4
002fd1 01df      	MOVW R26,R30
002fd2 940e 3f2d 	CALL __GETW1P
002fd4 940e 3e59 	CALL __CWD1
002fd6 940e 3f5a 	CALL __PUTPARD1
002fd8 e084      	LDI  R24,4
002fd9 940e 3997 	CALL _sprintf
002fdb 9628      	ADIW R28,8
                 ;nlcd_String(szfinfo,35,20,BLACK,WHITE);
002fdc 01fe      	MOVW R30,R28
002fdd 93fa      	ST   -Y,R31
002fde 93ea      	ST   -Y,R30
002fdf e2e3      	LDI  R30,LOW(35)
002fe0 93ea      	ST   -Y,R30
002fe1 e1e4      	LDI  R30,LOW(20)
002fe2 93ea      	ST   -Y,R30
002fe3 e0e0      	LDI  R30,LOW(0)
002fe4 e0f0      	LDI  R31,HIGH(0)
002fe5 93fa      	ST   -Y,R31
002fe6 93ea      	ST   -Y,R30
002fe7 efaf      	LDI  R26,LOW(4095)
002fe8 e0bf      	LDI  R27,HIGH(4095)
002fe9 940e 07c0 	CALL _nlcd_String
                 ;nlcd_String("Changing Date",45,20,GREEN,WHITE);
                +
002feb e4e8     +LDI R30 , LOW ( _0x475 + ( 26 ) )
002fec e0f6     +LDI R31 , HIGH ( _0x475 + ( 26 ) )
                 	__POINTW1MN _0x475,26
002fed 93fa      	ST   -Y,R31
002fee 93ea      	ST   -Y,R30
002fef e2ed      	LDI  R30,LOW(45)
002ff0 93ea      	ST   -Y,R30
002ff1 e1e4      	LDI  R30,LOW(20)
002ff2 93ea      	ST   -Y,R30
002ff3 efe0      	LDI  R30,LOW(240)
002ff4 e0f0      	LDI  R31,HIGH(240)
002ff5 93fa      	ST   -Y,R31
002ff6 93ea      	ST   -Y,R30
002ff7 efaf      	LDI  R26,LOW(4095)
002ff8 e0bf      	LDI  R27,HIGH(4095)
002ff9 940e 07c0 	CALL _nlcd_String
                 ;sprintf(&szfinfo[0],"%i", g_FileInfo[nFileInfoIndex].nFileDate);
002ffb 01fe      	MOVW R30,R28
002ffc 93fa      	ST   -Y,R31
002ffd 93ea      	ST   -Y,R30
                +
002ffe ede2     +LDI R30 , LOW ( 2 * _0x0 + ( 190 ) )
002fff e0f4     +LDI R31 , HIGH ( 2 * _0x0 + ( 190 ) )
                 	__POINTW1FN _0x0,190
003000 93fa      	ST   -Y,R31
003001 93ea      	ST   -Y,R30
003002 85ae      	LDD  R26,Y+14
003003 85bf      	LDD  R27,Y+14+1
003004 e0e6      	LDI  R30,LOW(6)
003005 940e 3e90 	CALL __MULB1W2U
                +
003007 51e4     +SUBI R30 , LOW ( - _g_FileInfo - ( 2 ) )
003008 4ff9     +SBCI R31 , HIGH ( - _g_FileInfo - ( 2 ) )
                 	__ADDW1MN _g_FileInfo,2
003009 01df      	MOVW R26,R30
00300a 940e 3f2d 	CALL __GETW1P
00300c 940e 3e59 	CALL __CWD1
00300e 940e 3f5a 	CALL __PUTPARD1
003010 e084      	LDI  R24,4
003011 940e 3997 	CALL _sprintf
003013 9628      	ADIW R28,8
                 ;nlcd_String(szfinfo,55,20,BLACK,WHITE);
003014 01fe      	MOVW R30,R28
003015 93fa      	ST   -Y,R31
003016 93ea      	ST   -Y,R30
003017 e3e7      	LDI  R30,LOW(55)
003018 93ea      	ST   -Y,R30
003019 e1e4      	LDI  R30,LOW(20)
00301a 93ea      	ST   -Y,R30
00301b e0e0      	LDI  R30,LOW(0)
00301c e0f0      	LDI  R31,HIGH(0)
00301d 93fa      	ST   -Y,R31
00301e 93ea      	ST   -Y,R30
00301f efaf      	LDI  R26,LOW(4095)
003020 e0bf      	LDI  R27,HIGH(4095)
003021 940e 07c0 	CALL _nlcd_String
                 ;}
003023 962c      	ADIW R28,12
003024 9508      	RET
                 ; .FEND
                 
                 	.DSEG
                 _0x475:
00062e           	.BYTE 0x28
                 ;
                 ;unsigned char error[10];
                 ;void browser_init()
                 ;{
                 
                 	.CSEG
                 _browser_init:
                 ; .FSTART _browser_init
                 ;FRESULT res;
                 ;FATFS fs;
                 ;UINT br, bw,i;
                 ;if(!f_mount(&fs,"0",1))
003025 97e0      	SBIW R28,48
003026 50d2      	SUBI R29,2
003027 940e 3f89 	CALL __SAVELOCR6
                 ;	res -> R17
                 ;	fs -> Y+8
                 ;	br -> R18,R19
                 ;	bw -> R20,R21
                 ;	i -> Y+6
003029 01fe      	MOVW R30,R28
00302a 9638      	ADIW R30,8
00302b 93fa      	ST   -Y,R31
00302c 93ea      	ST   -Y,R30
                +
00302d e5e6     +LDI R30 , LOW ( _0x477 + ( 0 ) )
00302e e0f6     +LDI R31 , HIGH ( _0x477 + ( 0 ) )
                 	__POINTW1MN _0x477,0
00302f 93fa      	ST   -Y,R31
003030 93ea      	ST   -Y,R30
003031 e0a1      	LDI  R26,LOW(1)
003032 940e 2090 	CALL _f_mount
003034 30e0      	CPI  R30,0
003035 f009      	BREQ PC+2
003036 c186      	RJMP _0x476
                 ;{
                 ;//PORTD.0 = 1;
                 ;if(bFileInfoWindow && !bTextReader && !bMusicPlayer)
003037 91e0 0837 	LDS  R30,_bFileInfoWindow
003039 30e0      	CPI  R30,0
00303a f041      	BREQ _0x479
00303b 91e0 0839 	LDS  R30,_bTextReader
00303d 30e0      	CPI  R30,0
00303e f421      	BRNE _0x479
00303f 91e0 083a 	LDS  R30,_bMusicPlayer
003041 30e0      	CPI  R30,0
003042 f009      	BREQ _0x47A
                 _0x479:
003043 c003      	RJMP _0x478
                 _0x47A:
                 ;{
                 ;fileinfo_window(select_file_index);
                +
003044 2da5     +MOV R26 , R5
003045 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
003046 df3e      	RCALL _fileinfo_window
                 ;}
                 ;if(!bFileInfoWindow && !bTextReader && bMusicPlayer)
                 _0x478:
003047 91e0 0837 	LDS  R30,_bFileInfoWindow
003049 30e0      	CPI  R30,0
00304a f441      	BRNE _0x47C
00304b 91e0 0839 	LDS  R30,_bTextReader
00304d 30e0      	CPI  R30,0
00304e f421      	BRNE _0x47C
00304f 91e0 083a 	LDS  R30,_bMusicPlayer
003051 30e0      	CPI  R30,0
003052 f409      	BRNE _0x47D
                 _0x47C:
003053 c003      	RJMP _0x47B
                 _0x47D:
                 ;{
                 ;music_player_init(select_file_index);
                +
003054 2da5     +MOV R26 , R5
003055 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
003056 d24c      	RCALL _music_player_init
                 ;}
                 ;if(!bFileInfoWindow && bTextReader)
                 _0x47B:
003057 91e0 0837 	LDS  R30,_bFileInfoWindow
003059 30e0      	CPI  R30,0
00305a f421      	BRNE _0x47F
00305b 91e0 0839 	LDS  R30,_bTextReader
00305d 30e0      	CPI  R30,0
00305e f409      	BRNE _0x480
                 _0x47F:
00305f c004      	RJMP _0x47E
                 _0x480:
                 ;{
                 ;text_reader_init(select_file_index);
                +
003060 2da5     +MOV R26 , R5
003061 2db6     +MOV R27 , R6
                 	__GETW2R 5,6
003062 d23f      	RCALL _text_reader_init
                 ;}
                 ;else
003063 c006      	RJMP _0x481
                 _0x47E:
                 ;{
                 ;bMusicFOpened = 0;
003064 e0e0      	LDI  R30,LOW(0)
003065 93e0 083f 	STS  _bMusicFOpened,R30
                 ;browser_scan_files("");
                +
003067 e5a8     +LDI R26 , LOW ( _0x477 + ( 2 ) )
003068 e0b6     +LDI R27 , HIGH ( _0x477 + ( 2 ) )
                 	__POINTW2MN _0x477,2
003069 dd3d      	RCALL _browser_scan_files
                 ;}
                 _0x481:
                 ;switch(nKey)
                +
00306a 2deb     +MOV R30 , R11
00306b 2dfc     +MOV R31 , R12
                 	__GETW1R 11,12
                 ;{
                 ;case FORWARD:
00306c 3fe7      	CPI  R30,LOW(0xF7)
00306d e0a0      	LDI  R26,HIGH(0xF7)
00306e 07fa      	CPC  R31,R26
00306f f4c9      	BRNE _0x485
                 ;if(bTextReader)
003070 91e0 0839 	LDS  R30,_bTextReader
003072 30e0      	CPI  R30,0
003073 f049      	BREQ _0x486
                 ;scroll_index+=16;
003074 91e0 083b 	LDS  R30,_scroll_index
003076 91f0 083c 	LDS  R31,_scroll_index+1
003078 9670      	ADIW R30,16
003079 93e0 083b 	STS  _scroll_index,R30
00307b 93f0 083c 	STS  _scroll_index+1,R31
                 ;if(bSelect)
                 _0x486:
00307d 2033      	TST  R3
00307e f029      	BREQ _0x487
                 ;select_file_option_index++;
00307f e0e1      	LDI  R30,LOW(1)
003080 e0f0      	LDI  R31,HIGH(1)
                +
003081 0e7e     +ADD R7 , R30
003082 1e8f     +ADC R8 , R31
                 	__ADDWRR 7,8,30,31
                 ;else
003083 c004      	RJMP _0x488
                 _0x487:
                 ;select_file_index++;
003084 e0e1      	LDI  R30,LOW(1)
003085 e0f0      	LDI  R31,HIGH(1)
                +
003086 0e5e     +ADD R5 , R30
003087 1e6f     +ADC R6 , R31
                 	__ADDWRR 5,6,30,31
                 ;break;
                 _0x488:
003088 c0fd      	RJMP _0x484
                 ;case BACKWARD:
                 _0x485:
003089 3feb      	CPI  R30,LOW(0xFB)
00308a e0a0      	LDI  R26,HIGH(0xFB)
00308b 07fa      	CPC  R31,R26
00308c f4d9      	BRNE _0x489
                 ;if(bTextReader)
00308d 91e0 0839 	LDS  R30,_bTextReader
00308f 30e0      	CPI  R30,0
003090 f049      	BREQ _0x48A
                 ;scroll_index-=16;
003091 91e0 083b 	LDS  R30,_scroll_index
003093 91f0 083c 	LDS  R31,_scroll_index+1
003095 9770      	SBIW R30,16
003096 93e0 083b 	STS  _scroll_index,R30
003098 93f0 083c 	STS  _scroll_index+1,R31
                 ;if(bSelect)
                 _0x48A:
00309a 2033      	TST  R3
00309b f031      	BREQ _0x48B
                 ;select_file_option_index--;
                +
00309c 2de7     +MOV R30 , R7
00309d 2df8     +MOV R31 , R8
                 	__GETW1R 7,8
00309e 9731      	SBIW R30,1
                +
00309f 2e7e     +MOV R7 , R30
0030a0 2e8f     +MOV R8 , R31
                 	__PUTW1R 7,8
                 ;else
0030a1 c005      	RJMP _0x48C
                 _0x48B:
                 ;select_file_index--;
                +
0030a2 2de5     +MOV R30 , R5
0030a3 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
0030a4 9731      	SBIW R30,1
                +
0030a5 2e5e     +MOV R5 , R30
0030a6 2e6f     +MOV R6 , R31
                 	__PUTW1R 5,6
                 ;break;
                 _0x48C:
0030a7 c0de      	RJMP _0x484
                 ;case PAUSE:
                 _0x489:
0030a8 3fed      	CPI  R30,LOW(0xFD)
0030a9 e0a0      	LDI  R26,HIGH(0xFD)
0030aa 07fa      	CPC  R31,R26
0030ab f449      	BRNE _0x48D
                 ;bTextReader = 0;
0030ac e0e0      	LDI  R30,LOW(0)
0030ad 93e0 0839 	STS  _bTextReader,R30
                 ;bMusicPlayer = 0;
0030af 93e0 083a 	STS  _bMusicPlayer,R30
                 ;bSelect = 0;
0030b1 2433      	CLR  R3
                 ;bFileInfoWindow = 0;
0030b2 93e0 0837 	STS  _bFileInfoWindow,R30
                 ;break;
0030b4 c0d1      	RJMP _0x484
                 ;case PLAY:
                 _0x48D:
0030b5 3fee      	CPI  R30,LOW(0xFE)
0030b6 e0a0      	LDI  R26,HIGH(0xFE)
0030b7 07fa      	CPC  R31,R26
0030b8 f009      	BREQ PC+2
0030b9 c0cc      	RJMP _0x484
                 ;if(bSelect)
0030ba 2033      	TST  R3
0030bb f409      	BRNE PC+2
0030bc c0c7      	RJMP _0x48F
                 ;{
                 ;switch(select_file_option_index)
                +
0030bd 2de7     +MOV R30 , R7
0030be 2df8     +MOV R31 , R8
                 	__GETW1R 7,8
                 ;{
                 ;case OPEN:
0030bf 9730      	SBIW R30,0
0030c0 f009      	BREQ PC+2
0030c1 c05b      	RJMP _0x493
                 ;if(!strcmp(&g_FileInfo[select_file_index].szFileName[8],".TXT") || !strcmp(&g_FileInfo[select_file_index].szFileName[8], ...
                +
0030c2 2de5     +MOV R30 , R5
0030c3 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
0030c4 e0a6      	LDI  R26,LOW(6)
0030c5 e0b0      	LDI  R27,HIGH(6)
0030c6 940e 3e68 	CALL __MULW12U
0030c8 51e6      	SUBI R30,LOW(-_g_FileInfo)
0030c9 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0030ca 01df      	MOVW R26,R30
0030cb 940e 3f2d 	CALL __GETW1P
0030cd 9638      	ADIW R30,8
0030ce 93fa      	ST   -Y,R31
0030cf 93ea      	ST   -Y,R30
                +
0030d0 e5a9     +LDI R26 , LOW ( _0x477 + ( 3 ) )
0030d1 e0b6     +LDI R27 , HIGH ( _0x477 + ( 3 ) )
                 	__POINTW2MN _0x477,3
0030d2 940e 34c0 	CALL _strcmp
0030d4 30e0      	CPI  R30,0
0030d5 f0a1      	BREQ _0x495
                +
0030d6 2de5     +MOV R30 , R5
0030d7 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
0030d8 e0a6      	LDI  R26,LOW(6)
0030d9 e0b0      	LDI  R27,HIGH(6)
0030da 940e 3e68 	CALL __MULW12U
0030dc 51e6      	SUBI R30,LOW(-_g_FileInfo)
0030dd 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0030de 01df      	MOVW R26,R30
0030df 940e 3f2d 	CALL __GETW1P
0030e1 9638      	ADIW R30,8
0030e2 93fa      	ST   -Y,R31
0030e3 93ea      	ST   -Y,R30
                +
0030e4 e5ae     +LDI R26 , LOW ( _0x477 + ( 8 ) )
0030e5 e0b6     +LDI R27 , HIGH ( _0x477 + ( 8 ) )
                 	__POINTW2MN _0x477,8
0030e6 940e 34c0 	CALL _strcmp
0030e8 30e0      	CPI  R30,0
0030e9 f419      	BRNE _0x494
                 _0x495:
                 ;{
                 ;bTextReader = 1;
0030ea e0e1      	LDI  R30,LOW(1)
0030eb 93e0 0839 	STS  _bTextReader,R30
                 ;}
                 ;if(!strcmp(&g_FileInfo[select_file_index].szFileName[8],".WAV") || !strcmp(&g_FileInfo[select_file_index].szFileName[8], ...
                 _0x494:
                +
0030ed 2de5     +MOV R30 , R5
0030ee 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
0030ef e0a6      	LDI  R26,LOW(6)
0030f0 e0b0      	LDI  R27,HIGH(6)
0030f1 940e 3e68 	CALL __MULW12U
0030f3 51e6      	SUBI R30,LOW(-_g_FileInfo)
0030f4 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0030f5 01df      	MOVW R26,R30
0030f6 940e 3f2d 	CALL __GETW1P
0030f8 9638      	ADIW R30,8
0030f9 93fa      	ST   -Y,R31
0030fa 93ea      	ST   -Y,R30
                +
0030fb e6a3     +LDI R26 , LOW ( _0x477 + ( 13 ) )
0030fc e0b6     +LDI R27 , HIGH ( _0x477 + ( 13 ) )
                 	__POINTW2MN _0x477,13
0030fd 940e 34c0 	CALL _strcmp
0030ff 30e0      	CPI  R30,0
003100 f0a1      	BREQ _0x498
                +
003101 2de5     +MOV R30 , R5
003102 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
003103 e0a6      	LDI  R26,LOW(6)
003104 e0b0      	LDI  R27,HIGH(6)
003105 940e 3e68 	CALL __MULW12U
003107 51e6      	SUBI R30,LOW(-_g_FileInfo)
003108 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
003109 01df      	MOVW R26,R30
00310a 940e 3f2d 	CALL __GETW1P
00310c 9638      	ADIW R30,8
00310d 93fa      	ST   -Y,R31
00310e 93ea      	ST   -Y,R30
                +
00310f e6a8     +LDI R26 , LOW ( _0x477 + ( 18 ) )
003110 e0b6     +LDI R27 , HIGH ( _0x477 + ( 18 ) )
                 	__POINTW2MN _0x477,18
003111 940e 34c0 	CALL _strcmp
003113 30e0      	CPI  R30,0
003114 f421      	BRNE _0x497
                 _0x498:
                 ;{
                 ;bMusicPlayer = 1;
003115 e0e1      	LDI  R30,LOW(1)
003116 93e0 083a 	STS  _bMusicPlayer,R30
                 ;}
                 ;else
003118 c003      	RJMP _0x49A
                 _0x497:
                 ;{
                 ;bFormatAlert = 1;
003119 e0e1      	LDI  R30,LOW(1)
00311a 93e0 0838 	STS  _bFormatAlert,R30
                 ;}
                 _0x49A:
                 ;break;
00311c c067      	RJMP _0x492
                 ;case DELETE:
                 _0x493:
00311d 30e1      	CPI  R30,LOW(0x1)
00311e e0a0      	LDI  R26,HIGH(0x1)
00311f 07fa      	CPC  R31,R26
003120 f009      	BREQ PC+2
003121 c05b      	RJMP _0x49B
                 ;if(!f_unlink(g_FileInfo[select_file_index].szFileName))
                +
003122 2de5     +MOV R30 , R5
003123 2df6     +MOV R31 , R6
                 	__GETW1R 5,6
003124 e0a6      	LDI  R26,LOW(6)
003125 e0b0      	LDI  R27,HIGH(6)
003126 940e 3e68 	CALL __MULW12U
003128 51e6      	SUBI R30,LOW(-_g_FileInfo)
003129 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
00312a 01df      	MOVW R26,R30
00312b 940e 3f2d 	CALL __GETW1P
00312d 01df      	MOVW R26,R30
00312e d941      	RCALL _f_unlink
00312f 30e0      	CPI  R30,0
003130 f009      	BREQ PC+2
003131 c04a      	RJMP _0x49C
                 ;{
                 ;bSelect = 0;
003132 2433      	CLR  R3
                 ;bIsfOpened = 0;
003133 2444      	CLR  R4
                 ;select_file_option_index = 0;
003134 2477      	CLR  R7
003135 2488      	CLR  R8
                 ;select_file_index = 0;
003136 2455      	CLR  R5
003137 2466      	CLR  R6
                 ;for(i = 0;i<nNofDirFiles;i++)
003138 e0e0      	LDI  R30,LOW(0)
003139 83ee      	STD  Y+6,R30
00313a 83ef      	STD  Y+6+1,R30
                 _0x49E:
00313b 81ae      	LDD  R26,Y+6
00313c 81bf      	LDD  R27,Y+6+1
00313d 15a9      	CP   R26,R9
00313e 05ba      	CPC  R27,R10
00313f f5d0      	BRSH _0x49F
                 ;{
                 ;if(g_FileInfo[i].szFileName)
003140 e0e6      	LDI  R30,LOW(6)
003141 940e 3e90 	CALL __MULB1W2U
003143 51e6      	SUBI R30,LOW(-_g_FileInfo)
003144 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
003145 01df      	MOVW R26,R30
003146 940e 3f2d 	CALL __GETW1P
003148 9730      	SBIW R30,0
003149 f091      	BREQ _0x4A0
                 ;memset((void*)g_FileInfo[i].szFileName,0,32);
00314a 81ae      	LDD  R26,Y+6
00314b 81bf      	LDD  R27,Y+6+1
00314c e0e6      	LDI  R30,LOW(6)
00314d 940e 3e90 	CALL __MULB1W2U
00314f 51e6      	SUBI R30,LOW(-_g_FileInfo)
003150 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
003151 01df      	MOVW R26,R30
003152 940e 3f2d 	CALL __GETW1P
003154 93fa      	ST   -Y,R31
003155 93ea      	ST   -Y,R30
003156 e0e0      	LDI  R30,LOW(0)
003157 93ea      	ST   -Y,R30
003158 e2a0      	LDI  R26,LOW(32)
003159 e0b0      	LDI  R27,0
00315a 940e 349f 	CALL _memset
                 ;free(g_FileInfo[i].szFileName);
                 _0x4A0:
00315c 81ae      	LDD  R26,Y+6
00315d 81bf      	LDD  R27,Y+6+1
00315e e0e6      	LDI  R30,LOW(6)
00315f 940e 3e90 	CALL __MULB1W2U
003161 51e6      	SUBI R30,LOW(-_g_FileInfo)
003162 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
003163 01df      	MOVW R26,R30
003164 940e 3f2d 	CALL __GETW1P
003166 01df      	MOVW R26,R30
003167 940e 3bc6 	CALL _free
                 ;g_FileInfo[i].szFileName = 0;
003169 81ae      	LDD  R26,Y+6
00316a 81bf      	LDD  R27,Y+6+1
00316b e0e6      	LDI  R30,LOW(6)
00316c 940e 3e90 	CALL __MULB1W2U
00316e 51e6      	SUBI R30,LOW(-_g_FileInfo)
00316f 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
003170 e0a0      	LDI  R26,LOW(0)
003171 e0b0      	LDI  R27,HIGH(0)
003172 83a0      	STD  Z+0,R26
003173 83b1      	STD  Z+1,R27
                 ;}
003174 81ee      	LDD  R30,Y+6
003175 81ff      	LDD  R31,Y+6+1
003176 9631      	ADIW R30,1
003177 83ee      	STD  Y+6,R30
003178 83ff      	STD  Y+6+1,R31
003179 cfc1      	RJMP _0x49E
                 _0x49F:
                 ;nKey = 0;
00317a 24bb      	CLR  R11
00317b 24cc      	CLR  R12
                 ;}
                 ;break;
                 _0x49C:
00317c c007      	RJMP _0x492
                 ;case INFO:
                 _0x49B:
00317d 30e2      	CPI  R30,LOW(0x2)
00317e e0a0      	LDI  R26,HIGH(0x2)
00317f 07fa      	CPC  R31,R26
003180 f419      	BRNE _0x492
                 ;bFileInfoWindow = 1;
003181 e0e1      	LDI  R30,LOW(1)
003182 93e0 0837 	STS  _bFileInfoWindow,R30
                 ;break;
                 ;}
                 _0x492:
                 ;}
                 ;bSelect = 1;
                 _0x48F:
003184 e0e1      	LDI  R30,LOW(1)
003185 2e3e      	MOV  R3,R30
                 ;break;
                 ;}
                 _0x484:
                 ;if(!bIsfOpened)
003186 2044      	TST  R4
003187 f419      	BRNE _0x4A2
                 ;f_mkdir("LOG");
                +
003188 e6ad     +LDI R26 , LOW ( _0x477 + ( 23 ) )
003189 e0b6     +LDI R27 , HIGH ( _0x477 + ( 23 ) )
                 	__POINTW2MN _0x477,23
00318a d99c      	RCALL _f_mkdir
                 ;if(bFormatAlert)
                 _0x4A2:
00318b 91e0 0838 	LDS  R30,_bFormatAlert
00318d 30e0      	CPI  R30,0
00318e f149      	BREQ _0x4A3
                 ;{
                 ;nlcd_Box(10,32,58,80,2,WHITE,GREEN);
00318f e0ea      	LDI  R30,LOW(10)
003190 93ea      	ST   -Y,R30
003191 e2e0      	LDI  R30,LOW(32)
003192 93ea      	ST   -Y,R30
003193 e3ea      	LDI  R30,LOW(58)
003194 93ea      	ST   -Y,R30
003195 e5e0      	LDI  R30,LOW(80)
003196 93ea      	ST   -Y,R30
003197 e0e2      	LDI  R30,LOW(2)
003198 93ea      	ST   -Y,R30
003199 efef      	LDI  R30,LOW(4095)
00319a e0ff      	LDI  R31,HIGH(4095)
00319b 93fa      	ST   -Y,R31
00319c 93ea      	ST   -Y,R30
00319d efa0      	LDI  R26,LOW(240)
00319e e0b0      	LDI  R27,0
00319f 940e 0557 	CALL _nlcd_Box
                 ;nlcd_String("Not Supported",45,20,RED,WHITE);
                +
0031a1 e7e1     +LDI R30 , LOW ( _0x477 + ( 27 ) )
0031a2 e0f6     +LDI R31 , HIGH ( _0x477 + ( 27 ) )
                 	__POINTW1MN _0x477,27
0031a3 93fa      	ST   -Y,R31
0031a4 93ea      	ST   -Y,R30
0031a5 e2ed      	LDI  R30,LOW(45)
0031a6 93ea      	ST   -Y,R30
0031a7 e1e4      	LDI  R30,LOW(20)
0031a8 93ea      	ST   -Y,R30
0031a9 e0e0      	LDI  R30,LOW(3840)
0031aa e0ff      	LDI  R31,HIGH(3840)
0031ab 93fa      	ST   -Y,R31
0031ac 93ea      	ST   -Y,R30
0031ad efaf      	LDI  R26,LOW(4095)
0031ae e0bf      	LDI  R27,HIGH(4095)
0031af 940e 07c0 	CALL _nlcd_String
                 ;delay_ms(1000);
0031b1 eea8      	LDI  R26,LOW(1000)
0031b2 e0b3      	LDI  R27,HIGH(1000)
0031b3 940e 3c19 	CALL _delay_ms
                 ;bFormatAlert = 0;
0031b5 e0e0      	LDI  R30,LOW(0)
0031b6 93e0 0838 	STS  _bFormatAlert,R30
                 ;}
                 ;     //       wait_ready,   MISO  0xFF,     S ...
                 ;bIsfOpened = 1;
                 _0x4A3:
0031b8 e0e1      	LDI  R30,LOW(1)
0031b9 2e4e      	MOV  R4,R30
                 ;nKey = 0;
0031ba 24bb      	CLR  R11
0031bb 24cc      	CLR  R12
                 ;}
                 ;else //if(res == FR_NOT_READY)
0031bc c068      	RJMP _0x4A4
                 _0x476:
                 ;{
                 ;//bBrowserInit = 1;
                 ;f_mount(0,"0",1);
0031bd e0e0      	LDI  R30,LOW(0)
0031be e0f0      	LDI  R31,HIGH(0)
0031bf 93fa      	ST   -Y,R31
0031c0 93ea      	ST   -Y,R30
                +
0031c1 e7ef     +LDI R30 , LOW ( _0x477 + ( 41 ) )
0031c2 e0f6     +LDI R31 , HIGH ( _0x477 + ( 41 ) )
                 	__POINTW1MN _0x477,41
0031c3 93fa      	ST   -Y,R31
0031c4 93ea      	ST   -Y,R30
0031c5 e0a1      	LDI  R26,LOW(1)
0031c6 940e 2090 	CALL _f_mount
                 ;bIsfOpened = 0;
0031c8 2444      	CLR  R4
                 ;bSelect = 0;
0031c9 2433      	CLR  R3
                 ;select_file_index = 0;
0031ca 2455      	CLR  R5
0031cb 2466      	CLR  R6
                 ;select_file_option_index = 0;
0031cc 2477      	CLR  R7
0031cd 2488      	CLR  R8
                 ;for(i = 0;i<nNofDirFiles;i++)
0031ce e0e0      	LDI  R30,LOW(0)
0031cf 83ee      	STD  Y+6,R30
0031d0 83ef      	STD  Y+6+1,R30
                 _0x4A6:
0031d1 81ae      	LDD  R26,Y+6
0031d2 81bf      	LDD  R27,Y+6+1
0031d3 15a9      	CP   R26,R9
0031d4 05ba      	CPC  R27,R10
0031d5 f578      	BRSH _0x4A7
                 ;{
                 ;if(g_FileInfo[i].szFileName)
0031d6 e0e6      	LDI  R30,LOW(6)
0031d7 940e 3e90 	CALL __MULB1W2U
0031d9 51e6      	SUBI R30,LOW(-_g_FileInfo)
0031da 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0031db 01df      	MOVW R26,R30
0031dc 940e 3f2d 	CALL __GETW1P
0031de 9730      	SBIW R30,0
0031df f091      	BREQ _0x4A8
                 ;memset((void*)g_FileInfo[i].szFileName,0,32);
0031e0 81ae      	LDD  R26,Y+6
0031e1 81bf      	LDD  R27,Y+6+1
0031e2 e0e6      	LDI  R30,LOW(6)
0031e3 940e 3e90 	CALL __MULB1W2U
0031e5 51e6      	SUBI R30,LOW(-_g_FileInfo)
0031e6 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0031e7 01df      	MOVW R26,R30
0031e8 940e 3f2d 	CALL __GETW1P
0031ea 93fa      	ST   -Y,R31
0031eb 93ea      	ST   -Y,R30
0031ec e0e0      	LDI  R30,LOW(0)
0031ed 93ea      	ST   -Y,R30
0031ee e2a0      	LDI  R26,LOW(32)
0031ef e0b0      	LDI  R27,0
0031f0 940e 349f 	CALL _memset
                 ;free(g_FileInfo[i].szFileName);
                 _0x4A8:
0031f2 81ae      	LDD  R26,Y+6
0031f3 81bf      	LDD  R27,Y+6+1
0031f4 e0e6      	LDI  R30,LOW(6)
0031f5 940e 3e90 	CALL __MULB1W2U
0031f7 51e6      	SUBI R30,LOW(-_g_FileInfo)
0031f8 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0031f9 01df      	MOVW R26,R30
0031fa 940e 3f2d 	CALL __GETW1P
0031fc 01df      	MOVW R26,R30
0031fd 940e 3bc6 	CALL _free
                 ;}
0031ff 81ee      	LDD  R30,Y+6
003200 81ff      	LDD  R31,Y+6+1
003201 9631      	ADIW R30,1
003202 83ee      	STD  Y+6,R30
003203 83ff      	STD  Y+6+1,R31
003204 cfcc      	RJMP _0x4A6
                 _0x4A7:
                 ;nlcd_String("<Slot Empty>",30,20,BLACK,WHITE);
                +
003205 e8e1     +LDI R30 , LOW ( _0x477 + ( 43 ) )
003206 e0f6     +LDI R31 , HIGH ( _0x477 + ( 43 ) )
                 	__POINTW1MN _0x477,43
003207 93fa      	ST   -Y,R31
003208 93ea      	ST   -Y,R30
003209 e1ee      	LDI  R30,LOW(30)
00320a 93ea      	ST   -Y,R30
00320b e1e4      	LDI  R30,LOW(20)
00320c 93ea      	ST   -Y,R30
00320d e0e0      	LDI  R30,LOW(0)
00320e e0f0      	LDI  R31,HIGH(0)
00320f 93fa      	ST   -Y,R31
003210 93ea      	ST   -Y,R30
003211 efaf      	LDI  R26,LOW(4095)
003212 e0bf      	LDI  R27,HIGH(4095)
003213 940e 07c0 	CALL _nlcd_String
                 ;nlcd_String("No Card",18,5,BLACK,WHITE);
                +
003215 e8ee     +LDI R30 , LOW ( _0x477 + ( 56 ) )
003216 e0f6     +LDI R31 , HIGH ( _0x477 + ( 56 ) )
                 	__POINTW1MN _0x477,56
003217 93fa      	ST   -Y,R31
003218 93ea      	ST   -Y,R30
003219 e1e2      	LDI  R30,LOW(18)
00321a 93ea      	ST   -Y,R30
00321b e0e5      	LDI  R30,LOW(5)
00321c 93ea      	ST   -Y,R30
00321d e0e0      	LDI  R30,LOW(0)
00321e e0f0      	LDI  R31,HIGH(0)
00321f 93fa      	ST   -Y,R31
003220 93ea      	ST   -Y,R30
003221 efaf      	LDI  R26,LOW(4095)
003222 e0bf      	LDI  R27,HIGH(4095)
003223 940e 07c0 	CALL _nlcd_String
                 ;}
                 _0x4A4:
                 ;if(!bFileInfoWindow && !bTextReader)
003225 91e0 0837 	LDS  R30,_bFileInfoWindow
003227 30e0      	CPI  R30,0
003228 f421      	BRNE _0x4AA
003229 91e0 0839 	LDS  R30,_bTextReader
00322b 30e0      	CPI  R30,0
00322c f009      	BREQ _0x4AB
                 _0x4AA:
00322d c041      	RJMP _0x4A9
                 _0x4AB:
                 ;{
                 ;nlcd_String("Browser",5,40,WHITE,BLUE);
                +
00322e e9e6     +LDI R30 , LOW ( _0x477 + ( 64 ) )
00322f e0f6     +LDI R31 , HIGH ( _0x477 + ( 64 ) )
                 	__POINTW1MN _0x477,64
003230 93fa      	ST   -Y,R31
003231 93ea      	ST   -Y,R30
003232 e0e5      	LDI  R30,LOW(5)
003233 93ea      	ST   -Y,R30
003234 e2e8      	LDI  R30,LOW(40)
003235 93ea      	ST   -Y,R30
003236 efef      	LDI  R30,LOW(4095)
003237 e0ff      	LDI  R31,HIGH(4095)
003238 93fa      	ST   -Y,R31
003239 93ea      	ST   -Y,R30
00323a e0af      	LDI  R26,LOW(15)
00323b e0b0      	LDI  R27,0
00323c 940e 07c0 	CALL _nlcd_String
                 ;nlcd_HorizontalLine(27,BLACK);
00323e e1eb      	LDI  R30,LOW(27)
00323f 93ea      	ST   -Y,R30
003240 e0a0      	LDI  R26,LOW(0)
003241 e0b0      	LDI  R27,0
003242 940e 03ff 	CALL _nlcd_HorizontalLine
                 ;nlcd_HorizontalLine(15,BLACK);
003244 e0ef      	LDI  R30,LOW(15)
003245 93ea      	ST   -Y,R30
003246 e0a0      	LDI  R26,LOW(0)
003247 e0b0      	LDI  R27,0
003248 940e 03ff 	CALL _nlcd_HorizontalLine
                 ;for(i = 0;i<15;i++)
00324a e0e0      	LDI  R30,LOW(0)
00324b 83ee      	STD  Y+6,R30
00324c 83ef      	STD  Y+6+1,R30
                 _0x4AD:
00324d 81ae      	LDD  R26,Y+6
00324e 81bf      	LDD  R27,Y+6+1
00324f 971f      	SBIW R26,15
003250 f4f0      	BRSH _0x4AE
                 ;{
                 ;nlcd_PixelLine2x1(30,i,WHITE,BLACK);
003251 e1ee      	LDI  R30,LOW(30)
003252 93ea      	ST   -Y,R30
003253 81ef      	LDD  R30,Y+7
003254 93ea      	ST   -Y,R30
003255 efef      	LDI  R30,LOW(4095)
003256 e0ff      	LDI  R31,HIGH(4095)
003257 93fa      	ST   -Y,R31
003258 93ea      	ST   -Y,R30
003259 e0a0      	LDI  R26,LOW(0)
00325a e0b0      	LDI  R27,0
00325b 940e 03c1 	CALL _nlcd_PixelLine2x1
                 ;nlcd_PixelLine2x1(100,i,WHITE,BLACK);
00325d e6e4      	LDI  R30,LOW(100)
00325e 93ea      	ST   -Y,R30
00325f 81ef      	LDD  R30,Y+7
003260 93ea      	ST   -Y,R30
003261 efef      	LDI  R30,LOW(4095)
003262 e0ff      	LDI  R31,HIGH(4095)
003263 93fa      	ST   -Y,R31
003264 93ea      	ST   -Y,R30
003265 e0a0      	LDI  R26,LOW(0)
003266 e0b0      	LDI  R27,0
003267 940e 03c1 	CALL _nlcd_PixelLine2x1
                 ;}
003269 81ee      	LDD  R30,Y+6
00326a 81ff      	LDD  R31,Y+6+1
00326b 9631      	ADIW R30,1
00326c 83ee      	STD  Y+6,R30
00326d 83ff      	STD  Y+6+1,R31
00326e cfde      	RJMP _0x4AD
                 _0x4AE:
                 ;}
                 ;nlcd_HorizontalLine(120,BLACK);
                 _0x4A9:
00326f e7e8      	LDI  R30,LOW(120)
003270 93ea      	ST   -Y,R30
003271 e0a0      	LDI  R26,LOW(0)
003272 e0b0      	LDI  R27,0
003273 940e 03ff 	CALL _nlcd_HorizontalLine
                 ;for(i = 121;i<131;i++)
003275 e7e9      	LDI  R30,LOW(121)
003276 e0f0      	LDI  R31,HIGH(121)
003277 83ee      	STD  Y+6,R30
003278 83ff      	STD  Y+6+1,R31
                 _0x4B0:
003279 81ae      	LDD  R26,Y+6
00327a 81bf      	LDD  R27,Y+6+1
00327b 38a3      	CPI  R26,LOW(0x83)
00327c e0e0      	LDI  R30,HIGH(0x83)
00327d 07be      	CPC  R27,R30
00327e f4f0      	BRSH _0x4B1
                 ;{
                 ;nlcd_PixelLine2x1(50,i,WHITE,BLACK);
00327f e3e2      	LDI  R30,LOW(50)
003280 93ea      	ST   -Y,R30
003281 81ef      	LDD  R30,Y+7
003282 93ea      	ST   -Y,R30
003283 efef      	LDI  R30,LOW(4095)
003284 e0ff      	LDI  R31,HIGH(4095)
003285 93fa      	ST   -Y,R31
003286 93ea      	ST   -Y,R30
003287 e0a0      	LDI  R26,LOW(0)
003288 e0b0      	LDI  R27,0
003289 940e 03c1 	CALL _nlcd_PixelLine2x1
                 ;nlcd_PixelLine2x1(95,i,WHITE,BLACK);
00328b e5ef      	LDI  R30,LOW(95)
00328c 93ea      	ST   -Y,R30
00328d 81ef      	LDD  R30,Y+7
00328e 93ea      	ST   -Y,R30
00328f efef      	LDI  R30,LOW(4095)
003290 e0ff      	LDI  R31,HIGH(4095)
003291 93fa      	ST   -Y,R31
003292 93ea      	ST   -Y,R30
003293 e0a0      	LDI  R26,LOW(0)
003294 e0b0      	LDI  R27,0
003295 940e 03c1 	CALL _nlcd_PixelLine2x1
                 ;}
003297 81ee      	LDD  R30,Y+6
003298 81ff      	LDD  R31,Y+6+1
003299 9631      	ADIW R30,1
00329a 83ee      	STD  Y+6,R30
00329b 83ff      	STD  Y+6+1,R31
00329c cfdc      	RJMP _0x4B0
                 _0x4B1:
                 ;}
00329d 940e 3f90 	CALL __LOADLOCR6
00329f 96e6      	ADIW R28,54
0032a0 5fde      	SUBI R29,-2
0032a1 9508      	RET
                 ; .FEND
                 
                 	.DSEG
                 _0x477:
000656           	.BYTE 0x48
                 ;
                 ;///////////////////////////////IMAGE VIEWER////////////////////////////////////////
                 ;void image_viewer_init()
                 ;{
                 
                 	.CSEG
                 ;
                 ;}
                 ;
                 ;///////////////////////////////TEXT READER/////////////////////////////////////////
                 ;void text_reader_init(int nFileIndex)
                 ;{
                 _text_reader_init:
                 ; .FSTART _text_reader_init
                 ;/*unsigned char sznotestring[16];
                 ;UINT bw;
                 ;int i;
                 ;   nlcd_String("***Note Pad***",5,5,RED,WHITE);
                 ;   if(!f_open(&file,g_FileInfo[nFileIndex].szFileName,FA_OPEN_ALWAYS | FA_READ))
                 ;   {
                 ;   f_lseek(&file,scroll_index);
                 ;   memset((void*)sznotestring,0,16);
                 ;   for(i = 0;i<12;i++)
                 ;   {
                 ;   f_read(&file,sznotestring,16,&bw);
                 ;   nlcd_String(sznotestring,15 + i*10,5,BLACK,WHITE);
                 ;   f_lseek(&file,scroll_index+(i+1)*16);
                 ;   memset((void*)sznotestring,0,16);
                 ;   }
                 ;   }      */
                 ;}
0032a2 9508      	RET
                 ; .FEND
                 ;
                 ;////////////////////////////////////MUSIC PLAYER//////////////////////////////////
                 ;void music_player_init(int nFileIndex)
                 ;{
                 _music_player_init:
                 ; .FSTART _music_player_init
                 ;UINT bw;
                 ;unsigned char sznotestring[8];
                 ;int nNumChannels = 0;
                 ;nlcd_String("***Music Player***",5,1,RED,WHITE);
0032a3 93ba      	ST   -Y,R27
0032a4 93aa      	ST   -Y,R26
0032a5 9728      	SBIW R28,8
0032a6 940e 3f8b 	CALL __SAVELOCR4
                 ;	nFileIndex -> Y+12
                 ;	bw -> R16,R17
                 ;	sznotestring -> Y+4
                 ;	nNumChannels -> R18,R19
                +
0032a8 e020     +LDI R18 , LOW ( 0 )
0032a9 e030     +LDI R19 , HIGH ( 0 )
                 	__GETWRN 18,19,0
                +
0032aa e9ee     +LDI R30 , LOW ( _0x4B2 + ( 0 ) )
0032ab e0f6     +LDI R31 , HIGH ( _0x4B2 + ( 0 ) )
                 	__POINTW1MN _0x4B2,0
0032ac 93fa      	ST   -Y,R31
0032ad 93ea      	ST   -Y,R30
0032ae e0e5      	LDI  R30,LOW(5)
0032af 93ea      	ST   -Y,R30
0032b0 e0e1      	LDI  R30,LOW(1)
0032b1 93ea      	ST   -Y,R30
0032b2 e0e0      	LDI  R30,LOW(3840)
0032b3 e0ff      	LDI  R31,HIGH(3840)
0032b4 93fa      	ST   -Y,R31
0032b5 93ea      	ST   -Y,R30
0032b6 efaf      	LDI  R26,LOW(4095)
0032b7 e0bf      	LDI  R27,HIGH(4095)
0032b8 940e 07c0 	CALL _nlcd_String
                 ;nlcd_String(g_FileInfo[nFileIndex].szFileName,15,1,RED,WHITE);
0032ba 85ac      	LDD  R26,Y+12
0032bb 85bd      	LDD  R27,Y+12+1
0032bc e0e6      	LDI  R30,LOW(6)
0032bd 940e 3e90 	CALL __MULB1W2U
0032bf 51e6      	SUBI R30,LOW(-_g_FileInfo)
0032c0 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0032c1 01df      	MOVW R26,R30
0032c2 940e 3f2d 	CALL __GETW1P
0032c4 93fa      	ST   -Y,R31
0032c5 93ea      	ST   -Y,R30
0032c6 e0ef      	LDI  R30,LOW(15)
0032c7 93ea      	ST   -Y,R30
0032c8 e0e1      	LDI  R30,LOW(1)
0032c9 93ea      	ST   -Y,R30
0032ca e0e0      	LDI  R30,LOW(3840)
0032cb e0ff      	LDI  R31,HIGH(3840)
0032cc 93fa      	ST   -Y,R31
0032cd 93ea      	ST   -Y,R30
0032ce efaf      	LDI  R26,LOW(4095)
0032cf e0bf      	LDI  R27,HIGH(4095)
0032d0 940e 07c0 	CALL _nlcd_String
                 ;//f_lseek(&file,22);
                 ;//f_read(&file,sznotestring,2,&bw);
                 ;//nNumChannels = atoi(sznotestring);
                 ;if(!bMusicFOpened)
0032d2 91e0 083f 	LDS  R30,_bMusicFOpened
0032d4 30e0      	CPI  R30,0
0032d5 f551      	BRNE _0x4B3
                 ;{
                 ;   if(!f_open(&file,g_FileInfo[nFileIndex].szFileName,FA_OPEN_ALWAYS | FA_READ))
0032d6 eaea      	LDI  R30,LOW(_file)
0032d7 e0f7      	LDI  R31,HIGH(_file)
0032d8 93fa      	ST   -Y,R31
0032d9 93ea      	ST   -Y,R30
0032da 85ae      	LDD  R26,Y+14
0032db 85bf      	LDD  R27,Y+14+1
0032dc e0e6      	LDI  R30,LOW(6)
0032dd 940e 3e90 	CALL __MULB1W2U
0032df 51e6      	SUBI R30,LOW(-_g_FileInfo)
0032e0 4ff9      	SBCI R31,HIGH(-_g_FileInfo)
0032e1 01df      	MOVW R26,R30
0032e2 940e 3f2d 	CALL __GETW1P
0032e4 93fa      	ST   -Y,R31
0032e5 93ea      	ST   -Y,R30
0032e6 e1a1      	LDI  R26,LOW(17)
0032e7 940e 20d5 	CALL _f_open
0032e9 30e0      	CPI  R30,0
0032ea f4a9      	BRNE _0x4B4
                 ;   {
                 ;TCCR0A=(0<<COM0A1) | (1<<COM0A0) | (0<<COM0B1) | (0<<COM0B0) | (1<<WGM01) | (1<<WGM00);
0032eb e4e3      	LDI  R30,LOW(67)
0032ec bde4      	OUT  0x24,R30
                 ;TCCR0B=(0<<WGM02) | (0<<CS02) | (0<<CS01) | (1<<CS00);
0032ed e0e1      	LDI  R30,LOW(1)
0032ee bde5      	OUT  0x25,R30
                 ;TCNT0=0x00;
0032ef e0e0      	LDI  R30,LOW(0)
0032f0 bde6      	OUT  0x26,R30
                 ;OCR0A=0x00;
0032f1 bde7      	OUT  0x27,R30
                 ;OCR0B=0x00;
0032f2 bde8      	OUT  0x28,R30
                 ;bMusicFOpened = 1;
0032f3 e0e1      	LDI  R30,LOW(1)
0032f4 93e0 083f 	STS  _bMusicFOpened,R30
                 ;f_lseek(&file,44);
0032f6 eaea      	LDI  R30,LOW(_file)
0032f7 e0f7      	LDI  R31,HIGH(_file)
0032f8 93fa      	ST   -Y,R31
0032f9 93ea      	ST   -Y,R30
                +
0032fa e2ac     +LDI R26 , LOW ( 0x2C )
0032fb e0b0     +LDI R27 , HIGH ( 0x2C )
0032fc e080     +LDI R24 , BYTE3 ( 0x2C )
0032fd e090     +LDI R25 , BYTE4 ( 0x2C )
                 	__GETD2N 0x2C
0032fe 940e 2759 	CALL _f_lseek
                 ;}
                 ;}
                 _0x4B4:
                 ;switch (state)
                 _0x4B3:
003300 91e0 083d 	LDS  R30,_state
003302 91f0 083e 	LDS  R31,_state+1
                 ;{
                 ; case 0:
003304 9730      	SBIW R30,0
003305 f529      	BRNE _0x4B8
                 ; if (nAudioBufferIndex >= HALF_BUF)
003306 e8e0      	LDI  R30,LOW(128)
003307 e0f0      	LDI  R31,HIGH(128)
003308 16de      	CP   R13,R30
003309 06ef      	CPC  R14,R31
00330a f0fc      	BRLT _0x4B9
                 ; {
                 ;   f_read(&file,sznotestring, HALF_BUF, &bw);
00330b eaea      	LDI  R30,LOW(_file)
00330c e0f7      	LDI  R31,HIGH(_file)
00330d 93fa      	ST   -Y,R31
00330e 93ea      	ST   -Y,R30
00330f 01fe      	MOVW R30,R28
003310 9636      	ADIW R30,6
003311 93fa      	ST   -Y,R31
003312 93ea      	ST   -Y,R30
003313 e8e0      	LDI  R30,LOW(128)
003314 e0f0      	LDI  R31,HIGH(128)
003315 93fa      	ST   -Y,R31
003316 93ea      	ST   -Y,R30
003317 b7ad      	IN   R26,SPL
003318 b7be      	IN   R27,SPH
003319 9711      	SBIW R26,1
00331a 931f      	PUSH R17
00331b 930f      	PUSH R16
00331c 940e 223e 	CALL _f_read
00331e 910f      	POP  R16
00331f 911f      	POP  R17
                 ;   if (bw > HALF_BUF)
                +
003320 3801     +CPI R16 , LOW ( 129 )
003321 e0e0     +LDI R30 , HIGH ( 129 )
003322 071e     +CPC R17 , R30
                 	__CPWRN 16,17,129
003323 f030      	BRLO _0x4BA
                 ;   {
                 ;      state = 1;
003324 e0e1      	LDI  R30,LOW(1)
003325 e0f0      	LDI  R31,HIGH(1)
003326 93e0 083d 	STS  _state,R30
003328 93f0 083e 	STS  _state+1,R31
                 ;   }
                 ; }
                 _0x4BA:
                 ; break;
                 _0x4B9:
00332a c028      	RJMP _0x4B7
                 ;
                 ; case 1:
                 _0x4B8:
00332b 30e1      	CPI  R30,LOW(0x1)
00332c e0a0      	LDI  R26,HIGH(0x1)
00332d 07fa      	CPC  R31,R26
00332e f521      	BRNE _0x4B7
                 ; if (nAudioBufferIndex < HALF_BUF)
00332f e8e0      	LDI  R30,LOW(128)
003330 e0f0      	LDI  R31,HIGH(128)
003331 16de      	CP   R13,R30
003332 06ef      	CPC  R14,R31
003333 f4fc      	BRGE _0x4BC
                 ; {
                 ;   f_read(&file,&sznotestring[HALF_BUF], HALF_BUF, &bw);
003334 eaea      	LDI  R30,LOW(_file)
003335 e0f7      	LDI  R31,HIGH(_file)
003336 93fa      	ST   -Y,R31
003337 93ea      	ST   -Y,R30
003338 01fe      	MOVW R30,R28
003339 57ea      	SUBI R30,LOW(-134)
00333a 4fff      	SBCI R31,HIGH(-134)
00333b 93fa      	ST   -Y,R31
00333c 93ea      	ST   -Y,R30
00333d e8e0      	LDI  R30,LOW(128)
00333e e0f0      	LDI  R31,HIGH(128)
00333f 93fa      	ST   -Y,R31
003340 93ea      	ST   -Y,R30
003341 b7ad      	IN   R26,SPL
003342 b7be      	IN   R27,SPH
003343 9711      	SBIW R26,1
003344 931f      	PUSH R17
003345 930f      	PUSH R16
003346 940e 223e 	CALL _f_read
003348 910f      	POP  R16
003349 911f      	POP  R17
                 ;   if (bw > HALF_BUF)
                +
00334a 3801     +CPI R16 , LOW ( 129 )
00334b e0e0     +LDI R30 , HIGH ( 129 )
00334c 071e     +CPC R17 , R30
                 	__CPWRN 16,17,129
00334d f028      	BRLO _0x4BD
                 ;   {
                 ;      state = 0;
00334e e0e0      	LDI  R30,LOW(0)
00334f 93e0 083d 	STS  _state,R30
003351 93e0 083e 	STS  _state+1,R30
                 ;   }
                 ; }
                 _0x4BD:
                 ; break;
                 _0x4BC:
                 ; }
                 _0x4B7:
                 ;}
003353 940e 3f92 	CALL __LOADLOCR4
003355 962e      	ADIW R28,14
003356 9508      	RET
                 ; .FEND
                 
                 	.DSEG
                 _0x4B2:
00069e           	.BYTE 0x13
                 ;#include <sleep.h>
                 ;
                 ;unsigned int vcc = 0;//variable to hold the value of Vcc
                 ;
                 ;
                 ;
                 ;void ADC_Init(){
                 ; 0000 0013 void ADC_Init(){
                 
                 	.CSEG
                 _ADC_Init:
                 ; .FSTART _ADC_Init
                 ; 0000 0014 ADCSRA=(1<<ADEN) | (0<<ADSC) | (0<<ADATE) | (0<<ADIF) | (0<<ADIE) | (1<<ADPS2) | (1<<ADPS1) | (0<<ADPS0);
003357 e8e6      	LDI  R30,LOW(134)
003358 93e0 007a 	STS  122,R30
                 ; 0000 0015 ADCSRB=(0<<ADTS2) | (0<<ADTS1) | (0<<ADTS0);
00335a e0e0      	LDI  R30,LOW(0)
00335b 93e0 007b 	STS  123,R30
                 ; 0000 0016 ADMUX = (0 << REFS1)|(0 << REFS0) |(1 << MUX0)|(1 << MUX1)|(1 << MUX2)|(0 << MUX3);
00335d e0e7      	LDI  R30,LOW(7)
00335e 93e0 007c 	STS  124,R30
                 ; 0000 0017 }
003360 9508      	RET
                 ; .FEND
                 ;
                 ;
                 ;unsigned int ReadADC(unsigned char ref_channel){
                 ; 0000 001A unsigned int ReadADC(unsigned char ref_channel){
                 _ReadADC:
                 ; .FSTART _ReadADC
                 ; 0000 001B   //ADMUX = ref_channel; //     .        ...
                 ; 0000 001C  int i;
                 ; 0000 001D  for(i = 0;i<8;i++)
003361 93aa      	ST   -Y,R26
003362 931a      	ST   -Y,R17
003363 930a      	ST   -Y,R16
                 ;	ref_channel -> Y+2
                 ;	i -> R16,R17
                +
003364 e000     +LDI R16 , LOW ( 0 )
003365 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x4BF:
                +
003366 3008     +CPI R16 , LOW ( 8 )
003367 e0e0     +LDI R30 , HIGH ( 8 )
003368 071e     +CPC R17 , R30
                 	__CPWRN 16,17,8
003369 f464      	BRGE _0x4C0
                 ; 0000 001E  {
                 ; 0000 001F  ADCSRA |= (1<<ADSC); // 
00336a 91e0 007a 	LDS  R30,122
00336c 64e0      	ORI  R30,0x40
00336d 93e0 007a 	STS  122,R30
                 ; 0000 0020   while(! (ADCSRA & (1<<ADIF)) ){} //    
                 _0x4C1:
00336f 91e0 007a 	LDS  R30,122
003371 71e0      	ANDI R30,LOW(0x10)
003372 f3e1      	BREQ _0x4C1
                 ; 0000 0021   }
                +
003373 5f0f     +SUBI R16 , LOW ( - 1 )
003374 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
003375 cff0      	RJMP _0x4BF
                 _0x4C0:
                 ; 0000 0022   ADCSRA |= (1<<ADIF); //  
003376 91e0 007a 	LDS  R30,122
003378 61e0      	ORI  R30,0x10
003379 93e0 007a 	STS  122,R30
                 ; 0000 0023   return ADCW;
00337b 91e0 0078 	LDS  R30,120
00337d 91f0 0079 	LDS  R31,120+1
00337f 8119      	LDD  R17,Y+1
003380 8108      	LDD  R16,Y+0
003381 9623      	ADIW R28,3
003382 9508      	RET
                 ; 0000 0024 }
                 ; .FEND
                 ;
                 ;void main(void) //   (RAM )  12-        ...
                 ; 0000 0027 {               // .. 1  = 2   
                 _main:
                 ; .FSTART _main
                 ; 0000 0028 int i = 0;
                 ; 0000 0029 unsigned char bCardCheck = 0;
                 ; 0000 002A unsigned char str1[32];
                 ; 0000 002B unsigned int adc_data;
                 ; 0000 002C unsigned char adcstr[32];
                 ; 0000 002D unsigned char pBuffer[10];
                 ; 0000 002E unsigned char pBufferstr[10];
                 ; 0000 002F unsigned char adstr[32];
                 ; 0000 0030 unsigned int adc_data2;
                 ; 0000 0031 uint8_t timebuf[8];
                 ; 0000 0032 uint8_t hour;
                 ; 0000 0033 uint8_t min;
                 ; 0000 0034 uint8_t sec;
                 ; 0000 0035 unsigned char timestr[32];
                 ; 0000 0036 CS_LCD_SET;
003383 97ef      	SBIW R28,63
003384 97ef      	SBIW R28,63
003385 97a2      	SBIW R28,34
                 ;	i -> R16,R17
                 ;	bCardCheck -> R19
                 ;	str1 -> Y+128
                 ;	adc_data -> R20,R21
                 ;	adcstr -> Y+96
                 ;	pBuffer -> Y+86
                 ;	pBufferstr -> Y+76
                 ;	adstr -> Y+44
                 ;	adc_data2 -> Y+42
                 ;	timebuf -> Y+34
                 ;	hour -> R18
                 ;	min -> Y+33
                 ;	sec -> Y+32
                 ;	timestr -> Y+0
                +
003386 e000     +LDI R16 , LOW ( 0 )
003387 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
003388 e030      	LDI  R19,0
003389 9a2a      	SBI  0x5,2
                 ; 0000 0037 CS_SRAM_SET;
00338a 9a28      	SBI  0x5,0
                 ; 0000 0038 SRAM_HOLD_SET;
00338b 9a41      	SBI  0x8,1
                 ; 0000 0039 DDRC = 0xFF;
00338c efef      	LDI  R30,LOW(255)
00338d b9e7      	OUT  0x7,R30
                 ; 0000 003A PORTC = 0xFF;
00338e b9e8      	OUT  0x8,R30
                 ; 0000 003B DDRD = 0xFF;
00338f b9ea      	OUT  0xA,R30
                 ; 0000 003C DDRD.2 = 0;
003390 9852      	CBI  0xA,2
                 ; 0000 003D PORTD.0 = 0;
003391 9858      	CBI  0xB,0
                 ; 0000 003E nlcd_InitSPI();
003392 940e 0393 	CALL _nlcd_InitSPI
                 ; 0000 003F nlcd_InitPixelBuffer(1);
003394 e0a1      	LDI  R26,LOW(1)
003395 e0b0      	LDI  R27,0
003396 940e 041c 	CALL _nlcd_InitPixelBuffer
                 ; 0000 0040 nlcd_Init();
003398 940e 0335 	CALL _nlcd_Init
                 ; 0000 0041 delay_ms(20);
00339a e1a4      	LDI  R26,LOW(20)
00339b e0b0      	LDI  R27,0
00339c 940e 3c19 	CALL _delay_ms
                 ; 0000 0042 TWI_MasterInit(100);
00339e e6a4      	LDI  R26,LOW(100)
00339f e0b0      	LDI  R27,0
0033a0 940e 0c76 	CALL _TWI_MasterInit
                 ; 0000 0043    /* */
                 ; 0000 0044   timebuf[0] = (DS1307_ADR<<1)|0;  // 
0033a2 ede0      	LDI  R30,LOW(208)
0033a3 a3ea      	STD  Y+34,R30
                 ; 0000 0045   timebuf[1] = 0;                  // 
0033a4 e0e0      	LDI  R30,LOW(0)
0033a5 a3eb      	STD  Y+35,R30
                 ; 0000 0046   timebuf[2] = (5<<4)|5;           // 
0033a6 e5e5      	LDI  R30,LOW(85)
0033a7 a3ec      	STD  Y+36,R30
                 ; 0000 0047   timebuf[3] = (5<<4)|9;           // 
0033a8 e5e9      	LDI  R30,LOW(89)
0033a9 a3ed      	STD  Y+37,R30
                 ; 0000 0048   timebuf[4] = 0;                  // 
0033aa e0e0      	LDI  R30,LOW(0)
0033ab a3ee      	STD  Y+38,R30
                 ; 0000 0049   TWI_SendData(timebuf, 5);
0033ac 01fe      	MOVW R30,R28
0033ad 96b2      	ADIW R30,34
0033ae 93fa      	ST   -Y,R31
0033af 93ea      	ST   -Y,R30
0033b0 e0a5      	LDI  R26,LOW(5)
0033b1 940e 0caf 	CALL _TWI_SendData
                 ; 0000 004A // 
                 ; 0000 004B //df_Memory_Erase();
                 ; 0000 004C /*pBuffer[0] = 10;
                 ; 0000 004D pBuffer[1] = 2;
                 ; 0000 004E pBuffer[2] = 3;
                 ; 0000 004F pBuffer[3] = 4;
                 ; 0000 0050 pBuffer[4] = 5;
                 ; 0000 0051 //df_Memory_Write_Buffer(0xA74,0x0E,&pBuffer[0],4,1);
                 ; 0000 0052 pBuffer[0] = 0;
                 ; 0000 0053 pBuffer[1] = 0;
                 ; 0000 0054 pBuffer[2] = 0;
                 ; 0000 0055 pBuffer[3] = 0;
                 ; 0000 0056 pBuffer[4] = 0;
                 ; 0000 0057 df_Memory_Read_Buffer(0xA74,0x0E,&pBuffer[0],4,1);
                 ; 0000 0058 sprintf(pBufferstr,"%i,%i,%i,%i",pBuffer[0],pBuffer[1],pBuffer[2],pBuffer[3]);  */
                 ; 0000 0059 ADC_Init();
0033b3 dfa3      	RCALL _ADC_Init
                 ; 0000 005A DDRD.2 = 0;
0033b4 9852      	CBI  0xA,2
                 ; 0000 005B EICRA=(0<<ISC11) | (0<<ISC10) | (1<<ISC01) | (0<<ISC00);
0033b5 e0e2      	LDI  R30,LOW(2)
0033b6 93e0 0069 	STS  105,R30
                 ; 0000 005C EIMSK=(0<<INT1) | (1<<INT0);
0033b8 e0e1      	LDI  R30,LOW(1)
0033b9 bbed      	OUT  0x1D,R30
                 ; 0000 005D EIFR=(0<<INTF1) | (1<<INTF0);
0033ba bbec      	OUT  0x1C,R30
                 ; 0000 005E PCICR=(0<<PCIE2) | (0<<PCIE1) | (0<<PCIE0);
0033bb e0e0      	LDI  R30,LOW(0)
0033bc 93e0 0068 	STS  104,R30
                 ; 0000 005F KEYS_INIT;
0033be 9a38      	SBI  0x7,0
0033bf 9a3a      	SBI  0x7,2
0033c0 9857      	CBI  0xA,7
                 ; 0000 0060 CS_KEYS_SET;
0033c1 9a40      	SBI  0x8,0
                 ; 0000 0061 #asm("sei");
0033c2 9478      	sei
                 ; 0000 0062 while(1)
                 _0x4D2:
                 ; 0000 0063     {
                 ; 0000 0064 nlcd_Clear(WHITE);
0033c3 efaf      	LDI  R26,LOW(4095)
0033c4 e0bf      	LDI  R27,HIGH(4095)
0033c5 940e 0501 	CALL _nlcd_Clear
                 ; 0000 0065 //nlcd_String(&pBufferstr[0],90,52,MAGENTA,WHITE);
                 ; 0000 0066 CS_LCD_SET;
0033c7 9a2a      	SBI  0x5,2
                 ; 0000 0067 CS_SRAM_SET;
0033c8 9a28      	SBI  0x5,0
                 ; 0000 0068 browser_init();
0033c9 dc5b      	RCALL _browser_init
                 ; 0000 0069 PORTD.0 = 0;
0033ca 9858      	CBI  0xB,0
                 ; 0000 006A ///ADC Vref 1.1V
                 ; 0000 006B adc_data = ReadADC(14);
0033cb e0ae      	LDI  R26,LOW(14)
0033cc df94      	RCALL _ReadADC
0033cd 01af      	MOVW R20,R30
                 ; 0000 006C vcc = 110 * 1024 / adc_data/3.3;     ////    !!! 1.2 - 1.3 
0033ce 2766      	CLR  R22
0033cf 2777      	CLR  R23
                +
0033d0 e0a0     +LDI R26 , LOW ( 0x1B800 )
0033d1 ebb8     +LDI R27 , HIGH ( 0x1B800 )
0033d2 e081     +LDI R24 , BYTE3 ( 0x1B800 )
0033d3 e090     +LDI R25 , BYTE4 ( 0x1B800 )
                 	__GETD2N 0x1B800
0033d4 940e 3eeb 	CALL __DIVD21
0033d6 940e 3c8f 	CALL __CDF1
0033d8 01df      	MOVW R26,R30
0033d9 01cb      	MOVW R24,R22
                +
0033da e3e3     +LDI R30 , LOW ( 0x40533333 )
0033db e3f3     +LDI R31 , HIGH ( 0x40533333 )
0033dc e563     +LDI R22 , BYTE3 ( 0x40533333 )
0033dd e470     +LDI R23 , BYTE4 ( 0x40533333 )
                 	__GETD1N 0x40533333
0033de 940e 3d67 	CALL __DIVF21
0033e0 e4a0      	LDI  R26,LOW(_vcc)
0033e1 e0b8      	LDI  R27,HIGH(_vcc)
0033e2 940e 3c56 	CALL __CFD1U
0033e4 93ed      	ST   X+,R30
0033e5 93fc      	ST   X,R31
                 ; 0000 006D sprintf(&adcstr[0],"B:%i", vcc);
0033e6 01fe      	MOVW R30,R28
0033e7 5ae0      	SUBI R30,LOW(-(96))
0033e8 4fff      	SBCI R31,HIGH(-(96))
0033e9 93fa      	ST   -Y,R31
0033ea 93ea      	ST   -Y,R30
                +
0033eb e2e8     +LDI R30 , LOW ( 2 * _0x0 + ( 276 ) )
0033ec e0f5     +LDI R31 , HIGH ( 2 * _0x0 + ( 276 ) )
                 	__POINTW1FN _0x0,276
0033ed 93fa      	ST   -Y,R31
0033ee 93ea      	ST   -Y,R30
0033ef 91e0 0840 	LDS  R30,_vcc
0033f1 91f0 0841 	LDS  R31,_vcc+1
0033f3 2766      	CLR  R22
0033f4 2777      	CLR  R23
0033f5 940e 3f5a 	CALL __PUTPARD1
0033f7 e084      	LDI  R24,4
0033f8 940e 3997 	CALL _sprintf
0033fa 9628      	ADIW R28,8
                 ; 0000 006E strcat(&adcstr[0],"%");
0033fb 01fe      	MOVW R30,R28
0033fc 5ae0      	SUBI R30,LOW(-(96))
0033fd 4fff      	SBCI R31,HIGH(-(96))
0033fe 93fa      	ST   -Y,R31
0033ff 93ea      	ST   -Y,R30
                +
003400 eba1     +LDI R26 , LOW ( _0x4D7 + ( 0 ) )
003401 e0b6     +LDI R27 , HIGH ( _0x4D7 + ( 0 ) )
                 	__POINTW2MN _0x4D7,0
003402 940e 34af 	CALL _strcat
                 ; 0000 006F nlcd_String(&adcstr[0],122,2,GREEN,WHITE);
003404 01fe      	MOVW R30,R28
003405 5ae0      	SUBI R30,LOW(-(96))
003406 4fff      	SBCI R31,HIGH(-(96))
003407 93fa      	ST   -Y,R31
003408 93ea      	ST   -Y,R30
003409 e7ea      	LDI  R30,LOW(122)
00340a 93ea      	ST   -Y,R30
00340b e0e2      	LDI  R30,LOW(2)
00340c 93ea      	ST   -Y,R30
00340d efe0      	LDI  R30,LOW(240)
00340e e0f0      	LDI  R31,HIGH(240)
00340f 93fa      	ST   -Y,R31
003410 93ea      	ST   -Y,R30
003411 efaf      	LDI  R26,LOW(4095)
003412 e0bf      	LDI  R27,HIGH(4095)
003413 940e 07c0 	CALL _nlcd_String
                 ; 0000 0070        /*  DS1307
                 ; 0000 0071          */
                 ; 0000 0072       timebuf[0] = (DS1307_ADR<<1)|0; // 
003415 ede0      	LDI  R30,LOW(208)
003416 a3ea      	STD  Y+34,R30
                 ; 0000 0073       timebuf[1] = 0;                 // 
003417 e0e0      	LDI  R30,LOW(0)
003418 a3eb      	STD  Y+35,R30
                 ; 0000 0074       TWI_SendData(timebuf, 2);
003419 01fe      	MOVW R30,R28
00341a 96b2      	ADIW R30,34
00341b 93fa      	ST   -Y,R31
00341c 93ea      	ST   -Y,R30
00341d e0a2      	LDI  R26,LOW(2)
00341e 940e 0caf 	CALL _TWI_SendData
                 ; 0000 0075       /*   DS1307*/
                 ; 0000 0076       timebuf[0] = (DS1307_ADR<<1)|1;
003420 ede1      	LDI  R30,LOW(209)
003421 a3ea      	STD  Y+34,R30
                 ; 0000 0077       TWI_SendData(timebuf, 5);
003422 01fe      	MOVW R30,R28
003423 96b2      	ADIW R30,34
003424 93fa      	ST   -Y,R31
003425 93ea      	ST   -Y,R30
003426 e0a5      	LDI  R26,LOW(5)
003427 940e 0caf 	CALL _TWI_SendData
                 ; 0000 0078       /*  
                 ; 0000 0079          */
                 ; 0000 007A       TWI_GetData(timebuf, 5);
003429 01fe      	MOVW R30,R28
00342a 96b2      	ADIW R30,34
00342b 93fa      	ST   -Y,R31
00342c 93ea      	ST   -Y,R30
00342d e0a5      	LDI  R26,LOW(5)
00342e 940e 0cd9 	CALL _TWI_GetData
                 ; 0000 007B       sec = timebuf[1];
003430 a1eb      	LDD  R30,Y+35
003431 a3e8      	STD  Y+32,R30
                 ; 0000 007C       min  = timebuf[2];
003432 a1ec      	LDD  R30,Y+36
003433 a3e9      	STD  Y+33,R30
                 ; 0000 007D       hour = timebuf[3];
003434 a12d      	LDD  R18,Y+37
                 ; 0000 007E sprintf(&timestr[0],"%i%i:%i%i:%i%i",(hour>>4),(hour&0xf),(min>>4),(min&0xf),(sec>>4),(sec&0xf));
003435 01fe      	MOVW R30,R28
003436 93fa      	ST   -Y,R31
003437 93ea      	ST   -Y,R30
                +
003438 e2ef     +LDI R30 , LOW ( 2 * _0x0 + ( 283 ) )
003439 e0f5     +LDI R31 , HIGH ( 2 * _0x0 + ( 283 ) )
                 	__POINTW1FN _0x0,283
00343a 93fa      	ST   -Y,R31
00343b 93ea      	ST   -Y,R30
00343c 2fe2      	MOV  R30,R18
00343d e0f0      	LDI  R31,0
00343e 940e 3e2d 	CALL __ASRW4
003440 940e 3e59 	CALL __CWD1
003442 940e 3f5a 	CALL __PUTPARD1
003444 2fe2      	MOV  R30,R18
003445 70ef      	ANDI R30,LOW(0xF)
003446 27ff      	CLR  R31
003447 2766      	CLR  R22
003448 2777      	CLR  R23
003449 940e 3f5a 	CALL __PUTPARD1
00344b a5ed      	LDD  R30,Y+45
00344c e0f0      	LDI  R31,0
00344d 940e 3e2d 	CALL __ASRW4
00344f 940e 3e59 	CALL __CWD1
003451 940e 3f5a 	CALL __PUTPARD1
003453 a9e9      	LDD  R30,Y+49
003454 70ef      	ANDI R30,LOW(0xF)
003455 27ff      	CLR  R31
003456 2766      	CLR  R22
003457 2777      	CLR  R23
003458 940e 3f5a 	CALL __PUTPARD1
00345a a9ec      	LDD  R30,Y+52
00345b e0f0      	LDI  R31,0
00345c 940e 3e2d 	CALL __ASRW4
00345e 940e 3e59 	CALL __CWD1
003460 940e 3f5a 	CALL __PUTPARD1
003462 ade8      	LDD  R30,Y+56
003463 70ef      	ANDI R30,LOW(0xF)
003464 27ff      	CLR  R31
003465 2766      	CLR  R22
003466 2777      	CLR  R23
003467 940e 3f5a 	CALL __PUTPARD1
003469 e188      	LDI  R24,24
00346a 940e 3997 	CALL _sprintf
00346c 966c      	ADIW R28,28
                 ; 0000 007F nlcd_String(&timestr[0],122,52,MAGENTA,WHITE);
00346d 01fe      	MOVW R30,R28
00346e 93fa      	ST   -Y,R31
00346f 93ea      	ST   -Y,R30
003470 e7ea      	LDI  R30,LOW(122)
003471 93ea      	ST   -Y,R30
003472 e3e4      	LDI  R30,LOW(52)
003473 93ea      	ST   -Y,R30
003474 e0ef      	LDI  R30,LOW(3855)
003475 e0ff      	LDI  R31,HIGH(3855)
003476 93fa      	ST   -Y,R31
003477 93ea      	ST   -Y,R30
003478 efaf      	LDI  R26,LOW(4095)
003479 e0bf      	LDI  R27,HIGH(4095)
00347a 940e 07c0 	CALL _nlcd_String
                 ; 0000 0080 nlcd_RenderPixelBuffer();
00347c 940e 0472 	CALL _nlcd_RenderPixelBuffer
                 ; 0000 0081    }
00347e cf44      	RJMP _0x4D2
                 ; 0000 0082 }
                 _0x4D8:
00347f cfff      	RJMP _0x4D8
                 ; .FEND
                 
                 	.DSEG
                 _0x4D7:
0006b1           	.BYTE 0x2
                 
                 	.CSEG
                 _memmove:
                 ; .FSTART _memmove
003480 93ba      	ST   -Y,R27
003481 93aa      	ST   -Y,R26
003482 8199          ldd  r25,y+1
003483 8188          ld   r24,y
003484 9600          adiw r24,0
003485 f0a9          breq memmove3
003486 81bd          ldd  r27,y+5
003487 81ac          ldd  r26,y+4
003488 81fb          ldd  r31,y+3
003489 81ea          ldd  r30,y+2
00348a 17ea          cp   r30,r26
00348b 07fb          cpc  r31,r27
00348c f071          breq memmove3
00348d f02c          brlt memmove1
                 memmove0:
00348e 9161          ld   r22,z+
00348f 936d          st   x+,r22
003490 9701          sbiw r24,1
003491 f7e1          brne memmove0
003492 c008          rjmp memmove3
                 memmove1:
003493 0fa8          add  r26,r24
003494 1fb9          adc  r27,r25
003495 0fe8          add  r30,r24
003496 1ff9          adc  r31,r25
                 memmove2:
003497 9162          ld   r22,-z
003498 936e          st   -x,r22
003499 9701          sbiw r24,1
00349a f7e1          brne memmove2
                 memmove3:
00349b 81fd          ldd  r31,y+5
00349c 81ec          ldd  r30,y+4
00349d 940c 3b5f 	JMP  _0x20C0004
                 ; .FEND
                 _memset:
                 ; .FSTART _memset
00349f 93ba      	ST   -Y,R27
0034a0 93aa      	ST   -Y,R26
0034a1 81b9          ldd  r27,y+1
0034a2 81a8          ld   r26,y
0034a3 9610          adiw r26,0
0034a4 f031          breq memset1
0034a5 81fc          ldd  r31,y+4
0034a6 81eb          ldd  r30,y+3
0034a7 816a          ldd  r22,y+2
                 memset0:
0034a8 9361          st   z+,r22
0034a9 9711          sbiw r26,1
0034aa f7e9          brne memset0
                 memset1:
0034ab 81eb          ldd  r30,y+3
0034ac 81fc          ldd  r31,y+4
0034ad 940c 3545 	JMP  _0x20C000A
                 ; .FEND
                 _strcat:
                 ; .FSTART _strcat
0034af 93ba      	ST   -Y,R27
0034b0 93aa      	ST   -Y,R26
0034b1 91e9          ld   r30,y+
0034b2 91f9          ld   r31,y+
0034b3 91a9          ld   r26,y+
0034b4 91b9          ld   r27,y+
0034b5 01cd          movw r24,r26
                 strcat0:
0034b6 916d          ld   r22,x+
0034b7 2366          tst  r22
0034b8 f7e9          brne strcat0
0034b9 9711          sbiw r26,1
                 strcat1:
0034ba 9161          ld   r22,z+
0034bb 936d          st   x+,r22
0034bc 2366          tst  r22
0034bd f7e1          brne strcat1
0034be 01fc          movw r30,r24
0034bf 9508          ret
                 ; .FEND
                 _strcmp:
                 ; .FSTART _strcmp
0034c0 93ba      	ST   -Y,R27
0034c1 93aa      	ST   -Y,R26
0034c2 91e9          ld   r30,y+
0034c3 91f9          ld   r31,y+
0034c4 91a9          ld   r26,y+
0034c5 91b9          ld   r27,y+
                 strcmp0:
0034c6 916d          ld   r22,x+
0034c7 9171          ld   r23,z+
0034c8 1767          cp   r22,r23
0034c9 f421          brne strcmp1
0034ca 2366          tst  r22
0034cb f7d1          brne strcmp0
                 strcmp3:
0034cc 27ee          clr  r30
0034cd 9508          ret
                 strcmp1:
0034ce 1b67          sub  r22,r23
0034cf f3e1          breq strcmp3
0034d0 e0e1          ldi  r30,1
0034d1 f408          brcc strcmp2
0034d2 50e2          subi r30,2
                 strcmp2:
0034d3 9508          ret
                 ; .FEND
                 _strcpy:
                 ; .FSTART _strcpy
0034d4 93ba      	ST   -Y,R27
0034d5 93aa      	ST   -Y,R26
0034d6 91e9          ld   r30,y+
0034d7 91f9          ld   r31,y+
0034d8 91a9          ld   r26,y+
0034d9 91b9          ld   r27,y+
0034da 01cd          movw r24,r26
                 strcpy0:
0034db 9161          ld   r22,z+
0034dc 936d          st   x+,r22
0034dd 2366          tst  r22
0034de f7e1          brne strcpy0
0034df 01fc          movw r30,r24
0034e0 9508          ret
                 ; .FEND
                 _strcpyf:
                 ; .FSTART _strcpyf
0034e1 93ba      	ST   -Y,R27
0034e2 93aa      	ST   -Y,R26
0034e3 91e9          ld   r30,y+
0034e4 91f9          ld   r31,y+
0034e5 91a9          ld   r26,y+
0034e6 91b9          ld   r27,y+
0034e7 01cd          movw r24,r26
                 strcpyf0:
0034e8 9005      	lpm  r0,z+
0034e9 920d          st   x+,r0
0034ea 2000          tst  r0
0034eb f7e1          brne strcpyf0
0034ec 01fc          movw r30,r24
0034ed 9508          ret
                 ; .FEND
                 _strlen:
                 ; .FSTART _strlen
0034ee 93ba      	ST   -Y,R27
0034ef 93aa      	ST   -Y,R26
0034f0 91a9          ld   r26,y+
0034f1 91b9          ld   r27,y+
0034f2 27ee          clr  r30
0034f3 27ff          clr  r31
                 strlen0:
0034f4 916d          ld   r22,x+
0034f5 2366          tst  r22
0034f6 f011          breq strlen1
0034f7 9631          adiw r30,1
0034f8 cffb          rjmp strlen0
                 strlen1:
0034f9 9508          ret
                 ; .FEND
                 _strlenf:
                 ; .FSTART _strlenf
0034fa 93ba      	ST   -Y,R27
0034fb 93aa      	ST   -Y,R26
0034fc 27aa          clr  r26
0034fd 27bb          clr  r27
0034fe 91e9          ld   r30,y+
0034ff 91f9          ld   r31,y+
                 strlenf0:
003500 9005      	lpm  r0,z+
003501 2000          tst  r0
003502 f011          breq strlenf1
003503 9611          adiw r26,1
003504 cffb          rjmp strlenf0
                 strlenf1:
003505 01fd          movw r30,r26
003506 9508          ret
                 ; .FEND
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.CSEG
                 _put_buff_G101:
                 ; .FSTART _put_buff_G101
003507 93ba      	ST   -Y,R27
003508 93aa      	ST   -Y,R26
003509 931a      	ST   -Y,R17
00350a 930a      	ST   -Y,R16
00350b 81aa      	LDD  R26,Y+2
00350c 81bb      	LDD  R27,Y+2+1
00350d 9612      	ADIW R26,2
00350e 940e 3f2d 	CALL __GETW1P
003510 9730      	SBIW R30,0
003511 f159      	BREQ _0x2020016
003512 81aa      	LDD  R26,Y+2
003513 81bb      	LDD  R27,Y+2+1
003514 9614      	ADIW R26,4
003515 940e 3f2d 	CALL __GETW1P
003517 018f      	MOVW R16,R30
003518 9730      	SBIW R30,0
003519 f061      	BREQ _0x2020018
                +
00351a 3002     +CPI R16 , LOW ( 2 )
00351b e0e0     +LDI R30 , HIGH ( 2 )
00351c 071e     +CPC R17 , R30
                 	__CPWRN 16,17,2
00351d f098      	BRLO _0x2020019
00351e 01f8      	MOVW R30,R16
00351f 9731      	SBIW R30,1
003520 018f      	MOVW R16,R30
                +
003521 81aa     +LDD R26 , Y + 2
003522 81bb     +LDD R27 , Y + 2 + 1
003523 9614     +ADIW R26 , 4
003524 93ed     +ST X + , R30
003525 93fc     +ST X , R31
                 	__PUTW1SNS 2,4
                 _0x2020018:
003526 81aa      	LDD  R26,Y+2
003527 81bb      	LDD  R27,Y+2+1
003528 9612      	ADIW R26,2
003529 91ed      	LD   R30,X+
00352a 91fd      	LD   R31,X+
00352b 9631      	ADIW R30,1
00352c 93fe      	ST   -X,R31
00352d 93ee      	ST   -X,R30
00352e 9731      	SBIW R30,1
00352f 81ac      	LDD  R26,Y+4
003530 83a0      	STD  Z+0,R26
                 _0x2020019:
003531 81aa      	LDD  R26,Y+2
003532 81bb      	LDD  R27,Y+2+1
003533 940e 3f2d 	CALL __GETW1P
003535 23ff      	TST  R31
003536 f02a      	BRMI _0x202001A
003537 91ed      	LD   R30,X+
003538 91fd      	LD   R31,X+
003539 9631      	ADIW R30,1
00353a 93fe      	ST   -X,R31
00353b 93ee      	ST   -X,R30
                 _0x202001A:
00353c c006      	RJMP _0x202001B
                 _0x2020016:
00353d 81aa      	LDD  R26,Y+2
00353e 81bb      	LDD  R27,Y+2+1
00353f efef      	LDI  R30,LOW(65535)
003540 efff      	LDI  R31,HIGH(65535)
003541 93ed      	ST   X+,R30
003542 93fc      	ST   X,R31
                 _0x202001B:
003543 8119      	LDD  R17,Y+1
003544 8108      	LDD  R16,Y+0
                 _0x20C000A:
003545 9625      	ADIW R28,5
003546 9508      	RET
                 ; .FEND
                 __ftoe_G101:
                 ; .FSTART __ftoe_G101
003547 93ba      	ST   -Y,R27
003548 93aa      	ST   -Y,R26
003549 9724      	SBIW R28,4
00354a e0e0      	LDI  R30,LOW(0)
00354b 83e8      	ST   Y,R30
00354c 83e9      	STD  Y+1,R30
00354d e8e0      	LDI  R30,LOW(128)
00354e 83ea      	STD  Y+2,R30
00354f e3ef      	LDI  R30,LOW(63)
003550 83eb      	STD  Y+3,R30
003551 940e 3f8b 	CALL __SAVELOCR4
003553 85ee      	LDD  R30,Y+14
003554 85ff      	LDD  R31,Y+14+1
003555 3fef      	CPI  R30,LOW(0xFFFF)
003556 efaf      	LDI  R26,HIGH(0xFFFF)
003557 07fa      	CPC  R31,R26
003558 f449      	BRNE _0x202001F
003559 85e8      	LDD  R30,Y+8
00355a 85f9      	LDD  R31,Y+8+1
00355b 93fa      	ST   -Y,R31
00355c 93ea      	ST   -Y,R30
                +
00355d e3ae     +LDI R26 , LOW ( 2 * _0x2020000 + ( 0 ) )
00355e e0b5     +LDI R27 , HIGH ( 2 * _0x2020000 + ( 0 ) )
                 	__POINTW2FN _0x2020000,0
00355f 940e 34e1 	CALL _strcpyf
003561 c144      	RJMP _0x20C0009
                 _0x202001F:
003562 3fef      	CPI  R30,LOW(0x7FFF)
003563 e7af      	LDI  R26,HIGH(0x7FFF)
003564 07fa      	CPC  R31,R26
003565 f449      	BRNE _0x202001E
003566 85e8      	LDD  R30,Y+8
003567 85f9      	LDD  R31,Y+8+1
003568 93fa      	ST   -Y,R31
003569 93ea      	ST   -Y,R30
                +
00356a e3af     +LDI R26 , LOW ( 2 * _0x2020000 + ( 1 ) )
00356b e0b5     +LDI R27 , HIGH ( 2 * _0x2020000 + ( 1 ) )
                 	__POINTW2FN _0x2020000,1
00356c 940e 34e1 	CALL _strcpyf
00356e c137      	RJMP _0x20C0009
                 _0x202001E:
00356f 85ab      	LDD  R26,Y+11
003570 30a7      	CPI  R26,LOW(0x7)
003571 f010      	BRLO _0x2020021
003572 e0e6      	LDI  R30,LOW(6)
003573 87eb      	STD  Y+11,R30
                 _0x2020021:
003574 851b      	LDD  R17,Y+11
                 _0x2020022:
003575 2fe1      	MOV  R30,R17
003576 5011      	SUBI R17,1
003577 30e0      	CPI  R30,0
003578 f079      	BREQ _0x2020024
                +
003579 81ac     +LDD R26 , Y + 4
00357a 81bd     +LDD R27 , Y + 4 + 1
00357b 818e     +LDD R24 , Y + 4 + 2
00357c 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                +
00357d e0e0     +LDI R30 , LOW ( 0x41200000 )
00357e e0f0     +LDI R31 , HIGH ( 0x41200000 )
00357f e260     +LDI R22 , BYTE3 ( 0x41200000 )
003580 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
003581 940e 3d19 	CALL __MULF12
                +
003583 83ec     +STD Y + 4 , R30
003584 83fd     +STD Y + 4 + 1 , R31
003585 836e     +STD Y + 4 + 2 , R22
003586 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
003587 cfed      	RJMP _0x2020022
                 _0x2020024:
                +
003588 85ec     +LDD R30 , Y + 12
003589 85fd     +LDD R31 , Y + 12 + 1
00358a 856e     +LDD R22 , Y + 12 + 2
00358b 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
00358c 940e 3f71 	CALL __CPD10
00358e f481      	BRNE _0x2020025
00358f e030      	LDI  R19,LOW(0)
                +
003590 81ac     +LDD R26 , Y + 4
003591 81bd     +LDD R27 , Y + 4 + 1
003592 818e     +LDD R24 , Y + 4 + 2
003593 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                +
003594 e0e0     +LDI R30 , LOW ( 0x41200000 )
003595 e0f0     +LDI R31 , HIGH ( 0x41200000 )
003596 e260     +LDI R22 , BYTE3 ( 0x41200000 )
003597 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
003598 940e 3d19 	CALL __MULF12
                +
00359a 83ec     +STD Y + 4 , R30
00359b 83fd     +STD Y + 4 + 1 , R31
00359c 836e     +STD Y + 4 + 2 , R22
00359d 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
00359e c07d      	RJMP _0x2020026
                 _0x2020025:
00359f 853b      	LDD  R19,Y+11
                +
0035a0 81ec     +LDD R30 , Y + 4
0035a1 81fd     +LDD R31 , Y + 4 + 1
0035a2 816e     +LDD R22 , Y + 4 + 2
0035a3 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
                +
0035a4 85ac     +LDD R26 , Y + 12
0035a5 85bd     +LDD R27 , Y + 12 + 1
0035a6 858e     +LDD R24 , Y + 12 + 2
0035a7 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
0035a8 940e 3dac 	CALL __CMPF12
0035aa f009      	BREQ PC+2
0035ab f408      	BRCC PC+2
0035ac c026      	RJMP _0x2020027
                +
0035ad 81ac     +LDD R26 , Y + 4
0035ae 81bd     +LDD R27 , Y + 4 + 1
0035af 818e     +LDD R24 , Y + 4 + 2
0035b0 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                +
0035b1 e0e0     +LDI R30 , LOW ( 0x41200000 )
0035b2 e0f0     +LDI R31 , HIGH ( 0x41200000 )
0035b3 e260     +LDI R22 , BYTE3 ( 0x41200000 )
0035b4 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
0035b5 940e 3d19 	CALL __MULF12
                +
0035b7 83ec     +STD Y + 4 , R30
0035b8 83fd     +STD Y + 4 + 1 , R31
0035b9 836e     +STD Y + 4 + 2 , R22
0035ba 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 _0x2020028:
                +
0035bb 81ec     +LDD R30 , Y + 4
0035bc 81fd     +LDD R31 , Y + 4 + 1
0035bd 816e     +LDD R22 , Y + 4 + 2
0035be 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
                +
0035bf 85ac     +LDD R26 , Y + 12
0035c0 85bd     +LDD R27 , Y + 12 + 1
0035c1 858e     +LDD R24 , Y + 12 + 2
0035c2 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
0035c3 940e 3dac 	CALL __CMPF12
0035c5 f060      	BRLO _0x202002A
                +
0035c6 eced     +LDI R30 , LOW ( 0x3DCCCCCD )
0035c7 ecfc     +LDI R31 , HIGH ( 0x3DCCCCCD )
0035c8 ec6c     +LDI R22 , BYTE3 ( 0x3DCCCCCD )
0035c9 e37d     +LDI R23 , BYTE4 ( 0x3DCCCCCD )
                 	__GETD1N 0x3DCCCCCD
0035ca 940e 3d19 	CALL __MULF12
                +
0035cc 87ec     +STD Y + 12 , R30
0035cd 87fd     +STD Y + 12 + 1 , R31
0035ce 876e     +STD Y + 12 + 2 , R22
0035cf 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
0035d0 5f3f      	SUBI R19,-LOW(1)
0035d1 cfe9      	RJMP _0x2020028
                 _0x202002A:
0035d2 c025      	RJMP _0x202002B
                 _0x2020027:
                 _0x202002C:
                +
0035d3 81ec     +LDD R30 , Y + 4
0035d4 81fd     +LDD R31 , Y + 4 + 1
0035d5 816e     +LDD R22 , Y + 4 + 2
0035d6 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
                +
0035d7 85ac     +LDD R26 , Y + 12
0035d8 85bd     +LDD R27 , Y + 12 + 1
0035d9 858e     +LDD R24 , Y + 12 + 2
0035da 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
0035db 940e 3dac 	CALL __CMPF12
0035dd f460      	BRSH _0x202002E
                +
0035de e0e0     +LDI R30 , LOW ( 0x41200000 )
0035df e0f0     +LDI R31 , HIGH ( 0x41200000 )
0035e0 e260     +LDI R22 , BYTE3 ( 0x41200000 )
0035e1 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
0035e2 940e 3d19 	CALL __MULF12
                +
0035e4 87ec     +STD Y + 12 , R30
0035e5 87fd     +STD Y + 12 + 1 , R31
0035e6 876e     +STD Y + 12 + 2 , R22
0035e7 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
0035e8 5031      	SUBI R19,LOW(1)
0035e9 cfe9      	RJMP _0x202002C
                 _0x202002E:
                +
0035ea 81ac     +LDD R26 , Y + 4
0035eb 81bd     +LDD R27 , Y + 4 + 1
0035ec 818e     +LDD R24 , Y + 4 + 2
0035ed 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                +
0035ee e0e0     +LDI R30 , LOW ( 0x41200000 )
0035ef e0f0     +LDI R31 , HIGH ( 0x41200000 )
0035f0 e260     +LDI R22 , BYTE3 ( 0x41200000 )
0035f1 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
0035f2 940e 3d19 	CALL __MULF12
                +
0035f4 83ec     +STD Y + 4 , R30
0035f5 83fd     +STD Y + 4 + 1 , R31
0035f6 836e     +STD Y + 4 + 2 , R22
0035f7 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                 _0x202002B:
                +
0035f8 85ec     +LDD R30 , Y + 12
0035f9 85fd     +LDD R31 , Y + 12 + 1
0035fa 856e     +LDD R22 , Y + 12 + 2
0035fb 857f     +LDD R23 , Y + 12 + 3
                 	__GETD1S 12
                +
0035fc e0a0     +LDI R26 , LOW ( 0x3F000000 )
0035fd e0b0     +LDI R27 , HIGH ( 0x3F000000 )
0035fe e080     +LDI R24 , BYTE3 ( 0x3F000000 )
0035ff e39f     +LDI R25 , BYTE4 ( 0x3F000000 )
                 	__GETD2N 0x3F000000
003600 940e 3cc9 	CALL __ADDF12
                +
003602 87ec     +STD Y + 12 , R30
003603 87fd     +STD Y + 12 + 1 , R31
003604 876e     +STD Y + 12 + 2 , R22
003605 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                +
003606 81ec     +LDD R30 , Y + 4
003607 81fd     +LDD R31 , Y + 4 + 1
003608 816e     +LDD R22 , Y + 4 + 2
003609 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
                +
00360a 85ac     +LDD R26 , Y + 12
00360b 85bd     +LDD R27 , Y + 12 + 1
00360c 858e     +LDD R24 , Y + 12 + 2
00360d 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
00360e 940e 3dac 	CALL __CMPF12
003610 f058      	BRLO _0x202002F
                +
003611 eced     +LDI R30 , LOW ( 0x3DCCCCCD )
003612 ecfc     +LDI R31 , HIGH ( 0x3DCCCCCD )
003613 ec6c     +LDI R22 , BYTE3 ( 0x3DCCCCCD )
003614 e37d     +LDI R23 , BYTE4 ( 0x3DCCCCCD )
                 	__GETD1N 0x3DCCCCCD
003615 940e 3d19 	CALL __MULF12
                +
003617 87ec     +STD Y + 12 , R30
003618 87fd     +STD Y + 12 + 1 , R31
003619 876e     +STD Y + 12 + 2 , R22
00361a 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
00361b 5f3f      	SUBI R19,-LOW(1)
                 _0x202002F:
                 _0x2020026:
00361c e010      	LDI  R17,LOW(0)
                 _0x2020030:
00361d 85eb      	LDD  R30,Y+11
00361e 17e1      	CP   R30,R17
00361f f408      	BRSH PC+2
003620 c04f      	RJMP _0x2020032
                +
003621 81ac     +LDD R26 , Y + 4
003622 81bd     +LDD R27 , Y + 4 + 1
003623 818e     +LDD R24 , Y + 4 + 2
003624 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
                +
003625 eced     +LDI R30 , LOW ( 0x3DCCCCCD )
003626 ecfc     +LDI R31 , HIGH ( 0x3DCCCCCD )
003627 ec6c     +LDI R22 , BYTE3 ( 0x3DCCCCCD )
003628 e37d     +LDI R23 , BYTE4 ( 0x3DCCCCCD )
                 	__GETD1N 0x3DCCCCCD
003629 940e 3d19 	CALL __MULF12
                +
00362b e0a0     +LDI R26 , LOW ( 0x3F000000 )
00362c e0b0     +LDI R27 , HIGH ( 0x3F000000 )
00362d e080     +LDI R24 , BYTE3 ( 0x3F000000 )
00362e e39f     +LDI R25 , BYTE4 ( 0x3F000000 )
                 	__GETD2N 0x3F000000
00362f 940e 3cc9 	CALL __ADDF12
003631 01df      	MOVW R26,R30
003632 01cb      	MOVW R24,R22
003633 940e 3c02 	CALL _floor
                +
003635 83ec     +STD Y + 4 , R30
003636 83fd     +STD Y + 4 + 1 , R31
003637 836e     +STD Y + 4 + 2 , R22
003638 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
                +
003639 85ac     +LDD R26 , Y + 12
00363a 85bd     +LDD R27 , Y + 12 + 1
00363b 858e     +LDD R24 , Y + 12 + 2
00363c 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
00363d 940e 3d67 	CALL __DIVF21
00363f 940e 3c56 	CALL __CFD1U
003641 2f0e      	MOV  R16,R30
003642 85a8      	LDD  R26,Y+8
003643 85b9      	LDD  R27,Y+8+1
003644 9611      	ADIW R26,1
003645 87a8      	STD  Y+8,R26
003646 87b9      	STD  Y+8+1,R27
003647 9711      	SBIW R26,1
003648 5de0      	SUBI R30,-LOW(48)
003649 93ec      	ST   X,R30
00364a 2fe0      	MOV  R30,R16
00364b 27ff      	CLR  R31
00364c 2766      	CLR  R22
00364d 2777      	CLR  R23
00364e 940e 3c8f 	CALL __CDF1
                +
003650 81ac     +LDD R26 , Y + 4
003651 81bd     +LDD R27 , Y + 4 + 1
003652 818e     +LDD R24 , Y + 4 + 2
003653 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
003654 940e 3d19 	CALL __MULF12
                +
003656 85ac     +LDD R26 , Y + 12
003657 85bd     +LDD R27 , Y + 12 + 1
003658 858e     +LDD R24 , Y + 12 + 2
003659 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
00365a 940e 3f64 	CALL __SWAPD12
00365c 940e 3cc2 	CALL __SUBF12
                +
00365e 87ec     +STD Y + 12 , R30
00365f 87fd     +STD Y + 12 + 1 , R31
003660 876e     +STD Y + 12 + 2 , R22
003661 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
003662 2fe1      	MOV  R30,R17
003663 5f1f      	SUBI R17,-1
003664 30e0      	CPI  R30,0
003665 f009      	BREQ _0x2020033
003666 cfb6      	RJMP _0x2020030
                 _0x2020033:
003667 85a8      	LDD  R26,Y+8
003668 85b9      	LDD  R27,Y+8+1
003669 9611      	ADIW R26,1
00366a 87a8      	STD  Y+8,R26
00366b 87b9      	STD  Y+8+1,R27
00366c 9711      	SBIW R26,1
00366d e2ee      	LDI  R30,LOW(46)
00366e 93ec      	ST   X,R30
00366f cfad      	RJMP _0x2020030
                 _0x2020032:
003670 85e8      	LDD  R30,Y+8
003671 85f9      	LDD  R31,Y+8+1
003672 9631      	ADIW R30,1
003673 87e8      	STD  Y+8,R30
003674 87f9      	STD  Y+8+1,R31
003675 9731      	SBIW R30,1
003676 85aa      	LDD  R26,Y+10
003677 83a0      	STD  Z+0,R26
003678 3030      	CPI  R19,0
003679 f42c      	BRGE _0x2020034
00367a 9531      	NEG  R19
00367b 85a8      	LDD  R26,Y+8
00367c 85b9      	LDD  R27,Y+8+1
00367d e2ed      	LDI  R30,LOW(45)
00367e c003      	RJMP _0x2020119
                 _0x2020034:
00367f 85a8      	LDD  R26,Y+8
003680 85b9      	LDD  R27,Y+8+1
003681 e2eb      	LDI  R30,LOW(43)
                 _0x2020119:
003682 93ec      	ST   X,R30
003683 85e8      	LDD  R30,Y+8
003684 85f9      	LDD  R31,Y+8+1
003685 9631      	ADIW R30,1
003686 87e8      	STD  Y+8,R30
003687 87f9      	STD  Y+8+1,R31
003688 9631      	ADIW R30,1
003689 87e8      	STD  Y+8,R30
00368a 87f9      	STD  Y+8+1,R31
00368b 9731      	SBIW R30,1
00368c 01bf      	MOVW R22,R30
00368d 2fa3      	MOV  R26,R19
00368e e0ea      	LDI  R30,LOW(10)
00368f 940e 3ea9 	CALL __DIVB21
003691 5de0      	SUBI R30,-LOW(48)
003692 01db      	MOVW R26,R22
003693 93ec      	ST   X,R30
003694 85e8      	LDD  R30,Y+8
003695 85f9      	LDD  R31,Y+8+1
003696 9631      	ADIW R30,1
003697 87e8      	STD  Y+8,R30
003698 87f9      	STD  Y+8+1,R31
003699 9731      	SBIW R30,1
00369a 01bf      	MOVW R22,R30
00369b 2fa3      	MOV  R26,R19
00369c e0ea      	LDI  R30,LOW(10)
00369d 940e 3ef0 	CALL __MODB21
00369f 5de0      	SUBI R30,-LOW(48)
0036a0 01db      	MOVW R26,R22
0036a1 93ec      	ST   X,R30
0036a2 85a8      	LDD  R26,Y+8
0036a3 85b9      	LDD  R27,Y+8+1
0036a4 e0e0      	LDI  R30,LOW(0)
0036a5 93ec      	ST   X,R30
                 _0x20C0009:
0036a6 940e 3f92 	CALL __LOADLOCR4
0036a8 9660      	ADIW R28,16
0036a9 9508      	RET
                 ; .FEND
                 __print_G101:
                 ; .FSTART __print_G101
0036aa 93ba      	ST   -Y,R27
0036ab 93aa      	ST   -Y,R26
0036ac 97ef      	SBIW R28,63
0036ad 9761      	SBIW R28,17
0036ae 940e 3f89 	CALL __SAVELOCR6
0036b0 e010      	LDI  R17,0
                +
0036b1 01fe     +MOVW R30 , R28
0036b2 5ae8     +SUBI R30 , LOW ( - 88 )
0036b3 4fff     +SBCI R31 , HIGH ( - 88 )
0036b4 9001     +LD R0 , Z +
0036b5 81f0     +LD R31 , Z
0036b6 2de0     +MOV R30 , R0
                 	__GETW1SX 88
0036b7 87e8      	STD  Y+8,R30
0036b8 87f9      	STD  Y+8+1,R31
                +
0036b9 01fe     +MOVW R30 , R28
0036ba 5aea     +SUBI R30 , LOW ( - 86 )
0036bb 4fff     +SBCI R31 , HIGH ( - 86 )
0036bc 9001     +LD R0 , Z +
0036bd 81f0     +LD R31 , Z
0036be 2de0     +MOV R30 , R0
                 	__GETW1SX 86
0036bf 83ee      	STD  Y+6,R30
0036c0 83ff      	STD  Y+6+1,R31
0036c1 81ae      	LDD  R26,Y+6
0036c2 81bf      	LDD  R27,Y+6+1
0036c3 e0e0      	LDI  R30,LOW(0)
0036c4 e0f0      	LDI  R31,HIGH(0)
0036c5 93ed      	ST   X+,R30
0036c6 93fc      	ST   X,R31
                 _0x2020036:
0036c7 01de      	MOVW R26,R28
0036c8 5aa4      	SUBI R26,LOW(-(92))
0036c9 4fbf      	SBCI R27,HIGH(-(92))
0036ca 91ed      	LD   R30,X+
0036cb 91fd      	LD   R31,X+
0036cc 9631      	ADIW R30,1
0036cd 93fe      	ST   -X,R31
0036ce 93ee      	ST   -X,R30
0036cf 9731      	SBIW R30,1
0036d0 91e4      	LPM  R30,Z
0036d1 2f2e      	MOV  R18,R30
0036d2 30e0      	CPI  R30,0
0036d3 f409      	BRNE PC+2
0036d4 c2b9      	RJMP _0x2020038
0036d5 2fe1      	MOV  R30,R17
0036d6 30e0      	CPI  R30,0
0036d7 f459      	BRNE _0x202003C
0036d8 3225      	CPI  R18,37
0036d9 f411      	BRNE _0x202003D
0036da e011      	LDI  R17,LOW(1)
0036db c006      	RJMP _0x202003E
                 _0x202003D:
0036dc 932a      	ST   -Y,R18
0036dd 81af      	LDD  R26,Y+7
0036de 85b8      	LDD  R27,Y+7+1
0036df 85e9      	LDD  R30,Y+9
0036e0 85fa      	LDD  R31,Y+9+1
0036e1 9509      	ICALL
                 _0x202003E:
0036e2 c2aa      	RJMP _0x202003B
                 _0x202003C:
0036e3 30e1      	CPI  R30,LOW(0x1)
0036e4 f4e1      	BRNE _0x202003F
0036e5 3225      	CPI  R18,37
0036e6 f439      	BRNE _0x2020040
0036e7 932a      	ST   -Y,R18
0036e8 81af      	LDD  R26,Y+7
0036e9 85b8      	LDD  R27,Y+7+1
0036ea 85e9      	LDD  R30,Y+9
0036eb 85fa      	LDD  R31,Y+9+1
0036ec 9509      	ICALL
0036ed c29e      	RJMP _0x202011A
                 _0x2020040:
0036ee e012      	LDI  R17,LOW(2)
0036ef e0e0      	LDI  R30,LOW(0)
0036f0 8bed      	STD  Y+21,R30
0036f1 e000      	LDI  R16,LOW(0)
0036f2 322d      	CPI  R18,45
0036f3 f411      	BRNE _0x2020041
0036f4 e001      	LDI  R16,LOW(1)
0036f5 c297      	RJMP _0x202003B
                 _0x2020041:
0036f6 322b      	CPI  R18,43
0036f7 f419      	BRNE _0x2020042
0036f8 e2eb      	LDI  R30,LOW(43)
0036f9 8bed      	STD  Y+21,R30
0036fa c292      	RJMP _0x202003B
                 _0x2020042:
0036fb 3220      	CPI  R18,32
0036fc f419      	BRNE _0x2020043
0036fd e2e0      	LDI  R30,LOW(32)
0036fe 8bed      	STD  Y+21,R30
0036ff c28d      	RJMP _0x202003B
                 _0x2020043:
003700 c002      	RJMP _0x2020044
                 _0x202003F:
003701 30e2      	CPI  R30,LOW(0x2)
003702 f439      	BRNE _0x2020045
                 _0x2020044:
003703 e050      	LDI  R21,LOW(0)
003704 e013      	LDI  R17,LOW(3)
003705 3320      	CPI  R18,48
003706 f411      	BRNE _0x2020046
003707 6800      	ORI  R16,LOW(128)
003708 c284      	RJMP _0x202003B
                 _0x2020046:
003709 c002      	RJMP _0x2020047
                 _0x2020045:
00370a 30e3      	CPI  R30,LOW(0x3)
00370b f491      	BRNE _0x2020048
                 _0x2020047:
00370c 3320      	CPI  R18,48
00370d f010      	BRLO _0x202004A
00370e 332a      	CPI  R18,58
00370f f008      	BRLO _0x202004B
                 _0x202004A:
003710 c007      	RJMP _0x2020049
                 _0x202004B:
003711 e0aa      	LDI  R26,LOW(10)
003712 9f5a      	MUL  R21,R26
003713 2d50      	MOV  R21,R0
003714 2fe2      	MOV  R30,R18
003715 53e0      	SUBI R30,LOW(48)
003716 0f5e      	ADD  R21,R30
003717 c275      	RJMP _0x202003B
                 _0x2020049:
003718 e040      	LDI  R20,LOW(0)
003719 322e      	CPI  R18,46
00371a f411      	BRNE _0x202004C
00371b e014      	LDI  R17,LOW(4)
00371c c270      	RJMP _0x202003B
                 _0x202004C:
00371d c00f      	RJMP _0x202004D
                 _0x2020048:
00371e 30e4      	CPI  R30,LOW(0x4)
00371f f499      	BRNE _0x202004F
003720 3320      	CPI  R18,48
003721 f010      	BRLO _0x2020051
003722 332a      	CPI  R18,58
003723 f008      	BRLO _0x2020052
                 _0x2020051:
003724 c008      	RJMP _0x2020050
                 _0x2020052:
003725 6200      	ORI  R16,LOW(32)
003726 e0aa      	LDI  R26,LOW(10)
003727 9f4a      	MUL  R20,R26
003728 2d40      	MOV  R20,R0
003729 2fe2      	MOV  R30,R18
00372a 53e0      	SUBI R30,LOW(48)
00372b 0f4e      	ADD  R20,R30
00372c c260      	RJMP _0x202003B
                 _0x2020050:
                 _0x202004D:
00372d 362c      	CPI  R18,108
00372e f419      	BRNE _0x2020053
00372f 6002      	ORI  R16,LOW(2)
003730 e015      	LDI  R17,LOW(5)
003731 c25b      	RJMP _0x202003B
                 _0x2020053:
003732 c003      	RJMP _0x2020054
                 _0x202004F:
003733 30e5      	CPI  R30,LOW(0x5)
003734 f009      	BREQ PC+2
003735 c257      	RJMP _0x202003B
                 _0x2020054:
003736 2fe2      	MOV  R30,R18
003737 36e3      	CPI  R30,LOW(0x63)
003738 f4a1      	BRNE _0x2020059
                +
003739 01fe     +MOVW R30 , R28
00373a 5ae6     +SUBI R30 , LOW ( - 90 )
00373b 4fff     +SBCI R31 , HIGH ( - 90 )
00373c 9001     +LD R0 , Z +
00373d 81f0     +LD R31 , Z
00373e 2de0     +MOV R30 , R0
                 	__GETW1SX 90
00373f 9734      	SBIW R30,4
                +
003740 01de     +MOVW R26 , R28
003741 5aa6     +SUBI R26 , LOW ( - 90 )
003742 4fbf     +SBCI R27 , HIGH ( - 90 )
003743 93ed     +ST X + , R30
003744 93fc     +ST X , R31
                 	__PUTW1SX 90
003745 81a4      	LDD  R26,Z+4
003746 93aa      	ST   -Y,R26
003747 81af      	LDD  R26,Y+7
003748 85b8      	LDD  R27,Y+7+1
003749 85e9      	LDD  R30,Y+9
00374a 85fa      	LDD  R31,Y+9+1
00374b 9509      	ICALL
00374c c23f      	RJMP _0x202005A
                 _0x2020059:
00374d 34e5      	CPI  R30,LOW(0x45)
00374e f011      	BREQ _0x202005D
00374f 36e5      	CPI  R30,LOW(0x65)
003750 f409      	BRNE _0x202005E
                 _0x202005D:
003751 c003      	RJMP _0x202005F
                 _0x202005E:
003752 36e6      	CPI  R30,LOW(0x66)
003753 f009      	BREQ PC+2
003754 c068      	RJMP _0x2020060
                 _0x202005F:
003755 01fe      	MOVW R30,R28
003756 9676      	ADIW R30,22
003757 87ee      	STD  Y+14,R30
003758 87ff      	STD  Y+14+1,R31
                +
003759 01de     +MOVW R26 , R28
00375a 5aa6     +SUBI R26 , LOW ( - 90 )
00375b 4fbf     +SBCI R27 , HIGH ( - 90 )
00375c 900d     +LD R0 , X +
00375d 91bc     +LD R27 , X
00375e 2da0     +MOV R26 , R0
                 	__GETW2SX 90
00375f 940e 3f31 	CALL __GETD1P
                +
003761 87ea     +STD Y + 10 , R30
003762 87fb     +STD Y + 10 + 1 , R31
003763 876c     +STD Y + 10 + 2 , R22
003764 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                +
003765 01fe     +MOVW R30 , R28
003766 5ae6     +SUBI R30 , LOW ( - 90 )
003767 4fff     +SBCI R31 , HIGH ( - 90 )
003768 9001     +LD R0 , Z +
003769 81f0     +LD R31 , Z
00376a 2de0     +MOV R30 , R0
                 	__GETW1SX 90
00376b 9734      	SBIW R30,4
                +
00376c 01de     +MOVW R26 , R28
00376d 5aa6     +SUBI R26 , LOW ( - 90 )
00376e 4fbf     +SBCI R27 , HIGH ( - 90 )
00376f 93ed     +ST X + , R30
003770 93fc     +ST X , R31
                 	__PUTW1SX 90
003771 85ad      	LDD  R26,Y+13
003772 23aa      	TST  R26
003773 f032      	BRMI _0x2020061
003774 89ad      	LDD  R26,Y+21
003775 32ab      	CPI  R26,LOW(0x2B)
003776 f079      	BREQ _0x2020063
003777 32a0      	CPI  R26,LOW(0x20)
003778 f0b9      	BREQ _0x2020065
003779 c01e      	RJMP _0x2020066
                 _0x2020061:
                +
00377a 85ea     +LDD R30 , Y + 10
00377b 85fb     +LDD R31 , Y + 10 + 1
00377c 856c     +LDD R22 , Y + 10 + 2
00377d 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
00377e 940e 3c23 	CALL __ANEGF1
                +
003780 87ea     +STD Y + 10 , R30
003781 87fb     +STD Y + 10 + 1 , R31
003782 876c     +STD Y + 10 + 2 , R22
003783 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
003784 e2ed      	LDI  R30,LOW(45)
003785 8bed      	STD  Y+21,R30
                 _0x2020063:
003786 ff07      	SBRS R16,7
003787 c008      	RJMP _0x2020067
003788 89ed      	LDD  R30,Y+21
003789 93ea      	ST   -Y,R30
00378a 81af      	LDD  R26,Y+7
00378b 85b8      	LDD  R27,Y+7+1
00378c 85e9      	LDD  R30,Y+9
00378d 85fa      	LDD  R31,Y+9+1
00378e 9509      	ICALL
00378f c008      	RJMP _0x2020068
                 _0x2020067:
                 _0x2020065:
003790 85ee      	LDD  R30,Y+14
003791 85ff      	LDD  R31,Y+14+1
003792 9631      	ADIW R30,1
003793 87ee      	STD  Y+14,R30
003794 87ff      	STD  Y+14+1,R31
003795 9731      	SBIW R30,1
003796 89ad      	LDD  R26,Y+21
003797 83a0      	STD  Z+0,R26
                 _0x2020068:
                 _0x2020066:
003798 ff05      	SBRS R16,5
003799 e046      	LDI  R20,LOW(6)
00379a 3626      	CPI  R18,102
00379b f461      	BRNE _0x202006A
                +
00379c 85ea     +LDD R30 , Y + 10
00379d 85fb     +LDD R31 , Y + 10 + 1
00379e 856c     +LDD R22 , Y + 10 + 2
00379f 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
0037a0 940e 3f5a 	CALL __PUTPARD1
0037a2 934a      	ST   -Y,R20
0037a3 89ab      	LDD  R26,Y+19
0037a4 89bc      	LDD  R27,Y+19+1
0037a5 940e 39d3 	CALL _ftoa
0037a7 c00b      	RJMP _0x202006B
                 _0x202006A:
                +
0037a8 85ea     +LDD R30 , Y + 10
0037a9 85fb     +LDD R31 , Y + 10 + 1
0037aa 856c     +LDD R22 , Y + 10 + 2
0037ab 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
0037ac 940e 3f5a 	CALL __PUTPARD1
0037ae 934a      	ST   -Y,R20
0037af 932a      	ST   -Y,R18
0037b0 89ac      	LDD  R26,Y+20
0037b1 89bd      	LDD  R27,Y+20+1
0037b2 dd94      	RCALL __ftoe_G101
                 _0x202006B:
0037b3 01fe      	MOVW R30,R28
0037b4 9676      	ADIW R30,22
0037b5 87ee      	STD  Y+14,R30
0037b6 87ff      	STD  Y+14+1,R31
0037b7 85ae      	LDD  R26,Y+14
0037b8 85bf      	LDD  R27,Y+14+1
0037b9 940e 34ee 	CALL _strlen
0037bb 2f1e      	MOV  R17,R30
0037bc c045      	RJMP _0x202006C
                 _0x2020060:
0037bd 37e3      	CPI  R30,LOW(0x73)
0037be f4e9      	BRNE _0x202006E
                +
0037bf 01fe     +MOVW R30 , R28
0037c0 5ae6     +SUBI R30 , LOW ( - 90 )
0037c1 4fff     +SBCI R31 , HIGH ( - 90 )
0037c2 9001     +LD R0 , Z +
0037c3 81f0     +LD R31 , Z
0037c4 2de0     +MOV R30 , R0
                 	__GETW1SX 90
0037c5 9734      	SBIW R30,4
                +
0037c6 01de     +MOVW R26 , R28
0037c7 5aa6     +SUBI R26 , LOW ( - 90 )
0037c8 4fbf     +SBCI R27 , HIGH ( - 90 )
0037c9 93ed     +ST X + , R30
0037ca 93fc     +ST X , R31
                 	__PUTW1SX 90
                +
0037cb 01de     +MOVW R26 , R28
0037cc 5aa6     +SUBI R26 , LOW ( - 90 )
0037cd 4fbf     +SBCI R27 , HIGH ( - 90 )
0037ce 900d     +LD R0 , X +
0037cf 91bc     +LD R27 , X
0037d0 2da0     +MOV R26 , R0
                 	__GETW2SX 90
0037d1 9614      	ADIW R26,4
0037d2 940e 3f2d 	CALL __GETW1P
0037d4 87ee      	STD  Y+14,R30
0037d5 87ff      	STD  Y+14+1,R31
0037d6 85ae      	LDD  R26,Y+14
0037d7 85bf      	LDD  R27,Y+14+1
0037d8 940e 34ee 	CALL _strlen
0037da 2f1e      	MOV  R17,R30
0037db c01f      	RJMP _0x202006F
                 _0x202006E:
0037dc 37e0      	CPI  R30,LOW(0x70)
0037dd f549      	BRNE _0x2020071
                +
0037de 01fe     +MOVW R30 , R28
0037df 5ae6     +SUBI R30 , LOW ( - 90 )
0037e0 4fff     +SBCI R31 , HIGH ( - 90 )
0037e1 9001     +LD R0 , Z +
0037e2 81f0     +LD R31 , Z
0037e3 2de0     +MOV R30 , R0
                 	__GETW1SX 90
0037e4 9734      	SBIW R30,4
                +
0037e5 01de     +MOVW R26 , R28
0037e6 5aa6     +SUBI R26 , LOW ( - 90 )
0037e7 4fbf     +SBCI R27 , HIGH ( - 90 )
0037e8 93ed     +ST X + , R30
0037e9 93fc     +ST X , R31
                 	__PUTW1SX 90
                +
0037ea 01de     +MOVW R26 , R28
0037eb 5aa6     +SUBI R26 , LOW ( - 90 )
0037ec 4fbf     +SBCI R27 , HIGH ( - 90 )
0037ed 900d     +LD R0 , X +
0037ee 91bc     +LD R27 , X
0037ef 2da0     +MOV R26 , R0
                 	__GETW2SX 90
0037f0 9614      	ADIW R26,4
0037f1 940e 3f2d 	CALL __GETW1P
0037f3 87ee      	STD  Y+14,R30
0037f4 87ff      	STD  Y+14+1,R31
0037f5 85ae      	LDD  R26,Y+14
0037f6 85bf      	LDD  R27,Y+14+1
0037f7 940e 34fa 	CALL _strlenf
0037f9 2f1e      	MOV  R17,R30
0037fa 6008      	ORI  R16,LOW(8)
                 _0x202006F:
0037fb 770f      	ANDI R16,LOW(127)
0037fc 3040      	CPI  R20,0
0037fd f011      	BREQ _0x2020073
0037fe 1741      	CP   R20,R17
0037ff f008      	BRLO _0x2020074
                 _0x2020073:
003800 c001      	RJMP _0x2020072
                 _0x2020074:
003801 2f14      	MOV  R17,R20
                 _0x2020072:
                 _0x202006C:
003802 e040      	LDI  R20,LOW(0)
003803 e0e0      	LDI  R30,LOW(0)
003804 8bec      	STD  Y+20,R30
003805 e030      	LDI  R19,LOW(0)
003806 c0a9      	RJMP _0x2020075
                 _0x2020071:
003807 36e4      	CPI  R30,LOW(0x64)
003808 f011      	BREQ _0x2020078
003809 36e9      	CPI  R30,LOW(0x69)
00380a f411      	BRNE _0x2020079
                 _0x2020078:
00380b 6004      	ORI  R16,LOW(4)
00380c c002      	RJMP _0x202007A
                 _0x2020079:
00380d 37e5      	CPI  R30,LOW(0x75)
00380e f4c1      	BRNE _0x202007B
                 _0x202007A:
00380f e0ea      	LDI  R30,LOW(10)
003810 8bec      	STD  Y+20,R30
003811 ff01      	SBRS R16,1
003812 c00a      	RJMP _0x202007C
                +
003813 e0e0     +LDI R30 , LOW ( 0x3B9ACA00 )
003814 ecfa     +LDI R31 , HIGH ( 0x3B9ACA00 )
003815 e96a     +LDI R22 , BYTE3 ( 0x3B9ACA00 )
003816 e37b     +LDI R23 , BYTE4 ( 0x3B9ACA00 )
                 	__GETD1N 0x3B9ACA00
                +
003817 8be8     +STD Y + 16 , R30
003818 8bf9     +STD Y + 16 + 1 , R31
003819 8b6a     +STD Y + 16 + 2 , R22
00381a 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
00381b e01a      	LDI  R17,LOW(10)
00381c c028      	RJMP _0x202007D
                 _0x202007C:
                +
00381d e1e0     +LDI R30 , LOW ( 0x2710 )
00381e e2f7     +LDI R31 , HIGH ( 0x2710 )
00381f e060     +LDI R22 , BYTE3 ( 0x2710 )
003820 e070     +LDI R23 , BYTE4 ( 0x2710 )
                 	__GETD1N 0x2710
                +
003821 8be8     +STD Y + 16 , R30
003822 8bf9     +STD Y + 16 + 1 , R31
003823 8b6a     +STD Y + 16 + 2 , R22
003824 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
003825 e015      	LDI  R17,LOW(5)
003826 c01e      	RJMP _0x202007D
                 _0x202007B:
003827 35e8      	CPI  R30,LOW(0x58)
003828 f411      	BRNE _0x202007F
003829 6008      	ORI  R16,LOW(8)
00382a c003      	RJMP _0x2020080
                 _0x202007F:
00382b 37e8      	CPI  R30,LOW(0x78)
00382c f009      	BREQ PC+2
00382d c15e      	RJMP _0x20200BE
                 _0x2020080:
00382e e1e0      	LDI  R30,LOW(16)
00382f 8bec      	STD  Y+20,R30
003830 ff01      	SBRS R16,1
003831 c00a      	RJMP _0x2020082
                +
003832 e0e0     +LDI R30 , LOW ( 0x10000000 )
003833 e0f0     +LDI R31 , HIGH ( 0x10000000 )
003834 e060     +LDI R22 , BYTE3 ( 0x10000000 )
003835 e170     +LDI R23 , BYTE4 ( 0x10000000 )
                 	__GETD1N 0x10000000
                +
003836 8be8     +STD Y + 16 , R30
003837 8bf9     +STD Y + 16 + 1 , R31
003838 8b6a     +STD Y + 16 + 2 , R22
003839 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
00383a e018      	LDI  R17,LOW(8)
00383b c009      	RJMP _0x202007D
                 _0x2020082:
                +
00383c e0e0     +LDI R30 , LOW ( 0x1000 )
00383d e1f0     +LDI R31 , HIGH ( 0x1000 )
00383e e060     +LDI R22 , BYTE3 ( 0x1000 )
00383f e070     +LDI R23 , BYTE4 ( 0x1000 )
                 	__GETD1N 0x1000
                +
003840 8be8     +STD Y + 16 , R30
003841 8bf9     +STD Y + 16 + 1 , R31
003842 8b6a     +STD Y + 16 + 2 , R22
003843 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
003844 e014      	LDI  R17,LOW(4)
                 _0x202007D:
003845 3040      	CPI  R20,0
003846 f011      	BREQ _0x2020083
003847 770f      	ANDI R16,LOW(127)
003848 c001      	RJMP _0x2020084
                 _0x2020083:
003849 e041      	LDI  R20,LOW(1)
                 _0x2020084:
00384a ff01      	SBRS R16,1
00384b c016      	RJMP _0x2020085
                +
00384c 01fe     +MOVW R30 , R28
00384d 5ae6     +SUBI R30 , LOW ( - 90 )
00384e 4fff     +SBCI R31 , HIGH ( - 90 )
00384f 9001     +LD R0 , Z +
003850 81f0     +LD R31 , Z
003851 2de0     +MOV R30 , R0
                 	__GETW1SX 90
003852 9734      	SBIW R30,4
                +
003853 01de     +MOVW R26 , R28
003854 5aa6     +SUBI R26 , LOW ( - 90 )
003855 4fbf     +SBCI R27 , HIGH ( - 90 )
003856 93ed     +ST X + , R30
003857 93fc     +ST X , R31
                 	__PUTW1SX 90
                +
003858 01de     +MOVW R26 , R28
003859 5aa6     +SUBI R26 , LOW ( - 90 )
00385a 4fbf     +SBCI R27 , HIGH ( - 90 )
00385b 900d     +LD R0 , X +
00385c 91bc     +LD R27 , X
00385d 2da0     +MOV R26 , R0
                 	__GETW2SX 90
00385e 9614      	ADIW R26,4
00385f 940e 3f31 	CALL __GETD1P
003861 c031      	RJMP _0x202011B
                 _0x2020085:
003862 ff02      	SBRS R16,2
003863 c018      	RJMP _0x2020087
                +
003864 01fe     +MOVW R30 , R28
003865 5ae6     +SUBI R30 , LOW ( - 90 )
003866 4fff     +SBCI R31 , HIGH ( - 90 )
003867 9001     +LD R0 , Z +
003868 81f0     +LD R31 , Z
003869 2de0     +MOV R30 , R0
                 	__GETW1SX 90
00386a 9734      	SBIW R30,4
                +
00386b 01de     +MOVW R26 , R28
00386c 5aa6     +SUBI R26 , LOW ( - 90 )
00386d 4fbf     +SBCI R27 , HIGH ( - 90 )
00386e 93ed     +ST X + , R30
00386f 93fc     +ST X , R31
                 	__PUTW1SX 90
                +
003870 01de     +MOVW R26 , R28
003871 5aa6     +SUBI R26 , LOW ( - 90 )
003872 4fbf     +SBCI R27 , HIGH ( - 90 )
003873 900d     +LD R0 , X +
003874 91bc     +LD R27 , X
003875 2da0     +MOV R26 , R0
                 	__GETW2SX 90
003876 9614      	ADIW R26,4
003877 940e 3f2d 	CALL __GETW1P
003879 940e 3e59 	CALL __CWD1
00387b c017      	RJMP _0x202011B
                 _0x2020087:
                +
00387c 01fe     +MOVW R30 , R28
00387d 5ae6     +SUBI R30 , LOW ( - 90 )
00387e 4fff     +SBCI R31 , HIGH ( - 90 )
00387f 9001     +LD R0 , Z +
003880 81f0     +LD R31 , Z
003881 2de0     +MOV R30 , R0
                 	__GETW1SX 90
003882 9734      	SBIW R30,4
                +
003883 01de     +MOVW R26 , R28
003884 5aa6     +SUBI R26 , LOW ( - 90 )
003885 4fbf     +SBCI R27 , HIGH ( - 90 )
003886 93ed     +ST X + , R30
003887 93fc     +ST X , R31
                 	__PUTW1SX 90
                +
003888 01de     +MOVW R26 , R28
003889 5aa6     +SUBI R26 , LOW ( - 90 )
00388a 4fbf     +SBCI R27 , HIGH ( - 90 )
00388b 900d     +LD R0 , X +
00388c 91bc     +LD R27 , X
00388d 2da0     +MOV R26 , R0
                 	__GETW2SX 90
00388e 9614      	ADIW R26,4
00388f 940e 3f2d 	CALL __GETW1P
003891 2766      	CLR  R22
003892 2777      	CLR  R23
                 _0x202011B:
                +
003893 87ea     +STD Y + 10 , R30
003894 87fb     +STD Y + 10 + 1 , R31
003895 876c     +STD Y + 10 + 2 , R22
003896 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
003897 ff02      	SBRS R16,2
003898 c016      	RJMP _0x2020089
003899 85ad      	LDD  R26,Y+13
00389a 23aa      	TST  R26
00389b f462      	BRPL _0x202008A
                +
00389c 85ea     +LDD R30 , Y + 10
00389d 85fb     +LDD R31 , Y + 10 + 1
00389e 856c     +LDD R22 , Y + 10 + 2
00389f 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
0038a0 940e 3df2 	CALL __ANEGD1
                +
0038a2 87ea     +STD Y + 10 , R30
0038a3 87fb     +STD Y + 10 + 1 , R31
0038a4 876c     +STD Y + 10 + 2 , R22
0038a5 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
0038a6 e2ed      	LDI  R30,LOW(45)
0038a7 8bed      	STD  Y+21,R30
                 _0x202008A:
0038a8 89ed      	LDD  R30,Y+21
0038a9 30e0      	CPI  R30,0
0038aa f019      	BREQ _0x202008B
0038ab 5f1f      	SUBI R17,-LOW(1)
0038ac 5f4f      	SUBI R20,-LOW(1)
0038ad c001      	RJMP _0x202008C
                 _0x202008B:
0038ae 7f0b      	ANDI R16,LOW(251)
                 _0x202008C:
                 _0x2020089:
0038af 2f34      	MOV  R19,R20
                 _0x2020075:
0038b0 fd00      	SBRC R16,0
0038b1 c018      	RJMP _0x202008D
                 _0x202008E:
0038b2 1715      	CP   R17,R21
0038b3 f410      	BRSH _0x2020091
0038b4 1735      	CP   R19,R21
0038b5 f008      	BRLO _0x2020092
                 _0x2020091:
0038b6 c013      	RJMP _0x2020090
                 _0x2020092:
0038b7 ff07      	SBRS R16,7
0038b8 c008      	RJMP _0x2020093
0038b9 ff02      	SBRS R16,2
0038ba c004      	RJMP _0x2020094
0038bb 7f0b      	ANDI R16,LOW(251)
0038bc 892d      	LDD  R18,Y+21
0038bd 5011      	SUBI R17,LOW(1)
0038be c001      	RJMP _0x2020095
                 _0x2020094:
0038bf e320      	LDI  R18,LOW(48)
                 _0x2020095:
0038c0 c001      	RJMP _0x2020096
                 _0x2020093:
0038c1 e220      	LDI  R18,LOW(32)
                 _0x2020096:
0038c2 932a      	ST   -Y,R18
0038c3 81af      	LDD  R26,Y+7
0038c4 85b8      	LDD  R27,Y+7+1
0038c5 85e9      	LDD  R30,Y+9
0038c6 85fa      	LDD  R31,Y+9+1
0038c7 9509      	ICALL
0038c8 5051      	SUBI R21,LOW(1)
0038c9 cfe8      	RJMP _0x202008E
                 _0x2020090:
                 _0x202008D:
                 _0x2020097:
0038ca 1714      	CP   R17,R20
0038cb f520      	BRSH _0x2020099
0038cc 6100      	ORI  R16,LOW(16)
0038cd ff02      	SBRS R16,2
0038ce c015      	RJMP _0x202009A
0038cf 7f0b      	ANDI R16,LOW(251)
0038d0 89ed      	LDD  R30,Y+21
0038d1 93ea      	ST   -Y,R30
                +
0038d2 01de     +MOVW R26 , R28
0038d3 5aa9     +SUBI R26 , LOW ( - 87 )
0038d4 4fbf     +SBCI R27 , HIGH ( - 87 )
0038d5 900d     +LD R0 , X +
0038d6 91bc     +LD R27 , X
0038d7 2da0     +MOV R26 , R0
                 	__GETW2SX 87
                +
0038d8 01fe     +MOVW R30 , R28
0038d9 5ae7     +SUBI R30 , LOW ( - 89 )
0038da 4fff     +SBCI R31 , HIGH ( - 89 )
0038db 9001     +LD R0 , Z +
0038dc 81f0     +LD R31 , Z
0038dd 2de0     +MOV R30 , R0
                 	__GETW1SX 89
0038de 9509      	ICALL
0038df 3050      	CPI  R21,0
0038e0 f009      	BREQ _0x202009B
0038e1 5051      	SUBI R21,LOW(1)
                 _0x202009B:
0038e2 5011      	SUBI R17,LOW(1)
0038e3 5041      	SUBI R20,LOW(1)
                 _0x202009A:
0038e4 e3e0      	LDI  R30,LOW(48)
0038e5 93ea      	ST   -Y,R30
0038e6 81af      	LDD  R26,Y+7
0038e7 85b8      	LDD  R27,Y+7+1
0038e8 85e9      	LDD  R30,Y+9
0038e9 85fa      	LDD  R31,Y+9+1
0038ea 9509      	ICALL
0038eb 3050      	CPI  R21,0
0038ec f009      	BREQ _0x202009C
0038ed 5051      	SUBI R21,LOW(1)
                 _0x202009C:
0038ee 5041      	SUBI R20,LOW(1)
0038ef cfda      	RJMP _0x2020097
                 _0x2020099:
0038f0 2f31      	MOV  R19,R17
0038f1 89ec      	LDD  R30,Y+20
0038f2 30e0      	CPI  R30,0
0038f3 f4d9      	BRNE _0x202009D
                 _0x202009E:
0038f4 3030      	CPI  R19,0
0038f5 f0c1      	BREQ _0x20200A0
0038f6 ff03      	SBRS R16,3
0038f7 c006      	RJMP _0x20200A1
0038f8 85ee      	LDD  R30,Y+14
0038f9 85ff      	LDD  R31,Y+14+1
0038fa 9125      	LPM  R18,Z+
0038fb 87ee      	STD  Y+14,R30
0038fc 87ff      	STD  Y+14+1,R31
0038fd c005      	RJMP _0x20200A2
                 _0x20200A1:
0038fe 85ae      	LDD  R26,Y+14
0038ff 85bf      	LDD  R27,Y+14+1
003900 912d      	LD   R18,X+
003901 87ae      	STD  Y+14,R26
003902 87bf      	STD  Y+14+1,R27
                 _0x20200A2:
003903 932a      	ST   -Y,R18
003904 81af      	LDD  R26,Y+7
003905 85b8      	LDD  R27,Y+7+1
003906 85e9      	LDD  R30,Y+9
003907 85fa      	LDD  R31,Y+9+1
003908 9509      	ICALL
003909 3050      	CPI  R21,0
00390a f009      	BREQ _0x20200A3
00390b 5051      	SUBI R21,LOW(1)
                 _0x20200A3:
00390c 5031      	SUBI R19,LOW(1)
00390d cfe6      	RJMP _0x202009E
                 _0x20200A0:
00390e c070      	RJMP _0x20200A4
                 _0x202009D:
                 _0x20200A6:
                +
00390f 89e8     +LDD R30 , Y + 16
003910 89f9     +LDD R31 , Y + 16 + 1
003911 896a     +LDD R22 , Y + 16 + 2
003912 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
003913 85aa     +LDD R26 , Y + 10
003914 85bb     +LDD R27 , Y + 10 + 1
003915 858c     +LDD R24 , Y + 10 + 2
003916 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
003917 940e 3ec6 	CALL __DIVD21U
003919 2f2e      	MOV  R18,R30
00391a 302a      	CPI  R18,10
00391b f030      	BRLO _0x20200A8
00391c ff03      	SBRS R16,3
00391d c002      	RJMP _0x20200A9
00391e 5c29      	SUBI R18,-LOW(55)
00391f c001      	RJMP _0x20200AA
                 _0x20200A9:
003920 5a29      	SUBI R18,-LOW(87)
                 _0x20200AA:
003921 c001      	RJMP _0x20200AB
                 _0x20200A8:
003922 5d20      	SUBI R18,-LOW(48)
                 _0x20200AB:
003923 fd04      	SBRC R16,4
003924 c030      	RJMP _0x20200AD
003925 3321      	CPI  R18,49
003926 f460      	BRSH _0x20200AF
                +
003927 89a8     +LDD R26 , Y + 16
003928 89b9     +LDD R27 , Y + 16 + 1
003929 898a     +LDD R24 , Y + 16 + 2
00392a 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
                +
00392b 30a1     +CPI R26 , LOW ( 0x1 )
00392c e0e0     +LDI R30 , HIGH ( 0x1 )
00392d 07be     +CPC R27 , R30
00392e e0e0     +LDI R30 , BYTE3 ( 0x1 )
00392f 078e     +CPC R24 , R30
003930 e0e0     +LDI R30 , BYTE4 ( 0x1 )
003931 079e     +CPC R25 , R30
                 	__CPD2N 0x1
003932 f409      	BRNE _0x20200AE
                 _0x20200AF:
003933 c00b      	RJMP _0x20200B1
                 _0x20200AE:
003934 1743      	CP   R20,R19
003935 f440      	BRSH _0x202011C
003936 1753      	CP   R21,R19
003937 f010      	BRLO _0x20200B4
003938 ff00      	SBRS R16,0
003939 c001      	RJMP _0x20200B5
                 _0x20200B4:
00393a c023      	RJMP _0x20200B3
                 _0x20200B5:
00393b e220      	LDI  R18,LOW(32)
00393c ff07      	SBRS R16,7
00393d c017      	RJMP _0x20200B6
                 _0x202011C:
00393e e320      	LDI  R18,LOW(48)
                 _0x20200B1:
00393f 6100      	ORI  R16,LOW(16)
003940 ff02      	SBRS R16,2
003941 c013      	RJMP _0x20200B7
003942 7f0b      	ANDI R16,LOW(251)
003943 89ed      	LDD  R30,Y+21
003944 93ea      	ST   -Y,R30
                +
003945 01de     +MOVW R26 , R28
003946 5aa9     +SUBI R26 , LOW ( - 87 )
003947 4fbf     +SBCI R27 , HIGH ( - 87 )
003948 900d     +LD R0 , X +
003949 91bc     +LD R27 , X
00394a 2da0     +MOV R26 , R0
                 	__GETW2SX 87
                +
00394b 01fe     +MOVW R30 , R28
00394c 5ae7     +SUBI R30 , LOW ( - 89 )
00394d 4fff     +SBCI R31 , HIGH ( - 89 )
00394e 9001     +LD R0 , Z +
00394f 81f0     +LD R31 , Z
003950 2de0     +MOV R30 , R0
                 	__GETW1SX 89
003951 9509      	ICALL
003952 3050      	CPI  R21,0
003953 f009      	BREQ _0x20200B8
003954 5051      	SUBI R21,LOW(1)
                 _0x20200B8:
                 _0x20200B7:
                 _0x20200B6:
                 _0x20200AD:
003955 932a      	ST   -Y,R18
003956 81af      	LDD  R26,Y+7
003957 85b8      	LDD  R27,Y+7+1
003958 85e9      	LDD  R30,Y+9
003959 85fa      	LDD  R31,Y+9+1
00395a 9509      	ICALL
00395b 3050      	CPI  R21,0
00395c f009      	BREQ _0x20200B9
00395d 5051      	SUBI R21,LOW(1)
                 _0x20200B9:
                 _0x20200B3:
00395e 5031      	SUBI R19,LOW(1)
                +
00395f 89e8     +LDD R30 , Y + 16
003960 89f9     +LDD R31 , Y + 16 + 1
003961 896a     +LDD R22 , Y + 16 + 2
003962 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
003963 85aa     +LDD R26 , Y + 10
003964 85bb     +LDD R27 , Y + 10 + 1
003965 858c     +LDD R24 , Y + 10 + 2
003966 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
003967 940e 3efc 	CALL __MODD21U
                +
003969 87ea     +STD Y + 10 , R30
00396a 87fb     +STD Y + 10 + 1 , R31
00396b 876c     +STD Y + 10 + 2 , R22
00396c 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
00396d 89ec      	LDD  R30,Y+20
                +
00396e 89a8     +LDD R26 , Y + 16
00396f 89b9     +LDD R27 , Y + 16 + 1
003970 898a     +LDD R24 , Y + 16 + 2
003971 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
003972 27ff      	CLR  R31
003973 2766      	CLR  R22
003974 2777      	CLR  R23
003975 940e 3ec6 	CALL __DIVD21U
                +
003977 8be8     +STD Y + 16 , R30
003978 8bf9     +STD Y + 16 + 1 , R31
003979 8b6a     +STD Y + 16 + 2 , R22
00397a 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
00397b 940e 3f71 	CALL __CPD10
00397d f009      	BREQ _0x20200A7
00397e cf90      	RJMP _0x20200A6
                 _0x20200A7:
                 _0x20200A4:
00397f ff00      	SBRS R16,0
003980 c00b      	RJMP _0x20200BA
                 _0x20200BB:
003981 3050      	CPI  R21,0
003982 f049      	BREQ _0x20200BD
003983 5051      	SUBI R21,LOW(1)
003984 e2e0      	LDI  R30,LOW(32)
003985 93ea      	ST   -Y,R30
003986 81af      	LDD  R26,Y+7
003987 85b8      	LDD  R27,Y+7+1
003988 85e9      	LDD  R30,Y+9
003989 85fa      	LDD  R31,Y+9+1
00398a 9509      	ICALL
00398b cff5      	RJMP _0x20200BB
                 _0x20200BD:
                 _0x20200BA:
                 _0x20200BE:
                 _0x202005A:
                 _0x202011A:
00398c e010      	LDI  R17,LOW(0)
                 _0x202003B:
00398d cd39      	RJMP _0x2020036
                 _0x2020038:
00398e 81ae      	LDD  R26,Y+6
00398f 81bf      	LDD  R27,Y+6+1
003990 940e 3f2d 	CALL __GETW1P
003992 940e 3f90 	CALL __LOADLOCR6
003994 96ef      	ADIW R28,63
003995 966f      	ADIW R28,31
003996 9508      	RET
                 ; .FEND
                 _sprintf:
                 ; .FSTART _sprintf
003997 92ff      	PUSH R15
003998 2ef8      	MOV  R15,R24
003999 9726      	SBIW R28,6
00399a 940e 3f8b 	CALL __SAVELOCR4
00399c 01de      	MOVW R26,R28
00399d 961c      	ADIW R26,12
00399e 940e 3dcc 	CALL __ADDW2R15
0039a0 940e 3f2d 	CALL __GETW1P
0039a2 9730      	SBIW R30,0
0039a3 f419      	BRNE _0x20200BF
0039a4 efef      	LDI  R30,LOW(65535)
0039a5 efff      	LDI  R31,HIGH(65535)
0039a6 c027      	RJMP _0x20C0008
                 _0x20200BF:
0039a7 01de      	MOVW R26,R28
0039a8 9616      	ADIW R26,6
0039a9 940e 3dcc 	CALL __ADDW2R15
0039ab 018d      	MOVW R16,R26
0039ac 01de      	MOVW R26,R28
0039ad 961c      	ADIW R26,12
0039ae 940e 3dcc 	CALL __ADDW2R15
0039b0 940e 3f2d 	CALL __GETW1P
0039b2 83ee      	STD  Y+6,R30
0039b3 83ff      	STD  Y+6+1,R31
0039b4 e0e0      	LDI  R30,LOW(0)
0039b5 87e8      	STD  Y+8,R30
0039b6 87e9      	STD  Y+8+1,R30
0039b7 01de      	MOVW R26,R28
0039b8 961a      	ADIW R26,10
0039b9 940e 3dcc 	CALL __ADDW2R15
0039bb 940e 3f2d 	CALL __GETW1P
0039bd 93fa      	ST   -Y,R31
0039be 93ea      	ST   -Y,R30
0039bf 931a      	ST   -Y,R17
0039c0 930a      	ST   -Y,R16
0039c1 e0e7      	LDI  R30,LOW(_put_buff_G101)
0039c2 e3f5      	LDI  R31,HIGH(_put_buff_G101)
0039c3 93fa      	ST   -Y,R31
0039c4 93ea      	ST   -Y,R30
0039c5 01de      	MOVW R26,R28
0039c6 961a      	ADIW R26,10
0039c7 dce2      	RCALL __print_G101
0039c8 019f      	MOVW R18,R30
0039c9 81ae      	LDD  R26,Y+6
0039ca 81bf      	LDD  R27,Y+6+1
0039cb e0e0      	LDI  R30,LOW(0)
0039cc 93ec      	ST   X,R30
0039cd 01f9      	MOVW R30,R18
                 _0x20C0008:
0039ce 940e 3f92 	CALL __LOADLOCR4
0039d0 962a      	ADIW R28,10
0039d1 90ff      	POP  R15
0039d2 9508      	RET
                 ; .FEND
                 
                 	.CSEG
                 _ftoa:
                 ; .FSTART _ftoa
0039d3 93ba      	ST   -Y,R27
0039d4 93aa      	ST   -Y,R26
0039d5 9724      	SBIW R28,4
0039d6 e0e0      	LDI  R30,LOW(0)
0039d7 83e8      	ST   Y,R30
0039d8 83e9      	STD  Y+1,R30
0039d9 83ea      	STD  Y+2,R30
0039da e3ef      	LDI  R30,LOW(63)
0039db 83eb      	STD  Y+3,R30
0039dc 931a      	ST   -Y,R17
0039dd 930a      	ST   -Y,R16
0039de 85eb      	LDD  R30,Y+11
0039df 85fc      	LDD  R31,Y+11+1
0039e0 3fef      	CPI  R30,LOW(0xFFFF)
0039e1 efaf      	LDI  R26,HIGH(0xFFFF)
0039e2 07fa      	CPC  R31,R26
0039e3 f449      	BRNE _0x204000D
0039e4 81ee      	LDD  R30,Y+6
0039e5 81ff      	LDD  R31,Y+6+1
0039e6 93fa      	ST   -Y,R31
0039e7 93ea      	ST   -Y,R30
                +
0039e8 e4a6     +LDI R26 , LOW ( 2 * _0x2040000 + ( 0 ) )
0039e9 e0b5     +LDI R27 , HIGH ( 2 * _0x2040000 + ( 0 ) )
                 	__POINTW2FN _0x2040000,0
0039ea 940e 34e1 	CALL _strcpyf
0039ec c10a      	RJMP _0x20C0007
                 _0x204000D:
0039ed 3fef      	CPI  R30,LOW(0x7FFF)
0039ee e7af      	LDI  R26,HIGH(0x7FFF)
0039ef 07fa      	CPC  R31,R26
0039f0 f449      	BRNE _0x204000C
0039f1 81ee      	LDD  R30,Y+6
0039f2 81ff      	LDD  R31,Y+6+1
0039f3 93fa      	ST   -Y,R31
0039f4 93ea      	ST   -Y,R30
                +
0039f5 e4a7     +LDI R26 , LOW ( 2 * _0x2040000 + ( 1 ) )
0039f6 e0b5     +LDI R27 , HIGH ( 2 * _0x2040000 + ( 1 ) )
                 	__POINTW2FN _0x2040000,1
0039f7 940e 34e1 	CALL _strcpyf
0039f9 c0fd      	RJMP _0x20C0007
                 _0x204000C:
0039fa 85ac      	LDD  R26,Y+12
0039fb 23aa      	TST  R26
0039fc f492      	BRPL _0x204000F
                +
0039fd 85e9     +LDD R30 , Y + 9
0039fe 85fa     +LDD R31 , Y + 9 + 1
0039ff 856b     +LDD R22 , Y + 9 + 2
003a00 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
003a01 940e 3c23 	CALL __ANEGF1
                +
003a03 87e9     +STD Y + 9 , R30
003a04 87fa     +STD Y + 9 + 1 , R31
003a05 876b     +STD Y + 9 + 2 , R22
003a06 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
003a07 81ae      	LDD  R26,Y+6
003a08 81bf      	LDD  R27,Y+6+1
003a09 9611      	ADIW R26,1
003a0a 83ae      	STD  Y+6,R26
003a0b 83bf      	STD  Y+6+1,R27
003a0c 9711      	SBIW R26,1
003a0d e2ed      	LDI  R30,LOW(45)
003a0e 93ec      	ST   X,R30
                 _0x204000F:
003a0f 85a8      	LDD  R26,Y+8
003a10 30a7      	CPI  R26,LOW(0x7)
003a11 f010      	BRLO _0x2040010
003a12 e0e6      	LDI  R30,LOW(6)
003a13 87e8      	STD  Y+8,R30
                 _0x2040010:
003a14 8518      	LDD  R17,Y+8
                 _0x2040011:
003a15 2fe1      	MOV  R30,R17
003a16 5011      	SUBI R17,1
003a17 30e0      	CPI  R30,0
003a18 f079      	BREQ _0x2040013
                +
003a19 81aa     +LDD R26 , Y + 2
003a1a 81bb     +LDD R27 , Y + 2 + 1
003a1b 818c     +LDD R24 , Y + 2 + 2
003a1c 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
003a1d eced     +LDI R30 , LOW ( 0x3DCCCCCD )
003a1e ecfc     +LDI R31 , HIGH ( 0x3DCCCCCD )
003a1f ec6c     +LDI R22 , BYTE3 ( 0x3DCCCCCD )
003a20 e37d     +LDI R23 , BYTE4 ( 0x3DCCCCCD )
                 	__GETD1N 0x3DCCCCCD
003a21 940e 3d19 	CALL __MULF12
                +
003a23 83ea     +STD Y + 2 , R30
003a24 83fb     +STD Y + 2 + 1 , R31
003a25 836c     +STD Y + 2 + 2 , R22
003a26 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
003a27 cfed      	RJMP _0x2040011
                 _0x2040013:
                +
003a28 81ea     +LDD R30 , Y + 2
003a29 81fb     +LDD R31 , Y + 2 + 1
003a2a 816c     +LDD R22 , Y + 2 + 2
003a2b 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
                +
003a2c 85a9     +LDD R26 , Y + 9
003a2d 85ba     +LDD R27 , Y + 9 + 1
003a2e 858b     +LDD R24 , Y + 9 + 2
003a2f 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
003a30 940e 3cc9 	CALL __ADDF12
                +
003a32 87e9     +STD Y + 9 , R30
003a33 87fa     +STD Y + 9 + 1 , R31
003a34 876b     +STD Y + 9 + 2 , R22
003a35 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
003a36 e010      	LDI  R17,LOW(0)
                +
003a37 e0e0     +LDI R30 , LOW ( 0x3F800000 )
003a38 e0f0     +LDI R31 , HIGH ( 0x3F800000 )
003a39 e860     +LDI R22 , BYTE3 ( 0x3F800000 )
003a3a e37f     +LDI R23 , BYTE4 ( 0x3F800000 )
                 	__GETD1N 0x3F800000
                +
003a3b 83ea     +STD Y + 2 , R30
003a3c 83fb     +STD Y + 2 + 1 , R31
003a3d 836c     +STD Y + 2 + 2 , R22
003a3e 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                 _0x2040014:
                +
003a3f 81ea     +LDD R30 , Y + 2
003a40 81fb     +LDD R31 , Y + 2 + 1
003a41 816c     +LDD R22 , Y + 2 + 2
003a42 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
                +
003a43 85a9     +LDD R26 , Y + 9
003a44 85ba     +LDD R27 , Y + 9 + 1
003a45 858b     +LDD R24 , Y + 9 + 2
003a46 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
003a47 940e 3dac 	CALL __CMPF12
003a49 f0d8      	BRLO _0x2040016
                +
003a4a 81aa     +LDD R26 , Y + 2
003a4b 81bb     +LDD R27 , Y + 2 + 1
003a4c 818c     +LDD R24 , Y + 2 + 2
003a4d 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
003a4e e0e0     +LDI R30 , LOW ( 0x41200000 )
003a4f e0f0     +LDI R31 , HIGH ( 0x41200000 )
003a50 e260     +LDI R22 , BYTE3 ( 0x41200000 )
003a51 e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
003a52 940e 3d19 	CALL __MULF12
                +
003a54 83ea     +STD Y + 2 , R30
003a55 83fb     +STD Y + 2 + 1 , R31
003a56 836c     +STD Y + 2 + 2 , R22
003a57 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
003a58 5f1f      	SUBI R17,-LOW(1)
003a59 3217      	CPI  R17,39
003a5a f048      	BRLO _0x2040017
003a5b 81ee      	LDD  R30,Y+6
003a5c 81ff      	LDD  R31,Y+6+1
003a5d 93fa      	ST   -Y,R31
003a5e 93ea      	ST   -Y,R30
                +
003a5f e4ab     +LDI R26 , LOW ( 2 * _0x2040000 + ( 5 ) )
003a60 e0b5     +LDI R27 , HIGH ( 2 * _0x2040000 + ( 5 ) )
                 	__POINTW2FN _0x2040000,5
003a61 940e 34e1 	CALL _strcpyf
003a63 c093      	RJMP _0x20C0007
                 _0x2040017:
003a64 cfda      	RJMP _0x2040014
                 _0x2040016:
003a65 3010      	CPI  R17,0
003a66 f449      	BRNE _0x2040018
003a67 81ae      	LDD  R26,Y+6
003a68 81bf      	LDD  R27,Y+6+1
003a69 9611      	ADIW R26,1
003a6a 83ae      	STD  Y+6,R26
003a6b 83bf      	STD  Y+6+1,R27
003a6c 9711      	SBIW R26,1
003a6d e3e0      	LDI  R30,LOW(48)
003a6e 93ec      	ST   X,R30
003a6f c047      	RJMP _0x2040019
                 _0x2040018:
                 _0x204001A:
003a70 2fe1      	MOV  R30,R17
003a71 5011      	SUBI R17,1
003a72 30e0      	CPI  R30,0
003a73 f409      	BRNE PC+2
003a74 c042      	RJMP _0x204001C
                +
003a75 81aa     +LDD R26 , Y + 2
003a76 81bb     +LDD R27 , Y + 2 + 1
003a77 818c     +LDD R24 , Y + 2 + 2
003a78 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
                +
003a79 eced     +LDI R30 , LOW ( 0x3DCCCCCD )
003a7a ecfc     +LDI R31 , HIGH ( 0x3DCCCCCD )
003a7b ec6c     +LDI R22 , BYTE3 ( 0x3DCCCCCD )
003a7c e37d     +LDI R23 , BYTE4 ( 0x3DCCCCCD )
                 	__GETD1N 0x3DCCCCCD
003a7d 940e 3d19 	CALL __MULF12
                +
003a7f e0a0     +LDI R26 , LOW ( 0x3F000000 )
003a80 e0b0     +LDI R27 , HIGH ( 0x3F000000 )
003a81 e080     +LDI R24 , BYTE3 ( 0x3F000000 )
003a82 e39f     +LDI R25 , BYTE4 ( 0x3F000000 )
                 	__GETD2N 0x3F000000
003a83 940e 3cc9 	CALL __ADDF12
003a85 01df      	MOVW R26,R30
003a86 01cb      	MOVW R24,R22
003a87 940e 3c02 	CALL _floor
                +
003a89 83ea     +STD Y + 2 , R30
003a8a 83fb     +STD Y + 2 + 1 , R31
003a8b 836c     +STD Y + 2 + 2 , R22
003a8c 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
                +
003a8d 85a9     +LDD R26 , Y + 9
003a8e 85ba     +LDD R27 , Y + 9 + 1
003a8f 858b     +LDD R24 , Y + 9 + 2
003a90 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
003a91 940e 3d67 	CALL __DIVF21
003a93 940e 3c56 	CALL __CFD1U
003a95 2f0e      	MOV  R16,R30
003a96 81ae      	LDD  R26,Y+6
003a97 81bf      	LDD  R27,Y+6+1
003a98 9611      	ADIW R26,1
003a99 83ae      	STD  Y+6,R26
003a9a 83bf      	STD  Y+6+1,R27
003a9b 9711      	SBIW R26,1
003a9c 5de0      	SUBI R30,-LOW(48)
003a9d 93ec      	ST   X,R30
003a9e 2fe0      	MOV  R30,R16
003a9f e0f0      	LDI  R31,0
                +
003aa0 81aa     +LDD R26 , Y + 2
003aa1 81bb     +LDD R27 , Y + 2 + 1
003aa2 818c     +LDD R24 , Y + 2 + 2
003aa3 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
003aa4 940e 3e59 	CALL __CWD1
003aa6 940e 3c8f 	CALL __CDF1
003aa8 940e 3d19 	CALL __MULF12
                +
003aaa 85a9     +LDD R26 , Y + 9
003aab 85ba     +LDD R27 , Y + 9 + 1
003aac 858b     +LDD R24 , Y + 9 + 2
003aad 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
003aae 940e 3f64 	CALL __SWAPD12
003ab0 940e 3cc2 	CALL __SUBF12
                +
003ab2 87e9     +STD Y + 9 , R30
003ab3 87fa     +STD Y + 9 + 1 , R31
003ab4 876b     +STD Y + 9 + 2 , R22
003ab5 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
003ab6 cfb9      	RJMP _0x204001A
                 _0x204001C:
                 _0x2040019:
003ab7 85e8      	LDD  R30,Y+8
003ab8 30e0      	CPI  R30,0
003ab9 f1c9      	BREQ _0x20C0006
003aba 81ae      	LDD  R26,Y+6
003abb 81bf      	LDD  R27,Y+6+1
003abc 9611      	ADIW R26,1
003abd 83ae      	STD  Y+6,R26
003abe 83bf      	STD  Y+6+1,R27
003abf 9711      	SBIW R26,1
003ac0 e2ee      	LDI  R30,LOW(46)
003ac1 93ec      	ST   X,R30
                 _0x204001E:
003ac2 85e8      	LDD  R30,Y+8
003ac3 50e1      	SUBI R30,LOW(1)
003ac4 87e8      	STD  Y+8,R30
003ac5 5fef      	SUBI R30,-LOW(1)
003ac6 f161      	BREQ _0x2040020
                +
003ac7 85a9     +LDD R26 , Y + 9
003ac8 85ba     +LDD R27 , Y + 9 + 1
003ac9 858b     +LDD R24 , Y + 9 + 2
003aca 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
                +
003acb e0e0     +LDI R30 , LOW ( 0x41200000 )
003acc e0f0     +LDI R31 , HIGH ( 0x41200000 )
003acd e260     +LDI R22 , BYTE3 ( 0x41200000 )
003ace e471     +LDI R23 , BYTE4 ( 0x41200000 )
                 	__GETD1N 0x41200000
003acf 940e 3d19 	CALL __MULF12
                +
003ad1 87e9     +STD Y + 9 , R30
003ad2 87fa     +STD Y + 9 + 1 , R31
003ad3 876b     +STD Y + 9 + 2 , R22
003ad4 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
003ad5 940e 3c56 	CALL __CFD1U
003ad7 2f0e      	MOV  R16,R30
003ad8 81ae      	LDD  R26,Y+6
003ad9 81bf      	LDD  R27,Y+6+1
003ada 9611      	ADIW R26,1
003adb 83ae      	STD  Y+6,R26
003adc 83bf      	STD  Y+6+1,R27
003add 9711      	SBIW R26,1
003ade 5de0      	SUBI R30,-LOW(48)
003adf 93ec      	ST   X,R30
003ae0 2fe0      	MOV  R30,R16
003ae1 e0f0      	LDI  R31,0
                +
003ae2 85a9     +LDD R26 , Y + 9
003ae3 85ba     +LDD R27 , Y + 9 + 1
003ae4 858b     +LDD R24 , Y + 9 + 2
003ae5 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
003ae6 940e 3e59 	CALL __CWD1
003ae8 940e 3c8f 	CALL __CDF1
003aea 940e 3f64 	CALL __SWAPD12
003aec 940e 3cc2 	CALL __SUBF12
                +
003aee 87e9     +STD Y + 9 , R30
003aef 87fa     +STD Y + 9 + 1 , R31
003af0 876b     +STD Y + 9 + 2 , R22
003af1 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
003af2 cfcf      	RJMP _0x204001E
                 _0x2040020:
                 _0x20C0006:
003af3 81ae      	LDD  R26,Y+6
003af4 81bf      	LDD  R27,Y+6+1
003af5 e0e0      	LDI  R30,LOW(0)
003af6 93ec      	ST   X,R30
                 _0x20C0007:
003af7 8119      	LDD  R17,Y+1
003af8 8108      	LDD  R16,Y+0
003af9 962d      	ADIW R28,13
003afa 9508      	RET
                 ; .FEND
                 
                 	.DSEG
                 
                 	.CSEG
                 _allocate_block_G102:
                 ; .FSTART _allocate_block_G102
003afb 93ba      	ST   -Y,R27
003afc 93aa      	ST   -Y,R26
003afd 9722      	SBIW R28,2
003afe 940e 3f89 	CALL __SAVELOCR6
                +
003b00 e90c     +LDI R16 , LOW ( 2204 )
003b01 e018     +LDI R17 , HIGH ( 2204 )
                 	__GETWRN 16,17,2204
003b02 01d8      	MOVW R26,R16
003b03 e0e0      	LDI  R30,LOW(0)
003b04 e0f0      	LDI  R31,HIGH(0)
003b05 93ed      	ST   X+,R30
003b06 93fc      	ST   X,R31
                 _0x2040061:
003b07 2e00      	MOV  R0,R16
003b08 2a01      	OR   R0,R17
003b09 f199      	BREQ _0x2040063
003b0a 01d8      	MOVW R26,R16
003b0b 940e 3f2d 	CALL __GETW1P
003b0d 0fe0      	ADD  R30,R16
003b0e 1ff1      	ADC  R31,R17
003b0f 9634      	ADIW R30,4
003b10 01af      	MOVW R20,R30
003b11 9612      	ADIW R26,2
003b12 940e 3f2d 	CALL __GETW1P
003b14 019f      	MOVW R18,R30
003b15 9730      	SBIW R30,0
003b16 f019      	BREQ _0x2040064
                +
003b17 832e     +STD Y + 6 , R18
003b18 833f     +STD Y + 6 + 1 , R19
                 	__PUTWSR 18,19,6
003b19 c004      	RJMP _0x2040065
                 _0x2040064:
003b1a e0e0      	LDI  R30,LOW(2304)
003b1b e0f9      	LDI  R31,HIGH(2304)
003b1c 83ee      	STD  Y+6,R30
003b1d 83ff      	STD  Y+6+1,R31
                 _0x2040065:
003b1e 81ae      	LDD  R26,Y+6
003b1f 81bf      	LDD  R27,Y+6+1
003b20 1ba4      	SUB  R26,R20
003b21 0bb5      	SBC  R27,R21
003b22 85e8      	LDD  R30,Y+8
003b23 85f9      	LDD  R31,Y+8+1
003b24 9634      	ADIW R30,4
003b25 17ae      	CP   R26,R30
003b26 07bf      	CPC  R27,R31
003b27 f098      	BRLO _0x2040066
003b28 01fa      	MOVW R30,R20
                +
003b29 01d8     +MOVW R26 , R16
003b2a 9612     +ADIW R26 , 2
003b2b 93ed     +ST X + , R30
003b2c 93fc     +ST X , R31
                 	__PUTW1RNS 16,2
003b2d 01f9      	MOVW R30,R18
                +
003b2e 01da     +MOVW R26 , R20
003b2f 9612     +ADIW R26 , 2
003b30 93ed     +ST X + , R30
003b31 93fc     +ST X , R31
                 	__PUTW1RNS 20,2
003b32 85e8      	LDD  R30,Y+8
003b33 85f9      	LDD  R31,Y+8+1
003b34 01da      	MOVW R26,R20
003b35 93ed      	ST   X+,R30
003b36 93fc      	ST   X,R31
                +
003b37 5f4c     +SUBI R20 , LOW ( - 4 )
003b38 4f5f     +SBCI R21 , HIGH ( - 4 )
                 	__ADDWRN 20,21,4
003b39 01fa      	MOVW R30,R20
003b3a c004      	RJMP _0x20C0005
                 _0x2040066:
003b3b 0189      	MOVW R16,R18
003b3c cfca      	RJMP _0x2040061
                 _0x2040063:
003b3d e0e0      	LDI  R30,LOW(0)
003b3e e0f0      	LDI  R31,HIGH(0)
                 _0x20C0005:
003b3f 940e 3f90 	CALL __LOADLOCR6
003b41 962a      	ADIW R28,10
003b42 9508      	RET
                 ; .FEND
                 _find_prev_block_G102:
                 ; .FSTART _find_prev_block_G102
003b43 93ba      	ST   -Y,R27
003b44 93aa      	ST   -Y,R26
003b45 940e 3f8b 	CALL __SAVELOCR4
                +
003b47 e90c     +LDI R16 , LOW ( 2204 )
003b48 e018     +LDI R17 , HIGH ( 2204 )
                 	__GETWRN 16,17,2204
                 _0x2040067:
003b49 2e00      	MOV  R0,R16
003b4a 2a01      	OR   R0,R17
003b4b f079      	BREQ _0x2040069
003b4c 01d8      	MOVW R26,R16
003b4d 9612      	ADIW R26,2
003b4e 940e 3f2d 	CALL __GETW1P
003b50 019f      	MOVW R18,R30
003b51 01df      	MOVW R26,R30
003b52 81ec      	LDD  R30,Y+4
003b53 81fd      	LDD  R31,Y+4+1
003b54 17ea      	CP   R30,R26
003b55 07fb      	CPC  R31,R27
003b56 f411      	BRNE _0x204006A
003b57 01f8      	MOVW R30,R16
003b58 c004      	RJMP _0x20C0003
                 _0x204006A:
003b59 0189      	MOVW R16,R18
003b5a cfee      	RJMP _0x2040067
                 _0x2040069:
003b5b e0e0      	LDI  R30,LOW(0)
003b5c e0f0      	LDI  R31,HIGH(0)
                 _0x20C0003:
003b5d 940e 3f92 	CALL __LOADLOCR4
                 _0x20C0004:
003b5f 9626      	ADIW R28,6
003b60 9508      	RET
                 ; .FEND
                 _realloc:
                 ; .FSTART _realloc
003b61 93ba      	ST   -Y,R27
003b62 93aa      	ST   -Y,R26
003b63 9722      	SBIW R28,2
003b64 940e 3f89 	CALL __SAVELOCR6
003b66 85ea      	LDD  R30,Y+10
003b67 85fb      	LDD  R31,Y+10+1
003b68 9730      	SBIW R30,0
003b69 f1c9      	BREQ _0x204006B
003b6a 9734      	SBIW R30,4
003b6b 018f      	MOVW R16,R30
003b6c 01d8      	MOVW R26,R16
003b6d dfd5      	RCALL _find_prev_block_G102
003b6e 019f      	MOVW R18,R30
003b6f 9730      	SBIW R30,0
003b70 f191      	BREQ _0x204006C
003b71 01d8      	MOVW R26,R16
003b72 9612      	ADIW R26,2
003b73 940e 3f2d 	CALL __GETW1P
                +
003b75 01d9     +MOVW R26 , R18
003b76 9612     +ADIW R26 , 2
003b77 93ed     +ST X + , R30
003b78 93fc     +ST X , R31
                 	__PUTW1RNS 18,2
003b79 85e8      	LDD  R30,Y+8
003b7a 85f9      	LDD  R31,Y+8+1
003b7b 9730      	SBIW R30,0
003b7c f131      	BREQ _0x204006D
003b7d 85a8      	LDD  R26,Y+8
003b7e 85b9      	LDD  R27,Y+8+1
003b7f df7b      	RCALL _allocate_block_G102
003b80 01af      	MOVW R20,R30
003b81 9730      	SBIW R30,0
003b82 f0d9      	BREQ _0x204006E
003b83 01d8      	MOVW R26,R16
003b84 940e 3f2d 	CALL __GETW1P
003b86 83ee      	STD  Y+6,R30
003b87 83ff      	STD  Y+6+1,R31
003b88 01df      	MOVW R26,R30
003b89 85e8      	LDD  R30,Y+8
003b8a 85f9      	LDD  R31,Y+8+1
003b8b 17ae      	CP   R26,R30
003b8c 07bf      	CPC  R27,R31
003b8d f420      	BRSH _0x204006F
003b8e 81ee      	LDD  R30,Y+6
003b8f 81ff      	LDD  R31,Y+6+1
003b90 87e8      	STD  Y+8,R30
003b91 87f9      	STD  Y+8+1,R31
                 _0x204006F:
003b92 935a      	ST   -Y,R21
003b93 934a      	ST   -Y,R20
003b94 85ec      	LDD  R30,Y+12
003b95 85fd      	LDD  R31,Y+12+1
003b96 93fa      	ST   -Y,R31
003b97 93ea      	ST   -Y,R30
003b98 85ac      	LDD  R26,Y+12
003b99 85bd      	LDD  R27,Y+12+1
003b9a 940e 3480 	CALL _memmove
003b9c 01fa      	MOVW R30,R20
003b9d c007      	RJMP _0x20C0002
                 _0x204006E:
003b9e 01f8      	MOVW R30,R16
                +
003b9f 01d9     +MOVW R26 , R18
003ba0 9612     +ADIW R26 , 2
003ba1 93ed     +ST X + , R30
003ba2 93fc     +ST X , R31
                 	__PUTW1RNS 18,2
                 _0x204006D:
                 _0x204006C:
                 _0x204006B:
003ba3 e0e0      	LDI  R30,LOW(0)
003ba4 e0f0      	LDI  R31,HIGH(0)
                 _0x20C0002:
003ba5 940e 3f90 	CALL __LOADLOCR6
003ba7 962c      	ADIW R28,12
003ba8 9508      	RET
                 ; .FEND
                 _malloc:
                 ; .FSTART _malloc
003ba9 93ba      	ST   -Y,R27
003baa 93aa      	ST   -Y,R26
003bab 931a      	ST   -Y,R17
003bac 930a      	ST   -Y,R16
                +
003bad e000     +LDI R16 , LOW ( 0 )
003bae e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
003baf 81ea      	LDD  R30,Y+2
003bb0 81fb      	LDD  R31,Y+2+1
003bb1 9730      	SBIW R30,0
003bb2 f071      	BREQ _0x2040070
003bb3 81aa      	LDD  R26,Y+2
003bb4 81bb      	LDD  R27,Y+2+1
003bb5 df45      	RCALL _allocate_block_G102
003bb6 018f      	MOVW R16,R30
003bb7 9730      	SBIW R30,0
003bb8 f041      	BREQ _0x2040071
003bb9 931a      	ST   -Y,R17
003bba 930a      	ST   -Y,R16
003bbb e0e0      	LDI  R30,LOW(0)
003bbc 93ea      	ST   -Y,R30
003bbd 81ad      	LDD  R26,Y+5
003bbe 81be      	LDD  R27,Y+5+1
003bbf 940e 349f 	CALL _memset
                 _0x2040071:
                 _0x2040070:
003bc1 01f8      	MOVW R30,R16
003bc2 8119      	LDD  R17,Y+1
003bc3 8108      	LDD  R16,Y+0
003bc4 940c 3c17 	JMP  _0x20C0001
                 ; .FEND
                 _free:
                 ; .FSTART _free
003bc6 93ba      	ST   -Y,R27
003bc7 93aa      	ST   -Y,R26
003bc8 81e8      	LD   R30,Y
003bc9 81f9      	LDD  R31,Y+1
003bca 93fa      	ST   -Y,R31
003bcb 93ea      	ST   -Y,R30
003bcc e0a0      	LDI  R26,LOW(0)
003bcd e0b0      	LDI  R27,0
003bce df92      	RCALL _realloc
003bcf 9622      	ADIW R28,2
003bd0 9508      	RET
                 ; .FEND
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.CSEG
                 
                 	.CSEG
                 
                 	.CSEG
                 _ftrunc:
                 ; .FSTART _ftrunc
003bd1 940e 3f5f 	CALL __PUTPARD2
003bd3 817b         ldd  r23,y+3
003bd4 816a         ldd  r22,y+2
003bd5 81f9         ldd  r31,y+1
003bd6 81e8         ld   r30,y
003bd7 fb77         bst  r23,7
003bd8 0f77         lsl  r23
003bd9 fd67         sbrc r22,7
003bda 6071         sbr  r23,1
003bdb 2f97         mov  r25,r23
003bdc 579e         subi r25,0x7e
003bdd f081         breq __ftrunc0
003bde f078         brcs __ftrunc0
003bdf 3198         cpi  r25,24
003be0 f490         brsh __ftrunc1
003be1 27aa         clr  r26
003be2 27bb         clr  r27
003be3 2788         clr  r24
                 __ftrunc2:
003be4 9408         sec
003be5 9587         ror  r24
003be6 95b7         ror  r27
003be7 95a7         ror  r26
003be8 959a         dec  r25
003be9 f7d1         brne __ftrunc2
003bea 23ea         and  r30,r26
003beb 23fb         and  r31,r27
003bec 2368         and  r22,r24
003bed c005         rjmp __ftrunc1
                 __ftrunc0:
003bee 94e8         clt
003bef 2777         clr  r23
003bf0 27ee         clr  r30
003bf1 27ff         clr  r31
003bf2 2766         clr  r22
                 __ftrunc1:
003bf3 776f         cbr  r22,0x80
003bf4 9576         lsr  r23
003bf5 f408         brcc __ftrunc3
003bf6 6860         sbr  r22,0x80
                 __ftrunc3:
003bf7 f977         bld  r23,7
003bf8 91a9         ld   r26,y+
003bf9 91b9         ld   r27,y+
003bfa 9189         ld   r24,y+
003bfb 9199         ld   r25,y+
003bfc 17ea         cp   r30,r26
003bfd 07fb         cpc  r31,r27
003bfe 0768         cpc  r22,r24
003bff 0779         cpc  r23,r25
003c00 fb97         bst  r25,7
003c01 9508         ret
                 ; .FEND
                 _floor:
                 ; .FSTART _floor
003c02 940e 3f5f 	CALL __PUTPARD2
003c04 940e 3f4b 	CALL __GETD2S0
003c06 940e 3bd1 	CALL _ftrunc
003c08 940e 3f50 	CALL __PUTD1S0
003c0a f419          brne __floor1
                 __floor0:
003c0b 940e 3f46 	CALL __GETD1S0
003c0d c009      	RJMP _0x20C0001
                 __floor1:
003c0e f7e6          brtc __floor0
003c0f 940e 3f46 	CALL __GETD1S0
                +
003c11 e0a0     +LDI R26 , LOW ( 0x3F800000 )
003c12 e0b0     +LDI R27 , HIGH ( 0x3F800000 )
003c13 e880     +LDI R24 , BYTE3 ( 0x3F800000 )
003c14 e39f     +LDI R25 , BYTE4 ( 0x3F800000 )
                 	__GETD2N 0x3F800000
003c15 940e 3cc2 	CALL __SUBF12
                 _0x20C0001:
003c17 9624      	ADIW R28,4
003c18 9508      	RET
                 ; .FEND
                 
                 	.DSEG
                 _terror:
0006b3           	.BYTE 0x20
                 _Stat_G000:
0006d3           	.BYTE 0x1
                 _Timer1_G000:
0006d4           	.BYTE 0x1
                 _Timer2_G000:
0006d5           	.BYTE 0x1
                 _CardType_G000:
0006d6           	.BYTE 0x1
                 _twiBuf_G000:
0006d7           	.BYTE 0x8
                 _twiState_G000:
0006df           	.BYTE 0x1
                 _twiMsgSize_G000:
0006e0           	.BYTE 0x1
                 _pre:
0006e1           	.BYTE 0x4
                 _ptr_S000002F000:
0006e5           	.BYTE 0x1
                 _FatFs_G000:
0006e6           	.BYTE 0x2
                 _Fsid_G000:
0006e8           	.BYTE 0x2
                 _g_FileInfo:
0006ea           	.BYTE 0xC0
                 _file:
0007aa           	.BYTE 0x20
                 _fn16_str:
0007ca           	.BYTE 0xD
                 _rootpath:
0007d7           	.BYTE 0x20
                 _audiobuf:
0007f7           	.BYTE 0x40
                 _bFileInfoWindow:
000837           	.BYTE 0x1
                 _bFormatAlert:
000838           	.BYTE 0x1
                 _bTextReader:
000839           	.BYTE 0x1
                 _bMusicPlayer:
00083a           	.BYTE 0x1
                 _scroll_index:
00083b           	.BYTE 0x2
                 _state:
00083d           	.BYTE 0x2
                 _bMusicFOpened:
00083f           	.BYTE 0x1
                 _vcc:
000840           	.BYTE 0x2
                 __seed_G102:
000842           	.BYTE 0x4
                 
                 	.CSEG
                 
                 	.CSEG
                 _delay_ms:
003c19 9610      	adiw r26,0
003c1a f039      	breq __delay_ms1
                 __delay_ms0:
                +
003c1b ed80     +LDI R24 , LOW ( 0x7D0 )
003c1c e097     +LDI R25 , HIGH ( 0x7D0 )
                +__DELAY_USW_LOOP :
003c1d 9701     +SBIW R24 , 1
003c1e f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 0x7D0
003c1f 95a8      	wdr
003c20 9711      	sbiw r26,1
003c21 f7c9      	brne __delay_ms0
                 __delay_ms1:
003c22 9508      	ret
                 
                 __ANEGF1:
003c23 9730      	SBIW R30,0
003c24 4060      	SBCI R22,0
003c25 4070      	SBCI R23,0
003c26 f009      	BREQ __ANEGF10
003c27 5870      	SUBI R23,0x80
                 __ANEGF10:
003c28 9508      	RET
                 
                 __ROUND_REPACK:
003c29 2355      	TST  R21
003c2a f442      	BRPL __REPACK
003c2b 3850      	CPI  R21,0x80
003c2c f411      	BRNE __ROUND_REPACK0
003c2d ffe0      	SBRS R30,0
003c2e c004      	RJMP __REPACK
                 __ROUND_REPACK0:
003c2f 9631      	ADIW R30,1
003c30 1f69      	ADC  R22,R25
003c31 1f79      	ADC  R23,R25
003c32 f06b      	BRVS __REPACK1
                 
                 __REPACK:
003c33 e850      	LDI  R21,0x80
003c34 2757      	EOR  R21,R23
003c35 f411      	BRNE __REPACK0
003c36 935f      	PUSH R21
003c37 c0cf      	RJMP __ZERORES
                 __REPACK0:
003c38 3f5f      	CPI  R21,0xFF
003c39 f031      	BREQ __REPACK1
003c3a 0f66      	LSL  R22
003c3b 0c00      	LSL  R0
003c3c 9557      	ROR  R21
003c3d 9567      	ROR  R22
003c3e 2f75      	MOV  R23,R21
003c3f 9508      	RET
                 __REPACK1:
003c40 935f      	PUSH R21
003c41 2000      	TST  R0
003c42 f00a      	BRMI __REPACK2
003c43 c0cf      	RJMP __MAXRES
                 __REPACK2:
003c44 c0c8      	RJMP __MINRES
                 
                 __UNPACK:
003c45 e850      	LDI  R21,0x80
003c46 2e19      	MOV  R1,R25
003c47 2215      	AND  R1,R21
003c48 0f88      	LSL  R24
003c49 1f99      	ROL  R25
003c4a 2795      	EOR  R25,R21
003c4b 0f55      	LSL  R21
003c4c 9587      	ROR  R24
                 
                 __UNPACK1:
003c4d e850      	LDI  R21,0x80
003c4e 2e07      	MOV  R0,R23
003c4f 2205      	AND  R0,R21
003c50 0f66      	LSL  R22
003c51 1f77      	ROL  R23
003c52 2775      	EOR  R23,R21
003c53 0f55      	LSL  R21
003c54 9567      	ROR  R22
003c55 9508      	RET
                 
                 __CFD1U:
003c56 9468      	SET
003c57 c001      	RJMP __CFD1U0
                 __CFD1:
003c58 94e8      	CLT
                 __CFD1U0:
003c59 935f      	PUSH R21
003c5a dff2      	RCALL __UNPACK1
003c5b 3870      	CPI  R23,0x80
003c5c f018      	BRLO __CFD10
003c5d 3f7f      	CPI  R23,0xFF
003c5e f408      	BRCC __CFD10
003c5f c0a7      	RJMP __ZERORES
                 __CFD10:
003c60 e156      	LDI  R21,22
003c61 1b57      	SUB  R21,R23
003c62 f4aa      	BRPL __CFD11
003c63 9551      	NEG  R21
003c64 3058      	CPI  R21,8
003c65 f40e      	BRTC __CFD19
003c66 3059      	CPI  R21,9
                 __CFD19:
003c67 f030      	BRLO __CFD17
003c68 efef      	SER  R30
003c69 efff      	SER  R31
003c6a ef6f      	SER  R22
003c6b e77f      	LDI  R23,0x7F
003c6c f977      	BLD  R23,7
003c6d c01a      	RJMP __CFD15
                 __CFD17:
003c6e 2777      	CLR  R23
003c6f 2355      	TST  R21
003c70 f0b9      	BREQ __CFD15
                 __CFD18:
003c71 0fee      	LSL  R30
003c72 1fff      	ROL  R31
003c73 1f66      	ROL  R22
003c74 1f77      	ROL  R23
003c75 955a      	DEC  R21
003c76 f7d1      	BRNE __CFD18
003c77 c010      	RJMP __CFD15
                 __CFD11:
003c78 2777      	CLR  R23
                 __CFD12:
003c79 3058      	CPI  R21,8
003c7a f028      	BRLO __CFD13
003c7b 2fef      	MOV  R30,R31
003c7c 2ff6      	MOV  R31,R22
003c7d 2f67      	MOV  R22,R23
003c7e 5058      	SUBI R21,8
003c7f cff9      	RJMP __CFD12
                 __CFD13:
003c80 2355      	TST  R21
003c81 f031      	BREQ __CFD15
                 __CFD14:
003c82 9576      	LSR  R23
003c83 9567      	ROR  R22
003c84 95f7      	ROR  R31
003c85 95e7      	ROR  R30
003c86 955a      	DEC  R21
003c87 f7d1      	BRNE __CFD14
                 __CFD15:
003c88 2000      	TST  R0
003c89 f40a      	BRPL __CFD16
003c8a d167      	RCALL __ANEGD1
                 __CFD16:
003c8b 915f      	POP  R21
003c8c 9508      	RET
                 
                 __CDF1U:
003c8d 9468      	SET
003c8e c001      	RJMP __CDF1U0
                 __CDF1:
003c8f 94e8      	CLT
                 __CDF1U0:
003c90 9730      	SBIW R30,0
003c91 4060      	SBCI R22,0
003c92 4070      	SBCI R23,0
003c93 f0b1      	BREQ __CDF10
003c94 2400      	CLR  R0
003c95 f026      	BRTS __CDF11
003c96 2377      	TST  R23
003c97 f412      	BRPL __CDF11
003c98 9400      	COM  R0
003c99 d158      	RCALL __ANEGD1
                 __CDF11:
003c9a 2e17      	MOV  R1,R23
003c9b e17e      	LDI  R23,30
003c9c 2011      	TST  R1
                 __CDF12:
003c9d f032      	BRMI __CDF13
003c9e 957a      	DEC  R23
003c9f 0fee      	LSL  R30
003ca0 1fff      	ROL  R31
003ca1 1f66      	ROL  R22
003ca2 1c11      	ROL  R1
003ca3 cff9      	RJMP __CDF12
                 __CDF13:
003ca4 2fef      	MOV  R30,R31
003ca5 2ff6      	MOV  R31,R22
003ca6 2d61      	MOV  R22,R1
003ca7 935f      	PUSH R21
003ca8 df8a      	RCALL __REPACK
003ca9 915f      	POP  R21
                 __CDF10:
003caa 9508      	RET
                 
                 __SWAPACC:
003cab 934f      	PUSH R20
003cac 01af      	MOVW R20,R30
003cad 01fd      	MOVW R30,R26
003cae 01da      	MOVW R26,R20
003caf 01ab      	MOVW R20,R22
003cb0 01bc      	MOVW R22,R24
003cb1 01ca      	MOVW R24,R20
003cb2 2d40      	MOV  R20,R0
003cb3 2c01      	MOV  R0,R1
003cb4 2e14      	MOV  R1,R20
003cb5 914f      	POP  R20
003cb6 9508      	RET
                 
                 __UADD12:
003cb7 0fea      	ADD  R30,R26
003cb8 1ffb      	ADC  R31,R27
003cb9 1f68      	ADC  R22,R24
003cba 9508      	RET
                 
                 __NEGMAN1:
003cbb 95e0      	COM  R30
003cbc 95f0      	COM  R31
003cbd 9560      	COM  R22
003cbe 5fef      	SUBI R30,-1
003cbf 4fff      	SBCI R31,-1
003cc0 4f6f      	SBCI R22,-1
003cc1 9508      	RET
                 
                 __SUBF12:
003cc2 935f      	PUSH R21
003cc3 df81      	RCALL __UNPACK
003cc4 3890      	CPI  R25,0x80
003cc5 f171      	BREQ __ADDF129
003cc6 e850      	LDI  R21,0x80
003cc7 2615      	EOR  R1,R21
                 
003cc8 c004      	RJMP __ADDF120
                 
                 __ADDF12:
003cc9 935f      	PUSH R21
003cca df7a      	RCALL __UNPACK
003ccb 3890      	CPI  R25,0x80
003ccc f139      	BREQ __ADDF129
                 
                 __ADDF120:
003ccd 3870      	CPI  R23,0x80
003cce f121      	BREQ __ADDF128
                 __ADDF121:
003ccf 2f57      	MOV  R21,R23
003cd0 1b59      	SUB  R21,R25
003cd1 f12b      	BRVS __ADDF1211
003cd2 f412      	BRPL __ADDF122
003cd3 dfd7      	RCALL __SWAPACC
003cd4 cffa      	RJMP __ADDF121
                 __ADDF122:
003cd5 3158      	CPI  R21,24
003cd6 f018      	BRLO __ADDF123
003cd7 27aa      	CLR  R26
003cd8 27bb      	CLR  R27
003cd9 2788      	CLR  R24
                 __ADDF123:
003cda 3058      	CPI  R21,8
003cdb f028      	BRLO __ADDF124
003cdc 2fab      	MOV  R26,R27
003cdd 2fb8      	MOV  R27,R24
003cde 2788      	CLR  R24
003cdf 5058      	SUBI R21,8
003ce0 cff9      	RJMP __ADDF123
                 __ADDF124:
003ce1 2355      	TST  R21
003ce2 f029      	BREQ __ADDF126
                 __ADDF125:
003ce3 9586      	LSR  R24
003ce4 95b7      	ROR  R27
003ce5 95a7      	ROR  R26
003ce6 955a      	DEC  R21
003ce7 f7d9      	BRNE __ADDF125
                 __ADDF126:
003ce8 2d50      	MOV  R21,R0
003ce9 2551      	EOR  R21,R1
003cea f072      	BRMI __ADDF127
003ceb dfcb      	RCALL __UADD12
003cec f438      	BRCC __ADDF129
003ced 9567      	ROR  R22
003cee 95f7      	ROR  R31
003cef 95e7      	ROR  R30
003cf0 9573      	INC  R23
003cf1 f413      	BRVC __ADDF129
003cf2 c020      	RJMP __MAXRES
                 __ADDF128:
003cf3 dfb7      	RCALL __SWAPACC
                 __ADDF129:
003cf4 df3e      	RCALL __REPACK
003cf5 915f      	POP  R21
003cf6 9508      	RET
                 __ADDF1211:
003cf7 f7d8      	BRCC __ADDF128
003cf8 cffb      	RJMP __ADDF129
                 __ADDF127:
003cf9 1bea      	SUB  R30,R26
003cfa 0bfb      	SBC  R31,R27
003cfb 0b68      	SBC  R22,R24
003cfc f051      	BREQ __ZERORES
003cfd f410      	BRCC __ADDF1210
003cfe 9400      	COM  R0
003cff dfbb      	RCALL __NEGMAN1
                 __ADDF1210:
003d00 2366      	TST  R22
003d01 f392      	BRMI __ADDF129
003d02 0fee      	LSL  R30
003d03 1fff      	ROL  R31
003d04 1f66      	ROL  R22
003d05 957a      	DEC  R23
003d06 f7cb      	BRVC __ADDF1210
                 
                 __ZERORES:
003d07 27ee      	CLR  R30
003d08 27ff      	CLR  R31
003d09 2766      	CLR  R22
003d0a 2777      	CLR  R23
003d0b 915f      	POP  R21
003d0c 9508      	RET
                 
                 __MINRES:
003d0d efef      	SER  R30
003d0e efff      	SER  R31
003d0f e76f      	LDI  R22,0x7F
003d10 ef7f      	SER  R23
003d11 915f      	POP  R21
003d12 9508      	RET
                 
                 __MAXRES:
003d13 efef      	SER  R30
003d14 efff      	SER  R31
003d15 e76f      	LDI  R22,0x7F
003d16 e77f      	LDI  R23,0x7F
003d17 915f      	POP  R21
003d18 9508      	RET
                 
                 __MULF12:
003d19 935f      	PUSH R21
003d1a df2a      	RCALL __UNPACK
003d1b 3870      	CPI  R23,0x80
003d1c f351      	BREQ __ZERORES
003d1d 3890      	CPI  R25,0x80
003d1e f341      	BREQ __ZERORES
003d1f 2401      	EOR  R0,R1
003d20 9408      	SEC
003d21 1f79      	ADC  R23,R25
003d22 f423      	BRVC __MULF124
003d23 f31c      	BRLT __ZERORES
                 __MULF125:
003d24 2000      	TST  R0
003d25 f33a      	BRMI __MINRES
003d26 cfec      	RJMP __MAXRES
                 __MULF124:
003d27 920f      	PUSH R0
003d28 931f      	PUSH R17
003d29 932f      	PUSH R18
003d2a 933f      	PUSH R19
003d2b 934f      	PUSH R20
003d2c 2711      	CLR  R17
003d2d 2722      	CLR  R18
003d2e 2799      	CLR  R25
003d2f 9f68      	MUL  R22,R24
003d30 01a0      	MOVW R20,R0
003d31 9f8f      	MUL  R24,R31
003d32 2d30      	MOV  R19,R0
003d33 0d41      	ADD  R20,R1
003d34 1f59      	ADC  R21,R25
003d35 9f6b      	MUL  R22,R27
003d36 0d30      	ADD  R19,R0
003d37 1d41      	ADC  R20,R1
003d38 1f59      	ADC  R21,R25
003d39 9f8e      	MUL  R24,R30
003d3a d027      	RCALL __MULF126
003d3b 9fbf      	MUL  R27,R31
003d3c d025      	RCALL __MULF126
003d3d 9f6a      	MUL  R22,R26
003d3e d023      	RCALL __MULF126
003d3f 9fbe      	MUL  R27,R30
003d40 d01d      	RCALL __MULF127
003d41 9faf      	MUL  R26,R31
003d42 d01b      	RCALL __MULF127
003d43 9fae      	MUL  R26,R30
003d44 0d11      	ADD  R17,R1
003d45 1f29      	ADC  R18,R25
003d46 1f39      	ADC  R19,R25
003d47 1f49      	ADC  R20,R25
003d48 1f59      	ADC  R21,R25
003d49 2fe3      	MOV  R30,R19
003d4a 2ff4      	MOV  R31,R20
003d4b 2f65      	MOV  R22,R21
003d4c 2f52      	MOV  R21,R18
003d4d 914f      	POP  R20
003d4e 913f      	POP  R19
003d4f 912f      	POP  R18
003d50 911f      	POP  R17
003d51 900f      	POP  R0
003d52 2366      	TST  R22
003d53 f02a      	BRMI __MULF122
003d54 0f55      	LSL  R21
003d55 1fee      	ROL  R30
003d56 1fff      	ROL  R31
003d57 1f66      	ROL  R22
003d58 c002      	RJMP __MULF123
                 __MULF122:
003d59 9573      	INC  R23
003d5a f24b      	BRVS __MULF125
                 __MULF123:
003d5b decd      	RCALL __ROUND_REPACK
003d5c 915f      	POP  R21
003d5d 9508      	RET
                 
                 __MULF127:
003d5e 0d10      	ADD  R17,R0
003d5f 1d21      	ADC  R18,R1
003d60 1f39      	ADC  R19,R25
003d61 c002      	RJMP __MULF128
                 __MULF126:
003d62 0d20      	ADD  R18,R0
003d63 1d31      	ADC  R19,R1
                 __MULF128:
003d64 1f49      	ADC  R20,R25
003d65 1f59      	ADC  R21,R25
003d66 9508      	RET
                 
                 __DIVF21:
003d67 935f      	PUSH R21
003d68 dedc      	RCALL __UNPACK
003d69 3870      	CPI  R23,0x80
003d6a f421      	BRNE __DIVF210
003d6b 2011      	TST  R1
                 __DIVF211:
003d6c f40a      	BRPL __DIVF219
003d6d cf9f      	RJMP __MINRES
                 __DIVF219:
003d6e cfa4      	RJMP __MAXRES
                 __DIVF210:
003d6f 3890      	CPI  R25,0x80
003d70 f409      	BRNE __DIVF218
                 __DIVF217:
003d71 cf95      	RJMP __ZERORES
                 __DIVF218:
003d72 2401      	EOR  R0,R1
003d73 9408      	SEC
003d74 0b97      	SBC  R25,R23
003d75 f41b      	BRVC __DIVF216
003d76 f3d4      	BRLT __DIVF217
003d77 2000      	TST  R0
003d78 cff3      	RJMP __DIVF211
                 __DIVF216:
003d79 2f79      	MOV  R23,R25
003d7a 931f      	PUSH R17
003d7b 932f      	PUSH R18
003d7c 933f      	PUSH R19
003d7d 934f      	PUSH R20
003d7e 2411      	CLR  R1
003d7f 2711      	CLR  R17
003d80 2722      	CLR  R18
003d81 2733      	CLR  R19
003d82 2744      	CLR  R20
003d83 2755      	CLR  R21
003d84 e290      	LDI  R25,32
                 __DIVF212:
003d85 17ae      	CP   R26,R30
003d86 07bf      	CPC  R27,R31
003d87 0786      	CPC  R24,R22
003d88 0741      	CPC  R20,R17
003d89 f030      	BRLO __DIVF213
003d8a 1bae      	SUB  R26,R30
003d8b 0bbf      	SBC  R27,R31
003d8c 0b86      	SBC  R24,R22
003d8d 0b41      	SBC  R20,R17
003d8e 9408      	SEC
003d8f c001      	RJMP __DIVF214
                 __DIVF213:
003d90 9488      	CLC
                 __DIVF214:
003d91 1f55      	ROL  R21
003d92 1f22      	ROL  R18
003d93 1f33      	ROL  R19
003d94 1c11      	ROL  R1
003d95 1faa      	ROL  R26
003d96 1fbb      	ROL  R27
003d97 1f88      	ROL  R24
003d98 1f44      	ROL  R20
003d99 959a      	DEC  R25
003d9a f751      	BRNE __DIVF212
003d9b 01f9      	MOVW R30,R18
003d9c 2d61      	MOV  R22,R1
003d9d 914f      	POP  R20
003d9e 913f      	POP  R19
003d9f 912f      	POP  R18
003da0 911f      	POP  R17
003da1 2366      	TST  R22
003da2 f032      	BRMI __DIVF215
003da3 0f55      	LSL  R21
003da4 1fee      	ROL  R30
003da5 1fff      	ROL  R31
003da6 1f66      	ROL  R22
003da7 957a      	DEC  R23
003da8 f243      	BRVS __DIVF217
                 __DIVF215:
003da9 de7f      	RCALL __ROUND_REPACK
003daa 915f      	POP  R21
003dab 9508      	RET
                 
                 __CMPF12:
003dac 2399      	TST  R25
003dad f09a      	BRMI __CMPF120
003dae 2377      	TST  R23
003daf f042      	BRMI __CMPF121
003db0 1797      	CP   R25,R23
003db1 f048      	BRLO __CMPF122
003db2 f429      	BRNE __CMPF121
003db3 17ae      	CP   R26,R30
003db4 07bf      	CPC  R27,R31
003db5 0786      	CPC  R24,R22
003db6 f020      	BRLO __CMPF122
003db7 f031      	BREQ __CMPF123
                 __CMPF121:
003db8 9498      	CLZ
003db9 9488      	CLC
003dba 9508      	RET
                 __CMPF122:
003dbb 9498      	CLZ
003dbc 9408      	SEC
003dbd 9508      	RET
                 __CMPF123:
003dbe 9418      	SEZ
003dbf 9488      	CLC
003dc0 9508      	RET
                 __CMPF120:
003dc1 2377      	TST  R23
003dc2 f7c2      	BRPL __CMPF122
003dc3 1797      	CP   R25,R23
003dc4 f398      	BRLO __CMPF121
003dc5 f7a9      	BRNE __CMPF122
003dc6 17ea      	CP   R30,R26
003dc7 07fb      	CPC  R31,R27
003dc8 0768      	CPC  R22,R24
003dc9 f388      	BRLO __CMPF122
003dca f399      	BREQ __CMPF123
003dcb cfec      	RJMP __CMPF121
                 
                 __ADDW2R15:
003dcc 2400      	CLR  R0
003dcd 0daf      	ADD  R26,R15
003dce 1db0      	ADC  R27,R0
003dcf 9508      	RET
                 
                 __ADDD12:
003dd0 0fea      	ADD  R30,R26
003dd1 1ffb      	ADC  R31,R27
003dd2 1f68      	ADC  R22,R24
003dd3 1f79      	ADC  R23,R25
003dd4 9508      	RET
                 
                 __ADDD21:
003dd5 0fae      	ADD  R26,R30
003dd6 1fbf      	ADC  R27,R31
003dd7 1f86      	ADC  R24,R22
003dd8 1f97      	ADC  R25,R23
003dd9 9508      	RET
                 
                 __SUBD12:
003dda 1bea      	SUB  R30,R26
003ddb 0bfb      	SBC  R31,R27
003ddc 0b68      	SBC  R22,R24
003ddd 0b79      	SBC  R23,R25
003dde 9508      	RET
                 
                 __SUBD21:
003ddf 1bae      	SUB  R26,R30
003de0 0bbf      	SBC  R27,R31
003de1 0b86      	SBC  R24,R22
003de2 0b97      	SBC  R25,R23
003de3 9508      	RET
                 
                 __ANDD12:
003de4 23ea      	AND  R30,R26
003de5 23fb      	AND  R31,R27
003de6 2368      	AND  R22,R24
003de7 2379      	AND  R23,R25
003de8 9508      	RET
                 
                 __ORD12:
003de9 2bea      	OR   R30,R26
003dea 2bfb      	OR   R31,R27
003deb 2b68      	OR   R22,R24
003dec 2b79      	OR   R23,R25
003ded 9508      	RET
                 
                 __ANEGW1:
003dee 95f1      	NEG  R31
003def 95e1      	NEG  R30
003df0 40f0      	SBCI R31,0
003df1 9508      	RET
                 
                 __ANEGD1:
003df2 95f0      	COM  R31
003df3 9560      	COM  R22
003df4 9570      	COM  R23
003df5 95e1      	NEG  R30
003df6 4fff      	SBCI R31,-1
003df7 4f6f      	SBCI R22,-1
003df8 4f7f      	SBCI R23,-1
003df9 9508      	RET
                 
                 __LSLW12:
003dfa 23ee      	TST  R30
003dfb 2e0e      	MOV  R0,R30
003dfc 01fd      	MOVW R30,R26
003dfd f021      	BREQ __LSLW12R
                 __LSLW12L:
003dfe 0fee      	LSL  R30
003dff 1fff      	ROL  R31
003e00 940a      	DEC  R0
003e01 f7e1      	BRNE __LSLW12L
                 __LSLW12R:
003e02 9508      	RET
                 
                 __ASRW12:
003e03 23ee      	TST  R30
003e04 2e0e      	MOV  R0,R30
003e05 01fd      	MOVW R30,R26
003e06 f021      	BREQ __ASRW12R
                 __ASRW12L:
003e07 95f5      	ASR  R31
003e08 95e7      	ROR  R30
003e09 940a      	DEC  R0
003e0a f7e1      	BRNE __ASRW12L
                 __ASRW12R:
003e0b 9508      	RET
                 
                 __LSLD12:
003e0c 23ee      	TST  R30
003e0d 2e0e      	MOV  R0,R30
003e0e 01fd      	MOVW R30,R26
003e0f 01bc      	MOVW R22,R24
003e10 f031      	BREQ __LSLD12R
                 __LSLD12L:
003e11 0fee      	LSL  R30
003e12 1fff      	ROL  R31
003e13 1f66      	ROL  R22
003e14 1f77      	ROL  R23
003e15 940a      	DEC  R0
003e16 f7d1      	BRNE __LSLD12L
                 __LSLD12R:
003e17 9508      	RET
                 
                 __LSRD12:
003e18 23ee      	TST  R30
003e19 2e0e      	MOV  R0,R30
003e1a 01fd      	MOVW R30,R26
003e1b 01bc      	MOVW R22,R24
003e1c f031      	BREQ __LSRD12R
                 __LSRD12L:
003e1d 9576      	LSR  R23
003e1e 9567      	ROR  R22
003e1f 95f7      	ROR  R31
003e20 95e7      	ROR  R30
003e21 940a      	DEC  R0
003e22 f7d1      	BRNE __LSRD12L
                 __LSRD12R:
003e23 9508      	RET
                 
                 __LSLW4:
003e24 0fee      	LSL  R30
003e25 1fff      	ROL  R31
                 __LSLW3:
003e26 0fee      	LSL  R30
003e27 1fff      	ROL  R31
                 __LSLW2:
003e28 0fee      	LSL  R30
003e29 1fff      	ROL  R31
003e2a 0fee      	LSL  R30
003e2b 1fff      	ROL  R31
003e2c 9508      	RET
                 
                 __ASRW4:
003e2d 95f5      	ASR  R31
003e2e 95e7      	ROR  R30
                 __ASRW3:
003e2f 95f5      	ASR  R31
003e30 95e7      	ROR  R30
                 __ASRW2:
003e31 95f5      	ASR  R31
003e32 95e7      	ROR  R30
003e33 95f5      	ASR  R31
003e34 95e7      	ROR  R30
003e35 9508      	RET
                 
                 __LSRW4:
003e36 95f6      	LSR  R31
003e37 95e7      	ROR  R30
                 __LSRW3:
003e38 95f6      	LSR  R31
003e39 95e7      	ROR  R30
                 __LSRW2:
003e3a 95f6      	LSR  R31
003e3b 95e7      	ROR  R30
003e3c 95f6      	LSR  R31
003e3d 95e7      	ROR  R30
003e3e 9508      	RET
                 
                 __LSRD1:
003e3f 9576      	LSR  R23
003e40 9567      	ROR  R22
003e41 95f7      	ROR  R31
003e42 95e7      	ROR  R30
003e43 9508      	RET
                 
                 __ASRW8:
003e44 2fef      	MOV  R30,R31
003e45 27ff      	CLR  R31
003e46 fde7      	SBRC R30,7
003e47 efff      	SER  R31
003e48 9508      	RET
                 
                 __LSRD16:
003e49 2fe6      	MOV  R30,R22
003e4a 2ff7      	MOV  R31,R23
003e4b e060      	LDI  R22,0
003e4c e070      	LDI  R23,0
003e4d 9508      	RET
                 
                 __LSLD16:
003e4e 2f6e      	MOV  R22,R30
003e4f 2f7f      	MOV  R23,R31
003e50 e0e0      	LDI  R30,0
003e51 e0f0      	LDI  R31,0
003e52 9508      	RET
                 
                 __CBD1:
003e53 2ffe      	MOV  R31,R30
003e54 0fff      	ADD  R31,R31
003e55 0bff      	SBC  R31,R31
003e56 2f6f      	MOV  R22,R31
003e57 2f7f      	MOV  R23,R31
003e58 9508      	RET
                 
                 __CWD1:
003e59 2f6f      	MOV  R22,R31
003e5a 0f66      	ADD  R22,R22
003e5b 0b66      	SBC  R22,R22
003e5c 2f76      	MOV  R23,R22
003e5d 9508      	RET
                 
                 __COMD1:
003e5e 95e0      	COM  R30
003e5f 95f0      	COM  R31
003e60 9560      	COM  R22
003e61 9570      	COM  R23
003e62 9508      	RET
                 
                 __EQB12:
003e63 17ea      	CP   R30,R26
003e64 e0e1      	LDI  R30,1
003e65 f009      	BREQ __EQB12T
003e66 27ee      	CLR  R30
                 __EQB12T:
003e67 9508      	RET
                 
                 __MULW12U:
003e68 9ffa      	MUL  R31,R26
003e69 2df0      	MOV  R31,R0
003e6a 9feb      	MUL  R30,R27
003e6b 0df0      	ADD  R31,R0
003e6c 9fea      	MUL  R30,R26
003e6d 2de0      	MOV  R30,R0
003e6e 0df1      	ADD  R31,R1
003e6f 9508      	RET
                 
                 __MULD12U:
003e70 9f7a      	MUL  R23,R26
003e71 2d70      	MOV  R23,R0
003e72 9f6b      	MUL  R22,R27
003e73 0d70      	ADD  R23,R0
003e74 9ff8      	MUL  R31,R24
003e75 0d70      	ADD  R23,R0
003e76 9fe9      	MUL  R30,R25
003e77 0d70      	ADD  R23,R0
003e78 9f6a      	MUL  R22,R26
003e79 2d60      	MOV  R22,R0
003e7a 0d71      	ADD  R23,R1
003e7b 9ffb      	MUL  R31,R27
003e7c 0d60      	ADD  R22,R0
003e7d 1d71      	ADC  R23,R1
003e7e 9fe8      	MUL  R30,R24
003e7f 0d60      	ADD  R22,R0
003e80 1d71      	ADC  R23,R1
003e81 2788      	CLR  R24
003e82 9ffa      	MUL  R31,R26
003e83 2df0      	MOV  R31,R0
003e84 0d61      	ADD  R22,R1
003e85 1f78      	ADC  R23,R24
003e86 9feb      	MUL  R30,R27
003e87 0df0      	ADD  R31,R0
003e88 1d61      	ADC  R22,R1
003e89 1f78      	ADC  R23,R24
003e8a 9fea      	MUL  R30,R26
003e8b 2de0      	MOV  R30,R0
003e8c 0df1      	ADD  R31,R1
003e8d 1f68      	ADC  R22,R24
003e8e 1f78      	ADC  R23,R24
003e8f 9508      	RET
                 
                 __MULB1W2U:
003e90 2f6e      	MOV  R22,R30
003e91 9f6a      	MUL  R22,R26
003e92 01f0      	MOVW R30,R0
003e93 9f6b      	MUL  R22,R27
003e94 0df0      	ADD  R31,R0
003e95 9508      	RET
                 
                 __MULW12:
003e96 d075      	RCALL __CHKSIGNW
003e97 dfd0      	RCALL __MULW12U
003e98 f40e      	BRTC __MULW121
003e99 df54      	RCALL __ANEGW1
                 __MULW121:
003e9a 9508      	RET
                 
                 __DIVB21U:
003e9b 2400      	CLR  R0
003e9c e098      	LDI  R25,8
                 __DIVB21U1:
003e9d 0faa      	LSL  R26
003e9e 1c00      	ROL  R0
003e9f 1a0e      	SUB  R0,R30
003ea0 f410      	BRCC __DIVB21U2
003ea1 0e0e      	ADD  R0,R30
003ea2 c001      	RJMP __DIVB21U3
                 __DIVB21U2:
003ea3 60a1      	SBR  R26,1
                 __DIVB21U3:
003ea4 959a      	DEC  R25
003ea5 f7b9      	BRNE __DIVB21U1
003ea6 2fea      	MOV  R30,R26
003ea7 2da0      	MOV  R26,R0
003ea8 9508      	RET
                 
                 __DIVB21:
003ea9 d056      	RCALL __CHKSIGNB
003eaa dff0      	RCALL __DIVB21U
003eab f40e      	BRTC __DIVB211
003eac 95e1      	NEG  R30
                 __DIVB211:
003ead 9508      	RET
                 
                 __DIVW21U:
003eae 2400      	CLR  R0
003eaf 2411      	CLR  R1
003eb0 e190      	LDI  R25,16
                 __DIVW21U1:
003eb1 0faa      	LSL  R26
003eb2 1fbb      	ROL  R27
003eb3 1c00      	ROL  R0
003eb4 1c11      	ROL  R1
003eb5 1a0e      	SUB  R0,R30
003eb6 0a1f      	SBC  R1,R31
003eb7 f418      	BRCC __DIVW21U2
003eb8 0e0e      	ADD  R0,R30
003eb9 1e1f      	ADC  R1,R31
003eba c001      	RJMP __DIVW21U3
                 __DIVW21U2:
003ebb 60a1      	SBR  R26,1
                 __DIVW21U3:
003ebc 959a      	DEC  R25
003ebd f799      	BRNE __DIVW21U1
003ebe 01fd      	MOVW R30,R26
003ebf 01d0      	MOVW R26,R0
003ec0 9508      	RET
                 
                 __DIVW21:
003ec1 d04a      	RCALL __CHKSIGNW
003ec2 dfeb      	RCALL __DIVW21U
003ec3 f40e      	BRTC __DIVW211
003ec4 df29      	RCALL __ANEGW1
                 __DIVW211:
003ec5 9508      	RET
                 
                 __DIVD21U:
003ec6 933f      	PUSH R19
003ec7 934f      	PUSH R20
003ec8 935f      	PUSH R21
003ec9 2400      	CLR  R0
003eca 2411      	CLR  R1
003ecb 2744      	CLR  R20
003ecc 2755      	CLR  R21
003ecd e230      	LDI  R19,32
                 __DIVD21U1:
003ece 0faa      	LSL  R26
003ecf 1fbb      	ROL  R27
003ed0 1f88      	ROL  R24
003ed1 1f99      	ROL  R25
003ed2 1c00      	ROL  R0
003ed3 1c11      	ROL  R1
003ed4 1f44      	ROL  R20
003ed5 1f55      	ROL  R21
003ed6 1a0e      	SUB  R0,R30
003ed7 0a1f      	SBC  R1,R31
003ed8 0b46      	SBC  R20,R22
003ed9 0b57      	SBC  R21,R23
003eda f428      	BRCC __DIVD21U2
003edb 0e0e      	ADD  R0,R30
003edc 1e1f      	ADC  R1,R31
003edd 1f46      	ADC  R20,R22
003ede 1f57      	ADC  R21,R23
003edf c001      	RJMP __DIVD21U3
                 __DIVD21U2:
003ee0 60a1      	SBR  R26,1
                 __DIVD21U3:
003ee1 953a      	DEC  R19
003ee2 f759      	BRNE __DIVD21U1
003ee3 01fd      	MOVW R30,R26
003ee4 01bc      	MOVW R22,R24
003ee5 01d0      	MOVW R26,R0
003ee6 01ca      	MOVW R24,R20
003ee7 915f      	POP  R21
003ee8 914f      	POP  R20
003ee9 913f      	POP  R19
003eea 9508      	RET
                 
                 __DIVD21:
003eeb d02e      	RCALL __CHKSIGND
003eec dfd9      	RCALL __DIVD21U
003eed f40e      	BRTC __DIVD211
003eee df03      	RCALL __ANEGD1
                 __DIVD211:
003eef 9508      	RET
                 
                 __MODB21:
003ef0 94e8      	CLT
003ef1 ffa7      	SBRS R26,7
003ef2 c002      	RJMP __MODB211
003ef3 95a1      	NEG  R26
003ef4 9468      	SET
                 __MODB211:
003ef5 fde7      	SBRC R30,7
003ef6 95e1      	NEG  R30
003ef7 dfa3      	RCALL __DIVB21U
003ef8 2fea      	MOV  R30,R26
003ef9 f40e      	BRTC __MODB212
003efa 95e1      	NEG  R30
                 __MODB212:
003efb 9508      	RET
                 
                 __MODD21U:
003efc dfc9      	RCALL __DIVD21U
003efd 01fd      	MOVW R30,R26
003efe 01bc      	MOVW R22,R24
003eff 9508      	RET
                 
                 __CHKSIGNB:
003f00 94e8      	CLT
003f01 ffe7      	SBRS R30,7
003f02 c002      	RJMP __CHKSB1
003f03 95e1      	NEG  R30
003f04 9468      	SET
                 __CHKSB1:
003f05 ffa7      	SBRS R26,7
003f06 c004      	RJMP __CHKSB2
003f07 95a1      	NEG  R26
003f08 f800      	BLD  R0,0
003f09 9403      	INC  R0
003f0a fa00      	BST  R0,0
                 __CHKSB2:
003f0b 9508      	RET
                 
                 __CHKSIGNW:
003f0c 94e8      	CLT
003f0d fff7      	SBRS R31,7
003f0e c002      	RJMP __CHKSW1
003f0f dede      	RCALL __ANEGW1
003f10 9468      	SET
                 __CHKSW1:
003f11 ffb7      	SBRS R27,7
003f12 c006      	RJMP __CHKSW2
003f13 95a0      	COM  R26
003f14 95b0      	COM  R27
003f15 9611      	ADIW R26,1
003f16 f800      	BLD  R0,0
003f17 9403      	INC  R0
003f18 fa00      	BST  R0,0
                 __CHKSW2:
003f19 9508      	RET
                 
                 __CHKSIGND:
003f1a 94e8      	CLT
003f1b ff77      	SBRS R23,7
003f1c c002      	RJMP __CHKSD1
003f1d ded4      	RCALL __ANEGD1
003f1e 9468      	SET
                 __CHKSD1:
003f1f ff97      	SBRS R25,7
003f20 c00b      	RJMP __CHKSD2
003f21 2400      	CLR  R0
003f22 95a0      	COM  R26
003f23 95b0      	COM  R27
003f24 9580      	COM  R24
003f25 9590      	COM  R25
003f26 9611      	ADIW R26,1
003f27 1d80      	ADC  R24,R0
003f28 1d90      	ADC  R25,R0
003f29 f800      	BLD  R0,0
003f2a 9403      	INC  R0
003f2b fa00      	BST  R0,0
                 __CHKSD2:
003f2c 9508      	RET
                 
                 __GETW1P:
003f2d 91ed      	LD   R30,X+
003f2e 91fc      	LD   R31,X
003f2f 9711      	SBIW R26,1
003f30 9508      	RET
                 
                 __GETD1P:
003f31 91ed      	LD   R30,X+
003f32 91fd      	LD   R31,X+
003f33 916d      	LD   R22,X+
003f34 917c      	LD   R23,X
003f35 9713      	SBIW R26,3
003f36 9508      	RET
                 
                 __GETD1P_INC:
003f37 91ed      	LD   R30,X+
003f38 91fd      	LD   R31,X+
003f39 916d      	LD   R22,X+
003f3a 917d      	LD   R23,X+
003f3b 9508      	RET
                 
                 __PUTDP1:
003f3c 93ed      	ST   X+,R30
003f3d 93fd      	ST   X+,R31
003f3e 936d      	ST   X+,R22
003f3f 937c      	ST   X,R23
003f40 9508      	RET
                 
                 __PUTDP1_DEC:
003f41 937e      	ST   -X,R23
003f42 936e      	ST   -X,R22
003f43 93fe      	ST   -X,R31
003f44 93ee      	ST   -X,R30
003f45 9508      	RET
                 
                 __GETD1S0:
003f46 81e8      	LD   R30,Y
003f47 81f9      	LDD  R31,Y+1
003f48 816a      	LDD  R22,Y+2
003f49 817b      	LDD  R23,Y+3
003f4a 9508      	RET
                 
                 __GETD2S0:
003f4b 81a8      	LD   R26,Y
003f4c 81b9      	LDD  R27,Y+1
003f4d 818a      	LDD  R24,Y+2
003f4e 819b      	LDD  R25,Y+3
003f4f 9508      	RET
                 
                 __PUTD1S0:
003f50 83e8      	ST   Y,R30
003f51 83f9      	STD  Y+1,R31
003f52 836a      	STD  Y+2,R22
003f53 837b      	STD  Y+3,R23
003f54 9508      	RET
                 
                 __PUTDZ20:
003f55 83a0      	ST   Z,R26
003f56 83b1      	STD  Z+1,R27
003f57 8382      	STD  Z+2,R24
003f58 8393      	STD  Z+3,R25
003f59 9508      	RET
                 
                 __PUTPARD1:
003f5a 937a      	ST   -Y,R23
003f5b 936a      	ST   -Y,R22
003f5c 93fa      	ST   -Y,R31
003f5d 93ea      	ST   -Y,R30
003f5e 9508      	RET
                 
                 __PUTPARD2:
003f5f 939a      	ST   -Y,R25
003f60 938a      	ST   -Y,R24
003f61 93ba      	ST   -Y,R27
003f62 93aa      	ST   -Y,R26
003f63 9508      	RET
                 
                 __SWAPD12:
003f64 2e18      	MOV  R1,R24
003f65 2f86      	MOV  R24,R22
003f66 2d61      	MOV  R22,R1
003f67 2e19      	MOV  R1,R25
003f68 2f97      	MOV  R25,R23
003f69 2d71      	MOV  R23,R1
                 
                 __SWAPW12:
003f6a 2e1b      	MOV  R1,R27
003f6b 2fbf      	MOV  R27,R31
003f6c 2df1      	MOV  R31,R1
                 
                 __SWAPB12:
003f6d 2e1a      	MOV  R1,R26
003f6e 2fae      	MOV  R26,R30
003f6f 2de1      	MOV  R30,R1
003f70 9508      	RET
                 
                 __CPD10:
003f71 9730      	SBIW R30,0
003f72 4060      	SBCI R22,0
003f73 4070      	SBCI R23,0
003f74 9508      	RET
                 
                 __CPW02:
003f75 2400      	CLR  R0
003f76 160a      	CP   R0,R26
003f77 060b      	CPC  R0,R27
003f78 9508      	RET
                 
                 __CPD02:
003f79 2400      	CLR  R0
003f7a 160a      	CP   R0,R26
003f7b 060b      	CPC  R0,R27
003f7c 0608      	CPC  R0,R24
003f7d 0609      	CPC  R0,R25
003f7e 9508      	RET
                 
                 __CPD12:
003f7f 17ea      	CP   R30,R26
003f80 07fb      	CPC  R31,R27
003f81 0768      	CPC  R22,R24
003f82 0779      	CPC  R23,R25
003f83 9508      	RET
                 
                 __CPD21:
003f84 17ae      	CP   R26,R30
003f85 07bf      	CPC  R27,R31
003f86 0786      	CPC  R24,R22
003f87 0797      	CPC  R25,R23
003f88 9508      	RET
                 
                 __SAVELOCR6:
003f89 935a      	ST   -Y,R21
                 __SAVELOCR5:
003f8a 934a      	ST   -Y,R20
                 __SAVELOCR4:
003f8b 933a      	ST   -Y,R19
                 __SAVELOCR3:
003f8c 932a      	ST   -Y,R18
                 __SAVELOCR2:
003f8d 931a      	ST   -Y,R17
003f8e 930a      	ST   -Y,R16
003f8f 9508      	RET
                 
                 __LOADLOCR6:
003f90 815d      	LDD  R21,Y+5
                 __LOADLOCR5:
003f91 814c      	LDD  R20,Y+4
                 __LOADLOCR4:
003f92 813b      	LDD  R19,Y+3
                 __LOADLOCR3:
003f93 812a      	LDD  R18,Y+2
                 __LOADLOCR2:
003f94 8119      	LDD  R17,Y+1
003f95 8108      	LD   R16,Y
003f96 9508      	RET
                 
                 __INITLOCB:
                 __INITLOCW:
003f97 0fac      	ADD  R26,R28
003f98 1fbd      	ADC  R27,R29
                 __INITLOC0:
003f99 9005      	LPM  R0,Z+
003f9a 920d      	ST   X+,R0
003f9b 958a      	DEC  R24
003f9c f7e1      	BRNE __INITLOC0
003f9d 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega328P register use summary:
r0 : 246 r1 :  56 r2 :   0 r3 :   8 r4 :   8 r5 :  20 r6 :  20 r7 :  11 
r8 :  11 r9 :   5 r10:   5 r11:   4 r12:   4 r13:   4 r14:   4 r15:   6 
r16: 283 r17: 474 r18: 253 r19: 141 r20: 147 r21: 154 r22: 530 r23: 428 
r24: 449 r25: 355 r26:2182 r27:1180 r28: 241 r29:   4 r30:4214 r31:1751 
x  : 355 y  :4255 z  : 481 
Registers used: 34 out of 35 (97.1%)

ATmega328P instruction use summary:
.lds  :   0 .lds.l:   0 .sts  :   0 .sts.l:   0 adc   : 112 add   : 107 
adiw  : 533 and   :  17 andi  : 153 asr   :   6 bclr  :   0 bld   :   5 
brbc  :   0 brbs  :   0 brcc  :  10 brcs  :   1 break :   0 breq  : 302 
brge  :  16 brhc  :   0 brhs  :   0 brid  :   0 brie  :   0 brlo  :  68 
brlt  :  13 brmi  :  13 brne  : 304 brpl  :  11 brsh  :  54 brtc  :   7 
brts  :   1 brvc  :   4 brvs  :   4 bset  :   0 bst   :   5 call  :1019 
cbi   :  26 cbr   :   1 clc   :   3 clh   :   0 cli   :   1 cln   :   0 
clr   : 272 cls   :   0 clt   :   7 clv   :   0 clz   :   2 com   :  18 
cp    :  72 cpc   : 221 cpi   : 395 cpse  :   0 dec   :  17 des   :   0 
eor   :   7 fmul  :   0 fmuls :   0 fmulsu:   0 icall :  11 ijmp  :   0 
in    :  48 inc   :   5 jmp   :  34 ld    : 282 ldd   :3003 ldi   :1912 
lds   :  55 lpm   :  22 lsl   :  44 lsr   :  15 mov   : 352 movw  : 629 
mul   :  37 muls  :   2 mulsu :   0 neg   :  11 nop   :   0 or    :  55 
ori   :  23 out   :  92 pop   : 128 push  : 128 rcall : 210 ret   : 152 
reti  :   3 rjmp  : 557 rol   :  50 ror   :  33 sbc   :  34 sbci  : 229 
sbi   :  34 sbic  :   2 sbis  :   0 sbiw  : 186 sbr   :   5 sbrc  :  10 
sbrs  :  28 sec   :   5 seh   :   0 sei   :   1 sen   :   0 ser   :   9 
ses   :   0 set   :   6 sev   :   0 sez   :   1 sleep :   0 spm   :   0 
st    :1114 std   : 675 sts   :  46 sub   :  26 subi  : 250 swap  :   8 
tst   :  45 wdr   :   1 
Instructions used: 84 out of 116 (72.4%)

ATmega328P memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x007f3c  31128   1444  32572   32768  99.4%
[.dseg] 0x000100 0x000846      0    662    662    2048  32.3%
[.eseg] 0x000000 0x000000      0      0      0    1024   0.0%

Assembly complete, 0 errors, 17 warnings
